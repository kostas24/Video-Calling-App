/*! For license information please see main.79d79161.js.LICENSE.txt */
!function(){var e={3361:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function c(e,t,n){return e.replace(t,n)}function u(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function f(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var v=1,m=1,y=0,g=0,E=0,_="";function b(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:v,column:m,length:a,return:""}}function S(e,t){return a(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function w(){return E=g>0?l(_,--g):0,m--,10===E&&(m=1,v--),E}function k(){return E=g<y?l(_,g++):0,m++,10===E&&(m=1,v++),E}function T(){return l(_,g)}function R(){return g}function C(e,t){return d(_,e,t)}function I(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O(e){return v=m=1,y=f(_=e),g=0,[]}function A(e){return _="",e}function N(e){return s(C(g-1,P(91===e?e+2:40===e?e+1:e)))}function D(e){for(;(E=T())&&E<33;)k();return I(e)>2||I(E)>3?"":" "}function x(e,t){for(;--t&&k()&&!(E<48||E>102||E>57&&E<65||E>70&&E<97););return C(e,R()+(t<6&&32==T()&&32==k()))}function P(e){for(;k();)switch(E){case e:return g;case 34:case 39:34!==e&&39!==e&&P(E);break;case 40:41===e&&P(e);break;case 92:k()}return g}function L(e,t){for(;k()&&e+E!==57&&(e+E!==84||47!==T()););return"/*"+C(t,g-1)+"*"+o(47===e?e:k())}function M(e){for(;!I(T());)k();return C(e,g)}var U="-ms-",j="-moz-",V="-webkit-",F="comm",B="rule",W="decl",G="@keyframes";function H(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@import":case W:return e.return=e.return||e.value;case F:return"";case G:return e.return=e.value+"{"+H(e.children,r)+"}";case B:e.value=e.props.join(",")}return f(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function z(e){return A(Y("",null,null,null,[""],e=O(e),0,[0],e))}function Y(e,t,n,r,i,a,s,d,p){for(var v=0,m=0,y=s,g=0,E=0,_=0,b=1,S=1,C=1,I=0,O="",A=i,P=a,U=r,j=O;S;)switch(_=I,I=k()){case 40:if(108!=_&&58==l(j,y-1)){-1!=u(j+=c(N(I),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:j+=N(I);break;case 9:case 10:case 13:case 32:j+=D(_);break;case 92:j+=x(R()-1,7);continue;case 47:switch(T()){case 42:case 47:h(Z(L(k(),R()),t,n),p);break;default:j+="/"}break;case 123*b:d[v++]=f(j)*C;case 125*b:case 59:case 0:switch(I){case 0:case 125:S=0;case 59+m:E>0&&f(j)-y&&h(E>32?X(j+";",r,n,y-1):X(c(j," ","")+";",r,n,y-2),p);break;case 59:j+=";";default:if(h(U=q(j,t,n,v,m,i,d,O,A=[],P=[],y),a),123===I)if(0===m)Y(j,t,U,U,A,a,y,d,P);else switch(99===g&&110===l(j,3)?100:g){case 100:case 109:case 115:Y(e,U,U,r&&h(q(e,U,U,0,0,i,d,O,i,A=[],y),P),i,P,y,d,r?A:P);break;default:Y(j,U,U,U,[""],P,0,d,P)}}v=m=E=0,b=C=1,O=j="",y=s;break;case 58:y=1+f(j),E=_;default:if(b<1)if(123==I)--b;else if(125==I&&0==b++&&125==w())continue;switch(j+=o(I),I*b){case 38:C=m>0?1:(j+="\f",-1);break;case 44:d[v++]=(f(j)-1)*C,C=1;break;case 64:45===T()&&(j+=N(k())),g=T(),m=y=f(O=j+=M(R())),I++;break;case 45:45===_&&2==f(j)&&(b=0)}}return a}function q(e,t,n,r,o,a,u,l,f,h,v){for(var m=o-1,y=0===o?a:[""],g=p(y),E=0,_=0,S=0;E<r;++E)for(var w=0,k=d(e,m+1,m=i(_=u[E])),T=e;w<g;++w)(T=s(_>0?y[w]+" "+k:c(k,/&\f/g,y[w])))&&(f[S++]=T);return b(e,t,n,0===o?B:l,f,h,v)}function Z(e,t,n){return b(e,t,n,F,o(E),d(e,2,-2),0)}function X(e,t,n,r){return b(e,t,n,W,d(e,0,r),d(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!I(i);)k();return C(e,g)},Q=function(e,t){return A(function(e,t){var n=-1,r=44;do{switch(I(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=J(g-1,t,n);break;case 2:e[n]+=N(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=k());return e}(O(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(n))&&!r){$.set(e,!0);for(var i=[],o=Q(t,i),a=n.props,s=0,c=0;s<o.length;s++)for(var u=0;u<a.length;u++,c++)e.props[c]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^l(e,0)?(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3):0}(e,t)){case 5103:return V+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return V+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return V+e+j+e+U+e+e;case 6828:case 4268:return V+e+U+e+e;case 6165:return V+e+U+"flex-"+e+e;case 5187:return V+e+c(e,/(\w+).+(:[^]+)/,V+"box-$1$2"+U+"flex-$1$2")+e;case 5443:return V+e+U+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return V+e+U+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return V+e+U+c(e,"shrink","negative")+e;case 5292:return V+e+U+c(e,"basis","preferred-size")+e;case 6060:return V+"box-"+c(e,"-grow","")+V+e+U+c(e,"grow","positive")+e;case 4554:return V+c(e,/([^-])(transform)/g,"$1"+V+"$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,V+"$1"),/(image-set)/,V+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,V+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,V+"box-pack:$3"+U+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+V+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,V+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1"+V+"$2-$3$1"+j+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?ne(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,f(e)-3-(~u(e,"!important")&&10))){case 107:return c(e,":",":"+V)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+V+(45===l(e,14)?"inline-":"")+"box$3$1"+V+"$2$3$1"+U+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return V+e+U+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return V+e+U+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return V+e+U+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return V+e+U+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case W:e.return=ne(e.value,e.length);break;case G:return H([S(e,{value:c(e.value,"@","@"+V)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([S(e,{props:[c(t,/:(read-\w+)/,":"+j+"$1")]})],r);case"::placeholder":return H([S(e,{props:[c(t,/:(plac\w+)/,":"+V+"input-$1")]}),S(e,{props:[c(t,/:(plac\w+)/,":"+j+"$1")]}),S(e,{props:[c(t,/:(plac\w+)/,U+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,a,s={},c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;c.push(e)}));var u,l,d=[K,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],f=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(i,d));a=function(e,t,n,r){u=n,H(z(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return h.sheet.hydrate(c),h}},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},9140:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(9797),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c=function(e){return 45===e.charCodeAt(1)},u=function(e){return null!=e&&"boolean"!==typeof e},l=(0,o.Z)((function(e){return c(e)?e:e.replace(a,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===i[e]||c(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=f(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":u(a)&&(r+=l(o)+":"+d(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=f(e,t,a);switch(o){case"animation":case"animationName":r+=l(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var c=0;c<a.length;c++)u(a[c])&&(r+=l(o)+":"+d(o,a[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=p,o=n(e);return p=i,f(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";p=void 0;var a=e[0];null==a||void 0===a.raw?(i=!1,o+=f(n,t,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=f(n,t,e[s]),i&&(o+=a[s]);h.lastIndex=0;for(var c,u="";null!==(c=h.exec(o));)u+="-"+c[1];return{name:r(o)+u,styles:o,next:p}}},2561:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return a}});var i=n(2791),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()};o||i.useLayoutEffect},7608:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ExitToApp");t.Z=a},5436:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic");t.Z=a},9128:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}),"MicOff");t.Z=a},2946:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}),"Videocam");t.Z=a},7349:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}),"VideocamOff");t.Z=a},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3519)},4591:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var r=n(7462),i=n(3366),o=n(6189),a=n(2466),s=n(5080),c=n(7416),u=n(104),l=n(4942);function d(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var f=n(2065),p={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},v={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},m={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},E={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],S={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:p.white,default:p.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:p.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:p.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function k(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,f.$n)(e.main,i):"dark"===t&&(e.dark=(0,f._j)(e.main,o)))}function T(e){var t=e.mode,n=void 0===t?"light":t,s=e.contrastThreshold,c=void 0===s?3:s,u=e.tonalOffset,l=void 0===u?.2:u,d=(0,i.Z)(e,b),T=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(n),R=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[200],light:v[50],dark:v[400]}:{main:v[500],light:v[300],dark:v[700]}}(n),C=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[500],light:m[300],dark:m[700]}:{main:m[700],light:m[400],dark:m[800]}}(n),I=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:E[400],light:E[300],dark:E[700]}:{main:E[700],light:E[500],dark:E[900]}}(n),O=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_[400],light:_[300],dark:_[700]}:{main:_[800],light:_[500],dark:_[900]}}(n),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:"#ed6c02",light:y[500],dark:y[900]}}(n);function N(e){return(0,f.mi)(e,w.text.primary)>=c?w.text.primary:S.text.primary}var D=function(e){var t=e.color,n=e.name,i=e.mainShade,a=void 0===i?500:i,s=e.lightShade,c=void 0===s?300:s,u=e.darkShade,d=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return k(t,"light",c,l),k(t,"dark",d,l),t.contrastText||(t.contrastText=N(t.main)),t},x={dark:w,light:S};return(0,a.Z)((0,r.Z)({common:(0,r.Z)({},p),mode:n,primary:D({color:T,name:"primary"}),secondary:D({color:R,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:C,name:"error"}),warning:D({color:A,name:"warning"}),info:D({color:I,name:"info"}),success:D({color:O,name:"success"}),grey:h,contrastThreshold:c,getContrastText:N,augmentColor:D,tonalOffset:l},x[n]),d)}var R=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var C={textTransform:"uppercase"},I='"Roboto", "Helvetica", "Arial", sans-serif';function O(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?I:o,c=n.fontSize,u=void 0===c?14:c,l=n.fontWeightLight,d=void 0===l?300:l,f=n.fontWeightRegular,p=void 0===f?400:f,h=n.fontWeightMedium,v=void 0===h?500:h,m=n.fontWeightBold,y=void 0===m?700:m,g=n.htmlFontSize,E=void 0===g?16:g,_=n.allVariants,b=n.pxToRem,S=(0,i.Z)(n,R);var w=u/14,k=b||function(e){return"".concat(e/E*w,"rem")},T=function(e,t,n,i,o){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:k(t),lineHeight:n},s===I?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},o,_);var a},O={h1:T(d,96,1.167,-1.5),h2:T(d,60,1.2,-.5),h3:T(p,48,1.167,0),h4:T(p,34,1.235,.25),h5:T(p,24,1.334,0),h6:T(v,20,1.6,.15),subtitle1:T(p,16,1.75,.15),subtitle2:T(v,14,1.57,.1),body1:T(p,16,1.5,.15),body2:T(p,14,1.43,.15),button:T(v,14,1.75,.4,C),caption:T(p,12,1.66,.4),overline:T(p,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,a.Z)((0,r.Z)({htmlFontSize:E,pxToRem:k,fontFamily:s,fontSize:u,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:v,fontWeightBold:y},O),S,{clone:!1})}function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var N=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],D=["duration","easing","delay"],x={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L(e){return"".concat(Math.round(e),"ms")}function M(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function U(e){var t=(0,r.Z)({},x,e.easing),n=(0,r.Z)({},P,e.duration);return(0,r.Z)({getAutoHeightDuration:M,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?n.standard:o,s=r.easing,c=void 0===s?t.easeInOut:s,u=r.delay,l=void 0===u?0:u;(0,i.Z)(r,D);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:L(a)," ").concat(c," ").concat("string"===typeof l?l:L(l))})).join(",")}},e,{easing:t,duration:n})}var j={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},V=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,l=e.palette,f=void 0===l?{}:l,p=e.transitions,h=void 0===p?{}:p,v=e.typography,m=void 0===v?{}:v,y=(0,i.Z)(e,V);if(e.vars)throw new Error((0,o.Z)(18));var g=T(f),E=(0,s.Z)(e),_=(0,a.Z)(E,{mixins:d(E.breakpoints,n),palette:g,shadows:N.slice(),typography:O(g,m),transitions:U(h),zIndex:(0,r.Z)({},j)});_=(0,a.Z)(_,y);for(var b=arguments.length,S=new Array(b>1?b-1:0),w=1;w<b;w++)S[w-1]=arguments[w];return(_=S.reduce((function(e,t){return(0,a.Z)(e,t)}),_)).unstable_sxConfig=(0,r.Z)({},c.Z,null==y?void 0:y.unstable_sxConfig),_.unstable_sx=function(e){return(0,u.Z)({sx:e,theme:this})},_}var B=F()},9359:function(e,t,n){"use strict";n.d(t,{ZP:function(){return B},FO:function(){return V}});var r=n(3433),i=n(9439),o=n(3366),a=n(7462),s=n(2791),c=n(9797),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l=(0,c.Z)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),d=n(3361),f=n(9140),p=n(2561),h=(0,s.createContext)("undefined"!==typeof HTMLElement?(0,d.Z)({key:"css"}):null);h.Provider;var v=function(e){return(0,s.forwardRef)((function(t,n){var r=(0,s.useContext)(h);return e(t,r,n)}))},m=(0,s.createContext)({});var y=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},g=l,E=function(e){return"theme"!==e},_=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?g:E},b=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},S=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;y(t,n,r);(0,p.L)((function(){return function(e,t,n){y(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}));return null},w=function e(t,n){var r,i,o=t.__emotion_real===t,c=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var u=b(t,n,o),l=u||_(c),d=!l("as");return function(){var p=arguments,h=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==p[0]||void 0===p[0].raw)h.push.apply(h,p);else{0,h.push(p[0][0]);for(var y=p.length,g=1;g<y;g++)h.push(p[g],p[0][g])}var E=v((function(e,t,n){var r=d&&e.as||c,o="",a=[],p=e;if(null==e.theme){for(var v in p={},e)p[v]=e[v];p.theme=(0,s.useContext)(m)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var y=(0,f.O)(h.concat(a),t.registered,p);o+=t.key+"-"+y.name,void 0!==i&&(o+=" "+i);var g=d&&void 0===u?_(r):l,E={};for(var b in e)d&&"as"===b||g(b)&&(E[b]=e[b]);return E.className=o,E.ref=n,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(S,{cache:t,serialized:y,isStringTag:"string"===typeof r}),(0,s.createElement)(r,E))}));return E.displayName=void 0!==r?r:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",E.defaultProps=t.defaultProps,E.__emotion_real=E,E.__emotion_base=c,E.__emotion_styles=h,E.__emotion_forwardProp=u,Object.defineProperty(E,"toString",{value:function(){return"."+i}}),E.withComponent=function(t,r){return e(t,(0,a.Z)({},n,r,{shouldForwardProp:b(E,r,!0)})).apply(void 0,h)},E}},k=w.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){k[e]=k(e)}));var T=k;var R=n(5080),C=n(7312),I=["variant"];function O(e){return 0===e.length}function A(e){var t=e.variant,n=(0,o.Z)(e,I),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?O(r)?e[t]:(0,C.Z)(e[t]):"".concat(O(r)?t:(0,C.Z)(t)).concat((0,C.Z)(e[t].toString()))})),r}var N=n(104),D=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],x=["theme"],P=["theme"];function L(e){return 0===Object.keys(e).length}function M(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var U=(0,R.Z)();var j=n(4591),V=function(e){return M(e)&&"classes"!==e},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?U:t,s=e.rootShouldForwardProp,c=void 0===s?M:s,u=e.slotShouldForwardProp,l=void 0===u?M:u,d=function(e){var t=L(e.theme)?n:e.theme;return(0,N.Z)((0,a.Z)({},e,{theme:t}))};return d.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var s=t.name,u=t.slot,f=t.skipVariantsResolver,p=t.skipSx,h=t.overridesResolver,v=(0,o.Z)(t,D),m=void 0!==f?f:u&&"Root"!==u||!1,y=p||!1;var g=M;"Root"===u?g=c:u?g=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(g=void 0);var E=function(e,t){return T(e,t)}(e,(0,a.Z)({shouldForwardProp:g,label:undefined},v)),_=function(e){for(var t=arguments.length,c=new Array(t>1?t-1:0),u=1;u<t;u++)c[u-1]=arguments[u];var l=c?c.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,o.Z)(t,x);return e((0,a.Z)({theme:L(r)?n:r},i))}:e})):[],f=e;s&&h&&l.push((function(e){var t=L(e.theme)?n:e.theme,r=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null}(s,t);if(r){var o={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],c=r[1];o[s]="function"===typeof c?c((0,a.Z)({},e,{theme:t})):c})),h(e,o)}return null})),s&&!m&&l.push((function(e){var t=L(e.theme)?n:e.theme;return function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,c=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&c.push(t[A(n.props)])})),c}(e,function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=A(e.props);r[t]=e.style})),r}(s,t),t,s)})),y||l.push(d);var p=l.length-c.length;if(Array.isArray(e)&&p>0){var v=new Array(p).fill("");(f=[].concat((0,r.Z)(e),(0,r.Z)(v))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(v))}else"function"===typeof e&&e.__emotion_real!==e&&(f=function(t){var r=t.theme,i=(0,o.Z)(t,P);return e((0,a.Z)({theme:L(r)?n:r},i))});return E.apply(void 0,[f].concat((0,r.Z)(l)))};return E.withConfig&&(_.withConfig=E.withConfig),_}}({defaultTheme:j.Z,rootShouldForwardProp:V}),B=F},1046:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5735);var i=n(886);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,a=function(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:(0,i.Z)(o),name:n,props:t});return a}var a=n(4591);function s(e){return o({props:e.props,name:e.name,defaultTheme:a.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},3519:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return S},debounce:function(){return w},deprecatedPropType:function(){return k},isMuiElement:function(){return T},ownerDocument:function(){return C},ownerWindow:function(){return I},requirePropFactory:function(){return O},setRef:function(){return A},unstable_ClassNameGenerator:function(){return B},unstable_useEnhancedEffect:function(){return N},unstable_useId:function(){return L},unsupportedProp:function(){return M},useControlled:function(){return U},useEventCallback:function(){return j.Z},useForkRef:function(){return V.Z},useIsFocusVisible:function(){return F.Z}});var r=n(5902),i=n(4036);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))},a=n(7462),s=n(2791),c=n.t(s,2),u=n(3366),l=n(8182),d=n(4419),f=n(1046),p=n(9359),h=n(5878),v=n(1217);function m(e){return(0,v.Z)("MuiSvgIcon",e)}(0,h.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var y=n(184),g=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],E=(0,p.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,i.Z)(n.color))],t["fontSize".concat((0,i.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,o,a,s,c,u,l,d,f,p,h,v,m,y,g=e.theme,E=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=g.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=g.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=g.typography)||null==(c=s.pxToRem)?void 0:c.call(s,24))||"1.5rem",large:(null==(u=g.typography)||null==(l=u.pxToRem)?void 0:l.call(u,35))||"2.1875rem"}[E.fontSize],color:null!=(d=null==(f=(g.vars||g).palette)||null==(p=f[E.color])?void 0:p.main)?d:{action:null==(h=(g.vars||g).palette)||null==(v=h.action)?void 0:v.active,disabled:null==(m=(g.vars||g).palette)||null==(y=m.action)?void 0:y.disabled,inherit:void 0}[E.color]}})),_=s.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiSvgIcon"}),r=n.children,o=n.className,s=n.color,c=void 0===s?"inherit":s,p=n.component,h=void 0===p?"svg":p,v=n.fontSize,_=void 0===v?"medium":v,b=n.htmlColor,S=n.inheritViewBox,w=void 0!==S&&S,k=n.titleAccess,T=n.viewBox,R=void 0===T?"0 0 24 24":T,C=(0,u.Z)(n,g),I=(0,a.Z)({},n,{color:c,component:h,fontSize:_,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:R}),O={};w||(O.viewBox=R);var A=function(e){var t=e.color,n=e.fontSize,r=e.classes,o={root:["root","inherit"!==t&&"color".concat((0,i.Z)(t)),"fontSize".concat((0,i.Z)(n))]};return(0,d.Z)(o,m,r)}(I);return(0,y.jsxs)(E,(0,a.Z)({as:h,className:(0,l.Z)(A.root,o),focusable:"false",color:b,"aria-hidden":!k||void 0,role:k?"img":void 0,ref:t},O,C,{ownerState:I,children:[r,k?(0,y.jsx)("title",{children:k}):null]}))}));_.muiName="SvgIcon";var b=_;function S(e,t){function n(n,r){return(0,y.jsx)(b,(0,a.Z)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=b.muiName,s.memo(s.forwardRef(n))}var w=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(t),t=setTimeout((function(){e.apply(r,o)}),n)}return r.clear=function(){clearTimeout(t)},r};var k=function(e,t){return function(){return null}};var T=function(e,t){return s.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function R(e){return e&&e.ownerDocument||document}var C=R;var I=function(e){return R(e).defaultView||window};var O=function(e,t){return function(){return null}},A=n(2971).Z,N=n(5721).Z,D=n(9439),x=0;var P=c.useId;var L=function(e){if(void 0!==P){var t=P();return null!=e?e:t}return function(e){var t=s.useState(e),n=(0,D.Z)(t,2),r=n[0],i=n[1],o=e||r;return s.useEffect((function(){null==r&&i("mui-".concat(x+=1))}),[r]),o}(e)};var M=function(e,t,n,r,i){return null};var U=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,s.useRef(void 0!==t).current),i=s.useState(n),o=(0,D.Z)(i,2),a=o[0],c=o[1];return[r?t:a,s.useCallback((function(e){r||c(e)}),[])]},j=n(6868),V=n(4843),F=n(3031),B={configure:function(e){r.Z.configure(e)}}},6868:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),i=n(5721);var o=function(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},4843:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),i=n(2971);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,i.Z)(t,e)}))}}),t)}},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,i=n(2791),o=!0,a=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function l(){"hidden"===this.visibilityState&&a&&(o=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,window.clearTimeout(r),r=window.setTimeout((function(){a=!1}),100),t.current=!1,!0)},ref:e}}},1184:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},P$:function(){return c},VO:function(){return r},W8:function(){return a},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var a=o.breakpoints||i;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=o.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var o=i;e[o]=t[o]}return e}),{})}return n(t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){var t,n=e.values,r=e.breakpoints,i=e.base||function(e,t){if("object"!==typeof e)return{};var n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((function(t,r){r<e.length&&(n[t]=!0)})):r.forEach((function(t){null!=e[t]&&(n[t]=!0)})),n}(n,r),o=Object.keys(i);return 0===o.length?n:o.reduce((function(e,r,i){return Array.isArray(n)?(e[r]=null!=n[i]?n[i]:n[t],t=i):"object"===typeof n?(e[r]=null!=n[r]?n[r]:n[t],t=r):e[r]=n,e}),{})}},2065:function(e,t,n){"use strict";n.d(t,{$n:function(){return d},Fq:function(){return u},_j:function(){return l},mi:function(){return c}});var r=n(6189);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,a=e.substring(t+1,e.length-1);if("color"===n){if(i=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:i}}function a(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",l=[Math.round(255*c(0)),Math.round(255*c(8)),Math.round(255*c(4))];return"hsla"===e.type&&(u+="a",l.push(t[3])),a({type:u,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,a(e)}function l(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function d(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return a(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(7462),i=n(3366),o=n(2466),a=n(4942),s=["values","unit","step"],c=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,a.Z)({},t.key,t.val))}),{})};var u={borderRadius:4},l=n(5682);var d=n(104),f=n(7416),p=["breakpoints","palette","spacing","shape"];var h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,a=e.palette,h=void 0===a?{}:a,v=e.spacing,m=e.shape,y=void 0===m?{}:m,g=(0,i.Z)(e,p),E=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,a=void 0===o?"px":o,u=e.step,l=void 0===u?5:u,d=(0,i.Z)(e,s),f=c(n),p=Object.keys(f);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(a,")")}function m(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-l/100).concat(a,")")}return(0,r.Z)({keys:p,values:f,up:h,down:v,between:m,only:function(e){return p.indexOf(e)+1<p.length?m(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?v(p[t]):m(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:a},d)}(n),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(v),b=(0,o.Z)({breakpoints:E,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},h),spacing:_,shape:(0,r.Z)({},u,y)},g),S=arguments.length,w=new Array(S>1?S-1:0),k=1;k<S;k++)w[k-1]=arguments[k];return(b=w.reduce((function(e,t){return(0,o.Z)(e,t)}),b)).unstable_sxConfig=(0,r.Z)({},f.Z,null==g?void 0:g.unstable_sxConfig),b.unstable_sx=function(e){return(0,d.Z)({sx:e,theme:this})},b}},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return h},NA:function(){return m},e6:function(){return E},o3:function(){return _}});var r=n(9439),i=n(1184),o=n(8529),a=n(8247);var s={m:"margin",p:"padding"},c={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!u[e])return[e];e=u[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],o=n[1],a=s[i],l=c[o]||"";return Array.isArray(l)?l.map((function(e){return a+e})):[a+l]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(d,f);function h(e,t,n,r){var i,a=null!=(i=(0,o.DW)(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function v(e){return h(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function y(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=m(t,n),e}),{})}}(l(n),r),a=e[n];return(0,i.k9)(e,a,o)}function g(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return y(e,t,r,n)})).reduce(a.Z,{})}function E(e){return g(e,d)}function _(e){return g(e,f)}function b(e){return g(e,p)}E.propTypes={},E.filterProps=d,_.propTypes={},_.filterProps=f,b.propTypes={},b.filterProps=p},8529:function(e,t,n){"use strict";n.d(t,{DW:function(){return a},Jq:function(){return s}});var r=n(4942),i=n(7312),o=n(1184);function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:a(e,n)||i,t&&(r=t(r,i,e)),r}t.ZP=function(e){var t=e.prop,n=e.cssProperty,c=void 0===n?e.prop:n,u=e.themeKey,l=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=a(e.theme,u)||{};return(0,o.k9)(e,n,(function(e){var n=s(d,l,e);return e===n&&"string"===typeof e&&(n=s(d,l,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===c?n:(0,r.Z)({},c,n)}))};return d.propTypes={},d.filterProps=[t],d}},7416:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(5682),i=n(8529),o=n(8247);var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,o.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},s=n(1184);function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var u=(0,i.ZP)({prop:"border",themeKey:"borders",transform:c}),l=(0,i.ZP)({prop:"borderTop",themeKey:"borders",transform:c}),d=(0,i.ZP)({prop:"borderRight",themeKey:"borders",transform:c}),f=(0,i.ZP)({prop:"borderBottom",themeKey:"borders",transform:c}),p=(0,i.ZP)({prop:"borderLeft",themeKey:"borders",transform:c}),h=(0,i.ZP)({prop:"borderColor",themeKey:"palette"}),v=(0,i.ZP)({prop:"borderTopColor",themeKey:"palette"}),m=(0,i.ZP)({prop:"borderRightColor",themeKey:"palette"}),y=(0,i.ZP)({prop:"borderBottomColor",themeKey:"palette"}),g=(0,i.ZP)({prop:"borderLeftColor",themeKey:"palette"}),E=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,r.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,r.NA)(t,e)}}))}return null};E.propTypes={},E.filterProps=["borderRadius"];a(u,l,d,f,p,h,v,m,y,g,E);var _=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,r.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,r.NA)(t,e)}}))}return null};_.propTypes={},_.filterProps=["gap"];var b=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,r.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,r.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["columnGap"];var S=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,r.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,r.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];a(_,b,S,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function w(e,t){return"grey"===t?t:e}a((0,i.ZP)({prop:"color",themeKey:"palette",transform:w}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:w}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:w}));function k(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var T=(0,i.ZP)({prop:"width",transform:k}),R=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||s.VO[t]||k(t)}}))}return null};R.filterProps=["maxWidth"];var C=(0,i.ZP)({prop:"minWidth",transform:k}),I=(0,i.ZP)({prop:"height",transform:k}),O=(0,i.ZP)({prop:"maxHeight",transform:k}),A=(0,i.ZP)({prop:"minHeight",transform:k}),N=((0,i.ZP)({prop:"size",cssProperty:"width",transform:k}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:k}),a(T,R,C,I,O,A,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:c},borderTop:{themeKey:"borders",transform:c},borderRight:{themeKey:"borders",transform:c},borderBottom:{themeKey:"borders",transform:c},borderLeft:{themeKey:"borders",transform:c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:E},color:{themeKey:"palette",transform:w},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:w},backgroundColor:{themeKey:"palette",transform:w},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_},rowGap:{style:S},columnGap:{style:b},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:k},maxWidth:{style:R},minWidth:{transform:k},height:{transform:k},maxHeight:{transform:k},minHeight:{transform:k},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,t,n){"use strict";var r=n(4942),i=n(7312),o=n(8247),a=n(8529),s=n(1184),c=n(7416);var u=function(){function e(e,t,n,o){var c,u=(c={},(0,r.Z)(c,e,t),(0,r.Z)(c,"theme",n),c),l=o[e];if(!l)return(0,r.Z)({},e,t);var d=l.cssProperty,f=void 0===d?e:d,p=l.themeKey,h=l.transform,v=l.style;if(null==t)return null;if("typography"===p&&"inherit"===t)return(0,r.Z)({},e,t);var m=(0,a.DW)(n,p)||{};if(v)return v(u);return(0,s.k9)(u,t,(function(t){var n=(0,a.Jq)(m,h,t);return t===n&&"string"===typeof t&&(n=(0,a.Jq)(m,h,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===f?n:(0,r.Z)({},f,n)}))}return function t(n){var i,a=n||{},u=a.sx,l=a.theme,d=void 0===l?{}:l;if(!u)return null;var f=null!=(i=d.unstable_sxConfig)?i:c.Z;function p(n){var i=n;if("function"===typeof n)i=n(d);else if("object"!==typeof n)return n;if(!i)return null;var a=(0,s.W8)(d.breakpoints),c=Object.keys(a),u=a;return Object.keys(i).forEach((function(n){var a,c,l=(a=i[n],c=d,"function"===typeof a?a(c):a);if(null!==l&&void 0!==l)if("object"===typeof l)if(f[n])u=(0,o.Z)(u,e(n,l,d,f));else{var p=(0,s.k9)({theme:d},l,(function(e){return(0,r.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(p,l)?u=(0,o.Z)(u,p):u[n]=t({sx:l,theme:d})}else u=(0,o.Z)(u,e(n,l,d,f))})),(0,s.L7)(c,u)}return Array.isArray(u)?u.map(p):p(u)}}();u.filterProps=["sx"],t.Z=u},886:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5080),i=n(2791);var o=i.createContext(null);var a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=i.useContext(o);return n&&(e=n,0!==Object.keys(e).length)?n:t},s=(0,r.Z)();var c=function(){return a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s)}},5902:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6189);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return a}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e){if(!i(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=o(e[n])})),t}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?s[r]=a(e[r],t[r],n):n.clone?s[r]=i(t[r])?o(t[r]):t[r]:s[r]=t[r])})),s}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1217:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(e),"-").concat(t)}},5878:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1217);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,r.Z)(e,t,n)})),i}},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7462);function i(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(o){if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.Z)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){var a=e[o]||{},s=t[o];n[o]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[o]=(0,r.Z)({},s),Object.keys(a).forEach((function(e){n[o][e]=i(a[e],s[e])}))):n[o]=s:n[o]=a}else void 0===n[o]&&(n[o]=e[o])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},761:function(e,t,n){"use strict";n.d(t,{kZ:function(){return b}});var r=n(5652),i=n(4801),o=n(3265),a=n(9265);var s=n(3120),c=n(7902),u=n(881),l=n(543),d=n(3676);function f(e,t,n){void 0===n&&(n=!1);var f=(0,a.Re)(t),p=(0,a.Re)(t)&&function(e){var t=e.getBoundingClientRect(),n=(0,d.NM)(t.width)/e.offsetWidth||1,r=(0,d.NM)(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),h=(0,u.Z)(t),v=(0,r.Z)(e,p,n),m={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(f||!f&&!n)&&(("body"!==(0,s.Z)(t)||(0,l.Z)(h))&&(m=function(e){return e!==(0,o.Z)(e)&&(0,a.Re)(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:(0,i.Z)(e);var t}(t)),(0,a.Re)(t)?((y=(0,r.Z)(t,!0)).x+=t.clientLeft,y.y+=t.clientTop):h&&(y.x=(0,c.Z)(h))),{x:v.left+m.scrollLeft-y.x,y:v.top+m.scrollTop-y.y,width:v.width,height:v.height}}var p=n(9818),h=n(7467),v=n(5411),m=n(2570);function y(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function g(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var E={placement:"bottom",modifiers:[],strategy:"absolute"};function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function b(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?E:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},E,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],c=!1,u={state:i,setOptions:function(n){var c="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},o,i.options,c),i.scrollParents={reference:(0,a.kK)(e)?(0,h.Z)(e):e.contextElement?(0,h.Z)(e.contextElement):[],popper:(0,h.Z)(t)};var d=function(e){var t=y(e);return m.xs.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=d.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:u,options:r}),c=function(){};s.push(a||c)}})),u.update()},forceUpdate:function(){if(!c){var e=i.elements,t=e.reference,n=e.popper;if(_(t,n)){i.rects={reference:f(t,(0,v.Z)(n),"fixed"===i.options.strategy),popper:(0,p.Z)(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,s=o.options,l=void 0===s?{}:s,d=o.name;"function"===typeof a&&(i=a({state:i,options:l,name:d,instance:u})||i)}else i.reset=!1,r=-1}}},update:g((function(){return new Promise((function(e){u.forceUpdate(),e(i)}))})),destroy:function(){l(),c=!0}};if(!_(e,t))return u;function l(){s.forEach((function(e){return e()})),s=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}},1942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9265);function i(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},5652:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(9265),i=n(3676),o=n(3265),a=n(8044);function s(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),c=1,u=1;t&&(0,r.Re)(e)&&(c=e.offsetWidth>0&&(0,i.NM)(s.width)/e.offsetWidth||1,u=e.offsetHeight>0&&(0,i.NM)(s.height)/e.offsetHeight||1);var l=((0,r.kK)(e)?(0,o.Z)(e):window).visualViewport,d=!(0,a.Z)()&&n,f=(s.left+(d&&l?l.offsetLeft:0))/c,p=(s.top+(d&&l?l.offsetTop:0))/u,h=s.width/c,v=s.height/u;return{width:h,height:v,top:p,right:f+h,bottom:p+v,left:f,x:f,y:p}}},7427:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3265);function i(e){return(0,r.Z)(e).getComputedStyle(e)}},881:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9265);function i(e){return(((0,r.kK)(e)?e.ownerDocument:e.document)||window.document).documentElement}},9818:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5652);function i(e){var t=(0,r.Z)(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}},3120:function(e,t,n){"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,{Z:function(){return r}})},5411:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(3265),i=n(3120),o=n(7427),a=n(9265);function s(e){return["table","td","th"].indexOf((0,i.Z)(e))>=0}var c=n(8779),u=n(3118);function l(e){return(0,a.Re)(e)&&"fixed"!==(0,o.Z)(e).position?e.offsetParent:null}function d(e){for(var t=(0,r.Z)(e),n=l(e);n&&s(n)&&"static"===(0,o.Z)(n).position;)n=l(n);return n&&("html"===(0,i.Z)(n)||"body"===(0,i.Z)(n)&&"static"===(0,o.Z)(n).position)?t:n||function(e){var t=/firefox/i.test((0,u.Z)());if(/Trident/i.test((0,u.Z)())&&(0,a.Re)(e)&&"fixed"===(0,o.Z)(e).position)return null;var n=(0,c.Z)(e);for((0,a.Zq)(n)&&(n=n.host);(0,a.Re)(n)&&["html","body"].indexOf((0,i.Z)(n))<0;){var r=(0,o.Z)(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}},8779:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3120),i=n(881),o=n(9265);function a(e){return"html"===(0,r.Z)(e)?e:e.assignedSlot||e.parentNode||((0,o.Zq)(e)?e.host:null)||(0,i.Z)(e)}},3265:function(e,t,n){"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}n.d(t,{Z:function(){return r}})},4801:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3265);function i(e){var t=(0,r.Z)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},7902:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5652),i=n(881),o=n(4801);function a(e){return(0,r.Z)((0,i.Z)(e)).left+(0,o.Z)(e).scrollLeft}},9265:function(e,t,n){"use strict";n.d(t,{Re:function(){return o},Zq:function(){return a},kK:function(){return i}});var r=n(3265);function i(e){return e instanceof(0,r.Z)(e).Element||e instanceof Element}function o(e){return e instanceof(0,r.Z)(e).HTMLElement||e instanceof HTMLElement}function a(e){return"undefined"!==typeof ShadowRoot&&(e instanceof(0,r.Z)(e).ShadowRoot||e instanceof ShadowRoot)}},8044:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3118);function i(){return!/^((?!chrome|android).)*safari/i.test((0,r.Z)())}},543:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7427);function i(e){var t=(0,r.Z)(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}},7467:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(8779),i=n(543),o=n(3120),a=n(9265);function s(e){return["html","body","#document"].indexOf((0,o.Z)(e))>=0?e.ownerDocument.body:(0,a.Re)(e)&&(0,i.Z)(e)?e:s((0,r.Z)(e))}var c=n(3265);function u(e,t){var n;void 0===t&&(t=[]);var o=s(e),a=o===(null==(n=e.ownerDocument)?void 0:n.body),l=(0,c.Z)(o),d=a?[l].concat(l.visualViewport||[],(0,i.Z)(o)?o:[]):o,f=t.concat(d);return a?f:f.concat(u((0,r.Z)(d)))}},2570:function(e,t,n){"use strict";n.d(t,{BL:function(){return u},Ct:function(){return m},F2:function(){return o},I:function(){return i},Pj:function(){return f},YP:function(){return h},bw:function(){return v},d7:function(){return s},k5:function(){return p},mv:function(){return c},t$:function(){return a},ut:function(){return l},we:function(){return r},xs:function(){return y},zV:function(){return d}});var r="top",i="bottom",o="right",a="left",s="auto",c=[r,i,o,a],u="start",l="end",d="clippingParents",f="viewport",p="popper",h="reference",v=c.reduce((function(e,t){return e.concat([t+"-"+u,t+"-"+l])}),[]),m=[].concat(c,[s]).reduce((function(e,t){return e.concat([t,t+"-"+u,t+"-"+l])}),[]),y=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},8702:function(e,t,n){"use strict";var r=n(5532),i=n(9818),o=n(1942),a=n(5411),s=n(5376),c=n(4666),u=n(1340),l=n(2031),d=n(2570);t.Z={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,f=e.options,p=n.elements.arrow,h=n.modifiersData.popperOffsets,v=(0,r.Z)(n.placement),m=(0,s.Z)(v),y=[d.t$,d.F2].indexOf(v)>=0?"height":"width";if(p&&h){var g=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,(0,u.Z)("number"!==typeof e?e:(0,l.Z)(e,d.mv))}(f.padding,n),E=(0,i.Z)(p),_="y"===m?d.we:d.t$,b="y"===m?d.I:d.F2,S=n.rects.reference[y]+n.rects.reference[m]-h[m]-n.rects.popper[y],w=h[m]-n.rects.reference[m],k=(0,a.Z)(p),T=k?"y"===m?k.clientHeight||0:k.clientWidth||0:0,R=S/2-w/2,C=g[_],I=T-E[y]-g[b],O=T/2-E[y]/2+R,A=(0,c.u)(C,O,I),N=m;n.modifiersData[o]=((t={})[N]=A,t.centerOffset=A-O,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&(0,o.Z)(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},9224:function(e,t,n){"use strict";var r=n(2570),i=n(5411),o=n(3265),a=n(881),s=n(7427),c=n(5532),u=n(5227),l=n(3676),d={top:"auto",right:"auto",bottom:"auto",left:"auto"};function f(e){var t,n=e.popper,c=e.popperRect,u=e.placement,f=e.variation,p=e.offsets,h=e.position,v=e.gpuAcceleration,m=e.adaptive,y=e.roundOffsets,g=e.isFixed,E=p.x,_=void 0===E?0:E,b=p.y,S=void 0===b?0:b,w="function"===typeof y?y({x:_,y:S}):{x:_,y:S};_=w.x,S=w.y;var k=p.hasOwnProperty("x"),T=p.hasOwnProperty("y"),R=r.t$,C=r.we,I=window;if(m){var O=(0,i.Z)(n),A="clientHeight",N="clientWidth";if(O===(0,o.Z)(n)&&(O=(0,a.Z)(n),"static"!==(0,s.Z)(O).position&&"absolute"===h&&(A="scrollHeight",N="scrollWidth")),u===r.we||(u===r.t$||u===r.F2)&&f===r.ut)C=r.I,S-=(g&&O===I&&I.visualViewport?I.visualViewport.height:O[A])-c.height,S*=v?1:-1;if(u===r.t$||(u===r.we||u===r.I)&&f===r.ut)R=r.F2,_-=(g&&O===I&&I.visualViewport?I.visualViewport.width:O[N])-c.width,_*=v?1:-1}var D,x=Object.assign({position:h},m&&d),P=!0===y?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:(0,l.NM)(n*i)/i||0,y:(0,l.NM)(r*i)/i||0}}({x:_,y:S},(0,o.Z)(n)):{x:_,y:S};return _=P.x,S=P.y,v?Object.assign({},x,((D={})[C]=T?"0":"",D[R]=k?"0":"",D.transform=(I.devicePixelRatio||1)<=1?"translate("+_+"px, "+S+"px)":"translate3d("+_+"px, "+S+"px, 0)",D)):Object.assign({},x,((t={})[C]=T?S+"px":"",t[R]=k?_+"px":"",t.transform="",t))}t.Z={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,d={placement:(0,c.Z)(t.placement),variation:(0,u.Z)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,f(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,f(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}},7786:function(e,t,n){"use strict";var r=n(3265),i={passive:!0};t.Z={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,a=o.scroll,s=void 0===a||a,c=o.resize,u=void 0===c||c,l=(0,r.Z)(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach((function(e){e.addEventListener("scroll",n.update,i)})),u&&l.addEventListener("resize",n.update,i),function(){s&&d.forEach((function(e){e.removeEventListener("scroll",n.update,i)})),u&&l.removeEventListener("resize",n.update,i)}},data:{}}},5468:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r={left:"right",right:"left",bottom:"top",top:"bottom"};function i(e){return e.replace(/left|right|bottom|top/g,(function(e){return r[e]}))}var o=n(5532),a={start:"end",end:"start"};function s(e){return e.replace(/start|end/g,(function(e){return a[e]}))}var c=n(9913),u=n(5227),l=n(2570);var d={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,d=void 0===a||a,f=n.altAxis,p=void 0===f||f,h=n.fallbackPlacements,v=n.padding,m=n.boundary,y=n.rootBoundary,g=n.altBoundary,E=n.flipVariations,_=void 0===E||E,b=n.allowedAutoPlacements,S=t.options.placement,w=(0,o.Z)(S),k=h||(w===S||!_?[i(S)]:function(e){if((0,o.Z)(e)===l.d7)return[];var t=i(e);return[s(e),t,s(t)]}(S)),T=[S].concat(k).reduce((function(e,n){return e.concat((0,o.Z)(n)===l.d7?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,s=n.padding,d=n.flipVariations,f=n.allowedAutoPlacements,p=void 0===f?l.Ct:f,h=(0,u.Z)(r),v=h?d?l.bw:l.bw.filter((function(e){return(0,u.Z)(e)===h})):l.mv,m=v.filter((function(e){return p.indexOf(e)>=0}));0===m.length&&(m=v);var y=m.reduce((function(t,n){return t[n]=(0,c.Z)(e,{placement:n,boundary:i,rootBoundary:a,padding:s})[(0,o.Z)(n)],t}),{});return Object.keys(y).sort((function(e,t){return y[e]-y[t]}))}(t,{placement:n,boundary:m,rootBoundary:y,padding:v,flipVariations:_,allowedAutoPlacements:b}):n)}),[]),R=t.rects.reference,C=t.rects.popper,I=new Map,O=!0,A=T[0],N=0;N<T.length;N++){var D=T[N],x=(0,o.Z)(D),P=(0,u.Z)(D)===l.BL,L=[l.we,l.I].indexOf(x)>=0,M=L?"width":"height",U=(0,c.Z)(t,{placement:D,boundary:m,rootBoundary:y,altBoundary:g,padding:v}),j=L?P?l.F2:l.t$:P?l.I:l.we;R[M]>C[M]&&(j=i(j));var V=i(j),F=[];if(d&&F.push(U[x]<=0),p&&F.push(U[j]<=0,U[V]<=0),F.every((function(e){return e}))){A=D,O=!1;break}I.set(D,F)}if(O)for(var B=function(e){var t=T.find((function(t){var n=I.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},W=_?3:1;W>0;W--){if("break"===B(W))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},1668:function(e,t,n){"use strict";var r=n(2570),i=n(9913);function o(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function a(e){return[r.we,r.F2,r.I,r.t$].some((function(t){return e[t]>=0}))}t.Z={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,c=t.modifiersData.preventOverflow,u=(0,i.Z)(t,{elementContext:"reference"}),l=(0,i.Z)(t,{altBoundary:!0}),d=o(u,r),f=o(l,s,c),p=a(d),h=a(f);t.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:f,isReferenceHidden:p,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":h})}}},5934:function(e,t,n){"use strict";var r=n(5532),i=n(2570);t.Z={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,a=n.offset,s=void 0===a?[0,0]:a,c=i.Ct.reduce((function(e,n){return e[n]=function(e,t,n){var o=(0,r.Z)(e),a=[i.t$,i.we].indexOf(o)>=0?-1:1,s="function"===typeof n?n(Object.assign({},t,{placement:e})):n,c=s[0],u=s[1];return c=c||0,u=(u||0)*a,[i.t$,i.F2].indexOf(o)>=0?{x:u,y:c}:{x:c,y:u}}(n,t.rects,s),e}),{}),u=c[t.placement],l=u.x,d=u.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[o]=c}}},545:function(e,t,n){"use strict";var r=n(6425);t.Z={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=(0,r.Z)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}}},1694:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(2570),i=n(5532),o=n(5376);var a=n(4666),s=n(9818),c=n(5411),u=n(9913),l=n(5227),d=n(9139),f=n(3676);var p={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,p=e.name,h=n.mainAxis,v=void 0===h||h,m=n.altAxis,y=void 0!==m&&m,g=n.boundary,E=n.rootBoundary,_=n.altBoundary,b=n.padding,S=n.tether,w=void 0===S||S,k=n.tetherOffset,T=void 0===k?0:k,R=(0,u.Z)(t,{boundary:g,rootBoundary:E,padding:b,altBoundary:_}),C=(0,i.Z)(t.placement),I=(0,l.Z)(t.placement),O=!I,A=(0,o.Z)(C),N="x"===A?"y":"x",D=t.modifiersData.popperOffsets,x=t.rects.reference,P=t.rects.popper,L="function"===typeof T?T(Object.assign({},t.rects,{placement:t.placement})):T,M="number"===typeof L?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,j={x:0,y:0};if(D){if(v){var V,F="y"===A?r.we:r.t$,B="y"===A?r.I:r.F2,W="y"===A?"height":"width",G=D[A],H=G+R[F],K=G-R[B],z=w?-P[W]/2:0,Y=I===r.BL?x[W]:P[W],q=I===r.BL?-P[W]:-x[W],Z=t.elements.arrow,X=w&&Z?(0,s.Z)(Z):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,d.Z)(),Q=J[F],$=J[B],ee=(0,a.u)(0,x[W],X[W]),te=O?x[W]/2-z-ee-Q-M.mainAxis:Y-ee-Q-M.mainAxis,ne=O?-x[W]/2+z+ee+$+M.mainAxis:q+ee+$+M.mainAxis,re=t.elements.arrow&&(0,c.Z)(t.elements.arrow),ie=re?"y"===A?re.clientTop||0:re.clientLeft||0:0,oe=null!=(V=null==U?void 0:U[A])?V:0,ae=G+te-oe-ie,se=G+ne-oe,ce=(0,a.u)(w?(0,f.VV)(H,ae):H,G,w?(0,f.Fp)(K,se):K);D[A]=ce,j[A]=ce-G}if(y){var ue,le="x"===A?r.we:r.t$,de="x"===A?r.I:r.F2,fe=D[N],pe="y"===N?"height":"width",he=fe+R[le],ve=fe-R[de],me=-1!==[r.we,r.t$].indexOf(C),ye=null!=(ue=null==U?void 0:U[N])?ue:0,ge=me?he:fe-x[pe]-P[pe]-ye+M.altAxis,Ee=me?fe+x[pe]+P[pe]-ye-M.altAxis:ve,_e=w&&me?(0,a.q)(ge,fe,Ee):(0,a.u)(w?ge:he,fe,w?Ee:ve);D[N]=_e,j[N]=_e-fe}t.modifiersData[p]=j}},requiresIfExists:["offset"]}},6425:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5532),i=n(5227),o=n(5376),a=n(2570);function s(e){var t,n=e.reference,s=e.element,c=e.placement,u=c?(0,r.Z)(c):null,l=c?(0,i.Z)(c):null,d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2;switch(u){case a.we:t={x:d,y:n.y-s.height};break;case a.I:t={x:d,y:n.y+n.height};break;case a.F2:t={x:n.x+n.width,y:f};break;case a.t$:t={x:n.x-s.width,y:f};break;default:t={x:n.x,y:n.y}}var p=u?(0,o.Z)(u):null;if(null!=p){var h="y"===p?"height":"width";switch(l){case a.BL:t[p]=t[p]-(n[h]/2-s[h]/2);break;case a.ut:t[p]=t[p]+(n[h]/2-s[h]/2)}}return t}},9913:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(2570),i=n(3265),o=n(881),a=n(7902),s=n(8044);var c=n(7427),u=n(4801),l=n(3676);var d=n(7467),f=n(5411),p=n(9265),h=n(5652),v=n(8779),m=n(1942),y=n(3120);function g(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function E(e,t,n){return t===r.Pj?g(function(e,t){var n=(0,i.Z)(e),r=(0,o.Z)(e),c=n.visualViewport,u=r.clientWidth,l=r.clientHeight,d=0,f=0;if(c){u=c.width,l=c.height;var p=(0,s.Z)();(p||!p&&"fixed"===t)&&(d=c.offsetLeft,f=c.offsetTop)}return{width:u,height:l,x:d+(0,a.Z)(e),y:f}}(e,n)):(0,p.kK)(t)?function(e,t){var n=(0,h.Z)(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):g(function(e){var t,n=(0,o.Z)(e),r=(0,u.Z)(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=(0,l.Fp)(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),d=(0,l.Fp)(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),f=-r.scrollLeft+(0,a.Z)(e),p=-r.scrollTop;return"rtl"===(0,c.Z)(i||n).direction&&(f+=(0,l.Fp)(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:d,x:f,y:p}}((0,o.Z)(e)))}function _(e,t,n,r){var i="clippingParents"===t?function(e){var t=(0,d.Z)((0,v.Z)(e)),n=["absolute","fixed"].indexOf((0,c.Z)(e).position)>=0&&(0,p.Re)(e)?(0,f.Z)(e):e;return(0,p.kK)(n)?t.filter((function(e){return(0,p.kK)(e)&&(0,m.Z)(e,n)&&"body"!==(0,y.Z)(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=E(e,n,r);return t.top=(0,l.Fp)(i.top,t.top),t.right=(0,l.VV)(i.right,t.right),t.bottom=(0,l.VV)(i.bottom,t.bottom),t.left=(0,l.Fp)(i.left,t.left),t}),E(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}var b=n(6425),S=n(1340),w=n(2031);function k(e,t){void 0===t&&(t={});var n=t,i=n.placement,a=void 0===i?e.placement:i,s=n.strategy,c=void 0===s?e.strategy:s,u=n.boundary,l=void 0===u?r.zV:u,d=n.rootBoundary,f=void 0===d?r.Pj:d,v=n.elementContext,m=void 0===v?r.k5:v,y=n.altBoundary,E=void 0!==y&&y,k=n.padding,T=void 0===k?0:k,R=(0,S.Z)("number"!==typeof T?T:(0,w.Z)(T,r.mv)),C=m===r.k5?r.YP:r.k5,I=e.rects.popper,O=e.elements[E?C:m],A=_((0,p.kK)(O)?O:O.contextElement||(0,o.Z)(e.elements.popper),l,f,c),N=(0,h.Z)(e.elements.reference),D=(0,b.Z)({reference:N,element:I,strategy:"absolute",placement:a}),x=g(Object.assign({},I,D)),P=m===r.k5?x:N,L={top:A.top-P.top+R.top,bottom:P.bottom-A.bottom+R.bottom,left:A.left-P.left+R.left,right:P.right-A.right+R.right},M=e.modifiersData.offset;if(m===r.k5&&M){var U=M[a];Object.keys(L).forEach((function(e){var t=[r.F2,r.I].indexOf(e)>=0?1:-1,n=[r.we,r.I].indexOf(e)>=0?"y":"x";L[e]+=U[n]*t}))}return L}},2031:function(e,t,n){"use strict";function r(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}n.d(t,{Z:function(){return r}})},5532:function(e,t,n){"use strict";function r(e){return e.split("-")[0]}n.d(t,{Z:function(){return r}})},9139:function(e,t,n){"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(t,{Z:function(){return r}})},5376:function(e,t,n){"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}n.d(t,{Z:function(){return r}})},5227:function(e,t,n){"use strict";function r(e){return e.split("-")[1]}n.d(t,{Z:function(){return r}})},3676:function(e,t,n){"use strict";n.d(t,{Fp:function(){return r},NM:function(){return o},VV:function(){return i}});var r=Math.max,i=Math.min,o=Math.round},1340:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9139);function i(e){return Object.assign({},(0,r.Z)(),e)}},3118:function(e,t,n){"use strict";function r(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}n.d(t,{Z:function(){return r}})},4666:function(e,t,n){"use strict";n.d(t,{q:function(){return o},u:function(){return i}});var r=n(3676);function i(e,t,n){return(0,r.Fp)(e,(0,r.VV)(t,n))}function o(e,t,n){var r=i(e,t,n);return r>n?n:r}},3322:function(e,t,n){var r=n(4993).default,i=n(1588).default,o=n(3808).default,a=n(7424).default,s=n(4704).default,c=n(7061).default,u=n(7156).default,l=n(6115).default,d=n(3496).default,f=n(1655).default,p=n(6389).default,h=n(6690).default,v=n(9728).default,m=n(861).default,y=n(8416).default;e.exports=function(){"use strict";var e,t,g,E,_;function b(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},w=function(e){try{return!!e()}catch(e){return!0}},k=!w((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),T=k,R=Function.prototype,C=R.bind,I=R.call,O=T&&C.bind(I,I),A=T?function(e){return e&&O(e)}:function(e){return e&&function(){return I.apply(e,arguments)}},N=A({}.isPrototypeOf),D=function(e){return e&&e.Math==Math&&e},x=D("object"==typeof globalThis&&globalThis)||D("object"==typeof window&&window)||D("object"==typeof self&&self)||D("object"==typeof S&&S)||function(){return this}()||Function("return this")(),P=k,L=Function.prototype,M=L.apply,U=L.call,j="object"==typeof Reflect&&Reflect.apply||(P?U.bind(M):function(){return U.apply(M,arguments)}),V=function(e){return"function"==typeof e},F={},B=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),W=k,G=Function.prototype.call,H=W?G.bind(G):function(){return G.apply(G,arguments)},K={},z={}.propertyIsEnumerable,Y=Object.getOwnPropertyDescriptor,q=Y&&!z.call({1:2},1);K.f=q?function(e){var t=Y(this,e);return!!t&&t.enumerable}:z;var Z,X,J=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Q=A,$=Q({}.toString),ee=Q("".slice),te=function(e){return ee($(e),8,-1)},ne=A,re=w,ie=te,oe=x.Object,ae=ne("".split),se=re((function(){return!oe("z").propertyIsEnumerable(0)}))?function(e){return"String"==ie(e)?ae(e,""):oe(e)}:oe,ce=x.TypeError,ue=function(e){if(null==e)throw ce("Can't call method on "+e);return e},le=se,de=ue,fe=function(e){return le(de(e))},pe=V,he=function(e){return"object"==typeof e?null!==e:pe(e)},ve={},me=ve,ye=x,ge=V,Ee=function(e){return ge(e)?e:void 0},_e=function(e,t){return arguments.length<2?Ee(me[e])||Ee(ye[e]):me[e]&&me[e][t]||ye[e]&&ye[e][t]},be=_e("navigator","userAgent")||"",Se=x,we=be,ke=Se.process,Te=Se.Deno,Re=ke&&ke.versions||Te&&Te.version,Ce=Re&&Re.v8;Ce&&(X=(Z=Ce.split("."))[0]>0&&Z[0]<4?1:+(Z[0]+Z[1])),!X&&we&&(!(Z=we.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=we.match(/Chrome\/(\d+)/))&&(X=+Z[1]);var Ie=X,Oe=Ie,Ae=w,Ne=!!Object.getOwnPropertySymbols&&!Ae((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Oe&&Oe<41})),De=Ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xe=_e,Pe=V,Le=N,Me=De,Ue=x.Object,je=Me?function(e){return"symbol"==typeof e}:function(e){var t=xe("Symbol");return Pe(t)&&Le(t.prototype,Ue(e))},Ve=x.String,Fe=function(e){try{return Ve(e)}catch(e){return"Object"}},Be=V,We=Fe,Ge=x.TypeError,He=function(e){if(Be(e))return e;throw Ge(We(e)+" is not a function")},Ke=He,ze=function(e,t){var n=e[t];return null==n?void 0:Ke(n)},Ye=H,qe=V,Ze=he,Xe=x.TypeError,Je={exports:{}},Qe=x,$e=Object.defineProperty,et=function(e,t){try{$e(Qe,e,{value:t,configurable:!0,writable:!0})}catch(w){Qe[e]=t}return t},tt="__core-js_shared__",nt=x[tt]||et(tt,{}),rt=nt;(Je.exports=function(e,t){return rt[e]||(rt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var it=ue,ot=x.Object,at=function(e){return ot(it(e))},st=at,ct=A({}.hasOwnProperty),ut=Object.hasOwn||function(e,t){return ct(st(e),t)},lt=A,dt=0,ft=Math.random(),pt=lt(1..toString),ht=function(e){return"Symbol("+(void 0===e?"":e)+")_"+pt(++dt+ft,36)},vt=x,mt=Je.exports,yt=ut,gt=ht,Et=Ne,_t=De,bt=mt("wks"),St=vt.Symbol,wt=St&&St.for,kt=_t?St:St&&St.withoutSetter||gt,Tt=function(e){if(!yt(bt,e)||!Et&&"string"!=typeof bt[e]){var t="Symbol."+e;Et&&yt(St,e)?bt[e]=St[e]:bt[e]=_t&&wt?wt(t):kt(t)}return bt[e]},Rt=H,Ct=he,It=je,Ot=ze,At=function(e,t){var n,r;if("string"===t&&qe(n=e.toString)&&!Ze(r=Ye(n,e)))return r;if(qe(n=e.valueOf)&&!Ze(r=Ye(n,e)))return r;if("string"!==t&&qe(n=e.toString)&&!Ze(r=Ye(n,e)))return r;throw Xe("Can't convert object to primitive value")},Nt=Tt,Dt=x.TypeError,xt=Nt("toPrimitive"),Pt=function(e,t){if(!Ct(e)||It(e))return e;var n,r=Ot(e,xt);if(r){if(void 0===t&&(t="default"),n=Rt(r,e,t),!Ct(n)||It(n))return n;throw Dt("Can't convert object to primitive value")}return void 0===t&&(t="number"),At(e,t)},Lt=je,Mt=function(e){var t=Pt(e,"string");return Lt(t)?t:t+""},Ut=he,jt=x.document,Vt=Ut(jt)&&Ut(jt.createElement),Ft=function(e){return Vt?jt.createElement(e):{}},Bt=Ft,Wt=!B&&!w((function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a})),Gt=B,Ht=H,Kt=K,zt=J,Yt=fe,qt=Mt,Zt=ut,Xt=Wt,Jt=Object.getOwnPropertyDescriptor;F.f=Gt?Jt:function(e,t){if(e=Yt(e),t=qt(t),Xt)try{return Jt(e,t)}catch(e){}if(Zt(e,t))return zt(!Ht(Kt.f,e,t),e[t])};var Qt=w,$t=V,en=/#|\.prototype\./,tn=function(e,t){var n=rn[nn(e)];return n==an||n!=on&&($t(t)?Qt(t):!!t)},nn=tn.normalize=function(e){return String(e).replace(en,".").toLowerCase()},rn=tn.data={},on=tn.NATIVE="N",an=tn.POLYFILL="P",sn=tn,cn=He,un=k,ln=A(A.bind),dn=function(e,t){return cn(e),void 0===t?e:un?ln(e,t):function(){return e.apply(t,arguments)}},fn={},pn=B&&w((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),hn=x,vn=he,mn=hn.String,yn=hn.TypeError,gn=function(e){if(vn(e))return e;throw yn(mn(e)+" is not an object")},En=B,_n=Wt,bn=pn,Sn=gn,wn=Mt,kn=x.TypeError,Tn=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,Cn="enumerable",In="configurable",On="writable";fn.f=En?bn?function(e,t,n){if(Sn(e),t=wn(t),Sn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&On in n&&!n.writable){var r=Rn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:In in n?n.configurable:r.configurable,enumerable:Cn in n?n.enumerable:r.enumerable,writable:!1})}return Tn(e,t,n)}:Tn:function(e,t,n){if(Sn(e),t=wn(t),Sn(n),_n)try{return Tn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw kn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var An=fn,Nn=J,Dn=B?function(e,t,n){return An.f(e,t,Nn(1,n))}:function(e,t,n){return e[t]=n,e},xn=x,Pn=j,Ln=A,Mn=V,Un=F.f,jn=sn,Vn=ve,Fn=dn,Bn=Dn,Wn=ut,Gn=function(e){var t=function t(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return Pn(e,this,arguments)};return t.prototype=e.prototype,t},Hn=function(e,t){var n,r,i,o,a,s,c,u,l=e.target,d=e.global,f=e.stat,p=e.proto,h=d?xn:f?xn[l]:(xn[l]||{}).prototype,v=d?Vn:Vn[l]||Bn(Vn,l,{})[l],m=v.prototype;for(i in t)n=!jn(d?i:l+(f?".":"#")+i,e.forced)&&h&&Wn(h,i),a=v[i],n&&(s=e.noTargetGet?(u=Un(h,i))&&u.value:h[i]),o=n&&s?s:t[i],n&&typeof a==typeof o||(c=e.bind&&n?Fn(o,xn):e.wrap&&n?Gn(o):p&&Mn(o)?Ln(o):o,(e.sham||o&&o.sham||a&&a.sham)&&Bn(c,"sham",!0),Bn(v,i,c),p&&(Wn(Vn,r=l+"Prototype")||Bn(Vn,r,{}),Bn(Vn[r],i,o),e.real&&m&&!m[i]&&Bn(m,i,o)))},Kn=Math.ceil,zn=Math.floor,Yn=function(e){var t=+e;return t!=t||0===t?0:(t>0?zn:Kn)(t)},qn=Yn,Zn=Math.min,Xn=function(e){return e>0?Zn(qn(e),9007199254740991):0},Jn=function(e){return Xn(e.length)},Qn=He,$n=at,er=se,tr=Jn,nr=x.TypeError,rr=function(e){return function(t,n,r,i){Qn(n);var o=$n(t),a=er(o),s=tr(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw nr("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},ir={left:rr(!1),right:rr(!0)},or=w,ar=function(e,t){var n=[][e];return!!n&&or((function(){n.call(null,t||function(){throw 1},1)}))},sr="process"==te(x.process),cr=ir.left,ur=Ie,lr=sr;Hn({target:"Array",proto:!0,forced:!ar("reduce")||!lr&&ur>79&&ur<83},{reduce:function(e){var t=arguments.length;return cr(this,e,t,t>1?arguments[1]:void 0)}});var dr=ve,fr=function(e){return dr[e+"Prototype"]},pr=fr("Array").reduce,hr=N,vr=pr,mr=Array.prototype,yr=function(e){var t=e.reduce;return e===mr||hr(mr,e)&&t===mr.reduce?vr:t},gr=yr,Er=!0,_r=!0;function br(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Sr(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function wr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Er=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function kr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Tr(){if("object"==typeof window){if(Er)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Rr(e,t){_r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Cr(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=br(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=br(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=br(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function Ir(e){return"[object Object]"===Object.prototype.toString.call(e)}function Or(e){var t;return Ir(e)?gr(t=Object.keys(e)).call(t,(function(t,n){var r=Ir(e[n]),i=r?Or(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,y({},n,i))}),{}):e}function Ar(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}var Nr=Je.exports,Dr=ht,xr=Nr("keys"),Pr=function(e){return xr[e]||(xr[e]=Dr(e))},Lr=!w((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Mr=x,Ur=ut,jr=V,Vr=at,Fr=Lr,Br=Pr("IE_PROTO"),Wr=Mr.Object,Gr=Wr.prototype,Hr=Fr?Wr.getPrototypeOf:function(e){var t=Vr(e);if(Ur(t,Br))return t[Br];var n=t.constructor;return jr(n)&&t instanceof n?n.prototype:t instanceof Wr?Gr:null},Kr=x,zr=V,Yr=Kr.String,qr=Kr.TypeError,Zr=A,Xr=gn,Jr=function(e){if("object"==typeof e||zr(e))return e;throw qr("Can't set "+Yr(e)+" as a prototype")},Qr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Zr(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Xr(n),Jr(r),t?e(n,r):n.__proto__=r,n}}():void 0),$r={},ei=Yn,ti=Math.max,ni=Math.min,ri=function(e,t){var n=ei(e);return n<0?ti(n+t,0):ni(n,t)},ii=fe,oi=ri,ai=Jn,si=function(e){return function(t,n,r){var i,o=ii(t),a=ai(o),s=oi(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},ci={includes:si(!0),indexOf:si(!1)},ui={},li=ut,di=fe,fi=ci.indexOf,pi=ui,hi=A([].push),vi=function(e,t){var n,r=di(e),i=0,o=[];for(n in r)!li(pi,n)&&li(r,n)&&hi(o,n);for(;t.length>i;)li(r,n=t[i++])&&(~fi(o,n)||hi(o,n));return o},mi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yi=vi,gi=mi.concat("length","prototype");$r.f=Object.getOwnPropertyNames||function(e){return yi(e,gi)};var Ei={};Ei.f=Object.getOwnPropertySymbols;var _i=_e,bi=$r,Si=Ei,wi=gn,ki=A([].concat),Ti=_i("Reflect","ownKeys")||function(e){var t=bi.f(wi(e)),n=Si.f;return n?ki(t,n(e)):t},Ri=ut,Ci=Ti,Ii=F,Oi=fn,Ai={},Ni=vi,Di=mi,xi=Object.keys||function(e){return Ni(e,Di)},Pi=B,Li=pn,Mi=fn,Ui=gn,ji=fe,Vi=xi;Ai.f=Pi&&!Li?Object.defineProperties:function(e,t){Ui(e);for(var n,r=ji(t),i=Vi(t),o=i.length,a=0;o>a;)Mi.f(e,n=i[a++],r[n]);return e};var Fi,Bi=_e("document","documentElement"),Wi=gn,Gi=Ai,Hi=mi,Ki=ui,zi=Bi,Yi=Ft,qi=Pr("IE_PROTO"),Zi=function(){},Xi=function(e){return"<script>"+e+"<\/script>"},Ji=function(e){e.write(Xi("")),e.close();var t=e.parentWindow.Object;return e=null,t},Qi=function(){try{Fi=new ActiveXObject("htmlfile")}catch(e){}var e,t;Qi="undefined"!=typeof document?document.domain&&Fi?Ji(Fi):((t=Yi("iframe")).style.display="none",zi.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Xi("document.F=Object")),e.close(),e.F):Ji(Fi);for(var n=Hi.length;n--;)delete Qi.prototype[Hi[n]];return Qi()};Ki[qi]=!0;var $i=Object.create||function(e,t){var n;return null!==e?(Zi.prototype=Wi(e),n=new Zi,Zi.prototype=null,n[qi]=e):n=Qi(),void 0===t?n:Gi.f(n,t)},eo=A("".replace),to=String(Error("zxcasd").stack),no=/\n\s*at [^:]*:[^\n]*/,ro=no.test(to),io=he,oo=Dn,ao={},so=ao,co=Tt("iterator"),uo=Array.prototype,lo={};lo[Tt("toStringTag")]="z";var fo="[object z]"===String(lo),po=x,ho=fo,vo=V,mo=te,yo=Tt("toStringTag"),go=po.Object,Eo="Arguments"==mo(function(){return arguments}()),_o=ho?mo:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=go(e),yo))?n:Eo?mo(t):"Object"==(r=mo(t))&&vo(t.callee)?"Arguments":r},bo=_o,So=ze,wo=ao,ko=Tt("iterator"),To=function(e){if(null!=e)return So(e,ko)||So(e,"@@iterator")||wo[bo(e)]},Ro=H,Co=He,Io=gn,Oo=Fe,Ao=To,No=x.TypeError,Do=H,xo=gn,Po=ze,Lo=dn,Mo=H,Uo=gn,jo=Fe,Vo=function(e){return void 0!==e&&(so.Array===e||uo[co]===e)},Fo=Jn,Bo=N,Wo=function(e,t){var n=arguments.length<2?Ao(e):t;if(Co(n))return Io(Ro(n,e));throw No(Oo(e)+" is not iterable")},Go=To,Ho=function(e,t,n){var r,i;xo(e);try{if(!(r=Po(e,"return"))){if("throw"===t)throw n;return n}r=Do(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return xo(r),n},Ko=x.TypeError,zo=function(e,t){this.stopped=e,this.result=t},Yo=zo.prototype,qo=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=Lo(t,l),v=function(e){return r&&Ho(r,"normal",e),new zo(!0,e)},m=function(e){return d?(Uo(e),p?h(e[0],e[1],v):h(e[0],e[1])):p?h(e,v):h(e)};if(f)r=e;else{if(!(i=Go(e)))throw Ko(jo(e)+" is not iterable");if(Vo(i)){for(o=0,a=Fo(e);a>o;o++)if((s=m(e[o]))&&Bo(Yo,s))return s;return new zo(!1)}r=Wo(e,i)}for(c=r.next;!(u=Mo(c,r)).done;){try{s=m(u.value)}catch(e){Ho(r,"throw",e)}if("object"==typeof s&&s&&Bo(Yo,s))return s}return new zo(!1)},Zo=_o,Xo=x.String,Jo=function(e){if("Symbol"===Zo(e))throw TypeError("Cannot convert a Symbol value to a string");return Xo(e)},Qo=Jo,$o=J,ea=!w((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",$o(1,7)),7!==e.stack)})),ta=Hn,na=x,ra=N,ia=Hr,oa=Qr,aa=function(e,t,n){for(var r=Ci(t),i=Oi.f,o=Ii.f,a=0;a<r.length;a++){var s=r[a];Ri(e,s)||n&&Ri(n,s)||i(e,s,o(t,s))}},sa=$i,ca=Dn,ua=J,la=function(e,t){if(ro&&"string"==typeof e)for(;t--;)e=eo(e,no,"");return e},da=function(e,t){io(t)&&"cause"in t&&oo(e,"cause",t.cause)},fa=qo,pa=function(e,t){return void 0===e?arguments.length<2?"":t:Qo(e)},ha=ea,va=Tt("toStringTag"),ma=na.Error,ya=[].push,ga=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=ra(Ea,this);oa?n=oa(new ma,i?ia(this):Ea):(n=i?this:sa(Ea),ca(n,va,"Error")),void 0!==t&&ca(n,"message",pa(t)),ha&&ca(n,"stack",la(n.stack,1)),da(n,r);var o=[];return fa(e,ya,{that:o}),ca(n,"errors",o),n};oa?oa(ga,ma):aa(ga,ma,{name:!0});var Ea=ga.prototype=sa(ma.prototype,{constructor:ua(1,ga),message:ua(1,""),name:ua(1,"AggregateError")});ta({global:!0},{AggregateError:ga});var _a=V,ba=nt,Sa=A(Function.toString);_a(ba.inspectSource)||(ba.inspectSource=function(e){return Sa(e)});var wa,ka,Ta,Ra=ba.inspectSource,Ca=V,Ia=Ra,Oa=x.WeakMap,Aa=Ca(Oa)&&/native code/.test(Ia(Oa)),Na=x,Da=A,xa=he,Pa=Dn,La=ut,Ma=nt,Ua=Pr,ja=ui,Va="Object already initialized",Fa=Na.TypeError,Ba=Na.WeakMap;if(Aa||Ma.state){var Wa=Ma.state||(Ma.state=new Ba),Ga=Da(Wa.get),Ha=Da(Wa.has),Ka=Da(Wa.set);wa=function(e,t){if(Ha(Wa,e))throw new Fa(Va);return t.facade=e,Ka(Wa,e,t),t},ka=function(e){return Ga(Wa,e)||{}},Ta=function(e){return Ha(Wa,e)}}else{var za=Ua("state");ja[za]=!0,wa=function(e,t){if(La(e,za))throw new Fa(Va);return t.facade=e,Pa(e,za,t),t},ka=function(e){return La(e,za)?e[za]:{}},Ta=function(e){return La(e,za)}}var Ya,qa,Za,Xa={set:wa,get:ka,has:Ta,enforce:function(e){return Ta(e)?ka(e):wa(e,{})},getterFor:function(e){return function(t){var n;if(!xa(t)||(n=ka(t)).type!==e)throw Fa("Incompatible receiver, "+e+" required");return n}}},Ja=B,Qa=ut,$a=Function.prototype,es=Ja&&Object.getOwnPropertyDescriptor,ts=Qa($a,"name"),ns={EXISTS:ts,PROPER:ts&&"something"===function(){}.name,CONFIGURABLE:ts&&(!Ja||Ja&&es($a,"name").configurable)},rs=Dn,is=function(e,t,n,r){r&&r.enumerable?e[t]=n:rs(e,t,n)},os=w,as=V,ss=$i,cs=Hr,us=is,ls=Tt("iterator"),ds=!1;[].keys&&("next"in(Za=[].keys())?(qa=cs(cs(Za)))!==Object.prototype&&(Ya=qa):ds=!0);var fs=null==Ya||os((function(){var e={};return Ya[ls].call(e)!==e}));as((Ya=fs?{}:ss(Ya))[ls])||us(Ya,ls,(function(){return this}));var ps={IteratorPrototype:Ya,BUGGY_SAFARI_ITERATORS:ds},hs=_o,vs=fo?{}.toString:function(){return"[object "+hs(this)+"]"},ms=fo,ys=fn.f,gs=Dn,Es=ut,_s=vs,bs=Tt("toStringTag"),Ss=function(e,t,n,r){if(e){var i=n?e:e.prototype;Es(i,bs)||ys(i,bs,{configurable:!0,value:t}),r&&!ms&&gs(i,"toString",_s)}},ws=ps.IteratorPrototype,ks=$i,Ts=J,Rs=Ss,Cs=ao,Is=function(){return this},Os=Hn,As=H,Ns=function(e,t,n,r){var i=t+" Iterator";return e.prototype=ks(ws,{next:Ts(+!r,n)}),Rs(e,i,!1,!0),Cs[i]=Is,e},Ds=Hr,xs=Ss,Ps=is,Ls=ao,Ms=ns.PROPER,Us=ps.BUGGY_SAFARI_ITERATORS,js=Tt("iterator"),Vs="keys",Fs="values",Bs="entries",Ws=function(){return this},Gs=function(e,t,n,r,i,o,a){Ns(n,t,r);var s,c,u,l=function(e){if(e===i&&v)return v;if(!Us&&e in p)return p[e];switch(e){case Vs:case Fs:case Bs:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,p=e.prototype,h=p[js]||p["@@iterator"]||i&&p[i],v=!Us&&h||l(i),m="Array"==t&&p.entries||h;if(m&&(s=Ds(m.call(new e)))!==Object.prototype&&s.next&&(xs(s,d,!0,!0),Ls[d]=Ws),Ms&&i==Fs&&h&&h.name!==Fs&&(f=!0,v=function(){return As(h,this)}),i)if(c={values:l(Fs),keys:o?v:l(Vs),entries:l(Bs)},a)for(u in c)(Us||f||!(u in p))&&Ps(p,u,c[u]);else Os({target:t,proto:!0,forced:Us||f},c);return a&&p[js]!==v&&Ps(p,js,v,{name:i}),Ls[t]=v,c},Hs=fe,Ks=ao,zs=Xa;fn.f;var Ys=Gs,qs="Array Iterator",Zs=zs.set,Xs=zs.getterFor(qs);Ys(Array,"Array",(function(e,t){Zs(this,{type:qs,target:Hs(e),index:0,kind:t})}),(function(){var e=Xs(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Ks.Arguments=Ks.Array;var Js=x.Promise,Qs=is,$s=_e,ec=fn,tc=B,nc=Tt("species"),rc=N,ic=x.TypeError,oc=Tt("iterator"),ac=!1;try{var sc=0,cc={next:function(){return{done:!!sc++}},return:function(){ac=!0}};cc[oc]=function(){return this},Array.from(cc,(function(){throw 2}))}catch(b){}var uc=A,lc=w,dc=V,fc=_o,pc=Ra,hc=function(){},vc=[],mc=_e("Reflect","construct"),yc=/^\s*(?:class|function)\b/,gc=uc(yc.exec),Ec=!yc.exec(hc),_c=function(e){if(!dc(e))return!1;try{return mc(hc,vc,e),!0}catch(e){return!1}},bc=function(e){if(!dc(e))return!1;switch(fc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ec||!!gc(yc,pc(e))}catch(e){return!0}};bc.sham=!0;var Sc,wc,kc,Tc,Rc=!mc||lc((function(){var e;return _c(_c.call)||!_c(Object)||!_c((function(){e=!0}))||e}))?bc:_c,Cc=Rc,Ic=Fe,Oc=x.TypeError,Ac=gn,Nc=function(e){if(Cc(e))return e;throw Oc(Ic(e)+" is not a constructor")},Dc=Tt("species"),xc=function(e,t){var n,r=Ac(e).constructor;return void 0===r||null==(n=Ac(r)[Dc])?t:Nc(n)},Pc=A([].slice),Lc=/(?:ipad|iphone|ipod).*applewebkit/i.test(be),Mc=x,Uc=j,jc=dn,Vc=V,Fc=ut,Bc=w,Wc=Bi,Gc=Pc,Hc=Ft,Kc=Lc,zc=sr,Yc=Mc.setImmediate,qc=Mc.clearImmediate,Zc=Mc.process,Xc=Mc.Dispatch,Jc=Mc.Function,Qc=Mc.MessageChannel,$c=Mc.String,eu=0,tu={},nu="onreadystatechange";try{Sc=Mc.location}catch(b){}var ru=function(e){if(Fc(tu,e)){var t=tu[e];delete tu[e],t()}},iu=function(e){return function(){ru(e)}},ou=function(e){ru(e.data)},au=function(e){Mc.postMessage($c(e),Sc.protocol+"//"+Sc.host)};Yc&&qc||(Yc=function(e){var t=Gc(arguments,1);return tu[++eu]=function(){Uc(Vc(e)?e:Jc(e),void 0,t)},wc(eu),eu},qc=function(e){delete tu[e]},zc?wc=function(e){Zc.nextTick(iu(e))}:Xc&&Xc.now?wc=function(e){Xc.now(iu(e))}:Qc&&!Kc?(Tc=(kc=new Qc).port2,kc.port1.onmessage=ou,wc=jc(Tc.postMessage,Tc)):Mc.addEventListener&&Vc(Mc.postMessage)&&!Mc.importScripts&&Sc&&"file:"!==Sc.protocol&&!Bc(au)?(wc=au,Mc.addEventListener("message",ou,!1)):wc=nu in Hc("script")?function(e){Wc.appendChild(Hc("script")).onreadystatechange=function(){Wc.removeChild(this),ru(e)}}:function(e){setTimeout(iu(e),0)});var su,cu,uu,lu,du,fu,pu,hu,vu={set:Yc,clear:qc},mu=x,yu=/ipad|iphone|ipod/i.test(be)&&void 0!==mu.Pebble,gu=/web0s(?!.*chrome)/i.test(be),Eu=x,_u=dn,bu=F.f,Su=vu.set,wu=Lc,ku=yu,Tu=gu,Ru=sr,Cu=Eu.MutationObserver||Eu.WebKitMutationObserver,Iu=Eu.document,Ou=Eu.process,Au=Eu.Promise,Nu=bu(Eu,"queueMicrotask"),Du=Nu&&Nu.value;Du||(su=function(){var e,t;for(Ru&&(e=Ou.domain)&&e.exit();cu;){t=cu.fn,cu=cu.next;try{t()}catch(e){throw cu?lu():uu=void 0,e}}uu=void 0,e&&e.enter()},wu||Ru||Tu||!Cu||!Iu?!ku&&Au&&Au.resolve?((pu=Au.resolve(void 0)).constructor=Au,hu=_u(pu.then,pu),lu=function(){hu(su)}):Ru?lu=function(){Ou.nextTick(su)}:(Su=_u(Su,Eu),lu=function(){Su(su)}):(du=!0,fu=Iu.createTextNode(""),new Cu(su).observe(fu,{characterData:!0}),lu=function(){fu.data=du=!du}));var xu=Du||function(e){var t={fn:e,next:void 0};uu&&(uu.next=t),cu||(cu=t,lu()),uu=t},Pu={},Lu=He,Mu=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Lu(t),this.reject=Lu(n)};Pu.f=function(e){return new Mu(e)};var Uu=gn,ju=he,Vu=Pu,Fu=function(e,t){if(Uu(e),ju(t)&&t.constructor===e)return t;var n=Vu.f(e);return(0,n.resolve)(t),n.promise},Bu=x,Wu=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Gu=function(){this.head=null,this.tail=null};Gu.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Hu,Ku,zu,Yu="object"==typeof window,qu=Hn,Zu=x,Xu=_e,Ju=H,Qu=Js,$u=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Qs(e,r,t[r],n);return e},el=Ss,tl=function(e){var t=$s(e),n=ec.f;tc&&t&&!t[nc]&&n(t,nc,{configurable:!0,get:function(){return this}})},nl=He,rl=V,il=he,ol=function(e,t){if(rc(t,e))return e;throw ic("Incorrect invocation")},al=Ra,sl=qo,cl=function(e,t){if(!t&&!ac)return!1;var n=!1;try{var r={};r[oc]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},ul=xc,ll=vu.set,dl=xu,fl=Fu,pl=function(e,t){var n=Bu.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},hl=Pu,vl=Wu,ml=Gu,yl=Xa,gl=sn,El=Yu,_l=sr,bl=Ie,Sl=Tt("species"),wl="Promise",kl=yl.getterFor(wl),Tl=yl.set,Rl=yl.getterFor(wl),Cl=Qu&&Qu.prototype,Il=Qu,Ol=Cl,Al=Zu.TypeError,Nl=Zu.document,Dl=Zu.process,xl=hl.f,Pl=xl,Ll=!!(Nl&&Nl.createEvent&&Zu.dispatchEvent),Ml=rl(Zu.PromiseRejectionEvent),Ul="unhandledrejection",jl=gl(wl,(function(){var e=al(Il),t=e!==String(Il);if(!t&&66===bl)return!0;if(!Ol.finally)return!0;if(bl>=51&&/native code/.test(e))return!1;var n=new Il((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Sl]=r,!(n.then((function(){}))instanceof r)||!t&&El&&!Ml})),Vl=jl||!cl((function(e){Il.all(e).catch((function(){}))})),Fl=function(e){var t;return!(!il(e)||!rl(t=e.then))&&t},Bl=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&zl(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Al("Promise-chain cycle")):(r=Fl(n))?Ju(r,n,c,u):c(n)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},Wl=function(e,t){e.notified||(e.notified=!0,dl((function(){for(var n,r=e.reactions;n=r.get();)Bl(n,e);e.notified=!1,t&&!e.rejection&&Hl(e)})))},Gl=function(e,t,n){var r,i;Ll?((r=Nl.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Zu.dispatchEvent(r)):r={promise:t,reason:n},!Ml&&(i=Zu["on"+e])?i(r):e===Ul&&pl("Unhandled promise rejection",n)},Hl=function(e){Ju(ll,Zu,(function(){var t,n=e.facade,r=e.value;if(Kl(e)&&(t=vl((function(){_l?Dl.emit("unhandledRejection",r,n):Gl(Ul,n,r)})),e.rejection=_l||Kl(e)?2:1,t.error))throw t.value}))},Kl=function(e){return 1!==e.rejection&&!e.parent},zl=function(e){Ju(ll,Zu,(function(){var t=e.facade;_l?Dl.emit("rejectionHandled",t):Gl("rejectionhandled",t,e.value)}))},Yl=function(e,t,n){return function(r){e(t,r,n)}},ql=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Wl(e,!0))},Zl=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw Al("Promise can't be resolved itself");var i=Fl(n);i?dl((function(){var r={done:!1};try{Ju(i,n,Yl(e,r,t),Yl(ql,r,t))}catch(n){ql(r,n,t)}})):(t.value=n,t.state=1,Wl(t,!1))}catch(n){ql({done:!1},n,t)}}};jl&&(Ol=(Il=function(e){ol(this,Ol),nl(e),Ju(Hu,this);var t=kl(this);try{e(Yl(Zl,t),Yl(ql,t))}catch(e){ql(t,e)}}).prototype,(Hu=function(e){Tl(this,{type:wl,done:!1,notified:!1,parent:!1,reactions:new ml,rejection:!1,state:0,value:void 0})}).prototype=$u(Ol,{then:function(e,t){var n=Rl(this),r=xl(ul(this,Il));return n.parent=!0,r.ok=!rl(e)||e,r.fail=rl(t)&&t,r.domain=_l?Dl.domain:void 0,0==n.state?n.reactions.add(r):dl((function(){Bl(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),Ku=function(){var e=new Hu,t=kl(e);this.promise=e,this.resolve=Yl(Zl,t),this.reject=Yl(ql,t)},hl.f=xl=function(e){return e===Il||e===zu?new Ku(e):Pl(e)}),qu({global:!0,wrap:!0,forced:jl},{Promise:Il}),el(Il,wl,!1,!0),tl(wl),zu=Xu(wl),qu({target:wl,stat:!0,forced:jl},{reject:function(e){var t=xl(this);return Ju(t.reject,void 0,e),t.promise}}),qu({target:wl,stat:!0,forced:!0},{resolve:function(e){return fl(this===zu?Il:this,e)}}),qu({target:wl,stat:!0,forced:Vl},{all:function(e){var t=this,n=xl(t),r=n.resolve,i=n.reject,o=vl((function(){var n=nl(t.resolve),o=[],a=0,s=1;sl(e,(function(e){var c=a++,u=!1;s++,Ju(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=xl(t),r=n.reject,i=vl((function(){var i=nl(t.resolve);sl(e,(function(e){Ju(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Xl=H,Jl=He,Ql=Pu,$l=Wu,ed=qo;Hn({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Ql.f(t),r=n.resolve,i=n.reject,o=$l((function(){var n=Jl(t.resolve),i=[],o=0,a=1;ed(e,(function(e){var s=o++,c=!1;a++,Xl(n,t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var td=He,nd=_e,rd=H,id=Pu,od=Wu,ad=qo,sd="No one promise resolved";Hn({target:"Promise",stat:!0},{any:function(e){var t=this,n=nd("AggregateError"),r=id.f(t),i=r.resolve,o=r.reject,a=od((function(){var r=td(t.resolve),a=[],s=0,c=1,u=!1;ad(e,(function(e){var l=s++,d=!1;c++,rd(r,t,e).then((function(e){d||u||(u=!0,i(e))}),(function(e){d||u||(d=!0,a[l]=e,--c||o(new n(a,sd)))}))})),--c||o(new n(a,sd))}));return a.error&&o(a.value),r.promise}});var cd=Js,ud=_e,ld=V,dd=xc,fd=Fu;Hn({target:"Promise",proto:!0,real:!0,forced:!!cd&&w((function(){cd.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=dd(this,ud("Promise")),n=ld(e);return this.then(n?function(n){return fd(t,e()).then((function(){return n}))}:e,n?function(n){return fd(t,e()).then((function(){throw n}))}:e)}});var pd=A,hd=Yn,vd=Jo,md=ue,yd=pd("".charAt),gd=pd("".charCodeAt),Ed=pd("".slice),_d=function(e){return function(t,n){var r,i,o=vd(md(t)),a=hd(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=gd(o,a))<55296||r>56319||a+1===s||(i=gd(o,a+1))<56320||i>57343?e?yd(o,a):r:e?Ed(o,a,a+2):i-56320+(r-55296<<10)+65536}},bd=(_d(!1),_d(!0)),Sd=Jo,wd=Xa,kd=Gs,Td="String Iterator",Rd=wd.set,Cd=wd.getterFor(Td);kd(String,"String",(function(e){Rd(this,{type:Td,string:Sd(e),index:0})}),(function(){var e,t=Cd(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=bd(n,r),t.index+=e.length,{value:e,done:!1})}));var Id=ve.Promise,Od={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ad=x,Nd=_o,Dd=Dn,xd=ao,Pd=Tt("toStringTag");for(var Ld in Od){var Md=Ad[Ld],Ud=Md&&Md.prototype;Ud&&Nd(Ud)!==Pd&&Dd(Ud,Pd,Ld),xd[Ld]=xd.Array}var jd=Id,Vd=jd,Fd=Tr;function Bd(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s))return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),Fd("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return Fd("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Vd.reject(o(e))}))}))}}}}function Wd(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Gd(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Sr(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function Hd(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Kd(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(a(e)))};return t.apply(this,[c,r])}return new Vd((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function zd(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return Ar(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),Sr(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return Ar(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Vd.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Vd.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function Yd(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function qd(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Yd(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Vd.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=y({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function Zd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=y({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function Xd(e,t){Sr(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Jd=Object.freeze({__proto__:null,shimMediaStream:Wd,shimOnTrack:Gd,shimGetSendersWithDtmf:Hd,shimGetStats:Kd,shimSenderReceiverGetStats:zd,shimAddTrackRemoveTrackWithNative:Yd,shimAddTrackRemoveTrack:qd,shimPeerConnection:Zd,fixNegotiationNeeded:Xd,shimGetUserMedia:Bd,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Qd(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Rr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function $d(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ef(e,t){if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=y({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function tf(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Vd.resolve(new Map)}}}function nf(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),Sr(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function rf(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Rr("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function of(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function af(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=m(e)).length>0;n&&e.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function sf(e){if("object"==typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function cf(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Vd.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function uf(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Vd.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var lf=Object.freeze({__proto__:null,shimOnTrack:$d,shimPeerConnection:ef,shimSenderGetStats:tf,shimReceiverGetStats:nf,shimRemoveStream:rf,shimRTCDataChannel:of,shimAddTransceiver:af,shimGetParameters:sf,shimCreateOffer:cf,shimCreateAnswer:uf,shimGetUserMedia:Qd,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Vd.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function df(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function ff(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function pf(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Vd.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Vd.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r},t.addIceCandidate=s}}function hf(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(vf(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function vf(e){return e&&void 0!==e.video?Object.assign({},e,{video:Or(e.video)}):e}function mf(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(Rr("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function yf(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function gf(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ef(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var _f=Object.freeze({__proto__:null,shimLocalStreamsAPI:df,shimRemoteStreamsAPI:ff,shimCallbacksAPI:pf,shimGetUserMedia:hf,shimConstraints:vf,shimRTCIceServerUrls:mf,shimTrackEventTransceiver:yf,shimCreateOfferLegacy:gf,shimAudioContext:Ef}),bf="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Sf=ue,wf=Jo,kf=A("".replace),Tf="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Rf=RegExp("^"+Tf+Tf+"*"),Cf=RegExp(Tf+Tf+"*$"),If=function(e){return function(t){var n=wf(Sf(t));return 1&e&&(n=kf(n,Rf,"")),2&e&&(n=kf(n,Cf,"")),n}},Of={start:If(1),end:If(2),trim:If(3)},Af=ns.PROPER,Nf=w,Df=bf,xf=Of.trim;Hn({target:"String",proto:!0,forced:function(e){return Nf((function(){return!!Df[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||Af&&Df[e].name!==e}))}("trim")},{trim:function(){return xf(this)}});var Pf=fr("String").trim,Lf=N,Mf=Pf,Uf=String.prototype,jf=function(e){var t=e.trim;return"string"==typeof e||e===Uf||Lf(Uf,e)&&t===Uf.trim?Mf:t},Vf={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return jf(e).call(e).split("\n").map((function(e){return jf(e).call(e)}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){var n;return jf(n=t>0?"m="+e:e).call(n)+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++){var o,a;t=jf(o=r[i]).call(o).split("="),n[jf(a=t[0]).call(a)]=t[1]}return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(Vf);var Ff=Vf.exports,Bf=Object.freeze(b({__proto__:null,default:Ff},[Vf.exports]));function Wf(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Ff.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Sr(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Gf(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Sr(e,"icecandidate",(function(e){if(e.candidate){var t=Ff.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Hf(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=Ff.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Ff.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=Ff.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e,s=r(arguments[0]),c=i(s),u=o(arguments[0],s);e=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return e}}),this._sctp=l}return a.apply(this,arguments)}}}function Kf(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},Sr(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function zf(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function Yf(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==jf(e).call(e)})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function qf(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Vd.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Vd.resolve())})}}function Zf(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!=typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var Xf,Jf,Qf=Object.freeze({__proto__:null,shimRTCIceCandidate:Wf,shimRTCIceCandidateRelayProtocol:Gf,shimMaxMessageSize:Hf,shimSendThrowTypeError:Kf,shimConnectionState:zf,removeExtmapAllowMixed:Yf,shimAddIceCandidateNullOrEmpty:qf,shimParameterlessSetLocalDescription:Zf});!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=Tr,r=Cr(e),i={browserDetails:r,commonShim:Qf,extractVersion:br,disableLog:wr,disableWarnings:kr,sdp:Bf};switch(r.browser){case"chrome":if(!Jd||!Zd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Jd,qf(e,r),Zf(e),Bd(e,r),Wd(e),Zd(e,r),Gd(e),qd(e,r),Hd(e),Kd(e),zd(e),Xd(e,r),Wf(e),Gf(e),zf(e),Hf(e,r),Kf(e),Yf(e,r);break;case"firefox":if(!lf||!ef||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=lf,qf(e,r),Zf(e),Qd(e,r),ef(e,r),$d(e),rf(e),tf(e),nf(e),of(e),af(e),sf(e),cf(e),uf(e),Wf(e),zf(e),Hf(e,r),Kf(e);break;case"safari":if(!_f||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=_f,qf(e,r),Zf(e),mf(e),gf(e),pf(e),df(e),ff(e),yf(e),hf(e),Ef(e),Wf(e),Gf(e),Hf(e,r),Kf(e),Yf(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(Xf||(Xf={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Jf||(Jf={}));var $f={exports:{}};!function(e,t){!function(n,r){var i="function",o="undefined",a="object",s="string",c="major",u="model",l="name",d="type",f="vendor",p="version",h="architecture",v="console",m="mobile",y="tablet",g="smarttv",E="wearable",_="embedded",b="Amazon",S="Apple",w="ASUS",k="BlackBerry",T="Google",R="Huawei",C="LG",I="Microsoft",O="Motorola",A="Samsung",N="Sharp",D="Sony",x="Xiaomi",P="Zebra",L="Facebook",M="Chromium OS",U="Mac OS",j=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},V=function(e,t){return typeof e===s&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},W=function(e,t){for(var n,o,s,c,u,l,d=0;d<t.length&&!u;){var f=t[d],p=t[d+1];for(n=o=0;n<f.length&&!u&&f[n];)if(u=f[n++].exec(e))for(s=0;s<p.length;s++)l=u[++o],typeof(c=p[s])===a&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;d+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(V(t[n][i],e))return"?"===n?r:n}else if(V(t[n],e))return"?"===n?r:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[l,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[l,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[l,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,L],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,p],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,F]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,A],[d,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,A],[d,m]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[f,S],[d,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,S],[d,y]],[/(macintosh);/i],[u,[f,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,N],[d,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,R],[d,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,R],[d,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,x],[d,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,x],[d,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[d,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[d,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,O],[d,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,O],[d,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,C],[d,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,C],[d,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[d,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[d,m]],[/(pixel c)\b/i],[u,[f,T],[d,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,T],[d,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,D],[d,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,D],[d,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[d,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,b],[d,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,b],[d,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[d,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,k],[d,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,w],[d,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,w],[d,m]],[/(nexus 9)/i],[u,[f,"HTC"],[d,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[d,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[d,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[d,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[d,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[d,y]],[/(surface duo)/i],[u,[f,I],[d,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[d,m]],[/(u304aa)/i],[u,[f,"AT&T"],[d,m]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[d,m]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[d,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[d,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[d,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[d,y]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[d,y]],[/\b(k88) b/i],[u,[f,"ZTE"],[d,y]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[d,m]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[d,m]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[d,y]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[d,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[d,y]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[d,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[d,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[d,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[d,m]],[/\b(ph-1) /i],[u,[f,"Essential"],[d,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[d,y]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[d,y]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[d,y]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[d,y]],[/(sprint) (\w+)/i],[f,u,[d,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,I],[d,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,P],[d,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,P],[d,m]],[/smart-tv.+(samsung)/i],[f,[d,g]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,A],[d,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,C],[d,g]],[/(apple) ?tv/i],[f,[u,"Apple TV"],[d,g]],[/crkey/i],[[u,"Chromecast"],[f,T],[d,g]],[/droid.+aft(\w)( bui|\))/i],[u,[f,b],[d,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,N],[d,g]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,D],[d,g]],[/(mitv-\w{5}) bui/i],[u,[f,x],[d,g]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[d,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,B],[u,B],[d,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[d,v]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[d,v]],[/(playstation [345portablevi]+)/i],[u,[f,D],[d,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,I],[d,v]],[/((pebble))app/i],[f,u,[d,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,S],[d,E]],[/droid.+; (glass) \d/i],[u,[f,T],[d,E]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,P],[d,E]],[/(quest( 2| pro)?)/i],[u,[f,L],[d,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[p,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[p,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,U],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,M],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,p]]},z=function e(t,c){if(typeof t===a&&(c=t,t=r),!(this instanceof e))return new e(t,c).getResult();var u=typeof n!==o&&n.navigator?n.navigator:r,l=t||(u&&u.userAgent?u.userAgent:""),d=u&&u.userAgentData?u.userAgentData:r,f=c?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(K,c):K;return this.getBrowser=function(){var e={};return e.name=r,e.version=r,W.call(e,l,f.browser),e.major=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e.version),u&&u.brave&&typeof u.brave.isBrave==i&&(e.name="Brave"),e},this.getCPU=function(){var e={};return e.architecture=r,W.call(e,l,f.cpu),e},this.getDevice=function(){var e={};return e.vendor=r,e.model=r,e.type=r,W.call(e,l,f.device),!e.type&&d&&d.mobile&&(e.type=m),"Macintosh"==e.model&&u&&typeof u.standalone!==o&&u.maxTouchPoints&&u.maxTouchPoints>2&&(e.model="iPad",e.type=y),e},this.getEngine=function(){var e={};return e.name=r,e.version=r,W.call(e,l,f.engine),e},this.getOS=function(){var e={};return e.name=r,e.version=r,W.call(e,l,f.os),!e.name&&d&&"Unknown"!=d.platform&&(e.name=d.platform.replace(/chrome os/i,M).replace(/macos/i,U)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return l},this.setUA=function(e){return l=typeof e===s&&e.length>350?B(e,350):e,this},this.setUA(l),this};z.VERSION="0.7.34",z.BROWSER=j([l,p,c]),z.CPU=j([h]),z.DEVICE=j([u,f,d,v,m,g,y,E,_]),z.ENGINE=z.OS=j([l,p]),e.exports&&(t=e.exports=z),t.UAParser=z;var Y=typeof n!==o&&(n.jQuery||n.Zepto);if(Y&&!Y.ua){var q=new z;Y.ua=q.getResult(),Y.ua.get=function(){return q.getUA()},Y.ua.set=function(e){q.setUA(e);var t=q.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:S)}($f,$f.exports);var ep,tp=new(0,$f.exports),np=tp.getResult();function rp(e){return e&&tp.setUA(e),{name:ip(np=tp.getResult()),version:op(np),os:ap(np),osVersion:np.os.version}}function ip(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return Jf.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Jf.CHROME;case"Safari":case"Mobile Safari":return Jf.SAFARI;case"Edge":return Jf.EDGE;case"Firefox":return Jf.FIREFOX;case"QQBrowser":return Jf.QQ;case"Opera":return Jf.OPERA;case"WeChat":return Jf.WECHAT;default:return e.browser.name||""}}function op(e){return("Blink"===e.engine.name?e.engine.version||"":e.browser.version||"").split(".")[0]}function ap(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}function sp(){var e=rp();return!!("WebKit"===np.engine.name&&e.os===Xf.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Jf.SAFARI||pp()&&e.name!==Jf.SAFARI)}function cp(){var e=rp();if(sp()){if(e.os===Xf.MAC_OS)return!0;if(e.os===Xf.IOS){var t=np.os.version&&np.os.version.split(".");if(t&&14===Number(t[0])&&t[1]&&Number(t[1])>=3)return!0;if(t&&Number(t[0])>14)return!0}}return!1}function up(){return"WebKit"===np.engine.name}function lp(){return rp().name===Jf.CHROME}function dp(){return rp().name===Jf.SAFARI}function fp(){return rp().name===Jf.FIREFOX}function pp(){return rp().os===Xf.IOS}function hp(){var e=rp();return!(e.name!==Jf.CHROME||!e.osVersion)&&Number(e.version)<=90}function vp(){var e=rp();if(e.os!==Xf.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function mp(){var e=rp();if(e.os!==Xf.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])}function yp(){var e=rp();if(e.os!==Xf.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&0===Number(t[1])}function gp(){var e=rp();if(e.os!==Xf.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Ep(){var e=rp();if(e.os!==Xf.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}function _p(){return dp()&&navigator.maxTouchPoints>0}function bp(){return rp().name===Jf.WECHAT}function Sp(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function wp(){var e=rp();return e.name!==Jf.EDGE&&e.name!==Jf.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function kp(){return rp().os===Xf.ANDROID}function Tp(){var e=rp();return"Android"===e.os&&("Chrome"===e.name||e.name===Jf.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(ep||(ep={}));var Rp={exports:{}},Cp=Hn,Ip=B,Op=fn.f;Cp({target:"Object",stat:!0,forced:Object.defineProperty!==Op,sham:!Ip},{defineProperty:Op});var Ap=ve.Object,Np=Rp.exports=function(e,t,n){return Ap.defineProperty(e,t,n)};Ap.defineProperty.sham&&(Np.sham=!0);var Dp=Rp.exports;function xp(e,t,n){return t in e?Dp(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pp,Lp={exports:{}},Mp=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Up=Mp,jp=Object.prototype.toString,Vp=(Pp=Object.create(null),function(e){var t=jp.call(e);return Pp[t]||(Pp[t]=t.slice(8,-1).toLowerCase())});function Fp(e){return e=e.toLowerCase(),function(t){return Vp(t)===e}}function Bp(e){return Array.isArray(e)}function Wp(e){return void 0===e}var Gp=Fp("ArrayBuffer");function Hp(e){return null!==e&&"object"==typeof e}function Kp(e){if("object"!==Vp(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var zp=Fp("Date"),Yp=Fp("File"),qp=Fp("Blob"),Zp=Fp("FileList");function Xp(e){return"[object Function]"===jp.call(e)}var Jp=Fp("URLSearchParams");function Qp(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Bp(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var $p,eh=($p="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return $p&&e instanceof $p}),th={isArray:Bp,isArrayBuffer:Gp,isBuffer:function(e){return null!==e&&!Wp(e)&&null!==e.constructor&&!Wp(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||jp.call(e)===t||Xp(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Gp(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Hp,isPlainObject:Kp,isUndefined:Wp,isDate:zp,isFile:Yp,isBlob:qp,isFunction:Xp,isStream:function(e){return Hp(e)&&Xp(e.pipe)},isURLSearchParams:Jp,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Qp,merge:function e(){var t={};function n(n,r){Kp(t[r])&&Kp(n)?t[r]=e(t[r],n):Kp(n)?t[r]=e({},n):Bp(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)Qp(arguments[r],n);return t},extend:function(e,t,n){return Qp(t,(function(t,r){e[r]=n&&"function"==typeof t?Up(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[o=r[i]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Vp,kindOfTest:Fp,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(Wp(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:eh,isFileList:Zp},nh=th;function rh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ih=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(nh.isURLSearchParams(t))r=t.toString();else{var i=[];nh.forEach(t,(function(e,t){null!=e&&(nh.isArray(e)?t+="[]":e=[e],nh.forEach(e,(function(e){nh.isDate(e)?e=e.toISOString():nh.isObject(e)&&(e=JSON.stringify(e)),i.push(rh(t)+"="+rh(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},oh=th;function ah(){this.handlers=[]}ah.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},ah.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},ah.prototype.forEach=function(e){oh.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var sh=ah,ch=th,uh=th;function lh(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}uh.inherits(lh,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var dh=lh.prototype,fh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){fh[e]={value:e}})),Object.defineProperties(lh,fh),Object.defineProperty(dh,"isAxiosError",{value:!0}),lh.from=function(e,t,n,r,i,o){var a=Object.create(dh);return uh.toFlatObject(e,a,(function(e){return e!==Error.prototype})),lh.call(a,e.message,t,n,r,i),a.name=e.name,o&&Object.assign(a,o),a};var ph=lh,hh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vh=th,mh=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":vh.isDate(e)?e.toISOString():vh.isArrayBuffer(e)||vh.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,o){if(vh.isPlainObject(i)||vh.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+o);n.push(i),vh.forEach(i,(function(n,i){if(!vh.isUndefined(n)){var a,s=o?o+"."+i:i;if(n&&!o&&"object"==typeof n)if(vh.endsWith(i,"{}"))n=JSON.stringify(n);else if(vh.endsWith(i,"[]")&&(a=vh.toArray(n)))return void a.forEach((function(e){!vh.isUndefined(e)&&t.append(s,r(e))}));e(n,s)}})),n.pop()}else t.append(o,r(i))}(e),t},yh=ph,gh=th,Eh=gh.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),gh.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),gh.isString(r)&&a.push("path="+r),gh.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},_h=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},bh=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Sh=function(e,t){return e&&!_h(t)?bh(e,t):t},wh=th,kh=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Th=th,Rh=Th.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Th.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Ch=ph;function Ih(e){Ch.call(this,null==e?"canceled":e,Ch.ERR_CANCELED),this.name="CanceledError"}th.inherits(Ih,Ch,{__CANCEL__:!0});var Oh=Ih,Ah=th,Nh=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new yh("Request failed with status code "+n.status,[yh.ERR_BAD_REQUEST,yh.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)},Dh=Eh,xh=ih,Ph=Sh,Lh=function(e){var t,n,r,i={};return e?(wh.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=wh.trim(e.substr(0,r)).toLowerCase(),n=wh.trim(e.substr(r+1)),t){if(i[t]&&kh.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i},Mh=Rh,Uh=hh,jh=ph,Vh=Oh,Fh=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""},Bh=function(e){return new Promise((function(t,n){var r,i=e.data,o=e.headers,a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Ah.isFormData(i)&&Ah.isStandardBrowserEnv()&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+l)}var d=Ph(e.baseURL,e.url);function f(){if(c){var r="getAllResponseHeaders"in c?Lh(c.getAllResponseHeaders()):null,i={data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c};Nh((function(e){t(e),s()}),(function(e){n(e),s()}),i),c=null}}if(c.open(e.method.toUpperCase(),xh(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(n(new jh("Request aborted",jh.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new jh("Network Error",jh.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Uh;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new jh(t,r.clarifyTimeoutError?jh.ETIMEDOUT:jh.ECONNABORTED,e,c)),c=null},Ah.isStandardBrowserEnv()){var p=(e.withCredentials||Mh(d))&&e.xsrfCookieName?Dh.read(e.xsrfCookieName):void 0;p&&(o[e.xsrfHeaderName]=p)}"setRequestHeader"in c&&Ah.forEach(o,(function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete o[t]:c.setRequestHeader(t,e)})),Ah.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(r=function(e){c&&(n(!e||e&&e.type?new Vh:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r))),i||(i=null);var h=Fh(d);h&&-1===["http","https","file"].indexOf(h)?n(new jh("Unsupported protocol "+h+":",jh.ERR_BAD_REQUEST,e)):c.send(i)}))},Wh=th,Gh=function(e,t){ch.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Hh=ph,Kh=mh,zh={"Content-Type":"application/x-www-form-urlencoded"};function Yh(e,t){!Wh.isUndefined(e)&&Wh.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var qh,Zh={transitional:hh,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(qh=Bh),qh),transformRequest:[function(e,t){if(Gh(t,"Accept"),Gh(t,"Content-Type"),Wh.isFormData(e)||Wh.isArrayBuffer(e)||Wh.isBuffer(e)||Wh.isStream(e)||Wh.isFile(e)||Wh.isBlob(e))return e;if(Wh.isArrayBufferView(e))return e.buffer;if(Wh.isURLSearchParams(e))return Yh(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=Wh.isObject(e),i=t&&t["Content-Type"];if((n=Wh.isFileList(e))||r&&"multipart/form-data"===i){var o=this.env&&this.env.FormData;return Kh(n?{"files[]":e}:e,o&&new o)}return r||"application/json"===i?(Yh(t,"application/json"),function(e,t,n){if(Wh.isString(e))try{return(t||JSON.parse)(e),Wh.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Zh.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&Wh.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw Hh.from(e,Hh.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Wh.forEach(["delete","get","head"],(function(e){Zh.headers[e]={}})),Wh.forEach(["post","put","patch"],(function(e){Zh.headers[e]=Wh.merge(zh)}));var Xh=Zh,Jh=th,Qh=Xh,$h=function(e){return!(!e||!e.__CANCEL__)},ev=th,tv=function(e,t,n){var r=this||Qh;return Jh.forEach(n,(function(n){e=n.call(r,e,t)})),e},nv=$h,rv=Xh,iv=Oh;function ov(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new iv}var av=th,sv=function(e,t){t=t||{};var n={};function r(e,t){return av.isPlainObject(e)&&av.isPlainObject(t)?av.merge(e,t):av.isPlainObject(t)?av.merge({},t):av.isArray(t)?t.slice():t}function i(n){return av.isUndefined(t[n])?av.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!av.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return av.isUndefined(t[n])?av.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function s(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return av.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,r=t(e);av.isUndefined(r)&&t!==s||(n[e]=r)})),n},cv="0.27.2",uv=cv,lv=ph,dv={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){dv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var fv={};dv.transitional=function(e,t,n){function r(e,t){return"[Axios v"+uv+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new lv(r(i," has been removed"+(t?" in "+t:"")),lv.ERR_DEPRECATED);return t&&!fv[i]&&(fv[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var pv=th,hv=ih,vv=sh,mv=function(e){return ov(e),e.headers=e.headers||{},e.data=tv.call(e,e.data,e.headers,e.transformRequest),e.headers=ev.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ev.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||rv.adapter)(e).then((function(t){return ov(e),t.data=tv.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return nv(t)||(ov(e),t&&t.response&&(t.response.data=tv.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},yv=sv,gv=Sh,Ev={assertOptions:function(e,t,n){if("object"!=typeof e)throw new lv("options must be an object",lv.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new lv("option "+o+" must be "+c,lv.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new lv("Unknown option "+o,lv.ERR_BAD_OPTION)}},validators:dv},_v=Ev.validators;function bv(e){this.defaults=e,this.interceptors={request:new vv,response:new vv}}bv.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=yv(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&Ev.assertOptions(n,{silentJSONParsing:_v.transitional(_v.boolean),forcedJSONParsing:_v.transitional(_v.boolean),clarifyTimeoutError:_v.transitional(_v.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var s=[mv,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=t;r.length;){var u=r.shift(),l=r.shift();try{c=u(c)}catch(e){l(e);break}}try{o=mv(c)}catch(e){return Promise.reject(e)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},bv.prototype.getUri=function(e){e=yv(this.defaults,e);var t=gv(e.baseURL,e.url);return hv(t,e.params,e.paramsSerializer)},pv.forEach(["delete","get","head","options"],(function(e){bv.prototype[e]=function(t,n){return this.request(yv(n||{},{method:e,url:t,data:(n||{}).data}))}})),pv.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(yv(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}bv.prototype[e]=t(),bv.prototype[e+"Form"]=t(!0)}));var Sv=bv,wv=Oh;function kv(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new wv(e),t(n.reason))}))}kv.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},kv.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},kv.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},kv.source=function(){var e;return{token:new kv((function(t){e=t})),cancel:e}};var Tv=kv,Rv=th,Cv=th,Iv=Mp,Ov=Sv,Av=sv,Nv=function e(t){var n=new Ov(t),r=Iv(Ov.prototype.request,n);return Cv.extend(r,Ov.prototype,n),Cv.extend(r,n),r.create=function(n){return e(Av(t,n))},r}(Xh);Nv.Axios=Ov,Nv.CanceledError=Oh,Nv.CancelToken=Tv,Nv.isCancel=$h,Nv.VERSION=cv,Nv.toFormData=mh,Nv.AxiosError=ph,Nv.Cancel=Nv.CanceledError,Nv.all=function(e){return Promise.all(e)},Nv.spread=function(e){return function(t){return e.apply(null,t)}},Nv.isAxiosError=function(e){return Rv.isObject(e)&&!0===e.isAxiosError},Lp.exports=Nv,Lp.exports.default=Nv;var Dv,xv=Lp.exports,Pv=function(){function e(t){h(this,e),xp(this,"logger",void 0),xp(this,"prefixLists",[]),this.logger=t}return v(e,[{key:"debug",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).debug.apply(e,m(this.prefixLists).concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).info.apply(e,m(this.prefixLists).concat(n))}},{key:"warning",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).warning.apply(e,m(this.prefixLists).concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).error.apply(e,m(this.prefixLists).concat(n))}},{key:"prefix",value:function(e){return this.prefixLists.push(e),this}},{key:"popPrefix",value:function(){return this.prefixLists.pop(),this}}]),e}(),Lv=function(){function e(){h(this,e),xp(this,"_events",{}),xp(this,"addListener",this.on)}return v(e,[{key:"getListeners",value:function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]}},{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}},{key:"once",value:function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}},{key:"off",value:function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}}},{key:"removeAllListeners",value:function(e){e?delete this._events[e]:this._events={}}},{key:"emit",value:function(e){this._events[e]||(this._events[e]=[]);for(var t=this._events[e].map((function(e){return e})),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o+=1){var a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,r||[])}}},{key:"_indexOfListener",value:function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}}]),e}(),Mv=new(function(e){f(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"reportLogUploadError",value:function(e){this.emit("REPORT_LOG_UPLOAD",e)}}]),n}(Lv));!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION"}(Dv||(Dv={}));var Uv=function(e){f(n,e);var t=p(n);function n(e){var r;h(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0;return r=t.call(this,i),xp(l(r),"code",void 0),xp(l(r),"message",void 0),xp(l(r),"data",void 0),xp(l(r),"name","AgoraRTCException"),r.code=e,r.message="AgoraRTCError ".concat(r.code,": ").concat(i),r.data=o,r}return v(n,[{key:"toString",value:function(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===e&&zv.error(this.toString()),"warning"===e&&zv.warning(this.toString()),this}},{key:"throw",value:function(){throw this.print(),this}}]),n}(d(Error)),jv={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Vv(e,t){var n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function Fv(e,t,n,r){var i=Object.assign({},jv,r),o=i.timeout,a=function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return new Vd((function(t){window.setTimeout(t,e)}))}(o);case 2:o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=!1,l=new Vd(function(){var r=u(c().mark((function r(o,u){var l,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=t||function(){return!1},n=n||function(){return!0},l=0;case 2:if(!(l<i.maxRetryCount)){r.next=28;break}if(!s){r.next=5;break}return r.abrupt("return",u(new Uv(Dv.OPERATION_ABORTED)));case 5:return r.prev=5,r.next=8,e();case 8:if(d=r.sent,t(d,l)){r.next=11;break}return r.abrupt("return",o(d));case 11:if(l+1!==i.maxRetryCount){r.next=13;break}return r.abrupt("return",o(d));case 13:return r.next=15,a();case 15:r.next=25;break;case 17:if(r.prev=17,r.t0=r.catch(5),n(r.t0,l)){r.next=21;break}return r.abrupt("return",u(r.t0));case 21:if(l+1!==i.maxRetryCount){r.next=23;break}return r.abrupt("return",u(r.t0));case 23:return r.next=25,a();case 25:l+=1,r.next=2;break;case 28:case"end":return r.stop()}}),r,null,[[5,17]])})));return function(e,t){return r.apply(this,arguments)}}());return l.cancel=function(){return s=!0},l}function Bv(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function Wv(){var e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var Gv={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Hv=Date.now(),Kv=function(e){for(var t in Gv)if(Object.prototype.hasOwnProperty.call(Gv,t)&&Gv[t]===e)return t;return"DEFAULT"},zv=new(function(){function e(){var t=this;h(this,e),xp(this,"proxyServerURL",void 0),xp(this,"logLevel",Gv.DEBUG),xp(this,"uploadState","collecting"),xp(this,"uploadLogWaitingList",[]),xp(this,"uploadLogUploadingList",[]),xp(this,"uploadErrorCount",0),xp(this,"currentLogID",0),xp(this,"url",void 0),xp(this,"extLog",(function(e,n){t.appendLogToWaitingList.apply(t,[e].concat(m(n)))}))}return v(e,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Gv.DEBUG].concat(t);this.log.apply(this,r)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Gv.INFO].concat(t);this.log.apply(this,r)}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Gv.WARNING].concat(t);this.log.apply(this,r)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Gv.ERROR].concat(t);this.log.apply(this,r)}},{key:"upload",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Gv.DEBUG].concat(t);this.uploadLog.apply(this,r)}},{key:"setLogLevel",value:function(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}},{key:"enableLogUpload",value:function(){am("UPLOAD_LOG",!0)}},{key:"disableLogUpload",value:function(){am("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}},{key:"setProxyServer",value:function(e){this.proxyServerURL=e}},{key:"prefix",value:function(e){return new Pv(this).prefix(e)}},{key:"log",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-Hv<100)setTimeout((function(){e.log.apply(e,n)}),Date.now()-Hv);else{var i=Math.max(0,Math.min(4,n[0]));if(n[0]=Bv()+" Agora-SDK [".concat(Kv(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n)),!(i<this.logLevel)){var o=Bv()+" %cAgora-SDK [".concat(Kv(i),"]:"),a=[];if(!sm("USE_NEW_LOG"))switch(i){case Gv.DEBUG:a=[o,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,a);break;case Gv.INFO:a=[o,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,a);break;case Gv.WARNING:a=[o,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,a);break;case Gv.ERROR:a=[o,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,a)}}}}},{key:"uploadLog",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-Hv<100)setTimeout((function(){e.uploadLog.apply(e,n)}),Date.now()-Hv);else{var i=Math.max(0,Math.min(4,n[0]));n[0]=Bv()+" Agora-SDK [".concat(Kv(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n))}}},{key:"appendLogToWaitingList",value:function(e){if(sm("UPLOAD_LOG")){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=Wv()+" Agora-SDK [".concat(Kv(e),"]:"):n[0]=Wv()+" Agora-SDK [".concat(Kv(e),"]:");var i="";n.forEach((function(e){"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}}},{key:"startUpload",value:function(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}},{key:"uploadLogs",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.uploadLogUploadingList,n={sdk_version:qv,process_id:sm("PROCESS_ID"),payload:JSON.stringify(t)},e.abrupt("return",Fv(u(c().mark((function e(){var t,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xv.post(r.url||(r.proxyServerURL?"https://".concat(r.proxyServerURL,"/ls/?h=").concat(sm("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(sm("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});case 2:if("OK"===(t=e.sent).data){e.next=6;break}throw(i=new Error("unexpected upload log response")).response=t,i;case 6:case"end":return e.stop()}}),e)}))),(function(){return r.uploadLogUploadingList=[],!1}),(function(e){return e.response?Mv.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?Mv.reportLogUploadError({status:e.request.status,message:e.message}):Mv.reportLogUploadError({status:-1,message:e.message}),!0}),{timeout:sm("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:sm("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadLogInterval",value:function(){var e=this;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,sm("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((function(){e.uploadErrorCount=0,e.uploadLogWaitingList.length>0&&window.setTimeout((function(){return e.uploadLogInterval()}),sm("UPLOAD_LOG_INTERVAL"))})).catch((function(t){e.uploadErrorCount+=1,e.uploadErrorCount<2?window.setTimeout((function(){return e.uploadLogInterval()}),sm("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((function(){return e.uploadLogInterval()}),sm("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}}]),e}()),Yv="v4.17.0-0-gf6ae6c87-dirty(3/22/2023, 2:41:22 PM)",qv=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;var t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n=t[1],r=t[2];return"".concat(n,".").concat(r)}var i=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){var o=i[1],a=i[2];return"".concat(o,".").concat(100*(Number(a)+1))}return"4.0.0.999"}("4.17.0"),Zv=function(){try{return!0===JSON.parse("true")}catch(b){return!0}}(),Xv=["CHINA","GLOBAL"],Jv=function(){var e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");for(var r=n.join(""),i=[],o=0;o<6;o++)i.push("1");var a=i.join(""),s={};return s[e]=r,s[t]=a,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Jv;var Qv={"90p":dm(160,90),"90p_1":dm(160,90),"120p":dm(160,120,15,30,65),"120p_1":dm(160,120,15,30,65),"120p_3":dm(120,120,15,30,50),"120p_4":dm(212,120),"180p":dm(320,180,15,30,140),"180p_1":dm(320,180,15,30,140),"180p_3":dm(180,180,15,30,100),"180p_4":dm(240,180,15,30,120),"240p":dm(320,240,15,40,200),"240p_1":dm(320,240,15,40,200),"240p_3":dm(240,240,15,40,140),"240p_4":dm(424,240,15,40,220),"360p":dm(640,360,15,80,400),"360p_1":dm(640,360,15,80,400),"360p_3":dm(360,360,15,80,260),"360p_4":dm(640,360,30,80,600),"360p_6":dm(360,360,30,80,400),"360p_7":dm(480,360,15,80,320),"360p_8":dm(480,360,30,80,490),"360p_9":dm(640,360,15,80,800),"360p_10":dm(640,360,24,80,800),"360p_11":dm(640,360,24,80,1e3),"480p":dm(640,480,15,100,500),"480p_1":dm(640,480,15,100,500),"480p_2":dm(640,480,30,100,1e3),"480p_3":dm(480,480,15,100,400),"480p_4":dm(640,480,30,100,750),"480p_6":dm(480,480,30,100,600),"480p_8":dm(848,480,15,100,610),"480p_9":dm(848,480,30,100,930),"480p_10":dm(640,480,10,100,400),"720p":dm(1280,720,15,120,1130),"720p_1":dm(1280,720,15,120,1130),"720p_2":dm(1280,720,30,120,2e3),"720p_3":dm(1280,720,30,120,1710),"720p_5":dm(960,720,15,120,910),"720p_6":dm(960,720,30,120,1380),"1080p":dm(1920,1080,15,120,2080),"1080p_1":dm(1920,1080,15,120,2080),"1080p_2":dm(1920,1080,30,120,3e3),"1080p_3":dm(1920,1080,30,120,3150),"1080p_5":dm(1920,1080,60,120,4780),"1440p":dm(2560,1440,30,120,4850),"1440p_1":dm(2560,1440,30,120,4850),"1440p_2":dm(2560,1440,60,120,7350),"4k":dm(3840,2160,30,120,8910),"4k_1":dm(3840,2160,30,120,8910),"4k_3":dm(3840,2160,60,120,13500)},$v={"480p":fm(640,480,5),"480p_1":fm(640,480,5),"480p_2":fm(640,480,30),"480p_3":fm(640,480,15),"720p":fm(1280,720,5),"720p_1":fm(1280,720,5),"720p_2":fm(1280,720,30),"720p_3":fm(1280,720,15),"1080p":fm(1920,1080,5),"1080p_1":fm(1920,1080,5),"1080p_2":fm(1920,1080,30),"1080p_3":fm(1920,1080,15)},em={"1SL1TL":pm(1,1),"3SL3TL":pm(3,3),"2SL3TL":pm(2,3)};function tm(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},Qv[e]):e}function nm(e){return"string"==typeof e?Object.assign({},$v[e]):e}function rm(e){return"string"==typeof e?Object.assign({},em[e]):e}var im={speech_low_quality:lm(16e3,!1),speech_standard:lm(32e3,!1,18),music_standard:lm(48e3,!1),standard_stereo:lm(48e3,!0,56),high_quality:lm(48e3,!1,128),high_quality_stereo:lm(48e3,!0,192)};function om(e){return"string"==typeof e?Object.assign({},im[e]):e}function am(e,t,n){Object.keys(cm).includes(e)&&(!n&&Object.keys(um).includes(e)||(cm[e]=t))}function sm(e){return cm[e]}var cm={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:Xv,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,AV_SYNC:!0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},um={};function lm(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function dm(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function fm(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function pm(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}Zv||(cm.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],cm.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],cm.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],cm.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],cm.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],cm.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],cm.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",cm.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",cm.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",cm.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",cm.AREAS=["NORTH_AMERICA","OVERSEA"]);var hm=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],vm=[],mm=[],ym=Mt,gm=fn,Em=J,_m=function(e,t,n){var r=ym(t);r in e?gm.f(e,r,Em(0,n)):e[r]=n},bm=ri,Sm=Jn,wm=_m,km=x.Array,Tm=Math.max,Rm=function(e,t,n){for(var r=Sm(e),i=bm(t,r),o=bm(void 0===n?r:n,r),a=km(Tm(o-i,0)),s=0;i<o;i++,s++)wm(a,s,e[i]);return a.length=s,a},Cm=Rm,Im=Math.floor,Om=function e(t,n){var r=t.length,i=Im(r/2);return r<8?Am(t,n):Nm(t,e(Cm(t,0,i),n),e(Cm(t,i),n),n)},Am=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Nm=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},Dm=Om,xm=be.match(/firefox\/(\d+)/i),Pm=!!xm&&+xm[1],Lm=/MSIE|Trident/.test(be),Mm=be.match(/AppleWebKit\/(\d+)\./),Um=!!Mm&&+Mm[1],jm=Hn,Vm=A,Fm=He,Bm=at,Wm=Jn,Gm=Jo,Hm=w,Km=Dm,zm=ar,Ym=Pm,qm=Lm,Zm=Ie,Xm=Um,Jm=[],Qm=Vm(Jm.sort),$m=Vm(Jm.push),ey=Hm((function(){Jm.sort(void 0)})),ty=Hm((function(){Jm.sort(null)})),ny=zm("sort"),ry=!Hm((function(){if(Zm)return Zm<70;if(!(Ym&&Ym>3)){if(qm)return!0;if(Xm)return Xm<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Jm.push({k:t+r,v:n})}for(Jm.sort((function(e,t){return t.v-e.v})),r=0;r<Jm.length;r++)t=Jm[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));jm({target:"Array",proto:!0,forced:ey||!ty||!ny||!ry},{sort:function(e){void 0!==e&&Fm(e);var t=Bm(this);if(ry)return void 0===e?Qm(t):Qm(t,e);var n,r,i=[],o=Wm(t);for(r=0;r<o;r++)r in t&&$m(i,t[r]);for(Km(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Gm(t)>Gm(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)delete t[r++];return t}});var iy,oy,ay,sy=fr("Array").sort,cy=N,uy=sy,ly=Array.prototype,dy=function(e){var t=e.sort;return e===ly||cy(ly,e)&&t===ly.sort?uy:t};function fy(e,t){if("boolean"!=typeof e)throw new Uv(Dv.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function py(e,t,n){if(!n.includes(e))throw new Uv(Dv.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!Sy(e))throw new Uv(Dv.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function vy(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new Uv(Dv.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&hy(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&hy(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&hy(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&hy(e.ideal,"".concat(t,".ideal"),1,1/0)}else hy(e,t,1,1/0)}function my(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Uv(Dv.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!by(e,n,r,i))throw new Uv(Dv.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function yy(e,t){if(!Array.isArray(e))throw new Uv(Dv.INVALID_PARAMS,"".concat(t," should be an array"))}function gy(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw zv.error("Invalid Channel Name ".concat(e)),new Uv(Dv.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Ey(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||by(e,1,255)))throw zv.error("Invalid UID ".concat(e," ").concat(typeof e)),new Uv(Dv.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&zv.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function _y(e){return null==e}function by(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||wy(e))}function Sy(e){return"number"==typeof e&&e%1==0}function wy(e){if("string"!=typeof e)return!1;for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(iy||(iy={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(oy||(oy={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(ay||(ay={}));var ky={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function Ty(e){return my(e.reportId,"params.reportId",0,100,!1),my(e.category,"params.category",0,100,!1),my(e.event,"params.event",0,100,!1),my(e.label,"params.label",0,100,!1),hy(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}var Ry,Cy,Iy,Oy,Ay,Ny,Dy,xy,Py,Ly,My,Uy,jy,Vy,Fy,By,Wy,Gy,Hy,Ky,zy,Yy,qy,Zy,Xy={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};function Jy(e){return hy(e.timeout,"config.timeout",0,1e5),hy(e.timeoutFactor,"config.timeoutFactor",0,100,!1),hy(e.maxRetryCount,"config.maxRetryConfig",0,1/0),hy(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Qy(e){return py(e.codec,"config.codec",["vp8","vp9","av1","h264"]),py(e.mode,"config.mode",["rtc","live"]),void 0!==e.audioCodec&&py(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&my(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&eg(e.turnServer),void 0!==e.httpRetryConfig&&Jy(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Jy(e.websocketRetryConfig),!0}function $y(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((function(e){if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function eg(e){return my(e.turnServerURL,"turnServerURL"),my(e.username,"username"),my(e.password,"password"),e.udpport&&hy(e.udpport,"udpport",1,99999,!0),e.forceturn&&fy(e.forceturn,"forceturn"),e.security&&fy(e.security,"security"),e.tcpport&&hy(e.tcpport,"tcpport",1,99999,!0),!0}function tg(e){return void 0!==e.level&&py(e.level,"level",[1,2,3]),!0}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(Ry||(Ry={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Cy||(Cy={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Iy||(Iy={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(Oy||(Oy={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Ay||(Ay={})),function(e){e.TRACER="tracer"}(Ny||(Ny={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Dy||(Dy={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(xy||(xy={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Py||(Py={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Ly||(Ly={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(My||(My={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Uy||(Uy={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(jy||(jy={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(Vy||(Vy={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Fy||(Fy={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result"}(By||(By={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(Wy||(Wy={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Gy||(Gy={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback"}(Hy||(Hy={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter"}(Ky||(Ky={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.TRANSPORT_STATS="transport_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(zy||(zy={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Yy||(Yy={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(qy||(qy={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(Zy||(Zy={}));var ng,rg,ig,og={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},ag={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},sg={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},cg={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ug={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(ng||(ng={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(rg||(rg={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(ig||(ig={}));var lg={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},dg={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function fg(e,t){my(e.url,"".concat(t,".url"),1,1e3,!1),_y(e.x)||hy(e.x,"".concat(t,".x"),0,1e4),_y(e.y)||hy(e.y,"".concat(t,".y"),0,1e4),_y(e.width)||hy(e.width,"".concat(t,".width"),0,1e4),_y(e.height)||hy(e.height,"".concat(t,".height"),0,1e4),_y(e.zOrder)||hy(e.zOrder,"".concat(t,".zOrder"),0,255),_y(e.alpha)||hy(e.alpha,"".concat(t,".alpha"),0,1,!1)}var pg,hg,vg,mg,yg,gg,Eg,_g,bg,Sg,wg,kg,Tg,Rg,Cg,Ig,Og,Ag,Ng,Dg={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},xg={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};function Pg(e){if(!e.channelName)throw new Uv(Dv.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new Uv(Dv.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&my(e.token,"info.token",1,2047),Ey(e.uid),gy(e.channelName),!0}function Lg(e){return py(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(pg||(pg={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(hg||(hg={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(vg||(vg={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(mg||(mg={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(yg||(yg={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(gg||(gg={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Eg||(Eg={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(_g||(_g={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(bg||(bg={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(Sg||(Sg={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data"}(wg||(wg={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}(kg||(kg={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(Tg||(Tg={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(Rg||(Rg={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Cg||(Cg={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(Ig||(Ig={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(Og||(Og={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Ag||(Ag={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(Ng||(Ng={}));var Mg,Ug=[Ng.AFRICA,Ng.ASIA,Ng.CHINA,Ng.EUROPE,Ng.GLOBAL,Ng.INDIA,Ng.JAPAN,Ng.NORTH_AMERICA,Ng.OCEANIA,Ng.OVERSEA,Ng.SOUTH_AMERICA];!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(Mg||(Mg={}));var jg,Vg,Fg,Bg,Wg,Gg,Hg,Kg,zg,Yg,qg,Zg,Xg,Jg,Qg,$g={CHINA:{},ASIA:{CODE:Mg.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Mg.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Mg.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Mg.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Mg.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Mg.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Mg.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Mg.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Mg.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Mg.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Mg.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Mg.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Mg.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};Zv&&($g.CHINA={CODE:Mg.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(jg||(jg={}));var eE=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"onICEConnectionStateChange",void 0),xp(l(i),"onConnectionStateChange",void 0),xp(l(i),"onDTLSTransportStateChange",void 0),xp(l(i),"onDTLSTransportError",void 0),xp(l(i),"onICETransportStateChange",void 0),xp(l(i),"onFirstAudioReceived",void 0),xp(l(i),"onFirstVideoReceived",void 0),xp(l(i),"onFirstAudioDecoded",void 0),xp(l(i),"onFirstVideoDecoded",void 0),xp(l(i),"onFirstVideoDecodedTimeout",void 0),xp(l(i),"onSelectedLocalCandidateChanged",void 0),xp(l(i),"onSelectedRemoteCandidateChanged",void 0),xp(l(i),"establishPromise",void 0),i}return v(n)}(Lv);!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(Vg||(Vg={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(Fg||(Fg={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(Bg||(Bg={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(Wg||(Wg={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState"}(Gg||(Gg={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Hg||(Hg={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Kg||(Kg={})),function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(zg||(zg={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(Yg||(Yg={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(qg||(qg={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(Zg||(Zg={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Xg||(Xg={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(Jg||(Jg={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(Qg||(Qg={}));var tE,nE={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1};function rE(){return nE}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(tE||(tE={}));var iE=te,oE=Array.isArray||function(e){return"Array"==iE(e)},aE=x,sE=oE,cE=Rc,uE=he,lE=Tt("species"),dE=aE.Array,fE=function(e){var t;return sE(e)&&(t=e.constructor,(cE(t)&&(t===dE||sE(t.prototype))||uE(t)&&null===(t=t[lE]))&&(t=void 0)),void 0===t?dE:t},pE=function(e,t){return new(fE(e))(0===t?0:t)},hE=dn,vE=se,mE=at,yE=Jn,gE=pE,EE=A([].push),_E=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var f,p,h=mE(c),v=vE(h),m=hE(u,l),y=yE(v),g=0,E=d||gE,_=t?E(c,y):n||a?E(c,0):void 0;y>g;g++)if((s||g in v)&&(p=m(f=v[g],g,h),e))if(t)_[g]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:EE(_,f)}else switch(e){case 4:return!1;case 7:EE(_,f)}return o?-1:r||i?i:_}},bE={forEach:_E(0),map:_E(1),filter:_E(2),some:_E(3),every:_E(4),find:_E(5),findIndex:_E(6),filterReject:_E(7)},SE=bE.forEach,wE=ar("forEach")?[].forEach:function(e){return SE(this,e,arguments.length>1?arguments[1]:void 0)};Hn({target:"Array",proto:!0,forced:[].forEach!=wE},{forEach:wE});var kE=fr("Array").forEach,TE=_o,RE=ut,CE=N,IE=kE,OE=Array.prototype,AE={DOMTokenList:!0,NodeList:!0},NE=function(e){var t=e.forEach;return e===OE||CE(OE,e)&&t===OE.forEach||RE(AE,TE(e))?IE:t},DE=at,xE=xi;Hn({target:"Object",stat:!0,forced:w((function(){xE(1)}))},{keys:function(e){return xE(DE(e))}});var PE=ve.Object.keys,LE=yr,ME=Hn,UE=oE,jE=A([].reverse),VE=[1,2];ME({target:"Array",proto:!0,forced:String(VE)===String(VE.reverse())},{reverse:function(){return UE(this)&&(this.length=this.length),jE(this)}});var FE=fr("Array").reverse,BE=N,WE=FE,GE=Array.prototype,HE=function(e){var t=e.reverse;return e===GE||BE(GE,e)&&t===GE.reverse?WE:t},KE=w,zE=Ie,YE=Tt("species"),qE=function(e){return zE>=51||!KE((function(){var t=[];return(t.constructor={})[YE]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ZE=Hn,XE=x,JE=oE,QE=Rc,$E=he,e_=ri,t_=Jn,n_=fe,r_=_m,i_=Tt,o_=Pc,a_=qE("slice"),s_=i_("species"),c_=XE.Array,u_=Math.max;ZE({target:"Array",proto:!0,forced:!a_},{slice:function(e,t){var n,r,i,o=n_(this),a=t_(o),s=e_(e,a),c=e_(void 0===t?a:t,a);if(JE(o)&&(n=o.constructor,(QE(n)&&(n===c_||JE(n.prototype))||$E(n)&&null===(n=n[s_]))&&(n=void 0),n===c_||void 0===n))return o_(o,s,c);for(r=new(void 0===n?c_:n)(u_(c-s,0)),i=0;s<c;s++,i++)s in o&&r_(r,i,o[s]);return r.length=i,r}});var l_=fr("Array").slice,d_=N,f_=l_,p_=Array.prototype,h_=function(e){var t=e.slice;return e===p_||d_(p_,e)&&t===p_.slice?f_:t};function v_(e,t,n,r,i){var o,a,s,c={};return NE(o=PE(r)).call(o,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=LE(a=HE(s=h_(n).call(n)).call(s)).call(a,(function(n,r){return r(e,t,n)||n}),c),i&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),void 0===c.initializer&&(Dp(e,t,c),c=null),c}var m_=fr("Array").keys,y_=_o,g_=ut,E_=N,__=m_,b_=Array.prototype,S_={DOMTokenList:!0,NodeList:!0},w_=function(e){var t=e.keys;return e===b_||E_(b_,e)&&t===b_.keys||g_(S_,y_(e))?__:t};function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k_(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R_(e,t,n,r){return new Vd((function(i,o){t.timeout=t.timeout||sm("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),QS(t.data)):n&&(t.data.size?t.data.size:t.data instanceof FormData?function(e){var t=0;/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((function(e){t+="string"==typeof e?QS(e):e.size}))}(t.data):QS(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,xv.request(t).then((function(e){"string"==typeof e.data?QS(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?e.data.byteLength:QS(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((function(e){xv.isCancel(e)?o(new Uv(Dv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Uv(Dv.NETWORK_TIMEOUT,e.message)):e.response?o(new Uv(Dv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Uv(Dv.NETWORK_ERROR,e.message))}))}))}function C_(e,t){return I_.apply(this,arguments)}function I_(){return I_=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([n.data],{type:"buffer"}),e.next=3,R_(t,T_(T_({},n),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}var O_=new(function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"_moduleName","network-indicator"),xp(l(e),"_networkState",Hg.ONLINE),xp(l(e),"onlineWaiter",void 0),window.addEventListener("online",(function(){e.networkState=Hg.ONLINE})),window.addEventListener("offline",(function(){e.networkState=Hg.OFFLINE})),e}return v(n,[{key:"networkState",get:function(){return this._networkState},set:function(e){var t=this;zv.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(Kg.NETWORK_STATE_CHANGE,e,this._networkState),e===Hg.ONLINE?this.emit(Kg.ONLINE):e===Hg.OFFLINE&&(this.onlineWaiter=new Vd((function(e){t.once(Kg.ONLINE,(function(){t.onlineWaiter=void 0,e(Hg.ONLINE)}))})),this.emit(Kg.OFFLINE)),this._networkState=e}}]),n}(Lv)),A_=!1,N_=new(function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.apply(this,arguments),xp(l(e),"onAutoplayFailed",void 0),xp(l(e),"onAudioAutoplayFailed",void 0),e}return v(n)}(Lv));function D_(){if(rp(),!A_){var e=function e(t){t.preventDefault(),A_=!1,Tp()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};A_=!0,Tp()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),zv.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),N_.onAutoplayFailed?N_.onAutoplayFailed():N_.onAudioAutoplayFailed?zv.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):zv.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),N_.emit("autoplay-failed")}}function x_(e){return(new TextEncoder).encode(e)}var P_=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},L_=function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n="";return new Uint8Array(e).forEach((function(e){n+=e.toString(t).padStart(2,"0")})),n},e.next=3,crypto.subtle.digest("SHA-256",x_(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,16));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M_(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var i=r.value;if("function"==typeof i){var o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r;if(e.argsMap)try{s=e.argsMap.apply(e,[this].concat(r))}catch(e){zv.warning(e),s=[]}try{JSON.stringify(s)}catch(e){zv.warning("arguments for method ".concat(o,".").concat(n," not serializable for apiInvoke.")),s=[]}var c=(e.report||V_).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(n),options:s,tag:Ny.TRACER,reportResult:e.reportResult},e.throttleTime);try{var u=i.apply(this,r);return u instanceof Vd?u.then((function(t){return c.onSuccess(e.reportResult&&t),t})).catch((function(e){throw c.onError(e),e})):(c.onSuccess(e.reportResult&&u),u)}catch(e){throw c.onError(e),e}}}return r}}var V_=new(function(){function e(){var t=this;h(this,e),xp(this,"baseInfoMap",new Map),xp(this,"proxyServer",void 0),xp(this,"clientList",vm),xp(this,"eventUploadTimer",void 0),xp(this,"setSessionIdTimer",void 0),xp(this,"url",void 0),xp(this,"backupUrl",void 0),xp(this,"_appId",void 0),xp(this,"keyEventUploadPendingItems",[]),xp(this,"normalEventUploadPendingItems",[]),xp(this,"apiInvokeUploadPendingItems",[]),xp(this,"apiInvokeCount",0),xp(this,"ltsList",[]),xp(this,"lastSendNormalEventTime",Date.now()),xp(this,"customReportCounterTimer",void 0),xp(this,"customReportCount",0),xp(this,"extApiInvoke",function(){var e=u(c().mark((function e(n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s(n);try{for(r.s();!(i=r.n()).done;)o=i.value,a=U_(U_({},o),{},{sid:null,invokeId:++t.apiInvokeCount,tag:Ny.TRACER}),t.sendApiInvoke(a)}catch(c){r.e(c)}finally{r.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),sm("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),sm("EVENT_REPORT_SEND_INTERVAL"))}return v(e,[{key:"adjustSessionStartTime",value:function(e){if(this.baseInfoMap.has(e)||this.baseInfoMap.get(e)){var t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,zv.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}else zv.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"))}},{key:"setAppId",value:function(e){this._appId=e}},{key:"reportApiInvoke",value:function(e,t,n){var r=this;t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;var i=Date.now();this.apiInvokeCount+=1;var o=this.apiInvokeCount,a=function(){return{tag:t.tag,invokeId:o,sid:e,name:t.name,apiInvokeTime:i,options:t.options,states:t.states||null}},s=!!sm("SHOW_REPORT_INVOKER_LOG");s&&zv.info("".concat(t.name," start"),t.options);var c=!1;$S(t.timeout).then((function(){c||(r.sendApiInvoke(U_(U_({},a()),{},{error:Dv.API_INVOKE_TIMEOUT,success:!1})),zv.debug("".concat(t.name," timeout")))}));var u=new Uv(Dv.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:function(e){var i=function(){if(c)throw u;return c=!0,r.sendApiInvoke(U_(U_({},a()),{},{success:!0},t.reportResult&&{result:e})),s&&zv.info("".concat(t.name," onSuccess")),e};return n?Ew(i,t.name+"Success",n,(function(){return c=!0})):i()},onError:function(e){var i=function(){if(c)throw e;c=!0,r.sendApiInvoke(U_(U_({},a()),{},{success:!1,error:e})),s&&zv.info("".concat(t.name," onFailure"),e.toString())};return n?Ew(i,t.name+"Error",n,(function(){return c=!0})):i()}}}},{key:"sessionInit",value:function(e,t){if(!this.baseInfoMap.has(e)){var n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;var i=Object.assign({},{willUploadConsoleLog:sm("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Zv?"global":"oversea",areas:sm("AREAS")&&sm("AREAS").join(",")},t.extend),o=Date.now(),a=U_(U_({},r),{},{eventType:Ry.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:Yv,lts:o,elapse:o-n,extend:JSON.stringify(i),mode:t.mode,process:sm("PROCESS_ID"),appType:sm("APP_TYPE"),success:!0,version:qv});this.send({type:Cy.SESSION,data:a},!0)}}},{key:"joinChooseServer",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:Cy.JOIN_CHOOSE_SERVER,data:o},!0)}}},{key:"reqUserAccount",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:Cy.REQ_USER_ACCOUNT,data:o},!0)}}},{key:"joinGateway",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;var i=Date.now(),o=t.firstSuccess,a=t.avoidJoinStartTime,s=t.isProxy,c=t.addr,u=i-(o&&a?a:n.startTime),l=U_(U_({},r),{},{eventType:Ry.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:u,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),d=l.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:Cy.JOIN_GATEWAY,data:l},!0);else{var f;if(c)if(s){var p=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),h=c.match(/p=[0-9]{1,6}/g);f={isSuccess:d,gatewayIp:p&&p.length?p[0].split("=")[1].replace(/-/g,"."):"",port:h&&h.length?h[0].split("=")[1]:"",isProxy:s?1:0}}else{var v=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),m=c.match(/:[0-9]{1,6}/g);f={isSuccess:d,gatewayIp:v&&v.length?v[0].split("//")[1].replace(/-/g,"."):"",port:m&&m.length?m[0].split(":")[1]:"",isProxy:s?1:0}}else f={isSuccess:d,gatewayIp:"",port:"",isProxy:s?1:0};delete l.success,delete l.eventType,delete l.firstSuccess,l.vid=Number(l.vid);var y=Object.assign({},l,f,{eventType:Ry.REJOIN_GATEWAY});this.send({type:Cy.RE_JOIN_GATEWAY,data:y},!0)}}}},{key:"joinChannelTimeout",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=Date.now(),i=U_(U_({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:Cy.JOIN_CHANNEL_TIMEOUT,data:i},!0)}}},{key:"publish",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:Cy.PUBLISH,data:o},!0)}}},{key:"subscribe",value:function(e,t,n){var r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now(),a=U_(U_({},i),{},{eventType:Ry.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?a.peerSuid=t.peerid:a.peer=t.peerid,this.send({type:Cy.SUBSCRIBE,data:a},!0)}}},{key:"wsCompressorInit",value:function(e){var t,n=m(w_(t=this.baseInfoMap).call(t)),r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(i){var o=i.info,a=Date.now(),s=U_(U_({},o),{},{eventType:Ry.WS_COMPRESSOR_INIT,lts:a,eventElapse:e.eventElapse,elapse:a-i.startTime,status:e.status?1:2});this.send({type:Cy.WS_COMPRESSOR_INIT,data:s},!0)}}},{key:"firstRemoteVideoDecode",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=U_(U_(U_({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a,firstDecodeFrame:Math.max(a-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:s},!0)}}},{key:"firstRemoteFrame",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=U_(U_(U_({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a});this.send({type:n,data:s},!0)}}},{key:"onGatewayStream",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=U_(U_(U_({},o),r),{},{eventType:t,lts:a});this.send({type:n,data:s},!0)}}},{key:"streamSwitch",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:Cy.STREAM_SWITCH,data:o},!0)}}},{key:"requestProxyAppCenter",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Cy.REQUEST_PROXY_APPCENTER,data:o},!0)}}},{key:"requestProxyWorkerManager",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{eventType:Ry.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Cy.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}}},{key:"setProxyServer",value:function(e){this.proxyServer=e,e?zv.debug("reportProxyServerurl: ".concat(e)):zv.debug("disable reportProxyServerurl: ".concat(e))}},{key:"peerPublishStatus",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:Cy.PEER_PUBLISH_STATUS,data:o},!0)}}},{key:"workerEvent",value:function(e,t){var n=this,r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now();(function(e,t,n){var r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";for(var i=QS(JSON.stringify(e)),o=0,a=[],s=0,c=0;c<r.length;c++)(s+=r.charCodeAt(c)<=127?1:3)<=n-i||(a[a.length]=JS(JS({},e),{},y({},t,r.substring(o,c))),o=c,s=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(a[a.length]=JS(JS({},e),{},y({},t,r.substring(o)))),a})(U_(U_(U_({},i),t),{},{elapse:o-r.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach((function(e){return n.send({type:Cy.WORKER_EVENT,data:e},!0)}))}}},{key:"apworkerEvent",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_(U_({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:Cy.AP_WORKER_EVENT,data:o},!0)}}},{key:"joinWebProxyAP",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_(U_({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:Cy.JOIN_WEB_PROXY_AP,data:o},!0)}}},{key:"WebSocketQuit",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=U_(U_(U_({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:Cy.WEBSOCKET_QUIT,data:o},!0)}}},{key:"sendCustomReportMessage",value:function(){var e=u(c().mark((function e(t,n){var r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.customReportCount+=n.length,!(this.customReportCount>sm("CUSTOM_REPORT_LIMIT"))){e.next=2;break}throw new Uv(Dv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);case 2:if(this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((function(){o.customReportCount=0}),5e3)),r=Date.now(),i=n.map((function(e){return{type:Cy.USER_ANALYTICS,data:U_(U_({sid:t},e),{},{lts:r})}})),e.prev=4,!sm("NEW_REPORT_SERVER")){e.next=10;break}return e.next=8,this.postDataToStatsCollector2(i);case 8:e.next=12;break;case 10:return e.next=12,this.postDataToStatsCollector(i);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(4),zv.error("send custom report message failed",e.t0.toString()),new Uv(Dv.CUSTOM_REPORT_SEND_FAILED,e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"autoplayFailed",value:function(e,t,n,r){if(e){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=U_(U_({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:N_.onAutoplayFailed||N_.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});this.send({type:Cy.AUTOPLAY_FAILED,data:s},!0)}}}},{key:"sendApiInvoke",value:function(e){var t=sm("NOT_REPORT_EVENT");if(e.tag&&t.includes&&t.includes(e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;var n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;var r=n.info,i=r.cname,o=r.uid,a=r.cid;e.lts=e.lts||Date.now();var s=void 0;if(e.error)if(e.error instanceof Uv){var c=e.error,u=c.code,l=c.message;s=u||l||e.error.toString()}else s=e.error.toString();var d={invokeId:e.invokeId,sid:e.sid,cname:i,cid:a,uid:o,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:Cy.API_INVOKE,data:d},!1),!0}},{key:"appendSessionId",value:function(){var e=this;this.clientList.forEach((function(t){if(t._sessionId)for(var n=e.apiInvokeUploadPendingItems.length,r=0;r<n;r++){var i=e.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,e.sendApiInvoke(Object.assign({},i)))}}))}},{key:"send",value:function(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>sm("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}},{key:"doSend",value:function(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}},{key:"sendItems",value:function(e,t){for(var n=this,r=[],i=[];e.length;){var o=e.shift();r.length<20?r.push(o):i.push(o)}e.push.apply(e,i);for(var a=0,s=[].concat(r);a<s.length;a++){var c,u=s[a];-1!==this.ltsList.indexOf(u.data.lts)?(u.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(u.data.lts)):(this.ltsList.push(u.data.lts),dy(c=this.ltsList).call(c,(function(e,t){return e-t})))}return t||(this.lastSendNormalEventTime=Date.now()),sm("ENABLE_EVENT_REPORT")?(r.length&&(sm("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(r):this.postDataToStatsCollector(r)).catch(function(e){return function(r){sm("EVENT_REPORT_RETRY")&&(t?n.keyEventUploadPendingItems=n.keyEventUploadPendingItems.concat(e):(n.normalEventUploadPendingItems=n.normalEventUploadPendingItems.concat(e),n.normalEventUploadPendingItems.length>sm("NORMAL_EVENT_QUEUE_CAPACITY")&&(n.normalEventUploadPendingItems.splice(0,n.normalEventUploadPendingItems.length-sm("NORMAL_EVENT_QUEUE_CAPACITY")),zv.warning("report: drop normal events"))))}}(r)),e):e}},{key:"postDataToStatsCollector2",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=O_.networkState===Hg.OFFLINE,!e.t0){e.next=4;break}return e.next=4,Vd.race([O_.onlineWaiter,$S(2*jv.maxRetryTimeout)]);case 4:n=function(e){var t=new Uint8Array;return e.forEach((function(e){var n=x_(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=function(e){var t=0;return Object.entries(Cy).forEach((function(n){var r=a(n,2),i=r[0];r[1]===e.type&&(t=Oy[i])})),t}(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=P_(t,new Uint8Array(r)),t=P_(t,n)})),t},r="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(sm("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(r):"https://".concat(sm("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(r),o=0;case 7:if(!(o<2)){e.next=23;break}return 1===o&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(sm("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(r):"https://".concat(sm("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(r)),e.prev=9,e.next=12,R_(i,{timeout:1e4,data:n(t),headers:U_(U_({token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0);case 12:e.next=19;break;case 14:if(e.prev=14,e.t1=e.catch(9),1!==o){e.next=18;break}throw e.t1;case 18:return e.abrupt("continue",20);case 19:return e.abrupt("return");case 20:o+=1,e.next=7;break;case 23:case"end":return e.stop()}}),e,this,[[9,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postDataToStatsCollector",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],r={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map((function(e){return JSON.stringify(e)})),vid:function(e){var t=e&&e.data.sid&&s.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0}(t[0])},e.t0=O_.networkState===Hg.OFFLINE,!e.t0){e.next=6;break}return e.next=6,Vd.race([O_.onlineWaiter,$S(2*jv.maxRetryTimeout)]);case 6:i=n?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(sm("EVENT_REPORT_DOMAIN"),"&p=").concat(sm("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(sm("EVENT_REPORT_DOMAIN"),":").concat(sm("STATS_COLLECTOR_PORT")).concat(i)),a=0;case 9:if(!(a<2)){e.next=30;break}if(1===a&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(sm("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(sm("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(sm("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(sm("STATS_COLLECTOR_PORT")).concat(i))),e.prev=11,!n){e.next=17;break}return e.next=15,C_(o,{timeout:1e4,data:r});case 15:e.next=19;break;case 17:return e.next=19,R_(o,{timeout:1e4,data:r});case 19:e.next=26;break;case 21:if(e.prev=21,e.t1=e.catch(11),1!==a){e.next=25;break}throw e.t1;case 25:return e.abrupt("continue",27);case 26:return e.abrupt("return");case 27:a+=1,e.next=9;break;case 30:case"end":return e.stop()}}),e,this,[[11,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createBaseInfo",value:function(e,t){var n=Object.assign({},Xy);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}},{key:"reportResourceTiming",value:function(e,t){var n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:Ny.TRACER}).onSuccess()}}]),e}());Mv.on("REPORT_LOG_UPLOAD",(function(e){e.networkState=O_.networkState,V_.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Ny.TRACER})}));var F_,B_=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"trackMediaType",void 0),xp(l(i),"_ID",void 0),xp(l(i),"_hints",[]),xp(l(i),"_isClosed",!1),xp(l(i),"_originMediaStreamTrack",void 0),xp(l(i),"_mediaStreamTrack",void 0),xp(l(i),"_external",{}),i._ID=r||tw(8,"track-"),i._originMediaStreamTrack=e,i._mediaStreamTrack=e,function(e){mm.includes(e)||mm.push(e)}(l(i)),i}return v(n,[{key:"toString",value:function(){return this._ID}},{key:"getTrackId",value:function(){return this._ID}},{key:"getMediaStreamTrack",value:function(e){if(!e){var t=V_.reportApiInvoke(null,{name:Ay.GET_MEDIA_STREAM_TRACK,options:[],tag:Ny.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?t.onSuccess(this._mediaStreamTrack.label):t.onSuccess("")}return this._mediaStreamTrack}},{key:"getMediaStreamTrackSettings",value:function(){return this.getMediaStreamTrack(!0).getSettings()}},{key:"close",value:function(){this._isClosed=!0,function(e){var t=mm.indexOf(e);-1!==t&&mm.splice(t,1)}(this),this.emit(Og.CLOSED)}}]),n}(Lv),W_=1,G_=function(){function e(t){h(this,e),xp(this,"lockingPromise",Vd.resolve()),xp(this,"locks",0),xp(this,"name",""),xp(this,"lockId",void 0),this.lockId=W_++,t&&(this.name=t),zv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}return v(e,[{key:"isLocked",get:function(){return this.locks>0}},{key:"lock",value:function(e){var t,n=this;this.locks+=1,zv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));var r=new Vd((function(r){t=function(){n.locks-=1,zv.debug("[lock-".concat(n.name,"-").concat(n.lockId,"] is not locked, current queue ").concat(n.locks,". ").concat("string"==typeof e?e:"")),r()}})),i=this.lockingPromise.then((function(){return t}));return this.lockingPromise=this.lockingPromise.then((function(){return r})),i}}]),e}();function H_(e,t){return function(n,r,i){var o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=u(c().mark((function n(){var i,a,s,u,l,d=arguments;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this[t]){n.next=3;break}throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));case 3:return n.next=5,i.lock("From ".concat(e,".").concat(r));case 5:for(a=n.sent,n.prev=6,s=d.length,u=new Array(s),l=0;l<s;l++)u[l]=d[l];return n.next=10,o.apply(this,u);case 10:return n.abrupt("return",n.sent);case 11:return n.prev=11,a(),n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[6,,11,14]])}))),i}}var K_=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this,e,r),xp(l(i),"_enabled",!0),xp(l(i),"_muted",!1),xp(l(i),"_isExternalTrack",!1),xp(l(i),"_isClosed",!1),xp(l(i),"_enabledMutex",void 0),xp(l(i),"processor",void 0),xp(l(i),"processorContext",void 0),xp(l(i),"_handleTrackEnded",(function(){i.onTrackEnded()})),i._enabledMutex=new G_("".concat(r)),e.addEventListener("ended",i._handleTrackEnded),i}return v(n,[{key:"isExternalTrack",get:function(){return this._isExternalTrack}},{key:"muted",get:function(){return this._muted}},{key:"enabled",get:function(){return this._enabled}},{key:"getTrackLabel",value:function(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}},{key:"close",value:function(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,zv.debug("[".concat(this.getTrackId(),"] close")),this.emit(Tg.NEED_CLOSE),i(o(n.prototype),"close",this).call(this))}},{key:"_updateOriginMediaStreamTrack",value:function(){var e=u(c().mark((function e(t,n){var r,i=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]&&i[2],this._isExternalTrack=r,e.t0=t!==this._originMediaStreamTrack,!e.t0){e.next=14;break}return this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop(),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=13,sw(this,Tg.NEED_REPLACE_TRACK,this);case 13:this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext});case 14:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getDefaultPlayerConfig",value:function(){return{}}},{key:"onTrackEnded",value:function(){zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Og.TRACK_ENDED)}},{key:"stateCheck",value:function(e,t){if(zv.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),fy(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Uv(Dv.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Uv(Dv.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}},{key:"getProcessorStats",value:function(){return this.processorContext.gatherStats()}},{key:"getProcessorUsage",value:function(){return this.processorContext.gatherUsage()}}]),n}(B_);function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(F_||(F_={}));var Y_=window.AudioContext||window.webkitAudioContext,q_=null,Z_=new(function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.apply(this,arguments),xp(l(e),"prevState",void 0),xp(l(e),"curState",void 0),xp(l(e),"currentTime",void 0),xp(l(e),"currentTimeStuckAt",void 0),xp(l(e),"interruptDetectorTrack",void 0),xp(l(e),"onLocalAudioTrackMute",(function(){zv.info("ios15-interruption-start"),e.emit(F_.IOS_15_INTERRUPTION_START)})),xp(l(e),"onLocalAudioTrackUnmute",u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(zv.info("ios15-interruption-end"),"running"===e.curState&&!e.duringInterruption){t.next=5;break}zv.info("ios15-interruption-end-canceled"),t.next=10;break;case 5:if(t.t0=q_,!t.t0){t.next=9;break}return t.next=9,q_.suspend();case 9:e.emit(F_.IOS_15_INTERRUPTION_END);case 10:case"end":return t.stop()}}),t)})))),e}return v(n,[{key:"duringInterruption",get:function(){return"running"===this.prevState&&"interrupted"===this.curState}},{key:"bindInterruptDetectorTrack",value:function(e){zv.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}},{key:"unbindInterruptDetectorTrack",value:function(e){zv.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}}]),n}(Lv));function X_(){if(Y_){zv.info("create audio context");var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},sm("WEBAUDIO_INIT_OPTIONS"));zv.debug("audio context init option:",JSON.stringify(e)),q_=new Y_(e),Z_.curState=q_.state,q_.onstatechange=function(){Z_.prevState=Z_.curState,Z_.curState=q_?q_.state:void 0,(pp()||_p())&&"running"===Z_.prevState&&"interrupted"===Z_.curState&&(zv.info("ios-interruption-start"),Z_.emit(F_.IOS_INTERRUPTION_START)),(pp()||_p())&&"interrupted"===Z_.prevState&&"running"===Z_.curState&&(zv.info("ios-interruption-end"),Z_.emit(F_.IOS_INTERRUPTION_END)),Z_.prevState!==Z_.curState&&(zv.debug("AudioContext State Change","".concat(Z_.prevState,"=>").concat(Z_.curState)),Z_.emit(F_.STATE_CHANGE))},setInterval((function(){var e,t=null===(e=q_)||void 0===e?void 0:e.currentTime;Z_.currentTime!==t?(Z_.currentTimeStuckAt&&(zv.debug("AudioContext current time resume at ".concat(t)),Z_.currentTimeStuckAt=void 0),Z_.currentTime=t):(t!==Z_.currentTimeStuckAt&&(V_.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:Ny.TRACER}).onSuccess(),zv.warning("AudioContext current time stuck at ".concat(t))),Z_.currentTimeStuckAt=t)}),5e3),function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d,f,p,h,v,m,y,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m=function(){p(!0)},v=function(){r.removeEventListener("playing",v),r.removeEventListener("abort",v),r.removeEventListener("error",v),a=!1,p(!1)},h=function(e){if(o!==e){o=e;for(var t=0,r=n;t<r.length;t++){var i=r[t];e?window.addEventListener(i,m,{capture:!0,passive:!0}):window.removeEventListener(i,m,{capture:!0,passive:!0})}}},p=function(e){if(!a)if(r.paused)if(e){h(!1),a=!0;var t=void 0;try{(t=r.play())?t.then(v,v):(r.addEventListener("playing",v),r.addEventListener("abort",v),r.addEventListener("error",v))}catch(e){v()}}else h(!0);else h(!1)},f=function(){s(!0)},d=function(){s(!1)},l=function(){s(!0)},u=function(e){if(i!==e){i=e;for(var t=0,r=n;t<r.length;t+=1){var o=r[t];e?window.addEventListener(o,f,{capture:!0,passive:!0}):window.removeEventListener(o,f,{capture:!0,passive:!0})}}},s=function(e){"running"===t.state?u(!1):pp()||_p()?"suspended"===t.state&&(u(!0),e&&t.resume().then(d,d)):"closed"!==t.state&&(u(!0),e&&t.resume().then(d,d))},n=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],i=!1,o=!1,a=!1,pp()&&(y=t.createMediaStreamDestination(),(g=document.createElement("div")).innerHTML="<audio x-webkit-airplay='deny'></audio>",(r=g.children.item(0)).controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.srcObject=y.stream,p(!0)),Z_.on(F_.STATE_CHANGE,l),s(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(q_)}else zv.error("your browser is not support web audio")}function J_(){if(!q_){if(X_(),!q_)throw new Uv(Dv.NOT_SUPPORTED,"can not create audio context");return q_}return q_}function Q_(e){if(!function(){if(null!==$_)return $_;var e=J_(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);var i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),$_=i,i}()){var t=e.connect,n=e.disconnect;e.connect=function(n,r,i){return e._inputNodes||(e._inputNodes=[]),e._inputNodes.includes(n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=function(r,i,o){n.call(e),r?lw(e._inputNodes,r):e._inputNodes=[];var a,c=s(e._inputNodes);try{for(c.s();!(a=c.n()).done;){var u=a.value;t.call(e,u)}}catch(l){c.e(l)}finally{c.f()}}}}var $_=null;function eb(e,t){var n=!1,r=1/t;if(sm("DISABLE_WEBAUDIO"))var i=window.setInterval((function(){n?window.clearInterval(i):e(performance.now()/1e3)}),1e3*r);else{var o=J_(),a=o.createGain();a.gain.value=0,a.connect(o.destination);var s=function t(){if(n)a=null;else{var i=o.createOscillator();i.onended=t,i.connect(a),i.start(0),i.stop(o.currentTime+r),e(o.currentTime)}};s()}return function(){n=!0}}var tb=function(){function e(){h(this,e),xp(this,"context",void 0),xp(this,"analyserNode",void 0),xp(this,"sourceNode",void 0),this.context=J_(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}return v(e,[{key:"updateSource",value:function(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}},{key:"getVolumeLevel",value:function(){if(!this.sourceNode)return 0;if(!this.context||pp()||_p()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;var e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{var t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(var n=0;n<e.length;++n)e[n]=t[n]/128-1}var r=gr(e).call(e,(function(e,t){return e+t*t}),0)/e.length;return Math.max(10*Math.log10(r)+100,0)/100}},{key:"getAnalyserNode",value:function(){return this.analyserNode}},{key:"rebuildAnalyser",value:function(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){zv.warning("rebuild analyser node failed.")}}},{key:"destroy",value:function(){this.updateSource(void 0)}}]),e}(),nb=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"outputNode",void 0),xp(l(e),"outputTrack",void 0),xp(l(e),"isPlayed",!1),xp(l(e),"sourceNode",void 0),xp(l(e),"context",void 0),xp(l(e),"audioBufferNode",void 0),xp(l(e),"destNode",void 0),xp(l(e),"audioOutputLevel",0),xp(l(e),"volumeLevelAnalyser",void 0),xp(l(e),"_processedNode",void 0),xp(l(e),"playNode",void 0),xp(l(e),"isDestroyed",!1),xp(l(e),"onNoAudioInput",void 0),xp(l(e),"isNoAudioInput",!1),xp(l(e),"_noAudioInputCount",0),e.context=J_(),e.playNode=e.context.destination,e.outputNode=e.context.createGain(),Q_(e.outputNode),e.volumeLevelAnalyser=new tb,e}return v(n,[{key:"processSourceNode",get:function(){return this.sourceNode}},{key:"processedNode",get:function(){return this._processedNode},set:function(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}},{key:"startGetAudioBuffer",value:function(e){var t=this;this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=function(e){t.emit(Zy.ON_AUDIO_BUFFER,function(e){for(var t=0;t<e.outputBuffer.numberOfChannels;t+=1)for(var n=e.outputBuffer.getChannelData(t),r=0;r<n.length;r+=1)n[r]=0;return e.inputBuffer}(e))})}},{key:"stopGetAudioBuffer",value:function(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}},{key:"createOutputTrack",value:function(){if(!rE().webAudioMediaStreamDest)throw new Uv(Dv.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}},{key:"play",value:function(e){"running"!==this.context.state&&fw((function(){Z_.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}},{key:"stop",value:function(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(b){}this.isPlayed=!1}},{key:"getAccurateVolumeLevel",value:function(){return this.volumeLevelAnalyser.getVolumeLevel()}},{key:"checkHasAudioInput",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=a.length>0&&void 0!==a[0]?a[0]:0)>5)){e.next=3;break}return e.abrupt("return",(this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1));case 3:for(pp()||_p()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),(n=this.volumeLevelAnalyser.getAnalyserNode()).getFloatTimeDomainData?(r=new Float32Array(n.fftSize),n.getFloatTimeDomainData(r)):(r=new Uint8Array(n.fftSize),n.getByteTimeDomainData(r)),i=!1,o=0;o<r.length;o++)0!==r[o]&&(i=!0);if(!i){e.next=12;break}e.t0=(this.isNoAudioInput=!1,!0),e.next=20;break;case 12:return e.next=14,$S(200);case 14:return e.next=16,this.checkHasAudioInput(t?t+1:1);case 16:if(e.t1=e.sent,!e.t1){e.next=19;break}e.t1=i;case 19:e.t0=e.t1;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAudioVolume",value:function(){return this.outputNode.gain.value}},{key:"setVolume",value:function(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}},{key:"destroy",value:function(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}},{key:"disconnect",value:function(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}},{key:"connect",value:function(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}]),n}(Lv),rb=function(e){f(n,e);var t=p(n);function n(e,i,o){var a,s;if(h(this,n),a=t.call(this),xp(l(a),"sourceNode",void 0),xp(l(a),"track",void 0),xp(l(a),"clonedTrack",void 0),xp(l(a),"audioElement",void 0),xp(l(a),"isCurrentTrackCloned",!1),xp(l(a),"isRemoteTrack",!1),xp(l(a),"originVolumeLevelAnalyser",void 0),xp(l(a),"rebuildWebAudio",u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.debug("ready to rebuild web audio, state:",a.context.state),e.t0=a.isNoAudioInput,!e.t0){e.next=5;break}return e.next=5,a.checkHasAudioInput();case 5:if(a.isNoAudioInput&&!a.isDestroyed){e.next=7;break}return e.abrupt("return",(document.body.removeEventListener("click",a.rebuildWebAudio,!0),void zv.debug("rebuild web audio success, current volume status",a.getAccurateVolumeLevel())));case 7:a.context.resume().then((function(){return zv.info("resume success")})),zv.debug("rebuild web audio because of ios 12 bugs"),a.disconnect(),t=a.track,a.track=a.track.clone(),a.isCurrentTrackCloned?t.stop():a.isCurrentTrackCloned=!0,n=new MediaStream([a.track]),a.sourceNode=a.context.createMediaStreamSource(n),Q_(a.sourceNode),a.volumeLevelAnalyser.rebuildAnalyser(),r=a.outputNode.gain.value,a.outputNode=a.context.createGain(),a.outputNode.gain.setValueAtTime(r,a.context.currentTime),Q_(a.outputNode),a.emit(Zy.UPDATE_SOURCE),a.connect(),a.audioElement.srcObject=n,a.isPlayed&&a.play(a.playNode),a.checkHasAudioInput();case 14:case"end":return e.stop()}}),e)})))),"audio"!==e.kind)throw new Uv(Dv.UNEXPECTED_ERROR);a.track=e;var d=new MediaStream([a.track]);if(a.isRemoteTrack=!!i,a.sourceNode=a.context.createMediaStreamSource(d),Q_(a.sourceNode),o){var f=o.clone();f.enabled=!0,a.clonedTrack=f,zv.debug("create an unmuted track ".concat(f.id," from the original track ").concat(o.id," to get the volume"));var p=a.context.createMediaStreamSource(new MediaStream([f]));Q_(p),a.originVolumeLevelAnalyser=new tb,a.originVolumeLevelAnalyser.updateSource(p)}a.connect(),a.audioElement=document.createElement("audio"),a.audioElement.srcObject=d;var v=rp();return i&&v.os===Xf.IOS&&Number(null===(s=v.osVersion)||void 0===s?void 0:s.split(".")[0])<15&&(Z_.on(F_.STATE_CHANGE,(function(){"suspended"===a.context.state?document.body.addEventListener("click",a.rebuildWebAudio,!0):"running"===a.context.state&&a.rebuildWebAudio()})),a.checkHasAudioInput().then((function(e){e||document.body.addEventListener("click",a.rebuildWebAudio,!0)}))),r(a)}return v(n,[{key:"isFreeze",get:function(){return!1}},{key:"updateTrack",value:function(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;var t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),Q_(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Zy.UPDATE_SOURCE),this.audioElement.srcObject=t}},{key:"destroy",value:function(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),Z_.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,i(o(n.prototype),"destroy",this).call(this)}},{key:"createMediaStreamSourceNode",value:function(e){return this.context.createMediaStreamSource(new MediaStream([e]))}},{key:"updateOriginTrack",value:function(e){var t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),zv.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));var n=this.context.createMediaStreamSource(new MediaStream([t]));Q_(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}},{key:"getOriginVolumeLevel",value:function(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}]),n}(nb);function ib(e,t){return ob.apply(this,arguments)}function ob(){return ob=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,t){return e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t},i={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:r(n.height,1080),maxWidth:r(n.width,1920)}}},n.frameRate&&"number"!=typeof n.frameRate?(i.video.mandatory.maxFrameRate=n.frameRate.max,i.video.mandatory.minFrameRate=n.frameRate.min):"number"==typeof n.frameRate&&(i.video.mandatory.maxFrameRate=n.frameRate),e.next=4,navigator.mediaDevices.getUserMedia(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ab(e){return sb.apply(this,arguments)}function sb(){return sb=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cb(t.mediaSource);case 2:return n=e.sent,e.next=5,function(e){return new Vd((function(t,n){var r=document.createElement("div");r.innerText="share screen",r.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");var a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");var c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=function(){document.body.removeChild(u);var e=new Error("NotAllowedError");e.name="NotAllowedError",n(e)},s.appendChild(c),i.appendChild(o),i.appendChild(a),i.appendChild(s);var u=document.createElement("div");u.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),u.appendChild(r),u.appendChild(i),document.body.appendChild(u),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;r.getSize().width>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=function(){document.body.removeChild(u),t(e.id)},a.appendChild(n)}}))}))}(n);case 5:return r=e.sent,e.next=8,ib(r,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e){return ub.apply(this,arguments)}function ub(){return ub=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["window","screen"],"application"!==t&&"window"!==t||(n=["window"]),"screen"===t&&(n=["screen"]),r=db()){e.next=5;break}throw new Uv(Dv.ELECTRON_IS_NULL);case 5:i=null;try{i=(null===(o=r.desktopCapturer)||void 0===o?void 0:o.getSources({types:n}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch(t){i=null}return i&&i.then||(i=new Vd((function(e,t){r.desktopCapturer.getSources({types:n},(function(n,r){n?t(n):e(r)}))}))),e.prev=8,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(8),new Uv(Dv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.t0.toString());case 17:case"end":return e.stop()}}),e,null,[[8,14]])}))),ub.apply(this,arguments)}var lb=null;function db(){if(lb)return lb;try{return lb=window.require("electron")}catch(b){return null}}var fb=new G_("safari"),pb=!1,hb=!1;function vb(e,t){return mb.apply(this,arguments)}function mb(){return mb=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=null;case 1:if(!(r<2)){e.next=23;break}return e.prev=2,e.next=5,yb(t,n,r>0);case 5:return i=e.sent,e.abrupt("break",23);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof Uv)){e.next=13;break}throw zv.error("[".concat(n,"] ").concat(e.t0.toString())),e.t0;case 13:if((o=Eb(e.t0.name||e.t0.code||e.t0,e.t0.message)).code!==Dv.MEDIA_OPTION_INVALID){e.next=20;break}return zv.debug("[".concat(n,"] detect media option invalid, retry")),r+=1,e.next=19,$S(500);case 19:return e.abrupt("continue",21);case 20:throw zv.error("[".concat(n,"] ").concat(o.toString())),o;case 21:e.next=1;break;case 23:if(i){e.next=25;break}throw new Uv(Dv.UNEXPECTED_ERROR,"can not find stream after getUserMedia");case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[2,9]])}))),mb.apply(this,arguments)}function yb(e,t,n){return gb.apply(this,arguments)}function gb(){return gb=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,f,p,h,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Uv(Dv.NOT_SUPPORTED,"can not find getUserMedia");case 2:if(r&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height)),i=rE(),o=new MediaStream,t.audioSource&&o.addTrack(t.audioSource),t.videoSource&&o.addTrack(t.videoSource),t.audio||t.video||t.screen){e.next=6;break}return e.abrupt("return",(zv.debug("Using Video Source/ Audio Source"),o));case 6:if(!t.screen){e.next=64;break}if(!db()){e.next=25;break}if(!t.screen.sourceId){e.next=17;break}return e.t0=_b,e.t1=o,e.next=13,ib(t.screen.sourceId,t.screen);case 13:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=23;break;case 17:return e.t3=_b,e.t4=o,e.next=21,ab(t.screen);case 21:e.t5=e.sent,(0,e.t3)(e.t4,e.t5);case 23:e.next=64;break;case 25:if(!(lp()&&t.screen.extensionId&&t.screen.mandatory)){e.next=41;break}if(i.getStreamFromExtension){e.next=28;break}throw new Uv(Dv.NOT_SUPPORTED,"This browser does not support screen sharing");case 28:return zv.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"')),e.next=31,l=t.screen.extensionId,d=n,new Vd((function(e,t){try{chrome.runtime.sendMessage(l,{getStream:!0},(function(n){if(!n||!n.streamId)return zv.error("[".concat(d,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Uv(Dv.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){zv.error("[".concat(d,"] AgoraRTC screensharing plugin is not accessible(").concat(l,")"),e.toString()),t(new Uv(Dv.CHROME_PLUGIN_NOT_INSTALL))}}));case 31:return a=e.sent,t.screen.mandatory.chromeMediaSourceId=a,e.t6=_b,e.t7=o,e.next=37,navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}});case 37:e.t8=e.sent,(0,e.t6)(e.t7,e.t8),e.next=64;break;case 41:if(!i.getDisplayMedia){e.next=53;break}return t.screen.mediaSource&&Lg(t.screen.mediaSource),s={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:"screen"===t.screen.mediaSource?"monitor":t.screen.mediaSource},zv.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:s,audio:!!t.screenAudio})),e.t9=_b,e.t10=o,e.next=49,navigator.mediaDevices.getDisplayMedia({video:s,audio:!!t.screenAudio});case 49:e.t11=e.sent,(0,e.t9)(e.t10,e.t11),e.next=64;break;case 53:if(fp()){e.next=55;break}throw zv.error("[".concat(n,"] This browser does not support screenSharing")),new Uv(Dv.NOT_SUPPORTED,"This browser does not support screen sharing");case 55:return t.screen.mediaSource&&Lg(t.screen.mediaSource),u={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}},zv.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(u))),e.t12=_b,e.t13=o,e.next=62,navigator.mediaDevices.getUserMedia(u);case 62:e.t14=e.sent,(0,e.t12)(e.t13,e.t14);case 64:if(t.video||t.audio){e.next=66;break}return e.abrupt("return",o);case 66:if(f={video:t.video,audio:t.audio},p=sm("MEDIA_DEVICE_CONSTRAINTS"))try{"string"==typeof p&&(p=JSON.parse(p)),f=function e(t,n){if(!bw(t)||!bw(n))return n;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(t)){for(var r=m(t),i=0;i<n.length;i++)r[i]=e(t[i],n[i]);return r}var o=JS({},t);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(t,a)?o[a]=e(t[a],n[a]):o[a]=n[a]);return o}(f,p)}catch(t){}if(zv.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(f)),rp(),v=null,e.t15=dp()||pp()||sp(),!e.t15){e.next=75;break}return e.next=74,fb.lock();case 74:v=e.sent;case 75:return e.prev=75,e.next=78,navigator.mediaDevices.getUserMedia(f);case 78:h=e.sent,e.next=84;break;case 81:throw e.prev=81,e.t16=e.catch(75),v&&v(),e.t16;case 84:return e.abrupt("return",(f.audio&&(pb=!0),f.video&&(hb=!0),_b(o,h),v&&v(),o));case 85:case"end":return e.stop()}}),e,null,[[75,81]])}))),gb.apply(this,arguments)}function Eb(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Uv(Dv.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Uv(Dv.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Uv(Dv.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Uv(Dv.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Uv(Dv.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Uv(Dv.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return zv.error("getUserMedia unexpected error",e),new Uv(Dv.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function _b(e,t){var n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}var bb=new(function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"_state",Dy.IDLE),xp(l(e),"isAccessMicrophonePermission",!1),xp(l(e),"isAccessCameraPermission",!1),xp(l(e),"lastAccessMicrophonePermission",!1),xp(l(e),"lastAccessCameraPermission",!1),xp(l(e),"checkdeviceMatched",!1),xp(l(e),"deviceInfoMap",new Map),e.init().then((function(){navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",e.updateDevicesInfo.bind(l(e))),window.setInterval((function(){(sm("ENUMERATE_DEVICES_INTERVAL")||kp()&&wp())&&e.updateDevicesInfo()}),sm("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((function(e){return zv.error(e.toString())})),e}return v(n,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this.emit(xy.STATE_CHANGE,e),this._state=e)}},{key:"enumerateDevices",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f,p,h,v,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>2&&void 0!==m[2]&&m[2],navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return e.abrupt("return",new Uv(Dv.NOT_SUPPORTED,"enumerateDevices() not supported.").throw());case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:if(i=e.sent,o=this.checkMediaDeviceInfoIsOk(i),a=!this.isAccessMicrophonePermission&&t,s=!this.isAccessCameraPermission&&n,o.audio&&(a=!1),o.video&&(s=!1),u=null,l=null,d=null,r||!a&&!s){e.next=65;break}if(!fb.isLocked){e.next=18;break}return zv.debug("[device manager] wait GUM lock"),e.next=15,fb.lock();case 15:e.t0=e.sent,(0,e.t0)(),zv.debug("[device manager] GUM unlock");case 18:if(pb&&(a=!1,this.isAccessMicrophonePermission=!0),hb&&(s=!1,this.isAccessCameraPermission=!0),zv.debug("[device manager] check media device permissions",t,n,a,s),!a||!s){e.next=34;break}return e.prev=19,e.next=22,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 22:d=e.sent,e.next=31;break;case 25:if(e.prev=25,e.t1=e.catch(19),(f=Eb(e.t1.name||e.t1.code||e.t1,e.t1.message)).code!==Dv.PERMISSION_DENIED){e.next=30;break}throw f;case 30:zv.warning("getUserMedia failed in getDevices",f);case 31:this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0,e.next=64;break;case 34:if(!a){e.next=50;break}return e.prev=35,e.next=38,navigator.mediaDevices.getUserMedia({audio:t});case 38:u=e.sent,e.next=47;break;case 41:if(e.prev=41,e.t2=e.catch(35),(p=Eb(e.t2.name||e.t2.code||e.t2,e.t2.message)).code!==Dv.PERMISSION_DENIED){e.next=46;break}throw p;case 46:zv.warning("getUserMedia failed in getDevices",p);case 47:this.isAccessMicrophonePermission=!0,e.next=64;break;case 50:if(!s){e.next=64;break}return e.prev=51,e.next=54,navigator.mediaDevices.getUserMedia({video:n});case 54:l=e.sent,e.next=63;break;case 57:if(e.prev=57,e.t3=e.catch(51),(h=Eb(e.t3.name||e.t3.code||e.t3,e.t3.message)).code!==Dv.PERMISSION_DENIED){e.next=62;break}throw h;case 62:zv.warning("getUserMedia failed in getDevices",h);case 63:this.isAccessCameraPermission=!0;case 64:zv.debug("[device manager] mic permission",t,"cam permission",n);case 65:return e.prev=65,e.next=68,navigator.mediaDevices.enumerateDevices();case 68:return v=e.sent,e.abrupt("return",(u&&u.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),u=null,l=null,d=null,v));case 72:return e.prev=72,e.t4=e.catch(65),u&&u.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),u=null,l=null,d=null,e.abrupt("return",new Uv(Dv.ENUMERATE_DEVICES_FAILED,e.t4.toString()).throw());case 76:case"end":return e.stop()}}),e,this,[[19,25],[35,41],[51,57],[65,72]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRecordingDevices",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audioinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCamerasDevices",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!1,!0,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"videoinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSpeakers",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audiooutput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchDeviceIdByName",value:function(e){var t=null;return this.deviceInfoMap.forEach((function(n){n.device.label===e&&(t=n.device.deviceId)})),t}},{key:"getDeviceById",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(n=e.sent.find((function(e){return e.deviceId===t}))){e.next=5;break}throw new Uv(Dv.DEVICE_NOT_FOUND,"deviceId: ".concat(t));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state=Dy.INITING,e.prev=1,e.next=4,this.updateDevicesInfo();case 4:this.state=Dy.INITEND,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),zv.warning("Device Detection functionality cannot start properly.",e.t0.toString()),this.state=Dy.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Uv(Dv.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateDevicesInfo",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(t=e.sent,n=Date.now(),r=[],t[0]&&t[0].label&&!1===this.checkdeviceMatched&&(this.checkdeviceMatched=!0,i=t.find((function(e){return"audioinput"===e.kind&&"default"===e.deviceId})),o=t.find((function(e){return"audiooutput"===e.kind&&"default"===e.deviceId})),i&&o?o.groupId===i.groupId?zv.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):zv.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):zv.debug("[device-check] default input or output not found")),a=this.checkMediaDeviceInfoIsOk(t),t.forEach((function(e){if(e.deviceId){var t=s.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(t?t.state:"INACTIVE")){var i={initAt:n,updateAt:n,device:e,state:"ACTIVE"};s.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),i),r.push(i)}t&&(t.updateAt=n)}})),this.deviceInfoMap.forEach((function(e,t){"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",r.push(e))})),this.state===Dy.INITEND){e.next=9;break}return e.abrupt("return",(a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0))));case 9:r.forEach((function(e){switch(e.device.kind){case"audioinput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(xy.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":s.lastAccessCameraPermission&&s.isAccessCameraPermission&&s.emit(xy.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(xy.PLAYOUT_DEVICE_CHANGED,e)}})),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkMediaDeviceInfoIsOk",value:function(e){var t,n=e.filter((function(e){return"audioinput"===e.kind})),r=e.filter((function(e){return"videoinput"===e.kind})),i={audio:!1,video:!1},o=s(n);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.label&&a.deviceId){i.audio=!0;break}}}catch(d){o.e(d)}finally{o.f()}var c,u=s(r);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.label&&l.deviceId){i.video=!0;break}}}catch(d){u.e(d)}finally{u.f()}return i}}]),n}(Lv)),Sb=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],wb=new(function(){function e(){var t=this;h(this,e),xp(this,"onAutoplayFailed",void 0),xp(this,"elementMap",new Map),xp(this,"elementStateMap",new Map),xp(this,"elementsNeedToResume",[]),xp(this,"sinkIdMap",new Map),xp(this,"autoResumeAfterInterruption",(function(){Array.from(t.elementMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1],o=t.elementStateMap.get(r),s=i.srcObject.getAudioTracks()[0];mp()?s&&"live"===s.readyState&&"running"===Z_.curState&&(zv.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):o&&"paused"===o&&s&&"live"===s.readyState&&"running"===Z_.curState&&(zv.debug("auto resume after interruption for iOS"),i.play())}))})),xp(this,"autoResumeAfterInterruptionOnIOS15",(function(){Array.from(t.elementMap.entries()).forEach((function(e){var t=a(e,2),n=(t[0],t[1]),r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(zv.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),Z_.on(F_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Z_.on(F_.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),Z_.on(F_.STATE_CHANGE,(function(){pp()&&"suspended"===Z_.prevState&&"running"===Z_.curState&&t.autoResumeAfterInterruption()}))}return v(e,[{key:"setSinkID",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.elementMap.get(t),this.sinkIdMap.set(t,n),!r){e.next=10;break}return e.prev=2,e.next=5,r.setSinkId(n);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Uv(Dv.PERMISSION_DENIED,"can not set sink id: "+e.t0.toString());case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"play",value:function(e,t,n,r){var i=this;if(!this.elementMap.has(t)){var o=document.createElement("audio");o.autoplay=!0,o.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,o),this.elementMap.set(t,o),this.elementStateMap.set(t,ay.INIT),this.setVolume(t,n);var a=this.sinkIdMap.get(t);if(a)try{o.setSinkId(a).catch((function(e){zv.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){zv.warning("[".concat(t,"] set sink id failed"),e.toString())}var s=o.play();s&&s.then&&s.catch((function(e){r&&V_.autoplayFailed(r,"audio",e.message,t),zv.warning("audio element play warning",e.toString()),i.elementMap.has(t)&&"NotAllowedError"===e.name&&(zv.warning("detected audio element autoplay failed"),i.elementsNeedToResume.push(o),fw((function(){i.onAutoplayFailed&&i.onAutoplayFailed(),D_()})))}))}}},{key:"updateTrack",value:function(e,t){var n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}},{key:"isPlaying",value:function(e){return this.elementMap.has(e)}},{key:"setVolume",value:function(e,t){var n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}},{key:"stop",value:function(e){var t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),t){var n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}}},{key:"bindAudioElementEvents",value:function(e,t){var n=this;Sb.forEach((function(r){t.addEventListener(r,(function(r){var i=n.elementStateMap.get(e),o="pause"===r.type?"paused":r.type;if(zv.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),"error"===r.type){var a=null==t?void 0:t.error;a&&zv.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}n.elementStateMap.set(e,o)}))}))}},{key:"getPlayerState",value:function(e){return this.elementStateMap.get(e)||"uninit"}},{key:"autoResumeAudioElement",value:function(){var e=this,t=function(){e.elementsNeedToResume.forEach((function(e){e.play().then((function(e){zv.debug("Auto resume audio element success")})).catch((function(e){zv.warning("Auto resume audio element failed!",e)}))})),e.elementsNeedToResume=[]};new Vd((function(e){document.body?e():window.addEventListener("load",(function(){return e()}))})).then((function(){Tp()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0))}))}}]),e}());function kb(){return function(e,t,n){var r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new Uv(Dv.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(this,t);return i instanceof Vd?new Vd((function(e,t){i.then(e).catch(t)})):i}),n}}var Tb,Rb,Cb,Ib,Ob,Ab,Nb,Db,xb,Pb,Lb,Mb,Ub,jb,Vb,Fb,Bb,Wb,Gb,Hb,Kb,zb,Yb,qb,Zb,Xb,Jb,Qb,$b,eS,tS,nS,rS,iS,oS,aS,sS,cS=fr("Array").values,uS=_o,lS=ut,dS=N,fS=cS,pS=Array.prototype,hS={DOMTokenList:!0,NodeList:!0},vS=function(e){var t=e.values;return e===pS||dS(pS,e)&&t===pS.values||lS(hS,uS(e))?fS:t};function mS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mS(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gS=function(e){f(n,e);var t=p(n);function n(e){var r;return h(this,n),r=t.call(this),xp(l(r),"name","VideoProcessorDestination"),xp(l(r),"ID","0"),xp(l(r),"_source",void 0),xp(l(r),"videoContext",void 0),xp(l(r),"inputTrack",void 0),r.videoContext=e,r}return v(n,[{key:"kind",get:function(){return"video"}},{key:"enabled",get:function(){return!0}},{key:"pipe",value:function(){throw new Uv(Dv.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}},{key:"unpipe",value:function(){throw new Uv(Dv.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"updateInput",value:function(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(zg.ON_TRACK,e.track))}},{key:"reset",value:function(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(zg.ON_TRACK,void 0)}}]),n}(Lv),ES=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"constraintsMap",new Map),xp(l(i),"statsRegistry",[]),xp(l(i),"usageRegistry",[]),xp(l(i),"trackId",void 0),xp(l(i),"direction",void 0),xp(l(i),"_chained",!1),i.trackId=e,i.direction=r,i}return v(n,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}},{key:"getConstraints",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aw(this,Yg.REQUEST_CONSTRAINTS);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestApplyConstraints",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(zv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),sw(this,Yg.REQUEST_UPDATE_CONSTRAINTS,Array.from(vS(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestRevertConstraints",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(zv.info("processor ".concat(t.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(t),sw(this,Yg.REQUEST_UPDATE_CONSTRAINTS,Array.from(vS(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerStats",value:function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}},{key:"unregisterStats",value:function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)}},{key:"gatherStats",value:function(){var e,t=[],n=s(this.statsRegistry);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.processorID,o=r.processorName,a=r.type,c=r.cb;try{var u=c();t.push({processorID:i,processorName:o,type:a,stats:u})}catch(t){zv.error(new Uv(Dv.UNEXPECTED_ERROR,t.message))}}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"registerUsage",value:function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}},{key:"unregisterUsage",value:function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)}},{key:"gatherUsage",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=s(this.usageRegistry),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=23;break}if(i=r.value.cb,e.prev=8,o=i(),e.t0=o instanceof Vd,!e.t0){e.next=15;break}return e.next=14,o;case 14:o=e.sent;case 15:t.push(yS(yS({},o),{},{direction:this.direction})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(8),zv.error("gather extension usage error",e.t1);case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(4),n.e(e.t2);case 28:return e.prev=28,n.f(),e.finish(28);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}}),e,this,[[4,25,28,31],[8,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){return this.direction}}]),n}(Lv),_S=function(e){f(n,e);var t=p(n);function n(e){var r;return h(this,n),r=t.call(this),xp(l(r),"name","AudioProcessorDestination"),xp(l(r),"ID","0"),xp(l(r),"inputTrack",void 0),xp(l(r),"inputNode",void 0),xp(l(r),"audioProcessorContext",void 0),xp(l(r),"_source",void 0),r.audioProcessorContext=e,r}return v(n,[{key:"kind",get:function(){return"audio"}},{key:"enabled",get:function(){return!0}},{key:"pipe",value:function(){throw new Uv(Dv.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}},{key:"unpipe",value:function(){throw new Uv(Dv.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"reset",value:function(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(zg.ON_TRACK,void 0),this.emit(zg.ON_NODE,void 0)}},{key:"updateInput",value:function(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(zg.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(zg.ON_NODE,this.inputNode))}}]),n}(Lv),bS=function(e){f(n,e);var t=p(n);function n(e,r,i){var o;return h(this,n),o=t.call(this),xp(l(o),"constraintsMap",new Map),xp(l(o),"statsRegistry",[]),xp(l(o),"audioContext",void 0),xp(l(o),"trackId",void 0),xp(l(o),"direction",void 0),xp(l(o),"usageRegistry",[]),xp(l(o),"_chained",!1),o.audioContext=e,o.trackId=r,o.direction=i,o}return v(n,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}},{key:"getConstraints",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(this,Yg.REQUEST_CONSTRAINTS));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAudioContext",value:function(){return this.audioContext}},{key:"requestApplyConstraints",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(zv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),sw(this,Yg.REQUEST_UPDATE_CONSTRAINTS,Array.from(vS(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestRevertConstraints",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(this.constraintsMap.delete(t),sw(this,Yg.REQUEST_UPDATE_CONSTRAINTS,Array.from(vS(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerStats",value:function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}},{key:"unregisterStats",value:function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)}},{key:"gatherStats",value:function(){var e,t=[],n=s(this.statsRegistry);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.processorID,o=r.processorName,a=r.type,c=r.cb;try{var u=c();t.push({processorID:i,processorName:o,type:a,stats:u})}catch(t){zv.error(new Uv(Dv.UNEXPECTED_ERROR,t.message))}}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"registerUsage",value:function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}},{key:"unregisterUsage",value:function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)}},{key:"gatherUsage",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=s(this.usageRegistry),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=23;break}if(i=r.value.cb,e.prev=8,o=i(),e.t0=o instanceof Vd,!e.t0){e.next=15;break}return e.next=14,o;case 14:o=e.sent;case 15:t.push(yS(yS({},o),{},{direction:this.direction})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(8),zv.error("gather extension usage error",e.t1);case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(4),n.e(e.t2);case 28:return e.prev=28,n.f(),e.finish(28);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}}),e,this,[[4,25,28,31],[8,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){return this.direction}}]),n}(Lv),SS=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"context",void 0),xp(l(e),"processSourceNode",void 0),xp(l(e),"outputTrack",void 0),xp(l(e),"processedNode",void 0),xp(l(e),"clonedTrack",void 0),xp(l(e),"outputNode",void 0),e.outputNode=new wS,e}return v(n,[{key:"isPlayed",get:function(){return!0}},{key:"isFreeze",get:function(){return!1}},{key:"setVolume",value:function(){}},{key:"createOutputTrack",value:function(){throw new Uv(Dv.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}},{key:"getOriginVolumeLevel",value:function(){return 0}},{key:"getAccurateVolumeLevel",value:function(){return 0}},{key:"stopGetAudioBuffer",value:function(){}},{key:"startGetAudioBuffer",value:function(){}},{key:"play",value:function(){}},{key:"stop",value:function(){}},{key:"destroy",value:function(){}},{key:"updateTrack",value:function(){}},{key:"updateOriginTrack",value:function(){}},{key:"createMediaStreamSourceNode",value:function(){}}]),n}(Lv),wS=function(){function e(){h(this,e)}return v(e,[{key:"disconnect",value:function(){}},{key:"connect",value:function(){}}]),e}();function kS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kS(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RS=(Tb=j_({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),Rb=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),Cb=kb(),Ib=H_("LocalAudioTrack","_enabledMutex"),Ob=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),Ab=kb(),Nb=H_("LocalAudioTrack","_enabledMutex"),Db=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),xb=kb(),Pb=kb(),Lb=kb(),Mb=j_({argsMap:function(e){return[e.getTrackId()]}}),Ub=kb(),jb=j_({argsMap:function(e){return[e.getTrackId()]}}),Vb=kb(),Fb=j_({argsMap:function(e){return[e.getTrackId()]}}),Bb=j_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),Wb=j_({argsMap:function(e){return[e.getTrackId()]}}),v_((Gb=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this,e,i),xp(l(a),"trackMediaType","audio"),xp(l(a),"_encoderConfig",void 0),xp(l(a),"_source",void 0),xp(l(a),"_enabled",!0),xp(l(a),"_volume",100),xp(l(a),"_useAudioElement",!1),xp(l(a),"_bypassWebAudio",!1),xp(l(a),"processor",void 0),xp(l(a),"processorContext",void 0),xp(l(a),"processorDestination",void 0),xp(l(a),"_getOriginVolumeLevel",void 0),a._encoderConfig=r,a._getOriginVolumeLevel=!!o,sm("DISABLE_WEBAUDIO")?(a._source=new SS,a._useAudioElement=!0,a._bypassWebAudio=!0):(a._source=new rb(e,!1,a._getOriginVolumeLevel?e:void 0),sm("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(a._useAudioElement=!0)),a.processorContext=new bS(a._source.context,a.getTrackId(),"local"),a.processorDestination=new _S(a.processorContext),a.bindProcessorDestinationEvents(),a._source.on(Zy.UPDATE_SOURCE,(function(){a.processor&&a.processor.updateInput({node:a._source.processSourceNode,context:a.processorContext})})),a}return v(n,[{key:"isPlaying",get:function(){return this._useAudioElement?wb.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"LocalAudioTrack"}},{key:"setVolume",value:function(e){var t=this;hy(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&wb.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void zv.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));var n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,sw(this,Tg.NEED_REPLACE_TRACK,this).then((function(){zv.debug("[".concat(t.getTrackId(),"] replace web audio track success"))})).catch((function(e){zv.warning("[".concat(t.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}},{key:"getVolumeLevel",value:function(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}},{key:"setPlaybackDevice",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Uv(Dv.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,wb.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._setEnabled(t,n,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_setEnabled",value:function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=18;break}return this._originMediaStreamTrack.enabled=!0,e.prev=6,r||(this._enabled=!0),e.next=10,sw(this,Tg.NEED_ENABLE_TRACK,this);case 10:zv.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success")),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(6),r||(this._enabled=!1),zv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t0.toString()),e.t0;case 16:e.next=27;break;case 18:return this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1),e.prev=19,e.next=22,sw(this,Tg.NEED_DISABLE_TRACK,this);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(19),r||(this._enabled=!0),zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 27:case"end":return e.stop()}}),e,this,[[6,13],[19,24]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setMuted",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,zv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,sw(this,Tg.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,sw(this,Tg.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStats",value:function(){return vw((function(){zv.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),cw(this,Tg.GET_STATS)||TS({},og)}},{key:"setAudioFrameCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Zy.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zy.ON_AUDIO_BUFFER),this._source.on(Zy.ON_AUDIO_BUFFER,(function(t){return e(t)}))}},{key:"play",value:function(){zv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(zv.debug("[".concat(this.getTrackId(),"] start audio playback in element")),wb.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}},{key:"stop",value:function(){zv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?wb.stop(this.getTrackId()):this._source.stop()}},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}},{key:"_updatePlayerSource",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];zv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wb.updateTrack(this.getTrackId(),this._mediaStreamTrack)}},{key:"_updateOriginMediaStreamTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._originMediaStreamTrack!==t,!e.t0){e.next=17;break}if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t.addEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:t,context:this.processorContext}),this._mediaStreamTrack===this._source.outputTrack){e.next=15;break}return this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=13,sw(this,Tg.NEED_REPLACE_TRACK,this);case 13:e.next=16;break;case 15:this._source.updateTrack(this._originMediaStreamTrack);case 16:this._getOriginVolumeLevel&&this._source.updateOriginTrack(t);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"renewMediaStreamTrack",value:function(e){return Vd.resolve(void 0)}},{key:"pipe",value:function(e){if(this._bypassWebAudio)throw new Uv(Dv.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Uv(Dv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}},{key:"unpipe",value:function(){var e;if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(zg.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=8;break}return e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n),t.next=8,sw(e,Tg.NEED_REPLACE_TRACK,e);case 8:t.next=16;break;case 10:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=16;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=16,sw(e,Tg.NEED_REPLACE_TRACK,e);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(zg.ON_NODE,(function(t){e._source.processedNode=t}))}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(zg.ON_TRACK),this.processorDestination.removeAllListeners(zg.ON_NODE)}},{key:"unbindProcessorContextEvents",value:function(){this.processorContext.removeAllListeners(Yg.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Yg.REQUEST_CONSTRAINTS)}}]),n}(K_)).prototype,"setVolume",[Tb],Object.getOwnPropertyDescriptor(Gb.prototype,"setVolume"),Gb.prototype),v_(Gb.prototype,"setPlaybackDevice",[Rb,Cb],Object.getOwnPropertyDescriptor(Gb.prototype,"setPlaybackDevice"),Gb.prototype),v_(Gb.prototype,"setEnabled",[Ib,Ob,Ab],Object.getOwnPropertyDescriptor(Gb.prototype,"setEnabled"),Gb.prototype),v_(Gb.prototype,"setMuted",[Nb,Db,xb],Object.getOwnPropertyDescriptor(Gb.prototype,"setMuted"),Gb.prototype),v_(Gb.prototype,"getStats",[Pb],Object.getOwnPropertyDescriptor(Gb.prototype,"getStats"),Gb.prototype),v_(Gb.prototype,"setAudioFrameCallback",[Lb],Object.getOwnPropertyDescriptor(Gb.prototype,"setAudioFrameCallback"),Gb.prototype),v_(Gb.prototype,"play",[Mb,Ub],Object.getOwnPropertyDescriptor(Gb.prototype,"play"),Gb.prototype),v_(Gb.prototype,"stop",[jb,Vb],Object.getOwnPropertyDescriptor(Gb.prototype,"stop"),Gb.prototype),v_(Gb.prototype,"close",[Fb],Object.getOwnPropertyDescriptor(Gb.prototype,"close"),Gb.prototype),v_(Gb.prototype,"pipe",[Bb],Object.getOwnPropertyDescriptor(Gb.prototype,"pipe"),Gb.prototype),v_(Gb.prototype,"unpipe",[Wb],Object.getOwnPropertyDescriptor(Gb.prototype,"unpipe"),Gb.prototype),Gb),CS=(Hb=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),Kb=kb(),zb=H_("MicrophoneAudioTrack","_enabledMutex"),Yb=j_({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),qb=kb(),Zb=j_({argsMap:function(e){return[e.getTrackId()]}}),v_((Xb=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this,e,r.encoderConfig?om(r.encoderConfig):{},o,sm("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),xp(l(a),"_config",void 0),xp(l(a),"_deviceName","default"),xp(l(a),"_constraints",void 0),xp(l(a),"_originalConstraints",void 0),xp(l(a),"_enabled",!0),a._config=r,a._constraints=i,a._originalConstraints=i,a._deviceName=e.label,"boolean"==typeof r.bypassWebAudio&&(a._bypassWebAudio=r.bypassWebAudio),mp()&&Z_.bindInterruptDetectorTrack(l(a)),a.bindProcessorContextEvents(),a}return v(n,[{key:"__className__",get:function(){return"MicrophoneAudioTrack"}},{key:"setDevice",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),!this._enabled){e.next=35;break}return e.prev=1,e.next=4,bb.getDeviceById(t);case 4:return n=e.sent,(r={}).audio=TS({},this._constraints),r.audio.deviceId={exact:t},this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,vb(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),zv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,vb({video:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 25:this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=33;break;case 30:throw e.prev=30,e.t1=e.catch(1),zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 33:e.next=45;break;case 35:return e.prev=35,e.next=38,bb.getDeviceById(t);case 38:o=e.sent,this._deviceName=o.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(35),zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 45:zv.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success"));case 46:case"end":return e.stop()}}),e,this,[[1,30],[8,14],[35,42]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,r,a){var s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return zv.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),e.next=4,i(o(n.prototype),"_setEnabled",this).call(this,t);case 4:return e.abrupt("return",e.sent);case 5:if(a){e.next=9;break}if(t!==this._enabled){e.next=8;break}return e.abrupt("return");case 8:this.stateCheck("enabled",t);case 9:if(zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){e.next=20;break}return this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(s=this._source.clonedTrack)||void 0===s||s.stop(),a||(this._enabled=!1),e.prev=11,e.next=14,sw(this,Tg.NEED_DISABLE_TRACK,this);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(11),zv.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.t0.toString()),e.t0;case 19:return e.abrupt("return");case 20:return u=TS({},this._constraints),(l=bb.searchDeviceIdByName(this._deviceName))&&!u.deviceId&&(u.deviceId=l),e.prev=22,a||(this._enabled=!0),e.next=26,vb({audio:this._constraints},this.getTrackId());case 26:return d=e.sent,e.next=29,this._updateOriginMediaStreamTrack(d.getAudioTracks()[0],!1);case 29:return e.next=31,sw(this,Tg.NEED_ENABLE_TRACK,this);case 31:e.next=36;break;case 33:throw e.prev=33,e.t1=e.catch(22),a||(this._enabled=!1),zv.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.t1.toString()),e.t1;case 36:zv.info("[".concat(this.getTrackId(),"] setEnabled success"));case 37:case"end":return e.stop()}}),e,this,[[11,16],[22,33]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),mp()&&Z_.unbindInterruptDetectorTrack(this)}},{key:"onTrackEnded",value:function(){var e=this;if((pp()||_p())&&this._enabled&&!this._isClosed&&Z_.duringInterruption){var t=function(){var n=u(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Z_.off(F_.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return zv.debug("[".concat(e.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Z_.on(F_.IOS_INTERRUPTION_END,t)}else zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Og.TRACK_ENDED)}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=bb.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId=r),this._constraints=n,!this._enabled){e.next=8;break}return this._originMediaStreamTrack.stop(),e.next=5,vb({audio:this._constraints},this.getTrackId());case 5:return i=e.sent,e.next=8,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bindProcessorContextEvents",value:function(){var e=this;this.processorContext.on(Yg.REQUEST_UPDATE_CONSTRAINTS,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(m(n))),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(Yg.REQUEST_CONSTRAINTS,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}(RS)).prototype,"setDevice",[Hb,Kb],Object.getOwnPropertyDescriptor(Xb.prototype,"setDevice"),Xb.prototype),v_(Xb.prototype,"setEnabled",[zb,Yb,qb],Object.getOwnPropertyDescriptor(Xb.prototype,"setEnabled"),Xb.prototype),v_(Xb.prototype,"close",[Zb],Object.getOwnPropertyDescriptor(Xb.prototype,"close"),Xb.prototype),Xb),IS=(Jb=j_({argsMap:function(e,t){return[e.getTrackId(),t,e.duration]}}),Qb=kb(),$b=j_({argsMap:function(e){return[e.getTrackId()]}}),eS=kb(),tS=j_({argsMap:function(e){return[e.getTrackId()]}}),nS=kb(),rS=j_({argsMap:function(e){return[e.getTrackId()]}}),iS=kb(),oS=j_({argsMap:function(e){return[e.getTrackId()]}}),aS=kb(),v_((sS=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;h(this,n),a=t.call(this,r.createOutputTrack(),i,o),xp(l(a),"source",void 0),xp(l(a),"_bufferSource",void 0),a.source=e,a._bufferSource=r,a._bufferSource.on(Zy.AUDIO_SOURCE_STATE_CHANGE,(function(e){a.emit(Og.SOURCE_STATE_CHANGE,e)}));try{a._mediaStreamTrack=a._source.createOutputTrack()}catch(e){}return a}return v(n,[{key:"__className__",get:function(){return"BufferSourceAudioTrack"}},{key:"currentState",get:function(){return this._bufferSource.currentState}},{key:"duration",get:function(){return this._bufferSource.duration}},{key:"getCurrentTime",value:function(){return this._bufferSource.currentTime}},{key:"startProcessAudioBuffer",value:function(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}},{key:"pauseProcessAudioBuffer",value:function(){this._bufferSource.pauseProcessAudioBuffer()}},{key:"seekAudioBuffer",value:function(e){this._bufferSource.seekAudioBuffer(e)}},{key:"resumeProcessAudioBuffer",value:function(){this._bufferSource.resumeProcessAudioBuffer()}},{key:"stopProcessAudioBuffer",value:function(){this._bufferSource.stopProcessAudioBuffer()}}]),n}(RS)).prototype,"startProcessAudioBuffer",[Jb,Qb],Object.getOwnPropertyDescriptor(sS.prototype,"startProcessAudioBuffer"),sS.prototype),v_(sS.prototype,"pauseProcessAudioBuffer",[$b,eS],Object.getOwnPropertyDescriptor(sS.prototype,"pauseProcessAudioBuffer"),sS.prototype),v_(sS.prototype,"seekAudioBuffer",[tS,nS],Object.getOwnPropertyDescriptor(sS.prototype,"seekAudioBuffer"),sS.prototype),v_(sS.prototype,"resumeProcessAudioBuffer",[rS,iS],Object.getOwnPropertyDescriptor(sS.prototype,"resumeProcessAudioBuffer"),sS.prototype),v_(sS.prototype,"stopProcessAudioBuffer",[oS,aS],Object.getOwnPropertyDescriptor(sS.prototype,"stopProcessAudioBuffer"),sS.prototype),sS),OS=function(e){f(n,e);var t=p(n);function n(){var e;h(this,n);var r=J_().createMediaStreamDestination();e=t.call(this,r.stream.getAudioTracks()[0],void 0,tw(8,"track-mix-")),xp(l(e),"trackList",void 0),xp(l(e),"destNode",void 0);try{e._mediaStreamTrack=e._source.createOutputTrack()}catch(r){}return e.destNode=r,e.trackList=[],e}return v(n,[{key:"__className__",get:function(){return"MixingAudioTrack"}},{key:"isActive",get:function(){var e,t=s(this.trackList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n._enabled&&!n._isClosed&&!n.muted)return!0}}catch(r){t.e(r)}finally{t.f()}return!1}},{key:"hasAudioTrack",value:function(e){return-1!==this.trackList.indexOf(e)}},{key:"addAudioTrack",value:function(e){-1===this.trackList.indexOf(e)?(zv.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):zv.debug("track ".concat(e.getTrackId()," is already added"))}},{key:"removeAudioTrack",value:function(e){if(-1!==this.trackList.indexOf(e)){zv.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}lw(this.trackList,e),this.updateEncoderConfig()}}},{key:"updateEncoderConfig",value:function(){var e={};this.trackList.forEach((function(t){t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}}]),n}(RS),AS=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.apply(this,arguments),xp(l(e),"resultStorage",new Map),e}return v(n,[{key:"setLocalAudioStats",value:function(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}},{key:"setLocalVideoStats",value:function(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}},{key:"setRemoteAudioStats",value:function(e,t){var n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}},{key:"setRemoteVideoStats",value:function(e,t){var n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}},{key:"record",value:function(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});var r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i=r.result.includes(!0);r.isPrevNormal&&!i&&this.emit("exception",NS[e],e,t),!r.isPrevNormal&&i&&this.emit("exception",NS[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=i,r.result=[]}}},{key:"checkAudioOutputLevel",value:function(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}},{key:"checkAudioInputLevel",value:function(e,t){return t instanceof OS&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}},{key:"checkFramerateInput",value:function(e,t){var n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=BS(t._encoderConfig.frameRate));var r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}},{key:"checkFramerateSent",value:function(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}},{key:"checkSendVideoBitrate",value:function(e,t){return!!t.muted||0!==e.sendBitrate}},{key:"checkSendAudioBitrate",value:function(e,t){return t instanceof OS&&!t.isActive||!!t.muted||0!==e.sendBitrate}},{key:"checkVideoDecode",value:function(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}]),n}(Lv),NS={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},DS=new(function(){function e(){h(this,e)}return v(e,[{key:"markSubscribeStart",value:function(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}},{key:"markPublishStart",value:function(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}},{key:"measureFromSubscribeStart",value:function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}},{key:"measureFromPublishStart",value:function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}}]),e}());function xS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xS(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var LS=function(){function e(t){var n=this;h(this,e),xp(this,"store",void 0),xp(this,"onStatsException",void 0),xp(this,"onUploadPublishDuration",void 0),xp(this,"localStats",new Map),xp(this,"remoteStats",new Map),xp(this,"updateStatsInterval",void 0),xp(this,"trafficStats",void 0),xp(this,"trafficStatsPeerList",[]),xp(this,"uplinkStats",void 0),xp(this,"exceptionMonitor",void 0),xp(this,"p2pChannel",void 0),xp(this,"updateStats",(function(){n.p2pChannel&&(n.updateRemoteStats(n.p2pChannel),n.updateLocalStats(n.p2pChannel))})),this.store=t,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new AS,this.exceptionMonitor.on("exception",(function(e,t,r){n.onStatsException&&n.onStatsException(e,t,r)}))}return v(e,[{key:"reset",value:function(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}},{key:"getLocalAudioTrackStats",value:function(){return this.localStats.get(Bg.LocalAudioTrack)||PS({},og)}},{key:"getLocalVideoTrackStats",value:function(){return this.localStats.get(Bg.LocalVideoTrack)||PS({},ag)}},{key:"getRemoteAudioTrackStats",value:function(e){var t=this,n=function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppad+(Date.now()-t.trafficStats.timestamp)),n},r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.audioStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=a(e,2),i=t[0],o=t[1].audioStats;o&&(r[i]=n(i,o))}));return r}},{key:"getRemoteNetworkQualityStats",value:function(e){var t={};if(e){var n,r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1].networkStats;i&&(t[r]=i)}));return t}},{key:"getRemoteVideoTrackStats",value:function(e){var t=this,n=function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppvd+(Date.now()-t.trafficStats.timestamp)),n},r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.videoStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=a(e,2),i=t[0],o=t[1].videoStats;o&&(r[i]=n(i,o))}));return r}},{key:"getRTCStats",value:function(){var e=0,t=0,n=0,r=0,i=this.localStats.get(Bg.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);var o=this.localStats.get(Bg.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);var a=this.localStats.get(Bg.LocalVideoLowTrack);a&&(e+=a.sendBytes,t+=a.sendBitrate),this.remoteStats.forEach((function(e){var t=e.audioStats,i=e.videoStats;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));var s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}},{key:"addLocalStats",value:function(e){this.localStats.set(e,void 0)}},{key:"removeLocalStats",value:function(e){e?this.localStats.delete(e):this.localStats.clear()}},{key:"addRemoteStats",value:function(e){this.remoteStats.set(e,{})}},{key:"removeRemoteStats",value:function(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}},{key:"addP2PChannel",value:function(e){this.p2pChannel=e}},{key:"updateTrafficStats",value:function(e){var t=this;e.peer_delay=e.peer_delay.filter((function(e){return void 0!==e.B_ppad||void 0!==e.B_ppvd})),e.peer_delay.filter((function(e){return-1===t.trafficStatsPeerList.indexOf(e.peer_uid)})).forEach((function(e){var n,r=null===(n=t.p2pChannel)||void 0===n?void 0:n.getRemoteMedia(e.peer_uid),i=null!=r&&r.videoSSRC?DS.measureFromSubscribeStart(t.store.clientId,r.videoSSRC):0,o=null!=r&&r.audioSSRC?DS.measureFromSubscribeStart(t.store.clientId,r.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(t.onUploadPublishDuration&&t.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,i>o?i:o),t.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}},{key:"updateUplinkStats",value:function(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&zv.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}},{key:"isLocalVideoFreeze",value:function(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}},{key:"updateLocalStats",value:function(e){var t=this;Array.from(this.localStats.entries()).forEach((function(n){var r=a(n,2),i=r[0],o=r[1];switch(i){case Bg.LocalVideoTrack:case Bg.LocalVideoLowTrack:var s=o,c=PS({},ag),u=e.getStats(),l=e.getLocalMedia(i);if(u){var d=u.videoSend.find((function(e){return e.ssrc===(null==l?void 0:l.ssrcs[0].ssrcId)}));if(d){var f=e.getLocalVideoSize(),p=e.getEncoderConfig(Bg.LocalVideoTrack);"H264"!==d.codec&&"VP8"!==d.codec&&"VP9"!==d.codec&&"AV1X"!==d.codec&&"AV1"!==d.codec||(c.codecType=d.codec),c.sendBytes=d.bytes,c.sendBitrate=s?8*Math.max(0,c.sendBytes-s.sendBytes):0,d.inputFrame?(c.captureFrameRate=d.inputFrame.frameRate,c.captureResolutionHeight=d.inputFrame.height,c.captureResolutionWidth=d.inputFrame.width):f&&(c.captureResolutionWidth=f.width,c.captureResolutionHeight=f.height),d.sentFrame?(c.sendFrameRate=d.sentFrame.frameRate,c.sendResolutionHeight=d.sentFrame.height,c.sendResolutionWidth=d.sentFrame.width):f&&(c.sendResolutionWidth=f.width,c.sendResolutionHeight=f.height),d.avgEncodeMs&&(c.encodeDelay=d.avgEncodeMs),p&&p.bitrateMax&&(c.targetSendBitrate=1e3*p.bitrateMax),c.sendPackets=d.packets,c.sendPacketsLost=d.packetsLost,c.totalDuration=s?s.totalDuration+1:1,c.totalFreezeTime=s?s.totalFreezeTime:0,t.isLocalVideoFreeze(d)&&(c.totalFreezeTime+=1)}t.trafficStats&&(c.sendPacketsLost=t.trafficStats.B_pvlr4/100)}t.localStats.set(i,c),c&&l&&t.exceptionMonitor.setLocalVideoStats(t.store.uid,l.track,c);break;case Bg.LocalAudioTrack:var h=o,v=PS({},og),m=e.getStats(),y=e.getLocalMedia(i);if(m){var g=m.audioSend.find((function(e){return e.ssrc===(null==y?void 0:y.ssrcs[0].ssrcId)}));if(g){if("opus"!==g.codec&&"aac"!==g.codec&&"PCMU"!==g.codec&&"PCMA"!==g.codec&&"G722"!==g.codec||(v.codecType=g.codec),g.inputLevel)v.sendVolumeLevel=Math.round(32767*g.inputLevel);else{var E=e.getLocalAudioVolume();E&&(v.sendVolumeLevel=Math.round(32767*E))}v.sendBytes=g.bytes,v.sendPackets=g.packets,v.sendPacketsLost=g.packetsLost,v.sendBitrate=h?8*Math.max(0,v.sendBytes-h.sendBytes):0}}t.trafficStats&&(v.sendPacketsLost=t.trafficStats.B_pvlr4/100),t.localStats.set(Bg.LocalAudioTrack,v),v&&y&&t.exceptionMonitor.setLocalAudioStats(t.store.uid,y.track,v)}}))}},{key:"updateRemoteStats",value:function(t){var n=this;Array.from(this.remoteStats.entries()).forEach((function(r){var i=a(r,2),o=i[0],s=i[1],c=s.videoStats,u=s.audioStats,l=c,d=s.videoPcStats,f=PS({},sg),p=PS({},ug),h=PS({},cg),v=t.getRemoteMedia(o),m=v.audioTrack,y=v.videoTrack,g=v.audioSSRC,E=v.videoSSRC,_=t.getStats(),b=null==_?void 0:_.audioRecv.find((function(e){return e.ssrc===g})),S=null==_?void 0:_.videoRecv.find((function(e){return e.ssrc===E})),w=n.trafficStats&&n.trafficStats.peer_delay.find((function(e){return e.peer_uid===o}));if(b&&("opus"!==b.codec&&"aac"!==b.codec&&"PCMU"!==b.codec&&"PCMA"!==b.codec&&"G722"!==b.codec||(f.codecType=b.codec),b.outputLevel?f.receiveLevel=Math.round(32767*b.outputLevel):m&&(f.receiveLevel=Math.round(32767*m.getVolumeLevel())),f.receiveBytes=b.bytes,f.receivePackets=b.packets,f.receivePacketsLost=b.packetsLost,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.receiveBitrate=u?8*Math.max(0,f.receiveBytes-u.receiveBytes):0,f.totalDuration=u?u.totalDuration+1:1,f.totalFreezeTime=u?u.totalFreezeTime:0,f.freezeRate=f.totalFreezeTime/f.totalDuration,f.receiveDelay=b.jitterBufferMs,f.totalDuration>10&&e.isRemoteAudioFreeze(m)&&(f.totalFreezeTime+=1)),S){"H264"!==S.codec&&"VP8"!==S.codec&&"VP9"!==S.codec&&"AV1X"!==S.codec&&"AV1"!==S.codec||(p.codecType=S.codec),p.receiveBytes=S.bytes,p.receiveBitrate=l?8*Math.max(0,p.receiveBytes-l.receiveBytes):0,p.decodeFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,p.renderFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,S.outputFrame&&(p.renderFrameRate=S.outputFrame.frameRate),S.receivedFrame?(p.receiveFrameRate=S.receivedFrame.frameRate,p.receiveResolutionHeight=S.receivedFrame.height,p.receiveResolutionWidth=S.receivedFrame.width):y&&(p.receiveResolutionHeight=y._videoHeight||0,p.receiveResolutionWidth=y._videoWidth||0),void 0!==S.framesRateFirefox&&(p.receiveFrameRate=Math.round(S.framesRateFirefox)),p.receivePackets=S.packets,p.receivePacketsLost=S.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=l?l.totalDuration+1:1,p.totalFreezeTime=l?l.totalFreezeTime:0,p.receiveDelay=S.jitterBufferMs||0;var k=!!E&&t.getRemoteVideoIsReady(E);y&&k&&e.isRemoteVideoFreeze(y,S,d)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}w&&(f.end2EndDelay=w.B_ad,p.end2EndDelay=w.B_vd,f.transportDelay=w.B_ed,p.transportDelay=w.B_ed,f.currentPacketLossRate=w.B_ealr4/100,p.currentPacketLossRate=w.B_evlr4/100,h.uplinkNetworkQuality=w.B_punq?w.B_punq:0,h.downlinkNetworkQuality=w.B_pdnq?w.B_pdnq:0),n.remoteStats.set(o,{audioStats:f,videoStats:p,videoPcStats:S,networkStats:h}),m&&n.exceptionMonitor.setRemoteAudioStats(m,f),y&&n.exceptionMonitor.setRemoteVideoStats(y,p)}))}}],[{key:"isRemoteVideoFreeze",value:function(e,t,n){if(!e)return!1;var r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}},{key:"isRemoteAudioFreeze",value:function(e){return!!e&&e._isFreeze()}}]),e}(),MS=new(function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"_lastHiddenTime",0),xp(l(e),"_lastVisibleTime",0),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?e._lastHiddenTime=performance.now():e._lastVisibleTime=performance.now(),zv.debug("document visibility went ".concat(document.visibilityState)),e.emit("VISIBILITY_CHANGE",document.visibilityState)})),e}return v(n,[{key:"visibility",get:function(){return document.visibilityState}},{key:"lastHiddenTime",get:function(){return this._lastHiddenTime}},{key:"lastVisibleTime",get:function(){return this._lastVisibleTime}}]),n}(Lv));function US(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?US(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):US(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VS(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(sm("TURN_DOMAIN")):(zv.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function FS(e,t){var n,r,i=sm("GATEWAY_DOMAINS"),o=i[1]&&-1!==t.indexOf(i[1])?1:0;e.addresses=e.addresses||[];var a=e.addresses.map((function(e){return e.domain_prefix?{address:"".concat(e.domain_prefix,".").concat(i[o++%i.length],":").concat(e.port)}:e.ip.match(/^[\.\:\d]+$/)?{ip:e.ip,port:e.port,address:"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(i[o++%i.length],":").concat(e.port)}:(zv.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),{ip:e.ip,port:e.port,address:"".concat(e.ip,":").concat(e.port)})}));if(null!==(n=e.detail)&&void 0!==n&&n[18]&&"string"==typeof(null===(r=e.detail)||void 0===r?void 0:r[18]))for(var s=e.detail[18],c=null==s?void 0:s.split(";"),u=0;u<c.length;u++){var l,d=jf(l=c[u]).call(l);a[u]&&d&&(a[u].ip6=d)}return{gatewayAddrs:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function BS(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function WS(e){var t=e._encoderConfig;if(!t)return{};var n={resolution:t.width&&t.height?"".concat(BS(t.width),"x").concat(BS(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function GS(e,t,n){var r,i,o,a,s,c,u,l,d=t.videoSend.find((function(t){return t.ssrc===e}));if(!d)return null;var f={id:tw(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:d.ssrc.toString()},p=null!==(r=null!==(i=null===(o=d.inputFrame)||void 0===o?void 0:o.height)&&void 0!==i?i:null==n?void 0:n._videoHeight)&&void 0!==r?r:0,h=null!==(a=null!==(s=null===(c=d.inputFrame)||void 0===c?void 0:c.width)&&void 0!==s?s:null==n?void 0:n._videoWidth)&&void 0!==a?a:0,v=null!==(u=null===(l=d.inputFrame)||void 0===l?void 0:l.frameRate)&&void 0!==u?u:0;return p&&(f.A_fhi=p+""),h&&(f.A_fwi=h+""),v&&(f.A_fri=v+""),f}function HS(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function KS(e,t){var n,r,i=void 0;switch(t){case tE.CHOOSE_SERVER:n=4096,r="choose server";break;case tE.CLOUD_PROXY:n=1048576,r="proxy";break;case tE.CLOUD_PROXY_5:n=4194304,r="proxy5";break;case tE.CLOUD_PROXY_FALLBACK:n=4194310,r="proxy fallback";break;default:throw new Uv(Dv.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((function(t){t.buffer&&t.buffer.flag===n&&(i={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((function(e){return jS(jS({},e),{},{ticket:t.buffer.cert})})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:jS(jS({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!i)throw new Uv(Dv.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return i}function zS(e,t){return YS.apply(this,arguments)}function YS(){return YS=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vd.all(t.addresses.map(function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=VS(t.ip),e.t1=t.port,e.t2=t.port,e.t3=n&&sm("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():Jv.username,!(n&&sm("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext)){e.next=10;break}return e.next=7,L_(n.toString());case 7:e.t4=e.sent,e.next=11;break;case 10:e.t4=Jv.password;case 11:return e.t5=e.t4,e.abrupt("return",{address:e.t0,tcpport:e.t1,udpport:e.t2,username:e.t3,password:e.t5});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),YS.apply(this,arguments)}function qS(e,t){var n=t._videoWidth||t.getMediaStreamTrack(!0).getSettings().width;return n||zv.warning("cannot get original video track's width, default scale down 4 times for low stream"),n?n/BS(e.width):4}function ZS(e){var t=e.candidateType,n=e.relayProtocol,r=e.type,i=e.address,o=e.port,a=e.protocol;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:a}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:a}}function XS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XS(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QS(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function $S(e){return new Vd((function(t){window.setTimeout(t,e)}))}function ew(e){var t=new Uv(Dv.TIMEOUT,"timeout");return new Vd((function(n,r){window.setTimeout((function(){return r(t)}),e)}))}function tw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+tw(e-n.length,"")}function nw(){return tw(32,"").toUpperCase()}var rw=function(){};function iw(e){return new Vd((function(t,n){var r=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);var o=pp()?"canplay":"playing";i.addEventListener(o,(function(){var e=i.videoWidth,n=i.videoHeight;!e&&fp()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(rw),setTimeout((function(){r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function ow(e){return Vd.all(e.map((function(e){return e.then((function(e){throw e}),(function(e){return e}))}))).then((function(e){throw e}),(function(e){return e}))}function aw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?Vd.reject(new Uv(Dv.UNEXPECTED_ERROR,"can not emit promise")):new Vd((function(n,i){e.emit.apply(e,[t].concat(r,[n,i]))}))}function sw(e,t){if(0===e.getListeners(t).length)return Vd.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return aw.apply(void 0,[e,t].concat(r))}function cw(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return uw.apply(void 0,[e,t].concat(r))}function uw(e,t){for(var n=null,r=null,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit.apply(e,[t].concat(o,[function(e){n=e},function(e){r=e}])),null!==r)throw r;if(null===n)throw new Uv(Dv.UNEXPECTED_ERROR,"handler is not sync");return n}function lw(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function dw(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t}function fw(e){Vd.resolve().then(e)}function pw(e){return JSON.parse(JSON.stringify(e))}var hw={};function vw(e,t){hw[t]||(hw[t]=!0,e())}function mw(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function yw(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}var gw=new(function(){function e(){h(this,e),xp(this,"fnMap",new Map)}return v(e,[{key:"throttleByKey",value:function(e,t,n,r){for(var i=this,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];if(this.fnMap.has(t)){var c=this.fnMap.get(t);if(c.threshold!==n){c.fn.apply(c,m(c.args)),clearTimeout(c.timer);var u=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,m(e.args)),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:u,args:a,skipFn:r})}else c.skipFn&&c.skipFn.apply(c,m(c.args)),this.fnMap.set(t,JS(JS({},c),{},{fn:e,args:a,skipFn:r}))}else{var l=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,m(e.args)),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:l,args:a,skipFn:r})}}}]),e}()),Ew=gw.throttleByKey.bind(gw),_w=function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fragementLength,r=t.referenceList,i=t.asyncMapHandler,o=t.allFailedhandler,a=t.promisesCollector,s=0,l=n,f=0,p=function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=s*l,t=e+l;return r.slice(e,t).map(i)}(),a&&a.push.apply(a,m(t)),e.prev=2,e.next=5,ow(t);case 5:d=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),s++,(f+=l)>=r.length){e.next=14;break}return e.next=13,p();case 13:return e.abrupt("return",void e.sent);case 14:o(e.t0);case 15:t.forEach((function(e){return e.cancel()}));case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),e.next=6,p();case 6:return e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function bw(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}var Sw=(y(E={},Py.ACCESS_POINT,(y(e={},Uy.NO_FLAG_SET,{desc:"flag is zero",retry:!1}),y(e,Uy.FLAG_SET_BUT_EMPTY,{desc:"flag is empty",retry:!1}),y(e,Uy.INVALID_FALG_SET,{desc:"invalid flag",retry:!1}),y(e,Uy.FLAG_SET_BUT_NO_RE,{desc:"flag set unilbs but no request",retry:!1}),y(e,Uy.INVALID_SERVICE_ID,{desc:"invalid service id",retry:!1}),y(e,Uy.NO_SERVICE_AVAILABLE,{desc:"no service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_P2P,{desc:"no unilbs p2p service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_VOET,{desc:"no unilbs voice service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_WEBRTC,{desc:"no unilbs webrtc service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_CDS,{desc:"no cds service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_CDN,{desc:"no cdn dispatcher service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_TDS,{desc:"no tds service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_REPORT,{desc:"no unilbs report service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_APP_CENTER,{desc:"no app center service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_ENV0,{desc:"no unilbs sig env0 service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_VOET,{desc:"no unilbs voet service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_STRING_UID,{desc:"no string uid service available",retry:!0}),y(e,Uy.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS,{desc:"no webrtc unilbs service available",retry:!0}),e)),y(E,Py.UNILBS,(y(t={},My.INVALID_VENDOR_KEY,{desc:"invalid vendor key, can not find appid",retry:!1}),y(t,My.INVALID_CHANNEL_NAME,{desc:"invalid channel name",retry:!1}),y(t,My.INTERNAL_ERROR,{desc:"unilbs internal error",retry:!1}),y(t,My.NO_AUTHORIZED,{desc:"invalid token, authorized failed",retry:!1}),y(t,My.DYNAMIC_KEY_TIMEOUT,{desc:"dynamic key or token timeout",retry:!1}),y(t,My.NO_ACTIVE_STATUS,{desc:"no active status",retry:!1}),y(t,My.DYNAMIC_KEY_EXPIRED,{desc:"dynamic key expired",retry:!1}),y(t,My.STATIC_USE_DYNAMIC_KEY,{desc:"static use dynamic key",retry:!1}),y(t,My.DYNAMIC_USE_STATIC_KEY,{desc:"dynamic use static key",retry:!1}),y(t,My.USER_OVERLOAD,{desc:"amount of users over load",retry:!1}),y(t,My.FORBIDDEN_REGION,{desc:"the request is forbidden in this area",retry:!1}),y(t,My.CANNOT_MEET_AREA_DEMAND,{desc:"unable to allocate services in this area",retry:!1}),t)),y(E,Py.STRING_UID_ALLOCATOR,(y(g={},Ly.IIIEGAL_APPID,{desc:"invalid appid",retry:!1}),y(g,Ly.IIIEGAL_UID,{desc:"invalid string uid",retry:!1}),y(g,Ly.INTERNAL_ERROR,{desc:"string uid allocator internal error",retry:!0}),g)),E);function ww(e){var t=Sw[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};var n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===Py.ACCESS_POINT){var r=e%1e4;if("1"===r.toString()[0])return{desc:e.toString(),retry:!1};if("2"===r.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}var kw=(y(_={},jy.K_TIMESTAMP_EXPIRED,{desc:"K_TIMESTAMP_EXPIRED",action:"failed"}),y(_,jy.K_CHANNEL_PERMISSION_INVALID,{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"}),y(_,jy.K_CERTIFICATE_INVALID,{desc:"K_CERTIFICATE_INVALID",action:"failed"}),y(_,jy.K_CHANNEL_NAME_EMPTY,{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"}),y(_,jy.K_CHANNEL_NOT_FOUND,{desc:"K_CHANNEL_NOT_FOUND",action:"failed"}),y(_,jy.K_TICKET_INVALID,{desc:"K_TICKET_INVALID",action:"failed"}),y(_,jy.K_CHANNEL_CONFLICTED,{desc:"K_CHANNEL_CONFLICTED",action:"failed"}),y(_,jy.K_SERVICE_NOT_READY,{desc:"K_SERVICE_NOT_READY",action:"tryNext"}),y(_,jy.K_SERVICE_TOO_HEAVY,{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"}),y(_,jy.K_UID_BANNED,{desc:"K_UID_BANNED",action:"failed"}),y(_,jy.K_IP_BANNED,{desc:"K_IP_BANNED",action:"failed"}),y(_,jy.ERR_INVALID_VENDOR_KEY,{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"}),y(_,jy.ERR_INVALID_CHANNEL_NAME,{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"}),y(_,jy.WARN_NO_AVAILABLE_CHANNEL,{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"}),y(_,jy.WARN_LOOKUP_CHANNEL_TIMEOUT,{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"}),y(_,jy.WARN_LOOKUP_CHANNEL_REJECTED,{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"}),y(_,jy.WARN_OPEN_CHANNEL_TIMEOUT,{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"}),y(_,jy.WARN_OPEN_CHANNEL_REJECTED,{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"}),y(_,jy.WARN_REQUEST_DEFERRED,{desc:"WARN_REQUEST_DEFERRED",action:"failed"}),y(_,jy.ERR_DYNAMIC_KEY_TIMEOUT,{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"}),y(_,jy.ERR_NO_AUTHORIZED,{desc:"ERR_NO_AUTHORIZED",action:"failed"}),y(_,jy.ERR_VOM_SERVICE_UNAVAILABLE,{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"}),y(_,jy.ERR_NO_CHANNEL_AVAILABLE_CODE,{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"}),y(_,jy.ERR_MASTER_VOCS_UNAVAILABLE,{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"}),y(_,jy.ERR_INTERNAL_ERROR,{desc:"ERR_INTERNAL_ERROR",action:"tryNext"}),y(_,jy.ERR_NO_ACTIVE_STATUS,{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"}),y(_,jy.ERR_INVALID_UID,{desc:"ERR_INVALID_UID",action:"failed"}),y(_,jy.ERR_DYNAMIC_KEY_EXPIRED,{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"}),y(_,jy.ERR_STATIC_USE_DYANMIC_KE,{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"}),y(_,jy.ERR_DYNAMIC_USE_STATIC_KE,{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"}),y(_,jy.ERR_NO_VOCS_AVAILABLE,{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"}),y(_,jy.ERR_NO_VOS_AVAILABLE,{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"}),y(_,jy.ERR_JOIN_CHANNEL_TIMEOUT,{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"}),y(_,jy.ERR_JOIN_BY_MULTI_IP,{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"}),y(_,jy.ERR_NOT_JOINED,{desc:"ERR_NOT_JOINED",action:"failed"}),y(_,jy.ERR_REPEAT_JOIN_REQUEST,{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"}),y(_,jy.ERR_REPEAT_JOIN_CHANNEL,{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"}),y(_,jy.ERR_INVALID_VENDOR_KEY,{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"}),y(_,jy.ERR_INVALID_CHANNEL_NAME,{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"}),y(_,jy.ERR_INVALID_STRINGUID,{desc:"ERR_INVALID_STRINGUID",action:"failed"}),y(_,jy.ERR_TOO_MANY_USERS,{desc:"ERR_TOO_MANY_USERS",action:"tryNext"}),y(_,jy.ERR_SET_CLIENT_ROLE_TIMEOUT,{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"}),y(_,jy.ERR_SET_CLIENT_ROLE_NO_PERMISSION,{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"}),y(_,jy.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE,{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"}),y(_,jy.ERR_PUBLISH_REQUEST_INVALID,{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"}),y(_,jy.ERR_SUBSCRIBE_REQUEST_INVALID,{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"}),y(_,jy.ERR_NOT_SUPPORTED_MESSAGE,{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"}),y(_,jy.ERR_ILLEAGAL_PLUGIN,{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"}),y(_,jy.ILLEGAL_CLIENT_ROLE_LEVEL,{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"}),y(_,jy.ERR_REJOIN_TOKEN_INVALID,{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"}),y(_,jy.ERR_REJOIN_USER_NOT_JOINED,{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"}),y(_,jy.ERR_INVALID_OPTIONAL_INFO,{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"}),y(_,jy.ERR_TEST_RECOVER,{desc:"ERR_TEST_RECOVER",action:"recover"}),y(_,jy.ERR_TEST_TRYNEXT,{desc:"ERR_TEST_TRYNEXT",action:"recover"}),y(_,jy.ERR_TEST_RETRY,{desc:"ERR_TEST_RETRY",action:"recover"}),y(_,jy.ILLEGAL_AES_PASSWORD,{desc:"ERR_TEST_RETRY",action:"failed"}),y(_,jy.ERR_TOO_MANY_BROADCASTERS,{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"}),y(_,jy.ERR_TOO_MANY_SUBSCRIBERS,{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}),y(_,jy.ERR_LICENSE_ILLEGAL,{desc:"ERR_LICENSE_ILLEGAL",action:"quit"}),y(_,jy.ERR_LICENSE_MISSING,{desc:"ERR_LICENSE_MISSING",action:"quit"}),y(_,jy.ERR_LICENSE_EXPIRED,{desc:"ERR_LICENSE_EXPIRED",action:"quit"}),y(_,jy.ERR_LICENSE_MINUTES_EXCEEDED,{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"}),y(_,jy.ERR_LICENSE_PERIOD_INVALID,{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"}),y(_,jy.ERR_LICENSE_MULTIPLE_SDK_SERVICE,{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}),_);function Tw(e){return kw[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function Rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cw=function(e){f(n,e);var t=p(n);function n(e,r){var i;h(this,n);var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;i=t.call(this),xp(l(i),"connectionID",0),xp(l(i),"currentURLIndex",0),xp(l(i),"urls",void 0),xp(l(i),"_reconnectMode","tryNext"),xp(l(i),"reconnectReason",void 0),xp(l(i),"_initMutex",new G_("websocket")),xp(l(i),"name",void 0),xp(l(i),"_state","closed"),xp(l(i),"reconnectInterrupter",void 0),xp(l(i),"websocket",void 0),xp(l(i),"retryConfig",void 0),xp(l(i),"reconnectCount",0),xp(l(i),"forceCloseTimeout",5e3),xp(l(i),"onlineReconnectListener",void 0),xp(l(i),"useCompress",void 0),xp(l(i),"tryDoubleDomain",!1),xp(l(i),"wsInflateLength",0),xp(l(i),"wsDeflateLength",0),xp(l(i),"closeEstablishingWs",(function(){})),xp(l(i),"store",void 0),xp(l(i),"joinChannelServiceRecordIndex",void 0),i.store=s,i.name=e,i.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rw(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i.useCompress=o,i.tryDoubleDomain=a;var c=r.timeout,u=r.timeoutFactor,d=Math.max(300,Math.floor(3*c/5)),f=Math.max(1.2,Math.floor(8*u)/10);return Hg.ONLINE&&(i.retryConfig.timeout=d,i.retryConfig.timeoutFactor=f),O_.on(Kg.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(i.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Hg.ONLINE?(i.retryConfig.timeout=d,i.retryConfig.timeoutFactor=f):(i.retryConfig.timeout=c,i.retryConfig.timeoutFactor=u))})),i}return v(n,[{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ng.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ng.CONNECTED):"closed"===this._state?this.emit(ng.CLOSED):"failed"===this._state&&this.emit(ng.FAILED))}},{key:"resetReconnectCount",value:function(e){zv.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}},{key:"getConnection",value:function(){return this.websocket||void 0}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this.forceCloseTimeout=n;var r=function(n,r){t.urls=e;var i=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(i).then(n).catch(r),t.once(ng.CLOSED,(function(){return r(new Uv(Dv.WS_DISCONNECT))})),t.once(ng.CONNECTED,(function(){return n()}))};return this._initMutex.lock().then((function(e){return new Vd((function(e,t){r(e,t)})).then((function(){e()})).catch((function(){e()}))}))}},{key:"close",value:function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}},{key:"reconnect",value:function(e,t){if(this.websocket){var n;void 0!==e&&(this.reconnectMode=e),zv.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(n=this.store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinChannelServiceRecordIndex));var r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}else zv.warning("[".concat(this.name,"] can not reconnect, no websocket"))}},{key:"sendMessage",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Uv(Dv.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new Uv(Dv.WS_ERR,"send websocket message error"+e.toString())}}},{key:"setWsInflateData",value:function(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}},{key:"getWsInflateData",value:function(){var e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}},{key:"clearWsInflateData",value:function(){this.wsInflateLength=0,this.wsDeflateLength=0}},{key:"createWebSocketConnection",value:function(){var e=u(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Vd((function(e,i){var o,a=function(t){var n;null===(n=r.store)||void 0===n||n.signalChannelOpen(),zv.debug("[".concat(r.name,"] websocket opened:"),t),r.reconnectMode="retry",r.state="connected",r.resetReconnectCount("opened"),e()},s=function(){var t=u(c().mark((function t(n){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(zv.debug("[".concat(r.name,"] websocket close ").concat(r.websocket&&r.websocket.url,", code: ").concat(n.code,", reason: ").concat(n.reason,", current mode: ").concat(r.reconnectMode)),!(r.reconnectCount<r.retryConfig.maxRetryCount)){t.next=13;break}return"connected"===r.state&&(r.reconnectReason=n.reason,r.state="reconnecting"),o=cw(r,ng.WILL_RECONNECT,r.reconnectMode)||r.reconnectMode,t.next=5,r.reconnectWithAction(o);case 5:if(a=t.sent,"closed"!==r.state){t.next=8;break}return t.abrupt("return",void zv.debug("[".concat(r.connectionID,"] ws is closed, no need to reconnect")));case 8:if(a){t.next=10;break}return t.abrupt("return",(i(new Uv(Dv.WS_DISCONNECT,"websocket reconnect failed: ".concat(n.code))),void r.close(!0)));case 10:e(),t.next=14;break;case 13:i(new Uv(Dv.WS_DISCONNECT,"websocket close: ".concat(n.code))),r.close();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(e){r.emit(ng.ON_MESSAGE,e)};r.websocket&&(r.websocket.onclose=null,r.websocket.close()),sm("GATEWAY_WSS_ADDRESS")&&r.name.startsWith("gateway")&&(t=sm("GATEWAY_WSS_ADDRESS")),zv.debug("[".concat(r.name,"] start connect, url: ").concat(t));var d=null===(o=r.store)||void 0===o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});r.chooseBestWebsocketConnection(t,!!n,d).then((function(e){var t;r.websocket=e,a&&a(e.url),e.onclose=s,e.onmessage=l,null===(t=r.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:"success"},d),r.joinChannelServiceRecordIndex=d})).catch((function(e){var t;if(null===(t=r.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof Uv&&e.code===Dv.WS_ABORT?"aborted":"error",errors:[e]},d),"closed"!==r.state){if(e instanceof Uv&&e.code===Dv.WS_ERR){var n=new Uv(Dv.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return zv.error("[".concat(r.name,"]").concat(n)),void i(n)}s&&s(e)}else i(new Uv(Dv.WS_DISCONNECT,"websocket is closed: ".concat(e.toString())))}))}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reconnectWithAction",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,f=this,p=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(p.length>1&&void 0!==p[1])||p[1],!(this.reconnectCount>=this.retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(this.urls){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(this.onlineReconnectListener||O_.networkState!==Hg.OFFLINE||(this.onlineReconnectListener=O_.onlineWaiter&&O_.onlineWaiter.then((function(){f.onlineReconnectListener=void 0}))),r=!0,this.reconnectInterrupter=function(){r=!1},!n){e.next=14;break}return i=Vv(this.reconnectCount,this.retryConfig),zv.debug("[".concat(this.name,"] wait ").concat(i,"ms to reconnect websocket, mode: ").concat(t)),e.next=14,Vd.race([$S(i),this.onlineReconnectListener||new Vd((function(){}))]);case 14:if("closed"!==this.state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this.reconnectCount+=1,o=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.emit(ng.RECONNECT_CREATE_CONNECTION,n),e.next=3,f.createWebSocketConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=26;break}return a=this.urls[this.currentURLIndex],this.emit(ng.RECONNECT_WAITTING_FINISH,t),e.next=24,o(a,t);case 24:e.next=49;break;case 26:if("tryNext"!==t){e.next=38;break}if(this.currentURLIndex+=1,!(this.currentURLIndex>=this.urls.length)){e.next=31;break}return e.next=30,this.reconnectWithAction("recover",!1);case 30:return e.abrupt("return",e.sent);case 31:return zv.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),s=this.urls[this.currentURLIndex],this.emit(ng.RECONNECT_WAITTING_FINISH,t),e.next=36,o(s,t);case 36:e.next=49;break;case 38:if("recover"!==t){e.next=49;break}return zv.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(ng.RECONNECT_WAITTING_FINISH,t),e.next=44,aw(this,ng.REQUEST_NEW_URLS);case 44:return this.urls=e.sent,this.currentURLIndex=0,l=this.urls[this.currentURLIndex],e.next=49,o(l,t);case 49:return e.abrupt("return",!0);case 52:if(e.prev=52,e.t0=e.catch(18),zv.error("[".concat(this.name,"] reconnect failed"),e.t0.toString()),!(null!=e.t0&&null!==(d=e.t0.data)&&void 0!==d&&d.desc&&Array.isArray(e.t0.data.desc)&&e.t0.data.desc.length&&e.t0.data.desc.includes("dynamic key expired"))){e.next=59;break}e.t1=(this.emit(ng.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1),e.next=62;break;case 59:return e.next=61,this.reconnectWithAction(t,n);case 61:e.t1=e.sent;case 62:return e.abrupt("return",e.t1);case 63:case"end":return e.stop()}}),e,this,[[18,52]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"chooseBestWebsocketConnection",value:function(){var e=u(c().mark((function e(t,n,r){var i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vd((function(e,o){var a=!1,s=[];i.closeEstablishingWs=function(){zv.debug("[choose-best-ws] close establishing websockets"),s.forEach((function(e){e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),o(new Uv(Dv.WS_ABORT,"choose best websocket aborted"))};var c,u=sm("GATEWAY_DOMAINS"),l=t.indexOf("?h="),d=u.find((function(e){return-1!==l?t.includes(e,l):t.includes(e)}));zv.debug("[choose-best-ws] currentDomain: ",d,", domains: ",u);var f=!i.tryDoubleDomain||n||!d;if(!f&&d){var p,h=Date.now();try{u.forEach((function(e){var n=-1===l?t.replace(d,e):t.substr(0,l)+t.substr(l).replace(d,e),r=new WebSocket(n);r.binaryType="arraybuffer",s.push(r),zv.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(t){for(zv.debug("[choose-best-ws] ws create failed, fallback to single url"),s.forEach((function(e){return e.close()}));s.length;)s.pop();f=!0}null===(p=i.store)||void 0===p||p.recordJoinChannelService({urls:s.map((function(e){return e.url})),service:"gateway"},r),s.forEach((function(t){t.onopen=function(){if(!a){var n=Date.now()-h;zv.debug("[choose-best-ws] ws open cost ".concat(n,"ms")),s.filter((function(e){return e!==t})).forEach((function(e){zv.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),a=!0,e(t)}},t.onclose=function(e){c=e,a||s.find((function(e){return!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)}))||(zv.debug("[choose-best-ws] all websocket is closed"),a=!0,o(c))},t.onmessage=function(e){zv.debug("[choose-best-ws]".concat(t.url," onmessage: ").concat(e.data))}})),$S(i.forceCloseTimeout).then((function(){s.forEach((function(e){e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(f){var v,m;zv.debug("[choose-best-ws] use single url: ",t),null===(v=i.store)||void 0===v||v.recordJoinChannelService({urls:[t],service:"gateway"},r);try{m=new WebSocket(t),s.push(m),m.binaryType="arraybuffer"}catch(t){var y=new Uv(Dv.WS_ERR,"init websocket failed! Error: ".concat(t.toString()));return zv.error("[".concat(i.name,"]").concat(y)),void o(y)}m.onopen=function(){e(m)},m.onclose=function(e){o(e)},m.onmessage=function(e){zv.debug("[choose-best-ws]".concat(m.url," onmessage: ").concat(e.data))},$S(i.forceCloseTimeout).then((function(){m&&m.readyState!==WebSocket.OPEN&&m.close()}))}})).then((function(e){return i.closeEstablishingWs=void 0,e})).catch((function(e){throw i.closeEstablishingWs=void 0,e})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),n}(Lv),Iw=function(){function e(t){h(this,e),xp(this,"input",[]),xp(this,"size",void 0),this.size=t}return v(e,[{key:"add",value:function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}},{key:"mean",value:function(){var e;return 0===this.input.length?0:gr(e=this.input).call(e,(function(e,t){return e+t}))/this.input.length}}]),e}(),Ow=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"_disconnectedReason",void 0),xp(l(i),"_websocketReconnectReason",void 0),xp(l(i),"_connectionState",Gy.CLOSED),xp(l(i),"reconnectToken",void 0),xp(l(i),"websocket",void 0),xp(l(i),"openConnectionTime",void 0),xp(l(i),"clientId",void 0),xp(l(i),"lastMsgTime",Date.now()),xp(l(i),"uploadCache",[]),xp(l(i),"uploadCacheInterval",void 0),xp(l(i),"rttRolling",new Iw(5)),xp(l(i),"pingpongTimer",void 0),xp(l(i),"wsInflateDataTimer",void 0),xp(l(i),"pingpongTimeoutCount",0),xp(l(i),"joinResponse",void 0),xp(l(i),"multiIpOption",void 0),xp(l(i),"initError",void 0),xp(l(i),"spec",void 0),xp(l(i),"store",void 0),xp(l(i),"onWebsocketMessage",(function(e){if(e.data instanceof ArrayBuffer)i.emit(Hy.ON_BINARY_DATA,e.data);else{var t=JSON.parse(e.data);if(i.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);i.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(i.emit(t._type,t._message),t._type===Yy.ON_NOTIFICATION&&i.handleNotification(t._message),t._type===Yy.ON_USER_BANNED)switch(t._message.error_code){case 14:i.close(Fy.UID_BANNED);break;case 15:i.close(Fy.IP_BANNED);break;case 16:i.close(Fy.CHANNEL_BANNED)}if(t._type===Yy.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case jy.ERR_LICENSE_MISSING:i.close(Fy.LICENSE_MISSING);break;case jy.ERR_LICENSE_EXPIRED:i.close(Fy.LICENSE_EXPIRED);break;case jy.ERR_LICENSE_MINUTES_EXCEEDED:i.close(Fy.LICENSE_MINUTES_EXCEEDED);break;case jy.ERR_LICENSE_PERIOD_INVALID:i.close(Fy.LICENSE_PERIOD_INVALID);break;case jy.ERR_LICENSE_MULTIPLE_SDK_SERVICE:i.close(Fy.LICENSE_MULTIPLE_SDK_SERVICE);break;case jy.ERR_LICENSE_ILLEGAL:i.close(Fy.LICENSE_ILLEGAL);break;default:i.close()}}}})),i.clientId=e.clientId,i.spec=e,i.store=r,i.websocket=new Cw("gateway-".concat(i.clientId),i.spec.retryConfig,!0,!0,r),i.handleWebsocketEvents(),window.addEventListener("offline",(function(){i.connectionState===Gy.CONNECTED&&i.reconnect("retry",Wy.OFFLINE)})),i}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Gy.CONNECTED?this.emit(Hy.WS_CONNECTED):e===Gy.RECONNECTING?this.emit(Hy.WS_RECONNECTING,this._websocketReconnectReason):e===Gy.CLOSED&&this.emit(Hy.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"rtt",get:function(){return this.rttRolling.mean()}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f,p,h,v=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=tw(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vd((function(e,n){if(v.connectionState===Gy.CONNECTED)return e();var r=function(){v.off(Hy.WS_CLOSED,i),e()},i=function(){v.off(Hy.WS_CONNECTED,r),n(new Uv(Dv.WS_ABORT))};v.once(Hy.WS_CONNECTED,r),v.once(Hy.WS_CLOSED,i),t!==Ky.PUBLISH&&t!==Ky.SUBSCRIBE&&t!==Ky.UNSUBSCRIBE&&t!==Ky.UNPUBLISH&&t!==Ky.CONTROL&&t!==Ky.RESTART_ICE||v.once(Hy.DISCONNECT_P2P,(function(){n(new Uv(Dv.DISCONNECT_P2P))})),t!==Ky.PUBLISH&&t!==Ky.RESTART_ICE||v.once(Hy.ABORT_P2P_EXECUTION,(function(){n(new Uv(Dv.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Gy.CONNECTING&&this.connectionState!==Gy.RECONNECTING||t===Ky.JOIN||t===Ky.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(this.websocket.sendMessage(a,!0),!i){e.next=8;break}return e.abrupt("return");case 8:return l=new Vd((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),v.off(Hy.WS_CLOSED,c),v.off(Hy.WS_RECONNECTING,c),v.emit(Hy.REQUEST_SUCCESS,t,n)};v.once("res-@".concat(o),a);var c=function e(){r(new Uv(Dv.WS_ABORT,"type: ".concat(t))),v.off(Hy.WS_CLOSED,e),v.off(Hy.WS_RECONNECTING,e),v.off("res-@".concat(o),a)};v.once(Hy.WS_CLOSED,c),v.once(Hy.WS_RECONNECTING,c),$S(sm("SIGNAL_REQUEST_TIMEOUT")).then((function(){v.websocket.connectionID!==s||i||(zv.warning("ws request timeout, type: ".concat(t)),v.emit(Hy.REQUEST_TIMEOUT,t,n))}))})),d=null,e.prev=10,e.next=13,l;case 13:d=e.sent,e.next=35;break;case 16:if(e.prev=16,e.t1=e.catch(10),this.connectionState!==Gy.CLOSED&&t!==Ky.LEAVE){e.next=20;break}throw new Uv(Dv.WS_ABORT);case 20:if(this.spec.forceWaitGatewayResponse&&!r){e.next=24;break}e.t2=e.t1.throw(),e.next=34;break;case 24:if(t!==Ky.JOIN&&t!==Ky.REJOIN){e.next=28;break}e.t3=null,e.next=33;break;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n);case 32:e.t3=e.sent;case 33:e.t2=e.t3;case 34:return e.abrupt("return",e.t2);case 35:if(!d.isSuccess){e.next=37;break}return e.abrupt("return",d.message);case 37:if(f=Number(d.message.error_code||d.message.code),p=Tw(f),h=new Uv(Dv.UNEXPECTED_RESPONSE,"".concat(p.desc,": ").concat(d.message.error_str),{code:f,data:d.message}),"success"!==p.action){e.next=42;break}e.t4=d.message,e.next=67;break;case 42:if(zv.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(f,", message: ").concat(p.desc,", action: ").concat(p.action)),f!==jy.ERR_TOO_MANY_BROADCASTERS){e.next=47;break}e.t5=t===Ky.JOIN||t===Ky.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw(),e.next=66;break;case 47:if("failed"!==p.action){e.next=51;break}e.t6=h.throw(),e.next=65;break;case 51:if("quit"!==p.action){e.next=55;break}e.t7=(this.initError=h,this.close(),h.throw()),e.next=64;break;case 55:if(f===jy.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,zv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Wy.MULTI_IP)):this.reconnect(p.action,Wy.SERVER_ERROR),t!==Ky.JOIN&&t!==Ky.REJOIN){e.next=60;break}e.t8=null,e.next=63;break;case 60:return e.next=62,this.request(t,n);case 62:e.t8=e.sent;case 63:e.t7=e.t8;case 64:e.t6=e.t7;case 65:e.t5=e.t6;case 66:e.t4=e.t5;case 67:return e.abrupt("return",e.t4);case 68:case"end":return e.stop()}}),e,this,[[10,16]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"waitMessage",value:function(e,t){var n=this;return new Vd((function(r){var i=function i(o){(!t||t(o))&&(n.off(e,i),r(o))};n.on(e,i)}))}},{key:"upload",value:function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=sm("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Gy.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),sm("UPLOAD_CACHE_INTERVAL")||2e3))}}},{key:"send",value:function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)}},{key:"init",value:function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vd((function(r,i){n.once(Hy.WS_CONNECTED,(function(){return r(n.joinResponse)})),n.once(Hy.WS_CLOSED,(function(){return i(n.initError||new Uv(Dv.WS_ABORT))})),n.connectionState=Gy.CONNECTING,n.websocket.init(e).catch(i),n.wsInflateDataTimer&&window.clearInterval(n.wsInflateDataTimer),n.wsInflateDataTimer=window.setInterval((function(){n.handleWsInflateData()}),2e4),setTimeout((function(){t&&void 0===n.openConnectionTime&&(zv.debug("[".concat(n.clientId,"] init websocket timeout while join with fallback to proxy")),i(new Uv(Dv.INIT_WEBSOCKET_TIMEOUT)))}),sm("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))}))}},{key:"close",value:function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Fy.LEAVE,this.connectionState=Gy.CLOSED,zv.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===Fy.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Cw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}},{key:"join",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Hy.ABORT_P2P_EXECUTION),e.next=4,aw(this,Hy.REQUEST_JOIN_INFO);case 4:return t=e.sent,e.next=7,this.request(Ky.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Hy.REPORT_JOIN_GATEWAY,Dv.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Hy.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Gy.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rejoin",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=uw(this,Hy.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Ky.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Gy.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Yy.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Yy.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Yy.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Yy.MUTE_AUDIO,{uid:e.uid}):r.emit(Yy.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Yy.MUTE_VIDEO,{uid:e.uid}):r.emit(Yy.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Yy.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Yy.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Yy.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Yy.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Yy.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}},{key:"handleNotification",value:function(e){zv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Tw(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Fy.UID_BANNED),void this.close()):void this.reconnect(t.action,Wy.SERVER_ERROR);zv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}},{key:"handlePingPong",value:function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=sm("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(zv.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>sm("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Wy.TIMEOUT):this.request(Ky.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),sm("REPORT_STATS")&&e.send(Ky.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}}},{key:"handleWsInflateData",value:function(){var e=this.websocket.getWsInflateData(),t=e.wsInflateLength,n=e.wsDeflateLength;0!==t&&0!==n&&this.upload(zy.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})}},{key:"handleWebsocketEvents",value:function(){var e=this;this.websocket.on(ng.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Hy.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(ng.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Hy.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(ng.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ng.CLOSED,(function(){e.connectionState=Gy.CLOSED})),this.websocket.on(ng.FAILED,(function(){e._disconnectedReason=Fy.NETWORK_ERROR,e.connectionState=Gy.CLOSED})),this.websocket.on(ng.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Gy.CONNECTED?e.connectionState=Gy.RECONNECTING:e.connectionState=Gy.CONNECTING})),this.websocket.on(ng.WILL_RECONNECT,(function(t,n){if(uw(e,Hy.IS_P2P_DISCONNECTED)&&"retry"===t)return zv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Hy.NEED_RENEW_SESSION),e.emit(Hy.DISCONNECT_P2P),n("tryNext");"retry"!==t&&(zv.debug("".concat(e.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Hy.NEED_RENEW_SESSION),e.emit(Hy.DISCONNECT_P2P)),n(t)})),this.websocket.on(ng.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){zv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",Wy.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Hy.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Uv&&t.code===Dv.UNEXPECTED_RESPONSE&&t.data.code===jy.ERR_NO_AUTHORIZED)return zv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",Wy.SERVER_ERROR);zv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",Wy.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(ng.REQUEST_NEW_URLS,(function(t,n){aw(e,Hy.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(ng.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Yy.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}]),n}(Lv);function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Nw,Dw=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this),xp(l(a),"connectionID",0),xp(l(a),"currentURLIndex",0),xp(l(a),"reconnectReason",void 0),xp(l(a),"_reconnectMode","tryNext"),xp(l(a),"_initMutex",void 0),xp(l(a),"_name",void 0),xp(l(a),"_state","closed"),xp(l(a),"_reconnectInterrupter",void 0),xp(l(a),"_url",void 0),xp(l(a),"_retryConfig",void 0),xp(l(a),"_reconnectCount",0),xp(l(a),"_forceCloseTimeout",5e3),xp(l(a),"_onlineReconnectListener",void 0),xp(l(a),"_closeEstablishingTransmitter",(function(){})),xp(l(a),"_store",void 0),xp(l(a),"_joinChannelServiceRecordIndex",void 0),xp(l(a),"_transmitter",void 0),xp(l(a),"_useCompress",void 0),xp(l(a),"_inflateLength",0),xp(l(a),"_deflateLength",0),a._store=o,a._name=e,a._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aw(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),a._useCompress=i,a}return v(n,[{key:"url",get:function(){return this._url?this._url:null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(Qg.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Qg.CONNECTED):"closed"===this._state?this.emit(Qg.CLOSED):"failed"===this._state&&this.emit(Qg.FAILED))}},{key:"resetReconnectCount",value:function(e){zv.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}},{key:"close",value:function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;var n=this._transmitter;t?setTimeout((function(){return n.close()}),500):n.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}},{key:"reconnect",value:function(e,t){if(this._transmitter){var n;void 0!==e&&(this.reconnectMode=e),zv.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));var r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}else zv.warning("[".concat(this._name,"] can not reconnect, no websocket"))}},{key:"getInflateData",value:function(){var e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}},{key:"setInflateData",value:function(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}},{key:"clearInflateData",value:function(){this._inflateLength=0,this._deflateLength=0}}]),n}(Lv);function xw(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);var r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=Number(!!n),a=Number(!n);return BigInt(r*a+i*o)<<BigInt(32)|BigInt(r*o+i*a)}function Pw(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);var i=Number(n>>BigInt(32)),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(Nw||(Nw={}));var Lw=function(){function e(t,n,r){h(this,e),xp(this,"version",1),xp(this,"initialRTO",void 0),xp(this,"maxBatchAckCount",void 0),xp(this,"maxRTO",void 0),xp(this,"initialRTT",void 0),xp(this,"ID",void 0),xp(this,"rtt",void 0),xp(this,"packetNumber",1),xp(this,"rtoRatioMap",new Map),xp(this,"timeoutMap",new Map),xp(this,"unorderedPacketQueue",[]),xp(this,"batchAckPacketQueue",[]),xp(this,"lastOrderedPacketNumber",0),xp(this,"batchAckTimer",void 0),xp(this,"sendImpl",void 0),xp(this,"receiveImpl",void 0),this.sendImpl=t,this.receiveImpl=n,this.ID=tw(7,"transmitter-"),this.initialRTO=void 0!==(null==r?void 0:r.initialRTO)?r.initialRTO:sm("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==r?void 0:r.initialRTT)?r.initialRTT:sm("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==r?void 0:r.initialRTT)?r.initialRTT:sm("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==r?void 0:r.maxBatchAckCount)?r.maxBatchAckCount:sm("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==r?void 0:r.maxRTO)?r.maxRTO:sm("TRANSMITTER_MAX_RTO")}return v(e,[{key:"packetize",value:function(e,t){return{type:Nw.Default,version:this.version,packetNumber:t,payload:e}}},{key:"serialize",value:function(e){switch(e.type){case Nw.Default:var t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;var n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),Pw(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n;case Nw.Ack:var i=new ArrayBuffer(16),o=new DataView(i);return o.setUint16(0,e.version),o.setUint8(2,e.type),o.setUint32(3,e.maxAckPacketNumber),o.setUint8(7,e.shift),Pw(o,8,BigInt(e.ackSendTs)),i}}},{key:"deserialize",value:function(e){var t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case Nw.Default:var i=t.getUint32(3),o=xw(t,7),a=e.slice(15),s=(new TextDecoder).decode(a);return{version:n,type:r,packetNumber:i,sendTs:Number(o),payload:s};case Nw.Ack:var c=t.getUint32(3),u=t.getUint8(7),l=xw(t,8);return{version:n,type:r,maxAckPacketNumber:c,shift:u,ackSendTs:Number(l)};default:throw zv.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}}},{key:"sendMessage",value:function(e){var t=this,n=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;var r=this.calculateRTO(n),i=window.setTimeout((function(){t.resendMessage(n)}),r);this.timeoutMap.set(n.packetNumber,i),this.sendPacket(n)}},{key:"onData",value:function(e){var t=this.deserialize(e);t.type===Nw.Default?this.ack(t):t.type===Nw.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}},{key:"close",value:function(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((function(e){var t=a(e,2),n=(t[0],t[1]);window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}},{key:"resendMessage",value:function(e){var t=this,n=this.calculateRTO(e),r=window.setTimeout((function(){t.resendMessage(e)}),n);this.timeoutMap.set(e.packetNumber,r),this.sendPacket(e)}},{key:"calculateRTO",value:function(e){var t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;var n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}},{key:"updateRTT",value:function(e,t){var n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}},{key:"ack",value:function(e){var t=this;if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((function(){t.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){var n=this.unorderedPacketQueue[0];if(!n){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(n.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){var r={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:Nw.Ack,version:this.version};this.sendPacket(r)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;var i={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:Nw.Ack,version:this.version};this.sendPacket(i)}}},{key:"batchAck",value:function(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;var e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Nw.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}},{key:"sendPacket",value:function(e){e.type===Nw.Default&&(e.sendTs=Math.round(performance.now()));var t=this.serialize(e);this.sendImpl(t)}},{key:"clearRTO",value:function(e){for(var t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){var n=this.timeoutMap.get(t);void 0!==n&&window.clearTimeout(n),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}]),e}(),Mw=function(e){f(n,e);var t=p(n);function n(e,r){var i;h(this,n),i=t.call(this,e,r,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),xp(l(i),"_initMutex",void 0),xp(l(i),"_reconnectInterrupter",void 0),xp(l(i),"_url",void 0),xp(l(i),"_transmitter",void 0),xp(l(i),"_addresses",void 0),xp(l(i),"_reliableTransmission",void 0),i._initMutex=new G_("datachannel");var o=r.timeout,a=r.timeoutFactor,s=Math.max(300,Math.floor(3*o/5)),c=Math.max(1.2,Math.floor(8*a)/10);return Hg.ONLINE&&(i._retryConfig.timeout=s,i._retryConfig.timeoutFactor=c),O_.on(Kg.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(i.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Hg.ONLINE?(i._retryConfig.timeout=s,i._retryConfig.timeoutFactor=c):(i._retryConfig.timeout=o,i._retryConfig.timeoutFactor=a))})),i}return v(n,[{key:"getConnection",value:function(){if(this._reliableTransmission)return this._reliableTransmission}},{key:"init",value:function(){var e=u(c().mark((function e(t){var n,r,i=this,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:5e3,this._forceCloseTimeout=n,r=function(e,n){i._addresses=t,i.currentURLIndex=i._addresses.findIndex((function(e){return e.fingerprint||sm("FINGERPRINT")}));var r=i._addresses[i.currentURLIndex];i.state="connecting",i.createTransmitterConnection(r).then(e).catch(n),i.once(Qg.CLOSED,(function(){return n(new Uv(Dv.WS_DISCONNECT))})),i.once(Qg.CONNECTED,(function(){return e()}))},e.abrupt("return",this._initMutex.lock().then((function(e){return new Vd((function(e,t){r(e,t)})).then((function(){e()})).catch((function(){e()}))})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendMessage",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Uv(Dv.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new Uv(Dv.WS_ERR,"send datachannel signal message error"+e.toString())}}},{key:"unbindDcCloseEventListener",value:function(){this._transmitter&&(this._transmitter.onclose=null)}},{key:"sendMessageWithJSON",value:function(e){var t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}},{key:"sendMessageWithUint8Array",value:function(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}},{key:"createTransmitterConnection",value:function(e){var t=this;return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new Vd((function(n,r){var i,o=function(){zv.debug("[".concat(t._name,"] datachannel opened:"),t._url),t.reconnectMode="retry",t.state="connected",t.resetReconnectCount("opened"),n()},a=function(){var e=u(c().mark((function e(i){var o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(o=t._closeEstablishingTransmitter)||void 0===o||o.call(t),zv.debug("[".concat(t._name,"] datachannel close ").concat(t._url,", code: ").concat(i.code,", reason: ").concat(i.reason,", current mode: ").concat(t.reconnectMode)),!(t._reconnectCount<t._retryConfig.maxRetryCount)){e.next=13;break}return"connected"===t.state&&(t.reconnectReason=i.reason,t.state="reconnecting"),a=cw(t,Qg.WILL_RECONNECT,t.reconnectMode)||t.reconnectMode,e.next=5,t.reconnectWithAction(a);case 5:if(s=e.sent,"closed"!==t.state){e.next=8;break}return e.abrupt("return",void zv.debug("[".concat(t.connectionID,"] dc is closed, no need to reconnect")));case 8:if(s){e.next=10;break}return e.abrupt("return",(r(new Uv(Dv.WS_DISCONNECT,"datachannel reconnect failed: ".concat(i.code))),void t.close(!0)));case 10:n(),e.next=14;break;case 13:r(new Uv(Dv.WS_DISCONNECT,"datachannel close: ".concat(i.code))),t.close();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){var n;null===(n=t._reliableTransmission)||void 0===n||n.onData(e.data)};t._transmitter&&(t._transmitter.onclose=null,t._transmitter.close()),t._reliableTransmission&&(t._reliableTransmission.close(),t._reliableTransmission=void 0),zv.debug("[".concat(t._name,"] start connect, address: ").concat(JSON.stringify(e)));var l=null===(i=t._store)||void 0===i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),d=Date.now();aw(t,Qg.TO_CONNECT_DATACHANNEL,e).then((function(e){var n,r;if(!e)throw new Error("transmissonInfo not exist yet");var i=e.transmitter,c=e.close;t._transmitter=i,null===(n=t._store)||void 0===n||n.signalChannelOpen();var u=Date.now()-d;zv.debug("[choose dc] dc open cost ".concat(u,"ms")),t._reliableTransmission=new Lw((function(e){var n;t._transmitter&&"open"===t._transmitter.readyState&&(null===(n=t._transmitter)||void 0===n||n.send(e))}),(function(e){"string"==typeof e&&t.emit(Qg.ON_MESSAGE,e)})),t._closeEstablishingTransmitter=function(){var e;null===(e=t._reliableTransmission)||void 0===e||e.close(),t._reliableTransmission=void 0,c()},o&&o(),i.onclose=a,i.onmessage=s,null===(r=t._store)||void 0===r||r.recordJoinChannelService({endTs:Date.now(),status:"success"},l),t._joinChannelServiceRecordIndex=l})).catch((function(e){var n;if(null===(n=t._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:e instanceof Uv&&e.code===Dv.WS_ABORT?"aborted":"error",errors:[e]},l),"closed"!==t.state){if(e instanceof Uv&&e.code===Dv.WS_ERR){var i=new Uv(Dv.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return zv.error("[".concat(t._name,"]").concat(i)),void r(i)}a&&a(e)}else r(new Uv(Dv.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}},{key:"reconnectWithAction",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,f=this,p=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(p.length>1&&void 0!==p[1])||p[1],!(this._reconnectCount>=this._retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(this._addresses){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(this._onlineReconnectListener||O_.networkState!==Hg.OFFLINE||(this._onlineReconnectListener=O_.onlineWaiter&&O_.onlineWaiter.then((function(){f._onlineReconnectListener=void 0}))),r=!0,this._reconnectInterrupter=function(){r=!1},!n){e.next=14;break}return i=Vv(this._reconnectCount,this._retryConfig),zv.debug("[".concat(this._name,"] wait ").concat(i,"ms to reconnect datachannel, mode: ").concat(t)),e.next=14,Vd.race([$S(i),this._onlineReconnectListener||new Vd((function(){}))]);case 14:if("closed"!==this.state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this._reconnectCount+=1,o=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.emit(Qg.RECONNECT_CREATE_CONNECTION,n),e.next=3,f.createTransmitterConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=26;break}return a=this._addresses[this.currentURLIndex],this.emit(Qg.RECONNECT_WAITTING_FINISH,t),e.next=24,o(a,t);case 24:e.next=50;break;case 26:if("tryNext"!==t){e.next=49;break}this.currentURLIndex+=1,s=this.currentURLIndex;case 29:if(!(s<this._addresses.length)){e.next=37;break}if(!this._addresses[s].fingerprint&&!sm("FINGERPRINT")){e.next=33;break}return this.currentURLIndex=s,e.abrupt("break",37);case 33:this.currentURLIndex+=1;case 34:s++,e.next=29;break;case 37:if(!(this.currentURLIndex>=this._addresses.length)){e.next=42;break}return zv.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),e.next=41,this.reconnectWithAction("recover",!1);case 41:return e.abrupt("return",e.sent);case 42:return zv.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex)),l=this._addresses[this.currentURLIndex],this.emit(Qg.RECONNECT_WAITTING_FINISH,t),e.next=47,o(l,t);case 47:e.next=50;break;case 49:"recover"===t&&(zv.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(Qg.RECONNECT_WAITTING_FINISH,t),this.emit(Qg.FAILBACK));case 50:return e.abrupt("return",!0);case 53:if(e.prev=53,e.t0=e.catch(18),zv.error("[".concat(this._name,"] reconnect failed"),e.t0.toString()),!(null!=e.t0&&null!==(d=e.t0.data)&&void 0!==d&&d.desc&&Array.isArray(e.t0.data.desc)&&e.t0.data.desc.length&&e.t0.data.desc.includes("dynamic key expired"))){e.next=60;break}e.t1=(this.emit(Qg.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1),e.next=63;break;case 60:return e.next=62,this.reconnectWithAction(t,n);case 62:e.t1=e.sent;case 63:return e.abrupt("return",e.t1);case 64:case"end":return e.stop()}}),e,this,[[18,53]])})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Dw),Uw=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"_disconnectedReason",void 0),xp(l(i),"_websocketReconnectReason",void 0),xp(l(i),"_connectionState",Gy.CLOSED),xp(l(i),"reconnectToken",void 0),xp(l(i),"websocket",void 0),xp(l(i),"openConnectionTime",void 0),xp(l(i),"clientId",void 0),xp(l(i),"lastMsgTime",Date.now()),xp(l(i),"uploadCache",[]),xp(l(i),"uploadCacheInterval",void 0),xp(l(i),"rttRolling",new Iw(5)),xp(l(i),"pingpongTimer",void 0),xp(l(i),"inflateDataTimer",void 0),xp(l(i),"pingpongTimeoutCount",0),xp(l(i),"joinResponse",void 0),xp(l(i),"multiIpOption",void 0),xp(l(i),"initError",void 0),xp(l(i),"spec",void 0),xp(l(i),"store",void 0),xp(l(i),"onWebsocketMessage",(function(e){if(e instanceof ArrayBuffer)i.emit(Hy.ON_BINARY_DATA,e);else{var t=JSON.parse(e);if(i.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);i.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(i.emit(t._type,t._message),t._type===Yy.ON_NOTIFICATION&&i.handleNotification(t._message),t._type===Yy.ON_USER_BANNED))switch(t._message.error_code){case 14:i.close(Fy.UID_BANNED);break;case 15:i.close(Fy.IP_BANNED);break;case 16:i.close(Fy.CHANNEL_BANNED)}}})),i.clientId=e.clientId,i.spec=e,i.store=r,i.websocket=new Mw("gateway-".concat(i.clientId),i.spec.retryConfig,!0,r),i.handleWebsocketEvents(),window.addEventListener("offline",(function(){i.connectionState===Gy.CONNECTED&&i.reconnect("retry",Jg.OFFLINE)})),i}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Gy.CONNECTED?this.emit(Hy.WS_CONNECTED):e===Gy.RECONNECTING?this.emit(Hy.WS_RECONNECTING,this._websocketReconnectReason):e===Gy.CLOSED&&this.emit(Hy.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"rtt",get:function(){return this.rttRolling.mean()}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f,p,h,v=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=tw(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vd((function(e,n){if(v.connectionState===Gy.CONNECTED)return e();var r=function(){v.off(Hy.WS_CLOSED,i),e()},i=function(){v.off(Hy.WS_CONNECTED,r),n(new Uv(Dv.WS_ABORT))};v.once(Hy.WS_CONNECTED,r),v.once(Hy.WS_CLOSED,i),t!==Ky.PUBLISH&&t!==Ky.SUBSCRIBE&&t!==Ky.UNSUBSCRIBE&&t!==Ky.UNPUBLISH&&t!==Ky.CONTROL&&t!==Ky.RESTART_ICE||v.once(Hy.DISCONNECT_P2P,(function(){n(new Uv(Dv.DISCONNECT_P2P))})),t!==Ky.PUBLISH&&t!==Ky.RESTART_ICE||v.once(Hy.ABORT_P2P_EXECUTION,(function(){n(new Uv(Dv.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Gy.CONNECTING&&this.connectionState!==Gy.RECONNECTING||t===Ky.JOIN||t===Ky.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(t===Ky.LEAVE&&(this.websocket.unbindDcCloseEventListener(),i=!0),this.websocket.sendMessage(a,!0,!1),!i){e.next=9;break}return e.abrupt("return");case 9:return l=new Vd((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),v.off(Hy.WS_CLOSED,c),v.off(Hy.WS_RECONNECTING,c),v.emit(Hy.REQUEST_SUCCESS,t,n)};v.once("res-@".concat(o),a);var c=function e(){r(new Uv(Dv.WS_ABORT,"type: ".concat(t))),v.off(Hy.WS_CLOSED,e),v.off(Hy.WS_RECONNECTING,e),v.off("res-@".concat(o),a)};v.once(Hy.WS_CLOSED,c),v.once(Hy.WS_RECONNECTING,c),$S(sm("SIGNAL_REQUEST_TIMEOUT")).then((function(){v.websocket.connectionID!==s||i||(zv.warning("dc request timeout, type: ".concat(t)),v.emit(Hy.REQUEST_TIMEOUT,t,n))}))})),d=null,e.prev=11,e.next=14,l;case 14:d=e.sent,e.next=36;break;case 17:if(e.prev=17,e.t1=e.catch(11),this.connectionState!==Gy.CLOSED&&t!==Ky.LEAVE){e.next=21;break}throw new Uv(Dv.WS_ABORT);case 21:if(this.spec.forceWaitGatewayResponse&&!r){e.next=25;break}e.t2=e.t1.throw(),e.next=35;break;case 25:if(t!==Ky.JOIN&&t!==Ky.REJOIN){e.next=29;break}e.t3=null,e.next=34;break;case 29:return e.next=31,u();case 31:return e.next=33,this.request(t,n);case 33:e.t3=e.sent;case 34:e.t2=e.t3;case 35:return e.abrupt("return",e.t2);case 36:if(!d.isSuccess){e.next=38;break}return e.abrupt("return",d.message);case 38:if(f=Number(d.message.error_code||d.message.code),p=Tw(f),h=new Uv(Dv.UNEXPECTED_RESPONSE,"".concat(p.desc,": ").concat(d.message.error_str),{code:f,data:d.message}),"success"!==p.action){e.next=43;break}e.t4=d.message,e.next=68;break;case 43:if(zv.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(f,", message: ").concat(p.desc,", action: ").concat(p.action)),f!==jy.ERR_TOO_MANY_BROADCASTERS){e.next=48;break}e.t5=t===Ky.JOIN||t===Ky.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw(),e.next=67;break;case 48:if("failed"!==p.action){e.next=52;break}e.t6=h.throw(),e.next=66;break;case 52:if("quit"!==p.action){e.next=56;break}e.t7=(this.initError=h,this.close(),h.throw()),e.next=65;break;case 56:if(f===jy.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,zv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Jg.MULTI_IP)):this.reconnect(p.action,Jg.SERVER_ERROR),t!==Ky.JOIN&&t!==Ky.REJOIN){e.next=61;break}e.t8=null,e.next=64;break;case 61:return e.next=63,this.request(t,n);case 63:e.t8=e.sent;case 64:e.t7=e.t8;case 65:e.t6=e.t7;case 66:e.t5=e.t6;case 67:e.t4=e.t5;case 68:return e.abrupt("return",e.t4);case 69:case"end":return e.stop()}}),e,this,[[11,17]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"waitMessage",value:function(e,t){var n=this;return new Vd((function(r){var i=function i(o){(!t||t(o))&&(n.off(e,i),r(o))};n.on(e,i)}))}},{key:"upload",value:function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=sm("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Gy.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),sm("UPLOAD_CACHE_INTERVAL")||2e3))}}},{key:"send",value:function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)}},{key:"init",value:function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vd((function(r,i){n.once(Hy.WS_CONNECTED,(function(){return r(n.joinResponse)})),n.once(Hy.WS_CLOSED,(function(){return i(n.initError||new Uv(Dv.WS_ABORT))})),n.connectionState=Gy.CONNECTING,n.websocket.init(e).catch(i),n.websocket.once(Qg.FAILBACK,(function(){void 0===n.openConnectionTime&&i(new Uv(Dv.INIT_DATACHANNEL_TIMEOUT))})),n.inflateDataTimer&&window.clearInterval(n.inflateDataTimer),n.inflateDataTimer=window.setInterval((function(){n.handleInflateData()}),2e4),setTimeout((function(){t&&void 0===n.openConnectionTime&&(zv.debug("[".concat(n.clientId,"] init datachannel timeout while join with failback to websocket")),i(new Uv(Dv.INIT_DATACHANNEL_TIMEOUT)))}),sm("DC_JOIN_WITH_FAILBACK"))}))}},{key:"close",value:function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Fy.LEAVE,this.connectionState=Gy.CLOSED,zv.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===Fy.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Mw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}},{key:"join",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Hy.ABORT_P2P_EXECUTION),e.next=4,aw(this,Hy.DATACHANNEL_CONNECTING);case 4:return t=e.sent,e.next=7,this.request(Ky.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Hy.REPORT_JOIN_GATEWAY,Dv.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Hy.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Gy.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rejoin",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=uw(this,Hy.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Ky.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Gy.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Yy.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Yy.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Yy.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Yy.MUTE_AUDIO,{uid:e.uid}):r.emit(Yy.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Yy.MUTE_VIDEO,{uid:e.uid}):r.emit(Yy.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Yy.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Yy.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Yy.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Yy.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Yy.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}},{key:"handleNotification",value:function(e){zv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Tw(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Fy.UID_BANNED),void this.close()):void this.reconnect(t.action,Jg.SERVER_ERROR);zv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}},{key:"handlePingPong",value:function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=sm("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(zv.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>sm("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Jg.TIMEOUT):this.request(Ky.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),sm("REPORT_STATS")&&e.send(Ky.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}}},{key:"handleInflateData",value:function(){var e=this.websocket.getInflateData(),t=e.inflateLength,n=e.deflateLength;0!==t&&0!==n&&this.upload(zy.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})}},{key:"handleWebsocketEvents",value:function(){var e=this;this.websocket.on(Qg.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Hy.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(Qg.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Hy.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(Qg.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Qg.CLOSED,(function(){e.connectionState=Gy.CLOSED})),this.websocket.on(Qg.FAILED,(function(){e._disconnectedReason=Fy.NETWORK_ERROR,e.connectionState=Gy.CLOSED})),this.websocket.on(Qg.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Gy.CONNECTED?e.connectionState=Gy.RECONNECTING:e.connectionState=Gy.CONNECTING})),this.websocket.on(Qg.WILL_RECONNECT,(function(t,n){if(uw(e,Hy.IS_P2P_DISCONNECTED)&&"retry"===t)return zv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Hy.NEED_RENEW_SESSION),e.emit(Hy.DISCONNECT_P2P),n("tryNext");"retry"!==t&&(zv.debug("".concat(e.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Hy.NEED_RENEW_SESSION),e.emit(Hy.DISCONNECT_P2P)),n(t)})),this.websocket.on(Qg.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){zv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",Jg.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Hy.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Uv&&t.code===Dv.UNEXPECTED_RESPONSE&&t.data.code===jy.ERR_NO_AUTHORIZED)return zv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",Jg.SERVER_ERROR);zv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",Jg.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(Qg.REQUEST_NEW_URLS,(function(t,n){aw(e,Hy.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(Qg.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Yy.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(Qg.TO_CONNECT_DATACHANNEL,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",aw(e,Hy.DATACHANNEL_PRECONNECT,n).then(r).catch(i));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.websocket.on(Qg.FAILBACK,(function(){void 0!==e.openConnectionTime&&e.emit(Hy.DATACHANNEL_FAILBACK)}))}}]),n}(Lv);function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fw=new Map,Bw=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"store",void 0),xp(l(i),"joinInfo",void 0),xp(l(i),"key",void 0),xp(l(i),"signal",void 0),xp(l(i),"role",void 0),xp(l(i),"inChannelInfo",{joinAt:null,duration:0}),xp(l(i),"spec",void 0),xp(l(i),"_state","DISCONNECTED"),xp(l(i),"_statsCollector",void 0),xp(l(i),"_disconnectedReason",void 0),xp(l(i),"isSignalRecover",!1),xp(l(i),"hasChangeBGPAddress",!1),xp(l(i),"trafficStatsInterval",void 0),xp(l(i),"networkQualityInterval",void 0),xp(l(i),"_joinGatewayStartTime",0),xp(l(i),"_signalTimeout",!1),xp(l(i),"_clientRoleOptions",void 0),xp(l(i),"_isProactiveJoin",!1),i.store=e,i.spec=r,i.signal=i.store.useDataChannel?new Uw(Vw(Vw({},r),{},{retryConfig:r.websocketRetryConfig}),e):new Ow(Vw(Vw({},r),{},{retryConfig:r.websocketRetryConfig}),e),i._statsCollector=r.statsCollector,i.role=r.role||"audience",i._clientRoleOptions=r.clientRoleOptions,i.handleSignalEvents(),i}return v(n,[{key:"state",get:function(){return this._state},set:function(e){if(e!==this._state){var t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(Sg.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Sg.CONNECTION_STATE_CHANGE,e,t)}}},{key:"joinGatewayStartTime",get:function(){return this._joinGatewayStartTime},set:function(e){zv.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}},{key:"join",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,f,p,h=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signal instanceof Uw&&(i=!1,"disabled"!==t.cloudProxyServer?(zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(t.cloudProxyServer,")")),i=!0):"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length>255||"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length<22?(zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),i=!0):t.apResponse.addresses.some((function(e){return e.fingerprint}))||sm("FINGERPRINT")||(zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),i=!0),i&&this.resetSignal()),this.store.joinGatewayStart(),"disabled"!==t.cloudProxyServer&&(this.hasChangeBGPAddress=!0),o=Date.now(),(a=Fw.get(t.cname))||(a=new Map,Fw.set(t.cname,a)),this._isProactiveJoin=!0,!a.has(t.uid)){e.next=7;break}throw s=new Uv(Dv.UID_CONFLICT),V_.joinGateway(t.sid,{lts:o,succ:!1,ec:s.message,addr:null,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!t.proxyServer,signalChannel:this.signal instanceof Uw?"1":"0"}),this._isProactiveJoin=!1,s;case 7:if(a.set(t.uid,!0),this.joinInfo=t,this.key=n,u=0,this.joinGatewayStartTime=o,l=t.proxyServer,e.prev=11,zv.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof Uw?"datachannel":"websocket"," join uid ").concat(u)),!(this.signal instanceof Uw)){e.next=18;break}return e.next=15,this.signal.init(t.apResponse.addresses,r);case 15:d=e.sent,e.next=22;break;case 18:return f=t.proxyServer,p=f?t.gatewayAddrs.map((function(e){var t=e.address.split(":");return"wss://".concat(f,"/ws/?h=").concat(t[0],"&p=").concat(t[1])})):t.gatewayAddrs.map((function(e){return"wss://".concat(e.address)})),e.next=21,this.signal.init(p,r);case 21:d=e.sent;case 22:u=d.uid,zv.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof Uw?"datachannel":"websocket"," join uid ").concat(u," cost ").concat(Date.now()-this.joinGatewayStartTime)),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(11),!e.t0||e.t0.code!==Dv.INIT_WEBSOCKET_TIMEOUT){e.next=29;break}throw zv.warning("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),e.t0;case 29:if(!e.t0||e.t0.code!==Dv.INIT_DATACHANNEL_TIMEOUT){e.next=31;break}throw zv.warning("[".concat(this.store.clientId,"] User join datachannel failed"),e.t0.toString()),this.resetSignal(),e.t0;case 31:throw zv.error("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),V_.joinGateway(t.sid,{lts:o,succ:!1,ec:e.t0.message,addr:this.signal.url,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!l,signalChannel:this.signal instanceof Uw?"1":"0"}),this._isProactiveJoin=!1,a.delete(t.uid),this.signal.close(),e.t0;case 32:return e.abrupt("return",(this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),zv.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((function(){h.updateTrafficStats().catch((function(e){zv.warning("[".concat(h.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((function(){navigator&&void 0!==navigator.onLine&&!navigator.onLine?h.emit(Sg.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):h._signalTimeout?h.emit(Sg.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===h.state&&h._statsCollector.trafficStats?h.emit(Sg.NETWORK_QUALITY,{uplinkNetworkQuality:HS(h._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:HS(h._statsCollector.trafficStats.B_dnq)}):h.emit(Sg.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),u));case 33:case"end":return e.stop()}}),e,this,[[11,25]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"leave",value:function(){var e=u(c().mark((function e(){var t,n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1?r[1]:void 0,"DISCONNECTED"===this.state){e.next=14;break}if(n!==Fy.FALLBACK&&(this.state="DISCONNECTING"),e.prev=3,e.t0=t||this.signal.connectionState!==Gy.CONNECTED,e.t0){e.next=8;break}return e.next=8,function(e,t){return t===1/0?e:Vd.race([e,ew(t)])}(this.signal.request(Ky.LEAVE,void 0,!0),3e3);case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(3),zv.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e.t1);case 13:this.signal.close(n),n!==Fy.FALLBACK&&(this.state="DISCONNECTED"),this.reset();case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"publish",value:function(){var e=u(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 2:return i={state:"offer",p2p_id:this.store.p2pId,ortc:n,mode:this.spec.mode,extend:sm("PUB_EXTEND"),twcc:!!sm("PUBLISH_TWCC")},e.prev=3,e.next=6,this.signal.request(Ky.PUBLISH,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==jy.ERR_PUBLISH_REQUEST_INVALID){e.next=16;break}return zv.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),e.t0.toString()),e.next=15,this.tryUnpubBeforeRepub(t,n);case 15:return e.abrupt("return",this.publish(t,n,!1));case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=3;break}throw new Uv(Dv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 3:return e.next=5,this.signal.request(Ky.UNPUBLISH,{stream_id:n,ortc:t},!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),zv.warning("unpublish warning: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));case 2:return i={stream_id:t,stream_type:n.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!sm("SUBSCRIBE_TWCC"),extend:sm("SUB_EXTEND"),ssrcId:n.ssrcId},e.prev=3,e.next=6,this.signal.request(Ky.SUBSCRIBE,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==jy.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return zv.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),e.t0.toString()),e.next=15,this.tryUnsubBeforeResub(t,n);case 15:return e.next=17,this.subscribe(t,n,!1);case 17:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"subscribeAll",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));case 2:return r={p2p_id:this.store.p2pId,users:t,dtx:!1},e.prev=3,e.next=6,this.signal.request(Ky.SUBSCRIBE_STREAMS,r,!0);case 6:case 17:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!n||!e.t0.data||e.t0.data.code!==jy.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return zv.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),e.t0.toString()),e.next=15,this.tryMassUnsubBeforeResub(t);case 15:return e.next=17,this.subscribeAll(t,!1);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setVideoProfile",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){if(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width){var t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&((t=t.exact||t.ideal||t.max||t.min||0)||(i=!1)),"number"!=typeof n&&((n=n.exact||n.ideal||n.max||n.min||0)||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}}(t),!n){e.next=3;break}return e.abrupt("return",this.signal.request(Ky.SET_VIDEO_PROFILE,n));case 3:zv.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ky.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:t,stream_id:n},!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),zv.warning("unsubscribe warning: ",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ky.UNSUBSCRIBE_STREAMS,t,!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),zv.warning("unsubscribeAll warning: ",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reconnectPC",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.iceParameters,r=t.dtlsParameters,i=t.rtpCapabilities,e.next=3,this.signal.request(Ky.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}},!0);case 3:return e.t0=e.sent,e.t1=this.getCurrentGatewayAddress(),e.abrupt("return",{gatewayEstablishParams:e.t0,gatewayAddress:e.t1});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGatewayInfo",value:function(){return this.signal.request(Ky.GATEWAY_INFO)}},{key:"renewToken",value:function(e){return this.signal.request(Ky.RENEW_TOKEN,e)}},{key:"setClientRole",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(this._clientRoleOptions=Object.assign({},n)),"CONNECTED"===this.state){e.next=2;break}return e.abrupt("return",void(this.role=t));case 2:return r=void 0,r="audience"===t?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,e.next=6,this.signal.request(Ky.SET_CLIENT_ROLE,{role:t,level:r,client_ts:Date.now()});case 6:this.role=t;case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.SWITCH_VIDEO_STREAM,{stream_id:t,stream_type:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setDefaultRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.DEFAULT_VIDEO_STREAM,{stream_type:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setStreamFallbackOption",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.SET_FALLBACK_OPTION,{stream_id:t,fallback_type:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"pickSVCLayer",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.PICK_SVC_LAYER,{stream_id:t,spatial_layer:n.spatialLayer,temporal_layer:n.temporalLayer});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getInChannelInfo",value:function(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Vw({},this.inChannelInfo)}},{key:"getGatewayVersion",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.GATEWAY_INFO);case 2:return e.abrupt("return",e.sent.version);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){var e=Fw.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}},{key:"updateTurnConfigFromSignal",value:function(){if(this.joinInfo){var e=function(e){var t;return(t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/))?{username:Jv.username,password:Jv.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Vw(Vw({},Jv),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}}},{key:"updateTrafficStats",value:function(){var e=u(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.signal.request(Ky.TRAFFIC_STATS,void 0,!0);case 4:(t=e.sent).timestamp=Date.now(),t.peer_delay.forEach((function(e){var t=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find((function(t){return t.peer_uid===e.peer_uid}));t&&t.B_st!==e.B_st&&fw((function(){n.emit(Sg.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJoinMessage",value:function(e){if(!this.joinInfo||!this.key)throw new Uv(Dv.UNEXPECTED_ERROR,"can not generate join message, no join info");var t=Object.assign({},this.joinInfo.apResponse),n=sm("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);var r=Vw({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:qv,browser:navigator.userAgent,process_id:sm("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:sm("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:sm("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:sm("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof sm("SUBSCRIBE_AUDIO_FILTER_TOPN")?sm("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof sm("ENABLE_PUBLISH_AUDIO_FILTER")?sm("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof sm("ENABLE_USER_LICENSE_CHECK")?sm("ENABLE_USER_LICENSE_CHECK"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,sm("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}},{key:"getRejoinMessage",value:function(){if(!this.joinInfo)throw new Uv(Dv.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}},{key:"handleSignalEvents",value:function(){var e=this;this.signal.on(Hy.WS_RECONNECT_WAITTING_FINISH,(function(t){["tryNext","recover"].includes(t)&&e.joinInfo&&V_.adjustSessionStartTime(e.joinInfo.sid)})),this.signal.on(Hy.WS_RECONNECT_CREATE_CONNECTION,(function(t){e.joinGatewayStartTime=Date.now()})),this.signal.on(Hy.WS_RECONNECTING,(function(t){e.joinInfo&&V_.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:t||Wy.NETWORK_ERROR}),e.joinInfo&&(e.state="RECONNECTING",V_.sessionInit(e.joinInfo.sid,{lts:(new Date).getTime(),extend:e.isSignalRecover?{recover:!0}:{rejoin:!0},cname:e.joinInfo.cname,appid:e.joinInfo.appId,mode:e.spec.mode}),e.isSignalRecover=!1,e.joinGatewayStartTime=Date.now())})),this.signal.on(Hy.WS_CLOSED,(function(t){var n;switch(t){case Fy.LEAVE:n=Wy.LEAVE;break;case Fy.UID_BANNED:case Fy.IP_BANNED:case Fy.CHANNEL_BANNED:case Fy.SERVER_ERROR:n=Wy.SERVER_ERROR;break;case Fy.FALLBACK:n=Wy.FALLBACK;break;case Fy.LICENSE_MISSING:case Fy.LICENSE_EXPIRED:case Fy.LICENSE_MINUTES_EXCEEDED:case Fy.LICENSE_PERIOD_INVALID:case Fy.LICENSE_MULTIPLE_SDK_SERVICE:case Fy.LICENSE_ILLEGAL:n=t;break;default:n=Wy.NETWORK_ERROR}zv.debug("[signal] websocket closed, reason: ".concat(n||"undefined -> "+Wy.NETWORK_ERROR)),e.joinInfo&&V_.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:t===Fy.LEAVE?1:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:n}),e._disconnectedReason=t,t!==Fy.FALLBACK&&(e.state="DISCONNECTED"),e.reset()})),this.signal.on(Hy.WS_CONNECTED,(function(){if(e.updateTurnConfigFromSignal(),e.state="CONNECTED",e.joinInfo&&("audience"===e.role&&e._clientRoleOptions&&e._clientRoleOptions.level&&(zv.debug("[".concat(e.store.clientId,"] patch to send set client role, role: ").concat(e.role,", mode: ").concat(e.spec.mode,", level: ").concat(e._clientRoleOptions&&e._clientRoleOptions.level)),e.setClientRole(e.role,e._clientRoleOptions)),V_.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!0,ec:null,vid:e.joinInfo.vid,addr:e.signal.url,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof Uw?"1":"0"}),e._isProactiveJoin=!1,e.joinInfo.useLocalAccessPoint&&1===e.joinInfo.setLocalAPVersion)){var t=e.signal.url&&e.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!t)return void zv.error("[".concat(e.store.clientId,"] set local access point after joined failed: ").concat(t));am("EVENT_REPORT_DOMAIN",t[1]),am("EVENT_REPORT_BACKUP_DOMAIN",t[1]),am("LOG_UPLOAD_SERVER","".concat(t[1],":6444"))}})),this.signal.on(Yy.ON_UPLINK_STATS,(function(t){e._statsCollector.updateUplinkStats(t)})),this.signal.on(Hy.REQUEST_RECOVER,(function(t,n,r){if(!e.joinInfo)return r(new Uv(Dv.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));t&&(e.joinInfo.multiIP=t,e.hasChangeBGPAddress=!0),e.isSignalRecover=!0,aw(e,Sg.REQUEST_NEW_GATEWAY_LIST).then(n).catch(r)})),this.signal.on(Hy.REQUEST_JOIN_INFO,function(){var t=u(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateTurnConfigFromSignal(),t.next=3,aw(e,Sg.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(r=e.joinInfo)||void 0===r?void 0:r.turnServer});case 3:i=t.sent,o=i.iceParameters,a=i.dtlsParameters,s=i.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:a,rtpCapabilities:s,version:"2"}}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Hy.REQUEST_REJOIN_INFO,(function(t){t(e.getRejoinMessage())})),this.signal.on(Hy.REPORT_JOIN_GATEWAY,(function(t,n){e.joinInfo&&(V_.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!1,ec:t,addr:n,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof Uw?"1":"0"}),e._isProactiveJoin=!1)})),this.signal.on(Hy.IS_P2P_DISCONNECTED,(function(t){t(uw(e,Sg.IS_P2P_DISCONNECTED))})),this.signal.on(Hy.DISCONNECT_P2P,(function(){e.emit(Sg.DISCONNECT_P2P)})),this.signal.on(Hy.NEED_RENEW_SESSION,(function(){e.emit(Sg.NEED_RENEW_SESSION)})),this.signal.on(Hy.REQUEST_SUCCESS,(function(){e._signalTimeout=!1})),this.signal.on(Hy.REQUEST_TIMEOUT,(function(){e._signalTimeout=!0})),this.signal.on(Hy.JOIN_RESPONSE,(function(t){var n=e.getCurrentGatewayAddress();e.emit(Sg.JOIN_RESPONSE,t,n)})),this.signal.on(Hy.DATACHANNEL_PRECONNECT,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateTurnConfigFromSignal(),o=e.getCurrentGatewayAddress(),t.abrupt("return",aw(e,Sg.DATACHANNEL_PRECONNECT,n,o).then(r).catch(i));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.signal.on(Hy.DATACHANNEL_CONNECTING,function(){var t=u(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aw(e,Sg.REQUEST_DC_CONNECTION_PARAMS);case 2:r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:o,rtpCapabilities:a,version:"2"}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Hy.DATACHANNEL_FAILBACK,(function(){zv.warning("[".concat(e.store.clientId,"] User join datachannel failed")),e.reset(),e.resetSignal(),e.emit(Sg.DATACHANNEL_FAILBACK)}))}},{key:"tryUnsubBeforeResub",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ky.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:t,ortc:[n]},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),zv.warning("unsubscribe warning",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"tryUnpubBeforeRepub",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ky.UNPUBLISH,{stream_id:t,ortc:n},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),zv.warning("unpublish warning: ",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"tryMassUnsubBeforeResub",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={users:t.map((function(e){return{stream_id:e.stream_id,stream_type:e.stream_type}}))},e.prev=1,e.next=4,this.signal.request(Ky.UNSUBSCRIBE_STREAMS,n,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),zv.warning("massUnsubscribe warning",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===bg.Audio}))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ky.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),zv.warning("gateway unmuteLocal warning: ",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===bg.Audio}))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ky.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),zv.warning("gateway muteLocal warning: ",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"uploadStats",value:function(e,t){this.signal.upload(e,t)}},{key:"getSignalRTT",value:function(){return this.signal.rtt}},{key:"restartICE",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:t},e.prev=1,e.next=4,this.signal.request(Ky.RESTART_ICE,n,!0);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),zv.warning("P2PChannel.restartICE warning: ",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Wy.P2P_FAILED)}},{key:"getCurrentGatewayAddress",value:function(){var e;if(!sm("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}},{key:"setPublishAudioFilterEnabled",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ky.SET_PARAMETER,{enablePublishAudioFilter:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetSignal",value:function(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Fy.FALLBACK)),this.store.useDataChannel=!1,this.signal=new Ow(Vw(Vw({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Sg.RESET_SIGNAL,kg.websocket)}}]),n}(Lv);!function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof S&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var c;e:{var u={};try{u.__proto__={a:!0},c=u.a;break e}catch(e){}c=!1}n=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var l=n;function d(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function p(e,t){return e.h=3,{value:t}}function h(e){this.g=new d,this.G=e}function v(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),m(e)}return e.g.j=null,r.call(e.g,o),m(e)}function m(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){f(e.g);var n=e.g.j;return n?v(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),m(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function g(e,t){return t=new y(new h(t)),l&&e.prototype&&l(t,e.prototype),t}if(d.prototype.o=function(e){this.v=e},d.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},d.prototype.return=function(e){this.l={return:e},this.h=this.u},h.prototype.o=function(e){return f(this.g),this.g.j?v(this,this.g.j.next,e,this.g.o):(this.g.o(e),m(this))},h.prototype.s=function(e){return f(this.g),this.g.j?v(this,this.g.j.throw,e,this.g.o):(this.g.s(e),m(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var E=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},_=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},w=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},k="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,T=k.FormData,R=k.XMLHttpRequest&&k.XMLHttpRequest.prototype.send,C=k.Request&&k.fetch,I=k.navigator&&k.navigator.sendBeacon,O=k.Element&&k.Element.prototype,A=k.Symbol&&Symbol.toStringTag;A&&(Blob.prototype[A]||(Blob.prototype[A]="Blob"),"File"in k&&!File.prototype[A]&&(File.prototype[A]="File"));try{new File([],"")}catch(e){k.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),A&&Object.defineProperty(e,A,{value:"File"}),e}}var N=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},D=function(e){this.i=[];var t=this;e&&E(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];E(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?E(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?_(e.value):e.value,t.append(e.name,n))}))};if((e=D.prototype).append=function(e,t,n){w(arguments,2),this.i.push(b(e,t,n))},e.delete=function(e){w(arguments,1);var t=[];e=String(e),E(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return g(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=p(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){w(arguments,1);for(var n=s(this),r=n.next();!r.done;r=n.next()){var i=s(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){w(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){w(arguments,1);var t=[];return e=String(e),E(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){w(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return g(e,(function(e){if(1==e.h&&(t=s(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,p(e,s(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){w(arguments,2),e=String(e);var r=[],i=b(e,t,n),o=!0;E(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return g(e,(function(e){if(1==e.h&&(t=s(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=s(r)).next(),p(e,i.next().value));n=t.next(),e.h=2}))},D.prototype._asNative=function(){for(var e=new T,t=s(this),n=t.next();!n.done;n=t.next()){var r=s(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},D.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+N(_(r))+'"\r\n\r\n'+_(e)+"\r\n"):t.push(n+N(_(r))+'"; filename="'+N(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},D.prototype[Symbol.iterator]=function(){return this.entries()},D.prototype.toString=function(){return"[object FormData]"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),A&&(D.prototype[A]="FormData"),R){var x=k.XMLHttpRequest.prototype.setRequestHeader;k.XMLHttpRequest.prototype.setRequestHeader=function(e,t){x.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},k.XMLHttpRequest.prototype.send=function(e){e instanceof D?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),R.call(this,e)):R.call(this,e)}}C&&(k.fetch=function(e,t){return t&&t.body&&t.body instanceof D&&(t.body=t.body._blob()),C.call(this,e,t)}),I&&(k.navigator.sendBeacon=function(e,t){return t instanceof D&&(t=t._asNative()),I.call(this,e,t)}),k.FormData=D}}();var Ww=function(){var e=sm("AREAS");return 0===e.length&&e.push(Ng.GLOBAL),gr(e).call(e,(function(e,t,n){var r=Gw(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},Gw=function(e){return e===Ng.OVERSEA?"".concat(Mg.ASIA,",").concat(Mg.EUROPE,",").concat(Mg.AFRICA,",").concat(Mg.NORTH_AMERICA,",").concat(Mg.SOUTH_AMERICA,",").concat(Mg.OCEANIA):Mg[e]},Hw=function(e){var t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((function(e){var n=$g[e],r=Object.keys(n);r&&r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},Kw={GLOBAL:{ASIA:[Ng.CHINA,Ng.JAPAN,Ng.INDIA,Ng.KOREA,Ng.HKMC],EUROPE:[],NORTH_AMERICA:[Ng.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},zw=Object.keys(Kw[Ng.GLOBAL]),Yw=[Ng.CHINA,Ng.NORTH_AMERICA,Ng.EUROPE,Ng.ASIA,Ng.JAPAN,Ng.INDIA,Ng.OCEANIA,Ng.SOUTH_AMERICA,Ng.AFRICA,Ng.KOREA,Ng.HKMC,Ng.US],qw=function(e,t){var n,r,i=[];if(e.includes(Ng.GLOBAL)){var o=[Ng.GLOBAL,Ng.OVERSEA],a=Object.keys($g);if(t===Ng.GLOBAL)throw new Uv(Dv.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===Ng.CHINA)i=[Ng.OVERSEA];else if(r=t,zw.includes(r)){var s=(n=t,Kw[Ng.GLOBAL][n]||[]),c=[].concat(o,[t],m(s));i=a.filter((function(e){return!c.includes(e)}))}else if(function(e){var t=!1;return zw.forEach((function(n){Kw[Ng.GLOBAL][n].includes(e)&&(t=!0)})),t}(t)){var u=function(e){var t;return zw.forEach((function(n){Kw[Ng.GLOBAL][n].includes(e)&&(t=n)})),t}(t),l=[].concat(o,[u,t]);i=a.filter((function(e){return!l.includes(e)}))}else i=e;i=function(e){var t=[];return Yw.forEach((function(n){e.includes(n)&&t.push(n)})),t.concat(e.filter((function(e){return!Yw.includes(e)})))}(i)}else i=e;return i};function Zw(e){if(!e&&sm("AREAS").includes(Ng.EXTENSIONS))return zv.debug("update area from ap : reset"),void Xw(Xv,!0);if(sm("AREAS").includes(Ng.GLOBAL)&&e){var t=$g.EXTENSIONS;t&&(t={CODE:Gw(Ng.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},zv.debug("update area from ap success: ".concat(e,",config is "),t),am("AREAS",[Ng.EXTENSIONS],!0),Object.keys(t).map((function(e){am(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?t[e][0]:t[e])})))}}function Xw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=V_.reportApiInvoke(null,{name:Ay.SET_AREA,options:e,tag:Ny.TRACER});try{var r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((function(e){if(!Ug.includes(e))throw new Uv(Dv.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){var i=e.areaCode,o=e.excludedArea;if(!i)throw new Uv(Dv.INVALID_PARAMS,"area code is needed");var a=i;"string"==typeof i&&(a=[i]),r=o?qw(a,o):a}if(!t){if(um.AREAS){var s=new Uv(Dv.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(s),void zv.warning("setArea is prohibited because of config-distribute")}if(r.includes(Ng.GLOBAL)&&sm("AREAS")===Ng.EXTENSIONS){var c=new Uv(Dv.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(c),void zv.warning("setArea is prohibited because of ap extensions")}}am("AREAS",r,t);var u=Hw(r);Object.keys(u).map((function(e){am(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?u[e][0]:u[e])})),zv.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $w=1;function ek(e,t,n,r,i){$w+=1;var o,a,s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:$w,requestId:$w,version:qv,cname:n.cname},l={service_name:t,json_body:JSON.stringify(s)},d=e[0];return Fv(u(c().mark((function e(){var n,i,s,u,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),e.next=3,R_(d,{data:l,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});case 3:if(n=e.sent,a=Date.now()-o,0===n.code){e.next=7;break}throw i=new Uv(Dv.UNEXPECTED_RESPONSE,"live streaming ap error, code"+n.code,{retry:!0,responseTime:a}),zv.error(i.toString()),i;case 7:if(200===(s=JSON.parse(n.json_body)).code){e.next=11;break}throw u=new Uv(Dv.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(s.code,", reason: ").concat(s.reason),{code:s.code,responseTime:a}),zv.error(u.toString()),u;case 11:if(s.servers&&0!==s.servers.length){e.next=14;break}throw f=new Uv(Dv.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:s.code,responseTime:a}),zv.error(f.toString()),f;case 14:return p=function(e,t){return{addressList:e.servers.map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(sm("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t))})),workerToken:e.workerToken,vid:e.vid}}(s,t),e.abrupt("return",(sm("LIVE_STREAMING_ADDRESS")&&(p.addressList=sm("LIVE_STREAMING_ADDRESS")instanceof Array?sm("LIVE_STREAMING_ADDRESS"):[sm("LIVE_STREAMING_ADDRESS")]),Qw(Qw({},p),{},{responseTime:a})));case 16:case"end":return e.stop()}}),e)}))),(function(r,i){return V_.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:a,serverIp:e[i%e.length]}),!1}),(function(r,i){return V_.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:a,serverIp:e[i%e.length]}),!!(r.code!==Dv.OPERATION_ABORTED&&r.code!==Dv.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(d=e[(i+1)%e.length],!0)}),i)}var tk=1;function nk(e,t,n,r){var i,o=e.url,s=e.areaCode,l=Date.now(),d=sk(t,s,[tE.CHOOSE_SERVER]),f=a(d,2),p=f[0],h=f[1],v=O_.networkState;return Fv(u(c().mark((function e(){var a,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=v&&O_.networkState===Hg.OFFLINE&&O_.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vd.race([O_.onlineWaiter,$S(r&&r.maxRetryTimeout||jv.maxRetryTimeout)]);case 4:return v=O_.networkState,e.next=7,R_(o,{data:p,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return a=e.sent,s=a.data,u=a.headers,i="1"===u.http3?1:-1,V_.reportResourceTiming(o,t.sid),ik(s,o,t,l,[tE.CHOOSE_SERVER],i),d=KS(s,tE.CHOOSE_SERVER),e.abrupt("return",(ok(d),FS(d,o)));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e&&V_.joinChooseServer(t.sid,{lts:l,succ:!0,csAddr:o,opid:h,serverList:e.gatewayAddrs.map((function(e){return e.address})),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[tE.CHOOSE_SERVER].toString(),isHttp3:i}),!1}),(function(e){return e.code!==Dv.OPERATION_ABORTED&&(e.code===Dv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(V_.joinChooseServer(t.sid,{lts:l,succ:!1,csAddr:o,serverList:null,opid:h,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[tE.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:v}),isHttp3:i}),zv.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))}),r)}function rk(e,t,n,r){var i,o=e.url,s=e.areaCode,l=e.serviceIds,d=Date.now(),f=sk(t,s,l),p=a(f,2),h=p[0],v=p[1],m=void 0;return Fv(u(c().mark((function e(){var a,s,u,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=m&&O_.networkState===Hg.OFFLINE&&O_.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vd.race([O_.onlineWaiter,$S(r&&r.maxRetryTimeout||jv.maxRetryTimeout)]);case 4:return m=O_.networkState,e.next=7,R_(o,{data:h,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return a=e.sent,s=a.data,u=a.headers,i="1"===u.http3?1:-1,V_.reportResourceTiming(o,t.sid),ik(s,o,t,d,l,i),f=KS(s,tE.CHOOSE_SERVER),p=KS(s,"proxy5"===t.cloudProxyServer?tE.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?tE.CLOUD_PROXY:tE.CLOUD_PROXY_FALLBACK),e.abrupt("return",(ok(f),{gatewayInfo:FS(f,o),proxyInfo:p,url:o}));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e.gatewayInfo&&V_.joinChooseServer(t.sid,{lts:d,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((function(e){return e.address})),ec:null,opid:v,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:l.toString(),isHttp3:i}),e.proxyInfo&&V_.joinWebProxyAP(t.sid,{lts:d,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((function(e){return e.ip})).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:l.toString()}),!1}),(function(e){return e.code!==Dv.OPERATION_ABORTED&&(e.code===Dv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(V_.joinWebProxyAP(t.sid,{lts:d,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:l.toString(),extend:JSON.stringify({networkState:m})}),zv.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))}),r)}var ik=function(e,t,n,r,i,o){var a=[],s=function(a){4096===a.flag?V_.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):1048576!==a.flag&&4194304!==a.flag&&4194310!==a.flag||V_.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((function(t){var n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)zv.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{var r={error:new Uv(Dv.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};a.push(r),s(r)}if(0!==n){var i=ww(n),o={error:new Uv(Dv.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?zv.warning(o.error.toString()):a.push(o),s(o)}})),a.length)throw zv.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry)})).join(" | "))),new Uv(Dv.CAN_NOT_GET_GATEWAY_SERVER,a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message)})).join(" | "),{retry:!!a.find((function(e){return e.error.data.retry})),csIp:e.detail[502],desc:m(new Set(a.map((function(e){var t,n;return null==e||null===(t=e.error)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.desc})).filter((function(e){return!!e}))))})},ok=function(e){var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new Uv(Dv.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(null!==(t=e.detail)&&void 0!==t&&t[23]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[23])?Zw(e.detail[23].toLowerCase()):Zw(),null!==(r=e.detail)&&void 0!==r&&r[19]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[19]))for(var o=e.detail[19],a=null==o?void 0:o.split(";"),s=0;s<a.length;s++){var c,u=jf(c=a[s]).call(c);e.addresses[s]&&a&&(e.addresses[s].fingerprint=u)}if(sm("GATEWAY_ADDRESS")&&sm("GATEWAY_ADDRESS").length>0){zv.debug("assign gateway address to",sm("GATEWAY_ADDRESS"));var l=sm("GATEWAY_ADDRESS").map((function(t){var n,r,i=null!==(n=null===(r=e.addresses.find((function(e){return e.ip===t.ip&&e.port===t.port})))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=l}},ak=function(e,t){if(e.response_body&&e.response_body.length){var n=e.response_body[0];if(0!==n.buffer.code){var r=ww(n.buffer.code);throw new Uv(Dv.UPDATE_TICKET_FAILED,"[".concat(n.buffer.code,"]: ").concat(r.desc),{retry:r.retry})}return n.buffer.ticket}throw zv.debug("update ticket request received ap response without response body:",t),new Uv(Dv.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},sk=function(e,t,n){var r=Math.floor(Math.random()*Math.pow(10,12)),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t,12:sm("USE_NEW_TOKEN")?"1":void 0,22:t},key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((function(t){e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));var o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},ck=function(e,t){var n=Math.floor(Math.random()*Math.pow(10,12)),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((function(e){return{ip:e.ip,port:e.port}}))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]},uk=0;function lk(e,t,n,r){return dk.apply(this,arguments)}function dk(){return dk=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,a=[],s=function(){var e=u(c().mark((function e(){var o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=sm("WEBCS_DOMAIN").slice(0,sm("AJAX_REQUEST_CONCURRENT")).map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:Ww()}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,_w({fragementLength:sm("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return zv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),nk(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});case 4:return u=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=u(c().mark((function e(){var s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$S(1e3);case 2:if(null===o){e.next=4;break}return e.abrupt("return",o);case 4:return s=sm("WEBCS_DOMAIN_BACKUP_LIST").map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:Ww()}})),u=i.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((function(e){return e.url}))}),e.next=8,_w({fragementLength:sm("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:function(e){return zv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),nk(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},u),e[0]},promisesCollector:a});case 8:return l=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},u),l));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,ow([s(),l()]);case 5:return o=e.sent,a.length&&a.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,n,r,i),e.next=3,o;case 3:return e.t0=e.sent,e.abrupt("return",{gatewayInfo:e.t0});case 5:case"end":return e.stop()}}),e)}))),dk.apply(this,arguments)}function fk(e,t,n,r,i){return pk.apply(this,arguments)}function pk(){return pk=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,f,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==(a=t.cloudProxyServer)){e.next=18;break}if(i){e.next=4;break}return e.abrupt("return");case 4:if(!t.useLocalAccessPoint){e.next=8;break}return e.next=7,lk(t,n,r,o);case 7:case 17:return e.abrupt("return",e.sent);case 8:if(!sm("JOIN_WITH_FALLBACK_MEDIA_PROXY")){e.next=15;break}return e.next=11,gk(t,n,r,o);case 11:return s=e.sent,u=s.gatewayInfo,l=s.proxyInfo,e.abrupt("return",(t.turnServer&&"auto"!==t.turnServer.mode||(t.turnServer={mode:"manual",servers:l.map((function(e){return{turnServerURL:e.address,tcpport:e.tcpport||Jv.tcpport,udpport:e.udpport||Jv.udpport,username:e.username||Jv.username,password:e.password||Jv.password,forceturn:sm("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}}))}),{gatewayInfo:u}));case 15:return e.next=17,lk(t,n,r,o);case 18:return e.next=20,gk(t,n,r,o);case 20:return d=e.sent,f=d.proxyInfo,p=d.gatewayInfo,h={gatewayInfo:p},e.abrupt("return",(t.turnServer={mode:"manual",servers:f.map((function(e){return{turnServerURL:e.address,tcpport:"proxy3"===a?void 0:e.tcpport?e.tcpport:Jv.tcpport,udpport:"proxy4"===a?void 0:e.udpport?e.udpport:Jv.udpport,username:e.username||Jv.username,password:e.password||Jv.password,forceturn:"proxy4"!==a,security:"proxy5"===a}}))},zv.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(a)),h));case 25:case"end":return e.stop()}}),e)}))),pk.apply(this,arguments)}function hk(e,t,n,r,i){return vk.apply(this,arguments)}function vk(){return vk=u(c().mark((function e(t,n,r,i,o){var a,s,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sm("ACCOUNT_REGISTER").slice(0,sm("AJAX_REQUEST_CONCURRENT")),s=[],s=n.proxyServer?a.map((function(e){return"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1")})):a.map((function(e){return"https://".concat(e,"/api/v1")})),l=null==o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s}),e.prev=4,e.next=7,function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),s={sid:r.sid,opid:10,appid:r.appId,string_uid:n},u=t[0],e.next=4,Fv((function(){return R_(u+"".concat(-1===u.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})}),(function(e,r){if(0===e.code){if(e.uid<=0||e.uid>=Math.pow(2,32))throw zv.error("Invalid Uint Uid ".concat(n," => ").concat(e.uid),e),V_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:Dv.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new Uv(Dv.INVALID_UINT_UID_FROM_STRING_UID);return V_.reqUserAccount(s.sid,{lts:a,success:!0,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:null,extend:s}),!1}var i=ww(e.code);return i.retry&&(u=t[(r+1)%t.length]),V_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:i.desc,extend:s}),i.retry}),(function(e,n){return e.code!==Dv.OPERATION_ABORTED&&(V_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:null,errorCode:e.code,extend:s}),u=t[(n+1)%t.length],!0)}),o);case 4:if(0===(l=e.sent).code){e.next=8;break}throw d=ww(l.code),new Uv(Dv.UNEXPECTED_RESPONSE,d.desc);case 8:return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()(s,t,n,r,i);case 7:return d=e.sent,e.abrupt("return",(null==o||o.recordJoinChannelService({status:"success",endTs:Date.now()},l),d.uid));case 11:throw e.prev=11,e.t0=e.catch(4),null==o||o.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e.t0]},l),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),vk.apply(this,arguments)}function mk(e,t,n){return yk.apply(this,arguments)}function yk(){return yk=u(c().mark((function e(t,n,r){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sm("CDS_AP").slice(0,sm("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")})).map((function(e){return function(e,t,n,r){var i=rp(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:qv,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Fv((function(){return R_(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})}),void 0,(function(e){return e.code!==Dv.OPERATION_ABORTED}),r)}(e,t,n,r)})),o=null,a=null,s={},e.prev=2,e.next=5,ow(i);case 5:o=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==Dv.OPERATION_ABORTED){e.next=12;break}throw e.t0;case 12:a=e.t0;case 13:if(i.forEach((function(e){return e.cancel()})),V_.reportApiInvoke(t.sid,{name:Ay.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(e){if(!e.test_tags)return{};var t=e.test_tags,n=Object.keys(t),r={};return n.forEach((function(e){var n,i=jf(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(t){}return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,null,[[2,8]])}))),yk.apply(this,arguments)}function gk(e,t,n,r){return Ek.apply(this,arguments)}function Ek(){return Ek=u(c().mark((function e(t,n,r,i){var o,a,s,l,d,f,p,h,v,m,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=sm("PROXY_SERVER_TYPE3"),a=function(e,t,n){var r=n||o;return Array.isArray(r)&&(r=t%2==0?o[1]:o[0]),"https://".concat(r,"/ap/?url=").concat(e)},s=null,l=[],d=function(){var e=u(c().mark((function e(){var o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=sm("WEBCS_DOMAIN").slice(0,sm("AJAX_REQUEST_CONCURRENT")).map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:Ww(),serviceIds:[tE.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?tE.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?tE.CLOUD_PROXY:tE.CLOUD_PROXY_FALLBACK]}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,_w({fragementLength:sm("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return zv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),rk(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:l});case 4:return u=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=u(c().mark((function e(){var o,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$S(1e3);case 2:if(null===s){e.next=4;break}return e.abrupt("return",s);case 4:return o=sm("WEBCS_DOMAIN_BACKUP_LIST").map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:Ww(),serviceIds:[tE.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?tE.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?tE.CLOUD_PROXY:tE.CLOUD_PROXY_FALLBACK]}})),u=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=8,_w({fragementLength:sm("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return zv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),rk(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},u),e[0]},promisesCollector:l});case 8:return d=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},u),d));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,ow([d(),f()]);case 6:m=e.sent,p=m.gatewayInfo,h=m.proxyInfo,v=m.url,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0[0];case 15:if(l.length&&l.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),p&&h){e.next=17;break}throw new Uv(Dv.UNEXPECTED_ERROR,"missing gateway or proxy response").print();case 17:return t.apUrl=v,"disabled"!==t.cloudProxyServer&&Array.isArray(o)&&v&&(y=/^https?:\/\/(.+?)(\/.*)?$/.exec(v)[1],o.includes(y)&&(t.proxyServer=y,zv.setProxyServer(y),V_.setProxyServer(y))),e.t1=p,e.next=21,zS(h,p.uid);case 21:return e.t2=e.sent,s={gatewayInfo:e.t1,proxyInfo:e.t2},e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[3,12]])}))),Ek.apply(this,arguments)}function _k(e,t,n,r){return bk.apply(this,arguments)}function bk(){return bk=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=sm("UAP_AP").slice(0,sm("AJAX_REQUEST_CONCURRENT")).map((function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})),e.next=3,ek(o,t,n,r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),bk.apply(this,arguments)}function Sk(e,t,n){return wk.apply(this,arguments)}function wk(){return wk=u(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sm("UAP_AP").slice(0,sm("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})).map((function(e){return function(e,t,n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:qv,cname:t.cname,uid:t.uid.toString(),requestId:tk,seq:tk};tk+=1;var o={service_name:"tele_channel",json_body:JSON.stringify(i)};return Fv(u(c().mark((function t(){var r,i,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R_(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});case 2:if(0===(r=t.sent).code){t.next=6;break}throw i=new Uv(Dv.UNEXPECTED_RESPONSE,"cross channel ap error, code"+r.code,{retry:!0}),zv.error(i.toString()),i;case 6:if(200===(a=JSON.parse(r.json_body)).code){t.next=10;break}throw s=new Uv(Dv.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(a.code,", reason: ").concat(a.reason)),zv.error(s.toString()),s;case 10:if(a.servers&&0!==a.servers.length){t.next=13;break}throw u=new Uv(Dv.UNEXPECTED_RESPONSE,"cross channel app center empty server"),zv.error(u.toString()),u;case 13:return t.abrupt("return",{vid:a.vid,workerToken:a.workerToken,addressList:(sm("CHANNEL_MEDIA_RELAY_SERVERS")||a.servers).map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(sm("WORKER_DOMAIN"),":").concat(e.wss)}))});case 14:case"end":return t.stop()}}),t)}))),void 0,(function(e){return!!(e.code!==Dv.OPERATION_ABORTED&&e.code!==Dv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)}),r)}(e,t,n,r)})),e.prev=1,e.next=4,ow(i);case 4:return o=e.sent,e.abrupt("return",(i.forEach((function(e){return e.cancel()})),o));case 8:throw e.prev=8,e.t0=e.catch(1),e.t0[0];case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),wk.apply(this,arguments)}function kk(e,t,n){return Tk.apply(this,arguments)}function Tk(){return Tk=u(c().mark((function e(t,n,r){var i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,o=[],s=function(){var e=u(c().mark((function e(s){var l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=sm(s?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2")})),e.t0=s,!e.t0){e.next=6;break}return e.next=5,$S(1e3);case 5:e.t0=null!==i;case 6:if(!e.t0){e.next=10;break}e.t1=i,e.next=13;break;case 10:return e.next=12,_w({fragementLength:sm("FRAGEMENT_LENGTH"),referenceList:l,asyncMapHandler:function(e){return zv.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(s?"backup":""," choose_server:"),e),function(e,t,n,r){var i=ck(t,[tE.CHOOSE_SERVER]),o=a(i,1)[0],s=O_.networkState;return Fv(u(c().mark((function t(){var i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=s&&O_.networkState===Hg.OFFLINE&&O_.onlineWaiter,!t.t0){t.next=4;break}return t.next=4,Vd.race([O_.onlineWaiter,$S(r&&r.maxRetryTimeout||jv.maxRetryTimeout)]);case 4:return s=O_.networkState,t.next=7,R_(e,{data:o,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);case 7:return i=t.sent,t.abrupt("return",ak(i,e));case 9:case"end":return t.stop()}}),t)}))),(function(){return!1}),(function(e){return e.code!==Dv.OPERATION_ABORTED&&(e.code===Dv.UPDATE_TICKET_FAILED?e.data.retry:(zv.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))}),r)}(e,t,n,r)},allFailedhandler:function(e){throw e[0]},promisesCollector:o});case 12:e.t1=e.sent;case 13:return e.abrupt("return",e.t1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,ow([s(!1),s(!0)]);case 5:return i=e.sent,o.length&&o.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),Tk.apply(this,arguments)}function Rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ck(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rk(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ik=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"configs",void 0),xp(l(e),"joinInfo",void 0),xp(l(e),"cancelToken",void 0),xp(l(e),"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),xp(l(e),"interval",void 0),xp(l(e),"mutex",new G_("config-distribute")),xp(l(e),"mutableParamsRead",!1),e}return v(n,[{key:"startGetConfigDistribute",value:function(e,t){var n=this;this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),sm("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((function(){n.updateConfigDistribute()}),sm("CONFIG_DISTRIBUTE_INTERVAL")))}},{key:"stopGetConfigDistribute",value:function(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}},{key:"awaitConfigDistributeComplete",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutex.isLocked){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.mutex.lock();case 4:e.t0=e.sent,(0,e.t0)();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfigDistribute",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutableParamsRead||(this.mutableParamsRead=!0,V_.reportApiInvoke(null,{options:void 0,name:Ay.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Ny.TRACER}).onSuccess(JSON.stringify(um))),this.joinInfo&&this.cancelToken&&this.retryConfig){e.next=3;break}return e.abrupt("return",void zv.debug("[config-distribute] get config distribute interrupted have no joininfo"));case 3:return e.next=5,this.mutex.lock();case 5:return n=e.sent,e.prev=6,e.next=9,mk(this.joinInfo,this.cancelToken,this.retryConfig);case 9:t=e.sent,zv.debug("[config-distribute] get config distribute",JSON.stringify(t)),t.limit_bitrate&&this.handleBitrateLimit(t.limit_bitrate),this.cacheGlobalParameterConfig(t),this.configs=t,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),r=new Uv(Dv.NETWORK_RESPONSE_ERROR,e.t0),zv.warning("[config-distribute] ".concat(r.toString()));case 20:return e.prev=20,n(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[6,16,20,23]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBitrateLimit",value:function(){return this.configs?this.configs.limit_bitrate:void 0}},{key:"handleBitrateLimit",value:function(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(jg.UPDATE_BITRATE_LIMIT,e):this.emit(jg.UPDATE_BITRATE_LIMIT,e))}},{key:"getLowStreamConfigDistribute",value:function(){return this.configs&&this.configs.limit_bitrate&&Ck({},this.configs.limit_bitrate.low_stream_uplink)}},{key:"cacheGlobalParameterConfig",value:function(e){for(var t,n=dy(t=Object.keys(e).filter((function(e){return/^webrtc_ng_global_parameter/.test(e)}))).call(t),r=0;r<n.length;r++)for(var i=n.length-1;i>r;i--){var o=n[i];if("number"==typeof e[o].__priority){var a=e[o].__priority,s=n[i-1];if("number"==typeof e[s].__priority){if(!(a>e[s].__priority))continue;var c=o;n[i]=n[i-1],n[i-1]=c}else{var u=o;n[i]=n[i-1],n[i-1]=u}}}var l={};n.forEach((function(t){var n=e[t],r=n.__expires;Object.keys(n).forEach((function(e){"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(l,e)||(l[e]=Ck({value:n[e]},r&&{expires:r}))}))}));try{var d=JSON.stringify(l),f=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",f),zv.debug("Caching global parameters ".concat(d))}catch(e){zv.error("Error caching global parameters:",e.message)}}}]),n}(Lv);function Ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ok(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nk=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this),xp(l(a),"spec",void 0),xp(l(a),"token",void 0),xp(l(a),"websocket",void 0),xp(l(a),"pingpongTimer",void 0),xp(l(a),"reconnectMode","retry"),xp(l(a),"serviceMode",void 0),xp(l(a),"reqId",0),xp(l(a),"commandReqId",0),xp(l(a),"handleWebSocketOpen",(function(){a.reconnectMode="retry",a.startPingPong()})),xp(l(a),"handleWebSocketMessage",(function(e){if(e.data){var t=JSON.parse(e.data);t.requestId?a.emit("@".concat(t.requestId,"-").concat(t.sid),t):a.serviceMode===rg.INJECT?a.emit(pg.INJECT_STREAM_STATUS,t):(V_.workerEvent(a.spec.sid,{actionType:"status",serverCode:t.code,workerType:a.serviceMode===rg.TRANSCODE?1:2}),a.emit(pg.PUBLISH_STREAM_STATUS,t))}})),a.spec=r,a.token=e,a.serviceMode=o,a.websocket=new Cw("live-streaming",i),a.websocket.on(ng.CONNECTED,a.handleWebSocketOpen),a.websocket.on(ng.ON_MESSAGE,a.handleWebSocketMessage),a.websocket.on(ng.REQUEST_NEW_URLS,(function(e,t){aw(l(a),pg.REQUEST_NEW_ADDRESS).then(e).catch(t)})),a.websocket.on(ng.RECONNECTING,(function(){a.websocket.reconnectMode=a.reconnectMode})),a}return v(n,[{key:"init",value:function(e){return this.websocket.init(e)}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reqId+=1,"request"===t&&(this.commandReqId+=1),o=this.commandReqId,(a=this.reqId)&&this.websocket){e.next=4;break}throw new Uv(Dv.UNEXPECTED_ERROR);case 4:if(s=Ak({command:t,sdkVersion:"4.17.0"===qv?"0.0.1":qv,seq:a,requestId:a,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},n),"closed"!==this.websocket.state){e.next=7;break}throw new Uv(Dv.WS_DISCONNECT);case 7:if(u=function(){return new Vd((function(e,t){p.websocket.once(ng.CLOSED,(function(){return t(new Uv(Dv.WS_ABORT))})),p.websocket.once(ng.CONNECTED,e)}))},e.t0="connected"!==this.websocket.state,!e.t0){e.next=12;break}return e.next=12,u();case 12:return s.clientRequest&&(s.clientRequest.workerToken=this.token),l=new Vd((function(e,t){var n=function(){t(new Uv(Dv.WS_ABORT))};p.websocket.once(ng.RECONNECTING,n),p.websocket.once(ng.CLOSED,n),p.once("@".concat(a,"-").concat(p.spec.sid),(function(t){e(t)}))})),i&&V_.workerEvent(this.spec.sid,Ak(Ak({},i),{},{requestId:o,actionType:"request",payload:JSON.stringify(n.clientRequest),serverCode:0,code:0})),d=Date.now(),this.websocket.sendMessage(s),f=null,e.prev=18,e.next=21,l;case 21:f=e.sent,e.next=33;break;case 24:if(e.prev=24,e.t1=e.catch(18),"closed"!==this.websocket.state){e.next=28;break}throw e.t1;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n,r);case 32:return e.abrupt("return",e.sent);case 33:return e.abrupt("return",(i&&V_.workerEvent(this.spec.sid,Ak(Ak({},i),{},{requestId:o,actionType:"response",payload:JSON.stringify(f.serverResponse),serverCode:f.code,success:200===f.code,responseTime:Date.now()-d})),200!==f.code&&this.handleResponseError(f),f));case 34:case"end":return e.stop()}}),e,this,[[18,24]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"tryNextAddress",value:function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}},{key:"close",value:function(){var e="4.17.0"===qv?"0.0.1":qv;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}},{key:"handleResponseError",value:function(e){switch(e.code){case vg.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void zv.warning("live stream response already exists stream");case vg.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case vg.LIVE_STREAM_RESPONSE_BAD_STREAM:case vg.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Uv(Dv.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case vg.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case vg.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Uv(Dv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case vg.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new Uv(Dv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(pg.WARNING,t,e.serverResponse.url);case vg.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:var n=new Uv(Dv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(pg.WARNING,n,e.serverResponse.url);case vg.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case vg.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Uv(Dv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case vg.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:var r=new Uv(Dv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(pg.WARNING,r,e.serverResponse.url);case vg.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case vg.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case vg.LIVE_STREAM_RESPONSE_WORKER_LOST:case vg.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case vg.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case vg.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Uv(Dv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}},{key:"startPingPong",value:function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch(rw)}),6e3)}}]),n}(Lv);function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pk=function(e){f(n,e);var t=p(n);function n(e){var r;h(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jv,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jv;return r=t.call(this),xp(l(r),"onLiveStreamWarning",void 0),xp(l(r),"onLiveStreamError",void 0),xp(l(r),"onInjectStatusChange",void 0),xp(l(r),"spec",void 0),xp(l(r),"retryTimeout",1e4),xp(l(r),"connection",void 0),xp(l(r),"httpRetryConfig",void 0),xp(l(r),"wsRetryConfig",void 0),xp(l(r),"streamingTasks",new Map),xp(l(r),"isStartingStreamingTask",!1),xp(l(r),"taskMutex",new G_("live-streaming")),xp(l(r),"cancelToken",xv.CancelToken.source()),xp(l(r),"transcodingConfig",void 0),xp(l(r),"injectConfig",xk({},xg)),xp(l(r),"injectLoopTimes",0),xp(l(r),"uapResponse",void 0),xp(l(r),"lastTaskId",1),xp(l(r),"statusError",new Map),r.spec=e,r.httpRetryConfig=o,r.wsRetryConfig=i,r}return v(n,[{key:"setTranscodingConfig",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 66!==(n=xk(xk({},Dg),t)).videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(zv.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=n.transcodingUsers.map((function(e){return xk(xk(xk({},lg),e),{},{zOrder:e.zOrder?e.zOrder+1:1})}))),function(e){_y(e.width)||hy(e.width,"config.width",0,1e4),_y(e.height)||hy(e.height,"config.height",0,1e4),_y(e.videoBitrate)||hy(e.videoBitrate,"config.videoBitrate",1,1e6),_y(e.videoFrameRate)||hy(e.videoFrameRate,"config.videoFrameRate"),_y(e.lowLatency)||fy(e.lowLatency,"config.lowLatency"),_y(e.audioSampleRate)||py(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),_y(e.audioBitrate)||hy(e.audioBitrate,"config.audioBitrate",1,128),_y(e.audioChannels)||py(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),_y(e.videoGop)||hy(e.videoGop,"config.videoGop"),_y(e.videoCodecProfile)||py(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),_y(e.userCount)||hy(e.userCount,"config.userCount",0,17),_y(e.backgroundColor)||hy(e.backgroundColor,"config.backgroundColor",0,16777215),_y(e.userConfigExtraInfo)||my(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!_y(e.transcodingUsers)&&(yy(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){Ey(e.uid),_y(e.x)||hy(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),_y(e.y)||hy(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),_y(e.width)||hy(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),_y(e.height)||hy(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),_y(e.zOrder)||hy(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),_y(e.alpha)||hy(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),_y(e.watermark)||fg(e.watermark,"watermark"),_y(e.backgroundImage)||fg(e.backgroundImage,"backgroundImage"),e.images&&!_y(e.images)&&(yy(e.images,"config.images"),e.images.forEach((function(e,t){fg(e,"images[".concat(t,"]"))})))}(n),r=[],n.images&&r.push.apply(r,m(n.images.map((function(e){return xk(xk(xk({},dg),e),{},{zOrder:255})})))),n.backgroundImage&&(r.push(xk(xk(xk({},dg),n.backgroundImage),{},{zOrder:0})),delete n.backgroundImage),n.watermark&&(r.push(xk(xk(xk({},dg),n.watermark),{},{zOrder:255})),delete n.watermark),n.images=r,n.transcodingUsers&&(n.userConfigs=n.transcodingUsers.map((function(e){return xk({},e)})),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers),i=(n.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Vd.resolve(e.uid):hk(e.uid,s.spec,s.cancelToken.token,s.httpRetryConfig)})),e.next=7,Vd.all(i);case 7:if(e.sent.forEach((function(e,t){n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)})),this.transcodingConfig=n,!this.connection){e.next=22;break}return e.prev=10,e.next=13,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(vS(o=this.streamingTasks).call(o)).map((function(e){return e.taskId})).join("#")});case 13:a=e.sent,zv.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(a.code,", config:"),JSON.stringify(this.transcodingConfig)),e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(10),e.t0.data&&e.t0.data.retry){e.next=21;break}throw e.t0;case 21:e.t0.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(t){zv.warning("[".concat(s.spec.clientId,"] live streaming receive error"),e.t0.toString(),"try to republish",t.url),s.startLiveStreamingTask(t.url,t.mode,e.t0).then((function(){zv.debug("[".concat(s.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((function(e){zv.error("[".concat(s.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),s.onLiveStreamError&&s.onLiveStreamError(t.url,e)}))}));case 22:case"end":return e.stop()}}),e,this,[[10,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setInjectStreamConfig",value:function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}},{key:"startLiveStreamingTask",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.from(vS(i=this.streamingTasks).call(i)).find((function(e){return e.mode===rg.INJECT}))||n!==rg.INJECT){e.next=2;break}return e.abrupt("return",new Uv(Dv.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw());case 2:if(this.transcodingConfig||n!==rg.TRANSCODE){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");case 4:return o={command:"PublishStream",ts:Date.now(),url:t,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0},zv.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(t,", mode: ").concat(n)),e.next=8,this.taskMutex.lock();case 8:if(a=e.sent,this.connection||!r){e.next=11;break}return e.abrupt("return",void a());case 11:if(!this.streamingTasks.get(t)||r){e.next=13;break}return e.abrupt("return",(a(),new Uv(Dv.LIVE_STREAMING_TASK_CONFLICT).throw()));case 13:if(e.prev=13,e.t0=this.connection,e.t0){e.next=19;break}return e.next=18,this.connect(n);case 18:this.connection=e.sent;case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(13),a(),e.t1;case 24:e.t2=n,e.next=e.t2===rg.TRANSCODE?27:e.t2===rg.RAW?29:e.t2===rg.INJECT?30:31;break;case 27:return o.transcodingConfig=xk({},this.transcodingConfig),e.abrupt("break",31);case 29:return e.abrupt("break",31);case 30:o={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:t,loopTimes:this.injectLoopTimes};case 31:return this.uapResponse&&this.uapResponse.vid&&(o.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,s=this.lastTaskId++,e.prev=33,u=new Vd((function(e,n){$S(d.retryTimeout).then((function(){if(r)return n(r);var e=d.statusError.get(t);return e?(d.statusError.delete(t),n(e)):void 0}))})),e.next=37,Vd.race([this.connection.request("request",{clientRequest:o},!0,{url:t,command:"PublishStream",workerType:n===rg.TRANSCODE?1:2,requestByUser:!r,tid:s.toString()}),u]);case 37:l=e.sent,this.isStartingStreamingTask=!1,zv.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(l.code)),this.streamingTasks.set(t,{clientRequest:o,mode:n,url:t,taskId:s}),a(),e.next=56;break;case 41:if(e.prev=41,e.t3=e.catch(33),a(),this.isStartingStreamingTask=!1,e.t3.data&&e.t3.data.retry&&!r){e.next=45;break}throw e.t3;case 45:if(!e.t3.data.changeAddress){e.next=52;break}return this.connection.tryNextAddress(),e.next=49,this.startLiveStreamingTask(t,n,e.t3);case 49:e.t4=e.sent,e.next=55;break;case 52:return e.next=54,this.startLiveStreamingTask(t,n,e.t3);case 54:e.t4=e.sent;case 55:return e.abrupt("return",e.t4);case 56:case"end":return e.stop()}}),e,this,[[13,21],[33,41]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"stopLiveStreamingTask",value:function(e){var t=this;return new Vd((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new Uv(Dv.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){zv.debug("[".concat(t.spec.clientId,"] stop live streaming success(worker exception)")),t.streamingTasks.delete(e),n()},t.connection.request("request",{clientRequest:{command:o===rg.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===rg.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){zv.debug("[".concat(t.spec.clientId,"] stop live streaming success, code: ").concat(r.code)),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==rg.INJECT&&(t.connection&&t.connection.close(),t.connection=void 0),n(),o===rg.INJECT&&t.onInjectStatusChange&&t.onInjectStatusChange(ig.INJECT_STREAM_STATUS_STOP_SUCCESS,t.spec.uid,e)})).catch(r)}))}},{key:"controlInjectStream",value:function(){var e=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=this.streamingTasks.get(t))&&this.connection&&o.mode===rg.INJECT){e.next=3;break}throw new Uv(Dv.INVALID_OPERATION,"can not find inject stream task to control");case 3:return e.next=5,this.connection.request("request",{clientRequest:{command:"ControlStream",url:t,control:n,audioVolume:r,position:i}});case 5:return e.abrupt("return",e.sent.serverResponse);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"resetAllTask",value:function(){var e,t=this,n=Array.from(vS(e=this.streamingTasks).call(e));this.terminate();for(var r=function(){var e=o[i];t.startLiveStreamingTask(e.url,e.mode).catch((function(n){t.onLiveStreamError&&t.onLiveStreamError(e.url,n)}))},i=0,o=n;i<o.length;i++)r()}},{key:"terminate",value:function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=xv.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}},{key:"connect",value:function(){var e=u(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"live streaming connection has already connected");case 2:return e.next=4,aw(this,hg.REQUEST_WORKER_MANAGER_LIST,t);case 4:return n=e.sent,this.uapResponse=n,this.connection=new Nk(n.workerToken,this.spec,this.wsRetryConfig,t),this.connection.on(pg.WARNING,(function(e,t){return r.onLiveStreamWarning&&r.onLiveStreamWarning(t,e)})),this.connection.on(pg.PUBLISH_STREAM_STATUS,(function(e){return r.handlePublishStreamServer(e)})),this.connection.on(pg.INJECT_STREAM_STATUS,(function(e){return r.handleInjectStreamServerStatus(e)})),this.connection.on(pg.REQUEST_NEW_ADDRESS,(function(e,n){if(!r.connection)return n(new Uv(Dv.UNEXPECTED_ERROR,"can not get new live streaming address list"));aw(r,hg.REQUEST_WORKER_MANAGER_LIST,t).then((function(t){r.uapResponse=t,e(t.addressList)})).catch(n)})),e.next=13,this.connection.init(n.addressList);case 13:return e.abrupt("return",this.connection);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handlePublishStreamServer",value:function(e){var t=this,n=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(n),i=e.reason;switch(e.code){case vg.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case vg.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var o=new Uv(Dv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return zv.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,o);if(!this.isStartingStreamingTask)return;this.statusError.set(n,o);case vg.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var a=new Uv(Dv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(n,a);case vg.LIVE_STREAM_RESPONSE_WORKER_LOST:case vg.LIVE_STREAM_RESPONSE_WORKER_QUIT:var s;if(!this.connection)return;this.connection.tryNextAddress();for(var c=Array.from(vS(s=this.streamingTasks).call(s)),u=function(){var n=d[l];n.abortTask?n.abortTask():(zv.warning("[".concat(t.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),t.startLiveStreamingTask(n.url,n.mode,new Uv(Dv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){zv.debug("[".concat(t.spec.clientId,"] republish live stream success"),n.url)})).catch((function(e){zv.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)})))},l=0,d=c;l<d.length;l++)u();return}}},{key:"handleInjectStreamServerStatus",value:function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(ig.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(ig.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(ig.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(ig.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(ig.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void zv.debug("inject stream server status",e)}}},{key:"hasUrl",value:function(e){return this.streamingTasks.has(e)}}]),n}(Lv),Lk=function(){function e(){h(this,e),xp(this,"destChannelMediaInfos",new Map),xp(this,"srcChannelMediaInfo",void 0)}return v(e,[{key:"setSrcChannelInfo",value:function(e){Pg(e),this.srcChannelMediaInfo=e}},{key:"addDestChannelInfo",value:function(e){Pg(e),this.destChannelMediaInfos.set(e.channelName,e)}},{key:"removeDestChannelInfo",value:function(e){gy(e),this.destChannelMediaInfos.delete(e)}},{key:"getSrcChannelMediaInfo",value:function(){return this.srcChannelMediaInfo}},{key:"getDestChannelMediaInfo",value:function(){return this.destChannelMediaInfos}}]),e}();function Mk(e){if(!(e instanceof Lk))return new Uv(Dv.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();var t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new Uv(Dv.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Uv(Dv.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}var Uk=function(e){f(n,e);var t=p(n);function n(e,r,i){var o;return h(this,n),o=t.call(this),xp(l(o),"ws",void 0),xp(l(o),"requestId",1),xp(l(o),"heartBeatTimer",void 0),xp(l(o),"joinInfo",void 0),xp(l(o),"clientId",void 0),xp(l(o),"onOpen",(function(){o.emit("open"),o.startHeartBeatCheck()})),xp(l(o),"onClose",(function(e){o.emit("close"),o.dispose()})),xp(l(o),"onMessage",(function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(o.emit("status",t.serverStatus),void o.emit(t.serverStatus.command,t.serverStatus)):void 0;o.emit("req_".concat(t.requestId),t)})),o.joinInfo=e,o.clientId=r,o.ws=new Cw("cross-channel-".concat(o.clientId),i),o.ws.on(ng.RECONNECTING,(function(){o.ws.reconnectMode="retry",o.emit("reconnecting")})),o.ws.on(ng.CONNECTED,o.onOpen),o.ws.on(ng.ON_MESSAGE,o.onMessage),o.ws.on(ng.CLOSED,o.onClose),o}return v(n,[{key:"isConnect",value:function(){return"connected"===this.ws.state}},{key:"sendMessage",value:function(e){var t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}},{key:"waitStatus",value:function(e){var t=this;return new Vd((function(n,r){var i=window.setTimeout((function(){r(new Uv(Dv.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);t.once(e,(function(t){window.clearTimeout(i),t.state&&0!==t.state?r(new Uv(Dv.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):n(void 0)})),t.once("dispose",(function(){window.clearTimeout(i),r(new Uv(Dv.WS_ABORT))}))}))}},{key:"request",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"!==this.ws.state){e.next=2;break}throw new Uv(Dv.WS_DISCONNECT);case 2:if(n=function(){return new Vd((function(e,t){a.ws.once(ng.CLOSED,(function(){return t(new Uv(Dv.WS_ABORT))})),a.ws.once(ng.CONNECTED,e)}))},e.t0="connected"!==this.ws.state,!e.t0){e.next=7;break}return e.next=7,n();case 7:return r=this.sendMessage(t),i=new Vd((function(e,t){var n=function(){t(new Uv(Dv.WS_ABORT))};a.ws.once(ng.RECONNECTING,n),a.ws.once(ng.CLOSED,n),a.once("req_".concat(r),e),$S(3e3).then((function(){a.removeAllListeners("req_".concat(r)),a.ws.off(ng.RECONNECTING,n),a.ws.off(ng.CLOSED,n),t(new Uv(Dv.TIMEOUT,"cross channel ws request timeout"))}))})),e.next=11,i;case 11:if((o=e.sent)&&200===o.code){e.next=14;break}throw new Uv(Dv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(o)));case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ws.removeAllListeners(ng.REQUEST_NEW_URLS),this.ws.on(ng.REQUEST_NEW_URLS,(function(e){e(t)})),e.next=4,this.ws.init(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}},{key:"sendPing",value:function(e){var t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}},{key:"startHeartBeatCheck",value:function(){var e=this;this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((function(){e.sendPing({command:"ping",appId:e.joinInfo.appId,cname:e.joinInfo.cname,uid:e.joinInfo.uid.toString(),sid:e.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}},{key:"clearHeartBeatCheck",value:function(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}]),n}(Lv),jk=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this),xp(l(a),"joinInfo",void 0),xp(l(a),"sid",void 0),xp(l(a),"clientId",void 0),xp(l(a),"cancelToken",xv.CancelToken.source()),xp(l(a),"workerToken",void 0),xp(l(a),"requestId",0),xp(l(a),"signal",void 0),xp(l(a),"prevChannelMediaConfig",void 0),xp(l(a),"httpRetryConfig",void 0),xp(l(a),"_state",Eg.RELAY_STATE_IDLE),xp(l(a),"errorCode",_g.RELAY_OK),xp(l(a),"onStatus",(function(e){zv.debug("[".concat(a.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&a.emit("event",gg.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&a.emit("event",gg.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(a.errorCode=_g.SRC_TOKEN_EXPIRED,a.state=Eg.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(a.errorCode=_g.DEST_TOKEN_EXPIRED,a.state=Eg.RELAY_STATE_FAILURE))})),xp(l(a),"onReconnect",u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zv.debug("[".concat(a.clientId,"] ChannelMediaSocket disconnect, reconnecting")),a.emit("event",gg.NETWORK_DISCONNECTED),a.state=Eg.RELAY_STATE_IDLE,a.prevChannelMediaConfig&&a.sendStartRelayMessage(a.prevChannelMediaConfig).catch((function(e){a.state!==Eg.RELAY_STATE_IDLE&&(zv.error("auto restart channel media relay failed",e.toString()),a.errorCode=_g.SERVER_CONNECTION_LOST,a.state=Eg.RELAY_STATE_FAILURE)}));case 1:case"end":return e.stop()}}),e)})))),a.joinInfo=e,a.clientId=r,a.sid=nw(),a.signal=new Uk(a.joinInfo,a.clientId,i),a.httpRetryConfig=o,a}return v(n,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(e!==Eg.RELAY_STATE_FAILURE&&(this.errorCode=_g.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}},{key:"startChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===Eg.RELAY_STATE_IDLE){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION);case 2:return this.state=Eg.RELAY_STATE_CONNECTING,e.next=5,this.connect();case 5:return zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success")),e.prev=6,e.next=9,this.sendStartRelayMessage(t);case 9:e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(6),!e.t0.data||!e.t0.data.serverResponse||"SetSourceChannel"!==e.t0.data.serverResponse.command){e.next=15;break}throw new Uv(Dv.CROSS_CHANNEL_FAILED_JOIN_SRC);case 15:if(!e.t0.data||!e.t0.data.serverResponse||"SetDestChannelStatus"!==e.t0.serverResponse.command){e.next=17;break}throw new Uv(Dv.CROSS_CHANNEL_FAILED_JOIN_DEST);case 17:if(!e.t0.data||!e.t0.data.serverResponse||"StartPacketTransfer"!==e.t0.serverResponse.command){e.next=19;break}throw new Uv(Dv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);case 19:throw e.t0;case 20:this.prevChannelMediaConfig=t;case 21:case"end":return e.stop()}}),e,this,[[6,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===Eg.RELAY_STATE_RUNNING){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION);case 2:return e.next=4,this.sendUpdateMessage(t);case 4:this.prevChannelMediaConfig=t;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopChannelMediaRelay",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendStopRelayMessage();case 2:zv.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Eg.RELAY_STATE_IDLE,this.dispose();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){zv.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=xv.CancelToken.source(),this.state=Eg.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}},{key:"connect",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);case 2:return t=e.sent,this.workerToken=t.workerToken,e.next=6,this.signal.connect(t.addressList);case 6:this.emit("event",gg.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendStartRelayMessage",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(yg.StopPacketTransfer),e.next=3,this.signal.request(n);case 3:return e.next=5,this.signal.waitStatus("Normal Quit");case 5:return zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),r=this.genMessage(yg.SetSdkProfile,t),e.next=9,this.signal.request(r);case 9:return zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),i=this.genMessage(yg.SetSourceChannel,t),e.next=13,this.signal.request(i);case 13:return e.next=15,this.signal.waitStatus("SetSourceChannelStatus");case 15:return this.emit("event",gg.PACKET_JOINED_SRC_CHANNEL),zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),o=this.genMessage(yg.SetSourceUserId,t),e.next=20,this.signal.request(o);case 20:return zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),a=this.genMessage(yg.SetDestChannel,t),e.next=24,this.signal.request(a);case 24:return e.next=26,this.signal.waitStatus("SetDestChannelStatus");case 26:return this.emit("event",gg.PACKET_JOINED_DEST_CHANNEL),zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),s=this.genMessage(yg.StartPacketTransfer,t),e.next=31,this.signal.request(s);case 31:this.emit("event",gg.PACKET_SENT_TO_DEST_CHANNEL),this.state=Eg.RELAY_STATE_RUNNING,zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"));case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendUpdateMessage",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(yg.UpdateDestChannel,t),e.next=3,this.signal.request(n);case 3:this.emit("event",gg.PACKET_UPDATE_DEST_CHANNEL),zv.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendStopRelayMessage",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.genMessage(yg.StopPacketTransfer),e.next=3,this.signal.request(t);case 3:zv.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"genMessage",value:function(e,t){var n=this,r=[],i=[],o=[];this.requestId+=1;var a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:qv,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.17.0"===a.sdkVersion&&(a.sdkVersion="0.0.1");var s=null,c=null;switch(e){case yg.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case yg.SetSourceChannel:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Uv(Dv.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:c.channelName,token:c.token||this.joinInfo.appId},a;case yg.SetSourceUserId:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Uv(Dv.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:c.uid+""},a;case yg.SetDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Uv(Dv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},a;case yg.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case yg.Reconnect:return a.clientRequest={command:"Reconnect"},a;case yg.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case yg.UpdateDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Uv(Dv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},a}return a}}]),n}(Lv),Vk=function(e){var t=document.createElement("canvas");return t.width=2,t.height=2,new Vd((function(n,r){t.toBlob(function(){var e=u(c().mark((function e(i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.remove(),!i){e.next=7;break}return e.next=3,Fk(i);case 3:o=e.sent,n({buffer:o,width:t.width,height:t.height}),e.next=8;break;case 7:r(new Uv(Dv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e,1)}))},Fk=function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bk(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gk,Hk,Kk=function(){function e(t){var n=this;h(this,e),xp(this,"trackId",void 0),xp(this,"config",void 0),xp(this,"onFirstVideoFrameDecoded",void 0),xp(this,"freezeTimeCounterList",[]),xp(this,"renderFreezeAccTime",0),xp(this,"timeUpdatedCount",0),xp(this,"freezeTime",0),xp(this,"playbackTime",0),xp(this,"lastTimeUpdatedTime",0),xp(this,"autoplayFailed",!1),xp(this,"videoTrack",void 0),xp(this,"container",void 0),xp(this,"videoElement",void 0),xp(this,"cacheVideoElement",void 0),xp(this,"videoElementCheckInterval",void 0),xp(this,"_videoElementStatus",ay.NONE),xp(this,"slot",void 0),xp(this,"isGettingVideoDimensions",!1),xp(this,"handleVideoEvents",(function(e){switch(e.type){case"play":case"playing":n.startGetVideoDimensions(),n.videoElementStatus=ay.PLAYING;break;case"loadeddata":if(n.onFirstVideoFrameDecoded&&n.onFirstVideoFrameDecoded(),n.cacheVideoElement){try{n.container&&n.container.removeChild(n.cacheVideoElement)}catch(e){}n.cacheVideoElement=void 0}break;case"canplay":n.videoElementStatus=ay.CANPLAY;break;case"stalled":n.videoElementStatus=ay.STALLED;break;case"suspend":n.videoElementStatus=ay.SUSPEND;break;case"pause":n.videoElementStatus=ay.PAUSED,pp()||_p()||dp()&&n.autoplayFailed||!n.videoElement||!n.videoTrack||"live"!==n.videoTrack.readyState||(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume")),n.videoElement.play());break;case"waiting":n.videoElementStatus=ay.WAITING;break;case"abort":n.videoElementStatus=ay.ABORT;break;case"ended":n.videoElementStatus=ay.ENDED;break;case"emptied":n.videoElementStatus=ay.EMPTIED;break;case"error":var t;n.videoElementStatus=ay.ERROR;var r=null===(t=n.videoElement)||void 0===t?void 0:t.error;r&&zv.error("[".concat(n.trackId,"] media error, code: ").concat(r.code,", message: ").concat(r.message));break;case"timeupdate":var i=performance.now();if(n.timeUpdatedCount+=1,n.timeUpdatedCount<10)return void(n.lastTimeUpdatedTime=i);var o=i-n.lastTimeUpdatedTime,a=n.lastTimeUpdatedTime;if(n.lastTimeUpdatedTime=i,MS.lastVisibleTime<MS.lastHiddenTime||a<MS.lastHiddenTime||a<MS.lastVisibleTime)return;for(o>sm("VIDEO_FREEZE_DURATION")&&(n.freezeTime+=o),n.playbackTime+=o;n.playbackTime>=6e3;){n.playbackTime-=6e3;var s=Math.min(6e3,n.freezeTime);n.freezeTimeCounterList.push(s),n.freezeTime=Math.max(0,n.freezeTime-6e3)}}})),xp(this,"startGetVideoDimensions",(function(){var e=function e(){if(n.isGettingVideoDimensions=!0,n.videoElement&&n.videoElement.videoWidth*n.videoElement.videoHeight>4)return zv.debug("[".concat(n.trackId,"] current video dimensions:"),n.videoElement.videoWidth,n.videoElement.videoHeight),void(n.isGettingVideoDimensions=!1);setTimeout(e,500)};!n.isGettingVideoDimensions&&e()})),xp(this,"autoResumeAfterInterruption",(function(){n.videoElement&&n.videoTrack&&"live"===n.videoTrack.readyState&&"running"===Z_.curState&&(Ep()?(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.2")),n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):gp()?(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.1")),n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):yp()&&(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.0")),n.videoElement.pause(),n.videoElement.play()))})),xp(this,"autoResumeAfterInterruptionOnIOS15",(function(){n.videoElement&&n.videoTrack&&"live"===n.videoTrack.readyState&&(Ep()?(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.2")),n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):gp()?(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.1")),n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):yp()&&(zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for iOS 15.0")),n.videoElement.pause(),n.videoElement.play()))})),this.slot=t.element,this.trackId=t.trackId,this.updateConfig(t),Z_.on(F_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Z_.on(F_.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}return v(e,[{key:"videoElementStatus",get:function(){return this._videoElementStatus},set:function(e){e!==this._videoElementStatus&&(zv.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}},{key:"updateConfig",value:function(e){this.config=e,this.trackId=e.trackId;var t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}},{key:"updateVideoTrack",value:function(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}},{key:"play",value:function(e){var t=this;if(this.videoElement){var n=this.videoElement.play();n&&n.catch&&n.catch((function(n){e&&V_.autoplayFailed(e,"video",n.message,t.trackId),"NotAllowedError"===n.name?(zv.warning("detected video element autoplay failed",n),t.autoplayFailed=!0,t.handleAutoPlayFailed()):zv.warning("[".concat(t.trackId,"] play warning: "),n)}));var r=rp();if(("Safari"===r.name&&15===Number(r.version)||mp())&&n&&n.then&&n.catch){var i=function(){t.config.mirror&&t.videoElement&&(t.videoElement.style.transform="rotateY(180deg)")};n.then(i).catch(i)}}}},{key:"getCurrentFrame",value:function(){if(!this.videoElement)return new ImageData(2,2);var e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");if(!t)return zv.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);var n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}},{key:"getCurrentFrameToUint8Array",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:1,this.videoElement){e.next=5;break}return e.next=4,Vk(t);case 4:return e.abrupt("return",e.sent);case 5:if((r=document.createElement("canvas")).width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight,!(i=r.getContext("2d"))){e.next=12;break}e.t0=(i.drawImage(this.videoElement,0,0,r.width,r.height),new Vd((function(e,i){r.toBlob(function(){var t=u(c().mark((function t(n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.remove(),!n){t.next=7;break}return t.next=3,Fk(n);case 3:o=t.sent,e({buffer:o,width:r.width,height:r.height}),t.next=8;break;case 7:i(new Uv(Dv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t,n<0?.1:n>1?1:n)}))),e.next=15;break;case 12:return e.next=14,Vk(t);case 14:e.t0=e.sent;case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){if(Z_.off(F_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Z_.off(F_.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(b){}this.container=void 0}this.freezeTimeCounterList=[]}},{key:"createElements",value:function(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",sm("KEEP_LAST_FRAME")&&this.resetVideoElement(),this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}},{key:"createVideoElement",value:function(){var e=this;if(!this.videoElement&&(this.videoElementStatus=ay.INIT,this.videoElement=document.createElement("video"),this.container&&this.container.appendChild(this.videoElement),zk.forEach((function(t){e.videoElement&&e.videoElement.addEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((function(){!document.getElementById("video_".concat(e.trackId))&&e.videoElement&&(e.videoElementStatus=ay.DESTROYED)}),1e3),sm("ENABLE_VIDEO_FRAME_CALLBACK"))){var t,n,r,i=function t(n,i){if(e.videoElementStatus===ay.PLAYING){if(r){var o=i.presentationTime-r.presentationTime;o>sm("VIDEO_FREEZE_DURATION")&&MS.lastVisibleTime>=MS.lastHiddenTime&&r.timestamp>MS.lastVisibleTime&&r.timestamp>MS.lastHiddenTime&&(e.renderFreezeAccTime+=o)}r=Wk(Wk({},i),{},{timestamp:n})}var a,s;sm("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(a=e.videoElement)||void 0===a||null===(s=a.requestVideoFrameCallback)||void 0===s||s.call(a,t))};null===(t=(n=this.videoElement).requestVideoFrameCallback)||void 0===t||t.call(n,i)}this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0",kp()&&(this.videoElement.poster="noposter");var o=rp();"Safari"===o.name&&15===Number(o.version)||mp()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,fp()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,fp()&&this.videoElement.load());var a=this.videoElement.play();void 0!==a&&a.catch((function(t){zv.debug("[".concat(e.trackId,"] playback interrupted"),t.toString())}))}},{key:"removeVideoElement",value:function(){var e=this;if(this.videoElement){zk.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(b){}this.videoElement=void 0,this.videoElementStatus=ay.NONE}}},{key:"resetVideoElement",value:function(){var e=this;this.videoElement&&(zk.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.cacheVideoElement=this.videoElement,this.videoElement=void 0,this.videoElementStatus=ay.NONE)}},{key:"handleAutoPlayFailed",value:function(){var e=this;if(this.videoElement){var t=function t(n){n.preventDefault(),e.videoElement&&(e.videoElement.play().then((function(){zv.debug("[".concat(e.trackId,"] Video element for trackId:").concat(e.trackId," autoplay resumed."))})).catch((function(e){zv.error(e)})),e.autoplayFailed=!1,Tp()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0)))};Tp()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),D_()}}},{key:"getVideoElement",value:function(){return this.videoElement}},{key:"getContainerElement",value:function(){return this.container}}]),e}(),zk=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];function Yk(e){var t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});var n=tm(e.encoderConfig);return t.width=n.width,t.height=n.height,!Sp()&&n.frameRate&&(t.frameRate=n.frameRate),rp().name===Jf.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),fp()&&(t.frameRate={ideal:30,max:30}),t}function qk(e){var t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&lp()&&(t.extensionId=e.extensionId),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);var n=e.encoderConfig?nm(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:n?n.width:void 0,maxHeight:n?n.height:void 0},n&&n.frameRate&&("number"==typeof n.frameRate?(t.mandatory.maxFrameRate=n.frameRate,t.mandatory.minFrameRate=n.frameRate):(t.mandatory.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||void 0,t.mandatory.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||void 0),t.frameRate=n.frameRate),n&&n.width&&(t.width=n.width),n&&n.height&&(t.height=n.height),t}function Zk(e){var t={};if(Sp()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,lp()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){var n=om(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),kp()&&(t.sampleRate=void 0),t}!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(Gk||(Gk={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(Hk||(Hk={}));var Xk,Jk,Qk,$k,eT,tT,nT,rT,iT,oT,aT,sT,cT,uT,lT,dT,fT,pT,hT,vT,mT,yT,gT,ET,_T,bT,ST,wT,kT,TT,RT,CT,IT=new(function(){function e(){var t=this;h(this,e),xp(this,"_clientSize",null),xp(this,"getClientWidth",(function(){return document.documentElement?document.documentElement.clientWidth:document.body.clientWidth})),xp(this,"getClientHeight",(function(){return document.documentElement?document.documentElement.clientHeight:document.body.clientHeight})),xp(this,"getStyle",(function(e){return window.getComputedStyle(e,null)})),xp(this,"checkCssVisibleProperty",(function(e){var n=!0,r=t.getStyle(e),i=r.display,o=r.visibility,s=r.opacity,c=r.filter;return("none"===i||["hidden","collapse"].includes(o)||Number(s)<.1)&&(n=!1),!!n&&(c&&c.split(" ").filter((function(e){var t=e.split("(")[0];return["brightness","blur","opacity"].includes(t)})).map((function(e){var t=e.split(/\(|\)/),n=a(t,2),r=n[0],i=n[1];return[r,Number(i.match(/^[0-9\.]+/))]})).forEach((function(e){var t=a(e,2),r=t[0],i=t[1];switch(r){case"brightness":(i<.1||i>3)&&(n=!1);break;case"blur":i>3&&(n=!1);break;case"opacity":i<.1&&(n=!1)}})),n)})),xp(this,"checkPropertyUpToAllParentNodes",(function(e,t){for(var n=!0,r=!0,i=function(e){return t(e)},o=e;o&&r;)i(o)||(n=!1,r=!1),(o=o.parentElement)||(r=!1);return n})),xp(this,"checkActualCssVisibleIncludeInherit",(function(e){return t.checkPropertyUpToAllParentNodes(e,t.checkCssVisibleProperty)})),xp(this,"getSizeAboutClient",(function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.right,s=n.top,c=n.bottom,u=t.getClientWidth(),l=t.getClientHeight();return{width:r,height:i,left:o,right:a,top:s,bottom:c,clientWidth:u,clientHeight:l,clientMin:Math.min(u,l)}})),xp(this,"checkActualSize",(function(){var e=t._clientSize,n=e.width,r=e.height,i=e.clientMin;return t.checkSizeIsVisible(n,r,i)})),xp(this,"elementFromPoint",(function(e,t){return document.elementFromPoint?document.elementFromPoint(e,t):null})),xp(this,"checkCoverForAPoint",(function(e,n,r){var i=t.elementFromPoint(e,n);return null!==i&&i!==r})),xp(this,"getPointPositionList",(function(){for(var e=t._clientSize,n=e.width,r=e.height,i=e.left,o=e.top,a=n/6,s=r/6,c=[],u=Math.pow(10,6),l=0;l<5;l++)for(var d=0;d<5;d++){var f=(i*u+(0===l?.1:4===l?(a*l*u-1e5)/u:a*l)*u)/u,p=(o*u+(0===d?.1:4===d?(s*d*u-1e5)/u:s*d)*u)/u;c.push({x:f,y:p})}return[].concat(c)})),xp(this,"checkElementCover",(function(e){return t.getPointPositionList().map((function(n){return t.checkCoverForAPoint(n.x,n.y,e)})).filter((function(e){return!!e})).length>6})),xp(this,"checkSizeIsVisible",(function(e,t,n){return(e>50||n/e<=10)&&(t>50||n/t<=10)})),xp(this,"checkSizeOfPartInClient",(function(){var e,n,r=t._clientSize,i=r.left,o=r.right,a=r.top,s=r.bottom,c=r.clientHeight,u=r.clientWidth,l=r.clientMin;if(i<0)e=0;else{if(!(i<u))return!1;e=i}if(o<0)return!1;if(a<0)n=0;else{if(!(a<c))return!1;n=a}if(s<0)return!1;var d=(o<u?o:u)-e,f=(s<c?s:c)-n;return t.checkSizeIsVisible(d,f,l)})),xp(this,"returnHiddenResult",(function(e){return t._clientSize=null,{visible:!1,reason:e}})),xp(this,"checkOneElementVisible",(function(e){if(e instanceof HTMLElement){if(t.checkElementIsMountedOnDom(e)){if(t.checkActualCssVisibleIncludeInherit(e)){if(t._clientSize=t.getSizeAboutClient(e),t.checkElementCover(e))return t.returnHiddenResult(Gk.COVERED);var n=t.checkActualSize(),r=t.checkSizeOfPartInClient();return n&&!r?t.returnHiddenResult(Gk.POSITION):n?(t._clientSize=null,{visible:!0}):t.returnHiddenResult(Gk.SIZE)}return t.returnHiddenResult(Gk.STYLE)}return t.returnHiddenResult(Hk.UNMOUNTED)}return t.returnHiddenResult(Hk.INVALID_HTML_ELEMENT)})),xp(this,"checkElementIsMountedOnDom",(function(e){return t.checkPropertyUpToAllParentNodes(e,(function(e){return"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement}))}))}return v(e)}());function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OT(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var NT=(Xk=j_({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:"HTMLElement",n]}}),Jk=kb(),Qk=j_({argsMap:function(e){return[e.getTrackId()]}}),$k=H_("LocalVideoTrack","_enabledMutex"),eT=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),tT=kb(),nT=H_("LocalVideoTrack","_enabledMutex"),rT=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),iT=kb(),oT=kb(),aT=j_({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),sT=kb(),cT=kb(),uT=kb(),lT=kb(),dT=kb(),fT=kb(),pT=kb(),hT=j_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),vT=j_({argsMap:function(e){return[e.getTrackId()]}}),mT=j_({argsMap:function(e){return[e.getTrackId()]}}),yT=j_({argsMap:function(e,t,n){return[e.getTrackId(),t.label,n]}}),v_((gT=function(e){f(n,e);var t=p(n);function n(e,r,i,o,a,s){var c;return h(this,n),c=t.call(this,e,a),xp(l(c),"trackMediaType","video"),xp(l(c),"_player",void 0),xp(l(c),"_videoVisibleTimer",null),xp(l(c),"_previousVideoVisibleStatus",void 0),xp(l(c),"_clearPreviousVideoVisibleStatus",(function(){return c._previousVideoVisibleStatus=void 0})),xp(l(c),"_encoderConfig",void 0),xp(l(c),"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),xp(l(c),"_optimizationMode",void 0),xp(l(c),"_videoHeight",void 0),xp(l(c),"_videoWidth",void 0),xp(l(c),"_forceBitrateLimit",void 0),xp(l(c),"_enabled",!0),xp(l(c),"processorDestination",void 0),xp(l(c),"processorContext",void 0),c.updateMediaStreamTrackResolution(),c._encoderConfig=r,c._scalabiltyMode=i,c._optimizationMode=o,c._hints=s||[],-1===c._hints.indexOf(Rg.SCREEN_TRACK)&&c.updateBitrateFromProfile(),c.processorContext=new ES(c.getTrackId(),"local"),c.processorDestination=new gS(c.processorContext),c.bindProcessorDestinationEvents(),c}return v(n,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==ay.PLAYING)}},{key:"__className__",get:function(){return"LocalVideoTrack"}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(zv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}zv.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(n));var i=AT(AT(AT({},this._getDefaultPlayerConfig()),n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new Kk(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var e=t.getVideoElementVisibleStatus();t.emit(Og.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(n){}}),sm("CHECK_VIDEO_VISIBLE_INTERVAL"))}},{key:"stop",value:function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,zv.debug("[".concat(this.getTrackId(),"] stop video playback")))}},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){e.next=15;break}return this._originMediaStreamTrack.enabled=!1,e.prev=6,e.next=9,sw(this,Tg.NEED_DISABLE_TRACK,this);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t0.toString()),e.t0;case 14:return e.abrupt("return",(n||(this._enabled=!1),void zv.info("[".concat(this.getTrackId(),"] setEnabled to false success"))));case 15:return this._originMediaStreamTrack.enabled=!0,e.prev=16,e.next=19,sw(this,Tg.NEED_ENABLE_TRACK,this);case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(16),zv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t1.toString()),e.t1;case 24:zv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0);case 25:case"end":return e.stop()}}),e,this,[[6,11],[16,21]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setMuted",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,zv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,sw(this,Tg.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,sw(this,Tg.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStats",value:function(){return vw((function(){zv.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),cw(this,Tg.GET_STATS)||AT({},ag)}},{key:"setBeautyEffect",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zv.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect https://docs-beta.agora.io/en/video-calling/develop/image-enhancement?platform=web ");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCurrentFrameData",value:function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}},{key:"getCurrentFrameImage",value:function(){var e=u(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:1,!this._player){e.next=5;break}e.t0=this._player.getCurrentFrameToUint8Array(t,n),e.next=8;break;case 5:return e.next=7,Vk(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clone",value:function(e,t,r,i){return new n(this._mediaStreamTrack.clone(),e,t,r,i)}},{key:"setBitrateLimit",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),!t){e.next=10;break}return this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate),e.prev=2,e.next=5,sw(this,Tg.NEED_UPDATE_VIDEO_ENCODER,this);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",e.t0.throw());case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setOptimizationMode",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("motion"===t||"detail"===t||"balanced"===t){e.next=2;break}return e.abrupt("return",void zv.error(Dv.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"));case 2:return n=this._optimizationMode,e.prev=3,this._optimizationMode=t,e.next=7,sw(this,Tg.SET_OPTIMIZATION_MODE,this);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),this._optimizationMode=n,zv.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.t0.toString()),e.t0;case 12:zv.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"));case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setScalabiltyMode",value:function(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return zv.error(Dv.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,zv.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}},{key:"updateMediaStreamTrackResolution",value:function(){var e=this;iw(this._originMediaStreamTrack).then((function(t){var n=a(t,2),r=n[0],i=n[1];e._videoHeight=i,e._videoWidth=r})).catch(rw)}},{key:"_updatePlayerSource",value:function(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}},{key:"_getDefaultPlayerConfig",value:function(){return{fit:"contain"}}},{key:"updateBitrateFromProfile",value:function(){if(this._encoderConfig){var e=this.getMediaStreamTrackSettings(),t=e.width,n=e.height,r=e.frameRate;if(t&&n&&r){var i=function(e,t,n){var r,i=sm("BITRATE_ADAPTER_TYPE"),o=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75),a=o;if("STANDARD_BITRATE"===i)r=4*o;else{if("COMPATIABLE_BITRATE"!==i)return;r=2*o}return[Math.floor(r),Math.floor(a)]}(t,n,r)||[void 0,void 0],o=a(i,2),s=o[0],c=o[1];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=c,this._encoderConfig.bitrateMax=s,zv.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(s,", brMin: ").concat(c,"]")))}}}},{key:"getVideoElementVisibleStatus",value:function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=IT.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(u){throw new Uv(Dv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,u.message)}}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pipe",value:function(e){if(this.processor===e)return e;if(e._source)throw new Uv(Dv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}},{key:"unpipe",value:function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}}},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof MediaStreamTrack){e.next=2;break}throw new Uv(Dv.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");case 2:if("video"===t.kind){e.next=4;break}throw new Uv(Dv.INVALID_PARAMS,"track should be a video MediaStreamTrack");case 4:return e.next=6,this._updateOriginMediaStreamTrack(t,n,!0);case 6:this.updateMediaStreamTrackResolution();case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(zg.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=7;break}return e._mediaStreamTrack=n,e._updatePlayerSource(),t.next=7,sw(e,Tg.NEED_REPLACE_TRACK,e);case 7:t.next=15;break;case 9:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=15;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=15,sw(e,Tg.NEED_REPLACE_TRACK,e);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(zg.ON_TRACK)}},{key:"unbindProcessorContextEvents",value:function(){this.processorContext.removeAllListeners(Yg.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Yg.REQUEST_CONSTRAINTS)}}]),n}(K_)).prototype,"play",[Xk,Jk],Object.getOwnPropertyDescriptor(gT.prototype,"play"),gT.prototype),v_(gT.prototype,"stop",[Qk],Object.getOwnPropertyDescriptor(gT.prototype,"stop"),gT.prototype),v_(gT.prototype,"setEnabled",[$k,eT,tT],Object.getOwnPropertyDescriptor(gT.prototype,"setEnabled"),gT.prototype),v_(gT.prototype,"setMuted",[nT,rT,iT],Object.getOwnPropertyDescriptor(gT.prototype,"setMuted"),gT.prototype),v_(gT.prototype,"getStats",[oT],Object.getOwnPropertyDescriptor(gT.prototype,"getStats"),gT.prototype),v_(gT.prototype,"setBeautyEffect",[aT,sT],Object.getOwnPropertyDescriptor(gT.prototype,"setBeautyEffect"),gT.prototype),v_(gT.prototype,"getCurrentFrameData",[cT],Object.getOwnPropertyDescriptor(gT.prototype,"getCurrentFrameData"),gT.prototype),v_(gT.prototype,"getCurrentFrameImage",[uT],Object.getOwnPropertyDescriptor(gT.prototype,"getCurrentFrameImage"),gT.prototype),v_(gT.prototype,"setBitrateLimit",[lT],Object.getOwnPropertyDescriptor(gT.prototype,"setBitrateLimit"),gT.prototype),v_(gT.prototype,"setOptimizationMode",[dT],Object.getOwnPropertyDescriptor(gT.prototype,"setOptimizationMode"),gT.prototype),v_(gT.prototype,"setScalabiltyMode",[fT],Object.getOwnPropertyDescriptor(gT.prototype,"setScalabiltyMode"),gT.prototype),v_(gT.prototype,"updateMediaStreamTrackResolution",[pT],Object.getOwnPropertyDescriptor(gT.prototype,"updateMediaStreamTrackResolution"),gT.prototype),v_(gT.prototype,"pipe",[hT],Object.getOwnPropertyDescriptor(gT.prototype,"pipe"),gT.prototype),v_(gT.prototype,"unpipe",[vT],Object.getOwnPropertyDescriptor(gT.prototype,"unpipe"),gT.prototype),v_(gT.prototype,"close",[mT],Object.getOwnPropertyDescriptor(gT.prototype,"close"),gT.prototype),v_(gT.prototype,"replaceTrack",[yT],Object.getOwnPropertyDescriptor(gT.prototype,"replaceTrack"),gT.prototype),gT),DT=(ET=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),_T=kb(),bT=H_("CameraVideoTrack","_enabledMutex"),ST=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),wT=kb(),kT=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),TT=kb(),RT=j_({argsMap:function(e){return[e.getTrackId()]}}),v_((CT=function(e){f(n,e);var t=p(n);function n(e,r,i,o,a,s){var d;return h(this,n),d=t.call(this,e,tm(r.encoderConfig),o,a,s),xp(l(d),"_config",void 0),xp(l(d),"_originalConstraints",void 0),xp(l(d),"_constraints",void 0),xp(l(d),"_enabled",!0),xp(l(d),"_deviceName","default"),xp(l(d),"tryResumeVideoForIOS15WeChat",u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mp()&&!Ep()&&bp()&&d._enabled&&!d._isClosed,!e.t0){e.next=5;break}return zv.debug("[".concat(d.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),e.next=5,d.renewMediaStreamTrack();case 5:case"end":return e.stop()}}),e)})))),d._config=r,d._originalConstraints=i,d._constraints=i,d._deviceName=e.label,d._encoderConfig=tm(d._config.encoderConfig),Z_.on(F_.IOS_15_INTERRUPTION_END,d.tryResumeVideoForIOS15WeChat),Z_.on(F_.IOS_INTERRUPTION_END,d.tryResumeVideoForIOS15WeChat),d.bindProcessorContextEvents(),d}return v(n,[{key:"__className__",get:function(){return"CameraVideoTrack"}},{key:"setDevice",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),!this._enabled){e.next=36;break}return e.prev=1,e.next=4,bb.getDeviceById(t);case 4:return n=e.sent,(r={}).video=AT({},this._constraints),r.video.deviceId={exact:t},r.video.facingMode=void 0,this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,vb(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),zv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,vb({video:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 25:this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(1),zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 34:e.next=46;break;case 36:return e.prev=36,e.next=39,bb.getDeviceById(t);case 39:o=e.sent,this._deviceName=o.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=46;break;case 43:throw e.prev=43,e.t2=e.catch(36),zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 46:zv.info("[".concat(this.getTrackId(),"] setDevice success"));case 47:case"end":return e.stop()}}),e,this,[[1,31],[8,14],[36,43]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=25;break}if(e.prev=5,!this.isExternalTrack){e.next=10;break}this._originMediaStreamTrack.enabled=!0,e.next=15;break;case 10:return e.next=12,vb({video:this._constraints},this.getTrackId());case 12:return r=e.sent,e.next=15,this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1);case 15:return e.next=17,sw(this,Tg.NEED_ENABLE_TRACK,this);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(5),zv.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.t0.toString()),e.t0;case 22:this.updateMediaStreamTrackResolution(),zv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0),e.next=35;break;case 25:return this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),n||(this._enabled=!1),e.prev=26,e.next=29,sw(this,Tg.NEED_DISABLE_TRACK,this);case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 34:zv.info("[".concat(this.getTrackId(),"] setEnabled to false success"));case 35:case"end":return e.stop()}}),e,this,[[5,19],[26,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setEncoderConfiguration",value:function(){var e=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Uv(Dv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:return t=tm(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),(r=pw(this._config)).encoderConfig=t,i=Yk(r),(dp()||pp()||_p())&&(i.deviceId=void 0),zv.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i)),e.prev=7,e.next=10,this._originMediaStreamTrack.applyConstraints(i);case 10:this.updateMediaStreamTrackResolution(),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(7),o=new Uv(Dv.UNEXPECTED_ERROR,e.t0.toString()),zv.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o;case 17:return this._config=r,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,-1===this._hints.indexOf(Rg.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=18,e.next=21,sw(this,Tg.NEED_UPDATE_VIDEO_ENCODER,this);case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(18),e.abrupt("return",e.t1.throw());case 26:case"end":return e.stop()}}),e,this,[[7,13],[18,23]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getDefaultPlayerConfig",value:function(){return{mirror:!0,fit:"cover"}}},{key:"onTrackEnded",value:function(){var e=this;if((pp()||_p())&&this._enabled&&!this._isClosed&&Z_.duringInterruption){var t=function(){var n=u(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Z_.off(F_.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return zv.debug("[".concat(e.getTrackId(),"] try capture camera media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Z_.on(F_.IOS_INTERRUPTION_END,t)}else zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Og.TRACK_ENDED)}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=bb.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId={exact:r}),!this._enabled){e.next=9;break}return e.next=4,vb({video:n},this.getTrackId());case 4:return i=e.sent,this._constraints=n,e.next=8,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0);case 8:this.updateMediaStreamTrackResolution();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),Z_.off(F_.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Z_.off(F_.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}},{key:"bindProcessorContextEvents",value:function(){var e=this;this.processorContext.on(Yg.REQUEST_UPDATE_CONSTRAINTS,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(m(n))),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(Yg.REQUEST_CONSTRAINTS,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}(NT)).prototype,"setDevice",[ET,_T],Object.getOwnPropertyDescriptor(CT.prototype,"setDevice"),CT.prototype),v_(CT.prototype,"setEnabled",[bT,ST,wT],Object.getOwnPropertyDescriptor(CT.prototype,"setEnabled"),CT.prototype),v_(CT.prototype,"setEncoderConfiguration",[kT,TT],Object.getOwnPropertyDescriptor(CT.prototype,"setEncoderConfiguration"),CT.prototype),v_(CT.prototype,"close",[RT],Object.getOwnPropertyDescriptor(CT.prototype,"close"),CT.prototype),CT),xT=function(){function e(t,n){h(this,e),xp(this,"uid",void 0),xp(this,"_uintid",void 0),xp(this,"_trust_in_room_",!0),xp(this,"_trust_audio_enabled_state_",!0),xp(this,"_trust_video_enabled_state_",!0),xp(this,"_trust_audio_mute_state_",!0),xp(this,"_trust_video_mute_state_",!0),xp(this,"_audio_muted_",!1),xp(this,"_video_muted_",!1),xp(this,"_audio_enabled_",!0),xp(this,"_video_enabled_",!0),xp(this,"_audio_added_",!1),xp(this,"_video_added_",!1),xp(this,"_trust_video_stream_added_state_",!0),xp(this,"_trust_audio_stream_added_state_",!0),xp(this,"_audioTrack",void 0),xp(this,"_videoTrack",void 0),xp(this,"_audioSSRC",void 0),xp(this,"_videoSSRC",void 0),xp(this,"_audioOrtc",void 0),xp(this,"_videoOrtc",void 0),xp(this,"_cname",void 0),xp(this,"_rtxSsrcId",void 0),this.uid=t,this._uintid=n}return v(e,[{key:"hasVideo",get:function(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}},{key:"hasAudio",get:function(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}},{key:"audioTrack",get:function(){if(this.hasAudio)return this._audioTrack}},{key:"videoTrack",get:function(){if(this.hasVideo)return this._videoTrack}}]),e}(),PT=jd,LT=Pu,MT=Wu;Hn({target:"Promise",stat:!0},{try:function(e){var t=LT.f(this),n=MT(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var UT=PT,jT=Hn,VT=x,FT=w,BT=oE,WT=he,GT=at,HT=Jn,KT=_m,zT=pE,YT=qE,qT=Ie,ZT=Tt("isConcatSpreadable"),XT=9007199254740991,JT="Maximum allowed index exceeded",QT=VT.TypeError,$T=qT>=51||!FT((function(){var e=[];return e[ZT]=!1,e.concat()[0]!==e})),eR=YT("concat"),tR=function(e){if(!WT(e))return!1;var t=e[ZT];return void 0!==t?!!t:BT(e)};jT({target:"Array",proto:!0,forced:!$T||!eR},{concat:function(e){var t,n,r,i,o,a=GT(this),s=zT(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(tR(o=-1===t?a:arguments[t])){if(c+(i=HT(o))>XT)throw QT(JT);for(n=0;n<i;n++,c++)n in o&&KT(s,c,o[n])}else{if(c>=XT)throw QT(JT);KT(s,c++,o)}return s.length=c,s}});var nR={},rR=te,iR=fe,oR=$r.f,aR=Rm,sR="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];nR.f=function(e){return sR&&"Window"==rR(e)?function(e){try{return oR(e)}catch(e){return aR(sR)}}(e):oR(iR(e))};var cR={},uR=Tt;cR.f=uR;var lR=ve,dR=ut,fR=cR,pR=fn.f,hR=function(e){var t=lR.Symbol||(lR.Symbol={});dR(t,e)||pR(t,e,{value:fR.f(e)})},vR=Hn,mR=x,yR=_e,gR=j,ER=H,_R=A,bR=B,SR=Ne,wR=w,kR=ut,TR=oE,RR=V,CR=he,IR=N,OR=je,AR=gn,NR=at,DR=fe,xR=Mt,PR=Jo,LR=J,MR=$i,UR=xi,jR=$r,VR=nR,FR=Ei,BR=F,WR=fn,GR=Ai,HR=K,KR=Pc,zR=is,YR=Je.exports,qR=ui,ZR=ht,XR=Tt,JR=cR,QR=hR,$R=Ss,eC=Xa,tC=bE.forEach,nC=Pr("hidden"),rC="Symbol",iC=XR("toPrimitive"),oC=eC.set,aC=eC.getterFor(rC),sC=Object.prototype,cC=mR.Symbol,uC=cC&&cC.prototype,lC=mR.TypeError,dC=mR.QObject,fC=yR("JSON","stringify"),pC=BR.f,hC=WR.f,vC=VR.f,mC=HR.f,yC=_R([].push),gC=YR("symbols"),EC=YR("op-symbols"),_C=YR("string-to-symbol-registry"),bC=YR("symbol-to-string-registry"),SC=YR("wks"),wC=!dC||!dC.prototype||!dC.prototype.findChild,kC=bR&&wR((function(){return 7!=MR(hC({},"a",{get:function(){return hC(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=pC(sC,t);r&&delete sC[t],hC(e,t,n),r&&e!==sC&&hC(sC,t,r)}:hC,TC=function(e,t){var n=gC[e]=MR(uC);return oC(n,{type:rC,tag:e,description:t}),bR||(n.description=t),n},RC=function e(t,n,r){t===sC&&e(EC,n,r),AR(t);var i=xR(n);return AR(r),kR(gC,i)?(r.enumerable?(kR(t,nC)&&t[nC][i]&&(t[nC][i]=!1),r=MR(r,{enumerable:LR(0,!1)})):(kR(t,nC)||hC(t,nC,LR(1,{})),t[nC][i]=!0),kC(t,i,r)):hC(t,i,r)},CC=function(e,t){AR(e);var n=DR(t),r=UR(n).concat(NC(n));return tC(r,(function(t){bR&&!ER(IC,n,t)||RC(e,t,n[t])})),e},IC=function(e){var t=xR(e),n=ER(mC,this,t);return!(this===sC&&kR(gC,t)&&!kR(EC,t))&&(!(n||!kR(this,t)||!kR(gC,t)||kR(this,nC)&&this[nC][t])||n)},OC=function(e,t){var n=DR(e),r=xR(t);if(n!==sC||!kR(gC,r)||kR(EC,r)){var i=pC(n,r);return!i||!kR(gC,r)||kR(n,nC)&&n[nC][r]||(i.enumerable=!0),i}},AC=function(e){var t=vC(DR(e)),n=[];return tC(t,(function(e){kR(gC,e)||kR(qR,e)||yC(n,e)})),n},NC=function(e){var t=e===sC,n=vC(t?EC:DR(e)),r=[];return tC(n,(function(e){!kR(gC,e)||t&&!kR(sC,e)||yC(r,gC[e])})),r};if(SR||(zR(uC=(cC=function(){if(IR(uC,this))throw lC("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?PR(arguments[0]):void 0,t=ZR(e),n=function e(n){this===sC&&ER(e,EC,n),kR(this,nC)&&kR(this[nC],t)&&(this[nC][t]=!1),kC(this,t,LR(1,n))};return bR&&wC&&kC(sC,t,{configurable:!0,set:n}),TC(t,e)}).prototype,"toString",(function(){return aC(this).tag})),zR(cC,"withoutSetter",(function(e){return TC(ZR(e),e)})),HR.f=IC,WR.f=RC,GR.f=CC,BR.f=OC,jR.f=VR.f=AC,FR.f=NC,JR.f=function(e){return TC(XR(e),e)},bR&&hC(uC,"description",{configurable:!0,get:function(){return aC(this).description}})),vR({global:!0,wrap:!0,forced:!SR,sham:!SR},{Symbol:cC}),tC(UR(SC),(function(e){QR(e)})),vR({target:rC,stat:!0,forced:!SR},{for:function(e){var t=PR(e);if(kR(_C,t))return _C[t];var n=cC(t);return _C[t]=n,bC[n]=t,n},keyFor:function(e){if(!OR(e))throw lC(e+" is not a symbol");if(kR(bC,e))return bC[e]},useSetter:function(){wC=!0},useSimple:function(){wC=!1}}),vR({target:"Object",stat:!0,forced:!SR,sham:!bR},{create:function(e,t){return void 0===t?MR(e):CC(MR(e),t)},defineProperty:RC,defineProperties:CC,getOwnPropertyDescriptor:OC}),vR({target:"Object",stat:!0,forced:!SR},{getOwnPropertyNames:AC,getOwnPropertySymbols:NC}),vR({target:"Object",stat:!0,forced:wR((function(){FR.f(1)}))},{getOwnPropertySymbols:function(e){return FR.f(NR(e))}}),fC&&vR({target:"JSON",stat:!0,forced:!SR||wR((function(){var e=cC();return"[null]"!=fC([e])||"{}"!=fC({a:e})||"{}"!=fC(Object(e))}))},{stringify:function(e,t,n){var r=KR(arguments),i=t;if((CR(t)||void 0!==e)&&!OR(e))return TR(t)||(t=function(e,t){if(RR(i)&&(t=ER(i,this,e,t)),!OR(t))return t}),r[1]=t,gR(fC,null,r)}}),!uC[iC]){var DC=uC.valueOf;zR(uC,iC,(function(e){return ER(DC,this)}))}$R(cC,rC),qR[nC]=!0,hR("asyncIterator"),hR("hasInstance"),hR("isConcatSpreadable"),hR("iterator"),hR("match"),hR("matchAll"),hR("replace"),hR("search"),hR("species"),hR("split"),hR("toPrimitive"),hR("toStringTag"),hR("unscopables"),Ss(x.JSON,"JSON",!0);var xC=ve.Symbol;hR("asyncDispose"),hR("dispose"),hR("matcher"),hR("metadata"),hR("observable"),hR("patternMatch"),hR("replaceAll");var PC=xC,LC=cR.f("asyncIterator"),MC=LC;function UC(e){this.wrapped=e}function jC(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof UC;UT.resolve(s?a.wrapped:a).then((function(e){s?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new UT((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function VC(e){return function(){return new jC(e.apply(this,arguments))}}function FC(e){return new UC(e)}jC.prototype["function"==typeof PC&&MC||"@@asyncIterator"]=function(){return this},jC.prototype.next=function(e){return this._invoke("next",e)},jC.prototype.throw=function(e){return this._invoke("throw",e)},jC.prototype.return=function(e){return this._invoke("return",e)};var BC=cR.f("iterator");function WC(e,t){var n={},r=!1;function i(n,i){return r=!0,i=new UT((function(t){t(e[n](i))})),{done:!1,value:t(i)}}return n[void 0!==PC&&BC||"@@iterator"]=function(){return this},n.next=function(e){return r?(r=!1,e):i("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return i("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return r?(r=!1,e):i("return",e)}),n}var GC=LC,HC={exports:{}};function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KC(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YC(e,t,n,r,i,o,a){var s=[],c=[],u=[],l=[],d=!1,f=!1;if(HC.exports.parse(e).mediaDescriptions.forEach((function(e){a&&a!==e.attributes.direction||("video"!==e.media.mediaType||d||(c=e.attributes.payloads,l=e.attributes.extmaps,d=!0),"audio"!==e.media.mediaType||f||(s=e.attributes.payloads,u=e.attributes.extmaps,f=!0))})),!l||0===c.length)throw new Error("Cannot get video capabilities from SDP.");if(!u||0===s.length)throw new Error("Cannot get audio capabilities from SDP.");return c.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))})),s.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))})),t&&(s=s.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),c=c.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),n&&(c=c.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),r&&(s=s.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),i&&(null==i?void 0:i.length)>0&&(s=s.filter((function(e){var t;return i.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),o&&(null==o?void 0:o.length)>0&&(c=c.filter((function(e){var t;return o.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),{audioCodecs:s,videoCodecs:c,audioExtensions:u,videoExtensions:l}}function qC(e){var t,n,r,i=HC.exports.parse(e),o=s(i.mediaDescriptions);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!t){var c=a.attributes.iceUfrag,u=a.attributes.icePwd;if(!c||!u)throw new Error("Cannot get iceUfrag or icePwd from SDP.");t={iceUfrag:c,icePwd:u}}if(!n){var l=a.attributes.fingerprints;l.length>0&&(n={fingerprints:l})}}}catch(d){o.e(d)}finally{o.f()}if(!n&&i.attributes.fingerprints.length>0&&(n={fingerprints:i.attributes.fingerprints}),!n||!t)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:t,dtlsParameters:n}}function ZC(e,t){var n=[],r=e.attributes.ssrcGroups.filter((function(e){return"FID"===e.semantic})),i=e.attributes.ssrcGroups.find((function(e){return"SIM"===e.semantic})),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((function(e){var i,o=null===(i=r.find((function(t){return t.ssrcIds[0]===e})))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){var a=r[0].ssrcIds[0],s=r[0].ssrcIds[1];n.push({ssrcId:a,rtx:t?s:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function XC(e,t){var n,r=e.cname;t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],zv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),zv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=e.iceParameters.candidates.map((function(e){return{foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}}));var i,o={fingerprints:e.dtlsParameters.fingerprints.map((function(e){return{hashFunction:e.algorithm,fingerprint:e.fingerprint}}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};switch(e.dtlsParameters.role){case"server":i="passive";break;case"client":i="active";break;case"auto":i="actpass"}return{dtlsParameters:o,iceParameters:a,candidates:n,rtpCapabilities:sI(e.rtpCapabilities),setup:i,cname:r}}function JC(e,t,n){var r=[],i=[];return e.forEach((function(e){var o=e.ssrcId,a=e.rtx,s=tw(8,"track-"),c={ssrcId:o,attributes:zC({label:s,mslabel:n=n||tw(10,""),msid:"".concat(n," ").concat(s)},t&&{cname:t})};if(r.push(c),void 0!==a){var u={ssrcId:a,attributes:zC({label:s,mslabel:n,msid:"".concat(n," ").concat(s)},t&&{cname:t})};r.push(u),i.push({semantic:"FID",ssrcIds:[o,a]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((function(e){return e.ssrcId}))}),{ssrcs:r,ssrcGroups:i}}function QC(e,t){t instanceof RS&&e.attributes.payloads.forEach((function(e){var n,r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(r&&-1!==["opus","pcmu","pcma","g722"].indexOf(r)){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";var i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!fp()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}}))}function $C(e){var t=e.attributes.unrecognized.findIndex((function(e){return"x-google-flag"===e.attField&&"conference"===e.attValue}));-1!==t&&e.attributes.unrecognized.splice(t,1)}function eI(e,t){if(t instanceof NT&&t._encoderConfig&&-1===t._hints.indexOf(Rg.SCREEN_TRACK)){var n=t._encoderConfig;rE().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach((function(e){var t;["h264","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))})),rE().supportMinBitrate&&!t._hints.includes(Rg.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach((function(e){var t;["h264","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(sm("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))}))}}function tI(e){if("video"===e.media.mediaType){var t=rp();if(t.name===Jf.SAFARI||t.os===Xf.IOS){var n=e.attributes.extmaps.findIndex((function(e){return/video-orientation/g.test(e.extensionName)}));-1!==n&&e.attributes.extmaps.splice(n,1)}}}function nI(e,t,n){if(t){var r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){var o=r.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));o&&(e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}))||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))||e.rtcpFeedbacks.push({type:"transport-cc"})})))}else if(!1===t.twcc){var a=e.attributes.extmaps.findIndex((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));-1!==a&&e.attributes.extmaps.splice(a,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){var s=r.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));s&&(e.attributes.extmaps.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}))||e.attributes.extmaps.push({entry:s.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))||e.rtcpFeedbacks.push({type:"goog-remb"})})))}else if(!1===t.remb){var c=e.attributes.extmaps.findIndex((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));-1!==c&&e.attributes.extmaps.splice(c,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"goog-remb"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}}function rI(e,t,n){if(!fp()&&"video"===e.media.mediaType&&t instanceof NT&&("vp9"===n||"vp8"===n)&&("vp8"!==n||sm("SIMULCAST"))&&!(void 0===t._scalabiltyMode||t._scalabiltyMode.numSpatialLayers<=1)){for(var r="vp8"===n?2:t._scalabiltyMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((function(e){return"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId})),a={semantic:"SIM",ssrcIds:[i.ssrcId]},s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:pw(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:pw(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}}function iI(e,t,n,r,i){return oI.apply(this,arguments)}function oI(){return oI=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,f,p,h,v,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new RTCPeerConnection).addTransceiver("video",{direction:"sendonly"}),a.addTransceiver("audio",{direction:"sendonly"}),a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),e.next=4,a.createOffer();case 4:s=e.sent.sdp,u=YC(s,t,n,r,i,o,"sendonly"),l=YC(s,t,n,r,i,o,"recvonly"),aI(u,l,"videoExtensions",d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}),aI(u,l,"videoCodecs",d,f,p),aI(u,l,"audioExtensions",d,f,p),aI(u,l,"audioCodecs",d,f,p),sm("RAISE_H264_BASELINE_PRIORITY")&&(h=p.videoCodecs.findIndex((function(e){var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])})),-1!==h&&(v=p.videoCodecs.findIndex((function(e){var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())})),v<h&&(zv.debug("raising H264 baseline profile priority"),m=p.videoCodecs[h],p.videoCodecs.splice(h,1),p.videoCodecs.splice(v,0,m)),-1!==v&&(f.videoCodecs=f.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==v&&sm("FILTER_SEND_H264_BASELINE")&&(d.videoCodecs=d.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))));try{a.close()}catch(t){}return e.abrupt("return",{send:d,recv:f,sendrecv:p});case 13:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function aI(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){var a=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.entry===t.entry&&e.extensionName===t.extensionName)return a.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===a.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){var s=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===s.indexOf(t)&&i[n].push(e)}))}}function sI(e){var t,n,r=e.send,i=e.recv,o=e.sendrecv;if(!o){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}return r?((t={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(m(r.audioCodecs),m(o.audioCodecs)),t.videoCodecs=[].concat(m(r.videoCodecs),m(o.videoCodecs)),t.audioExtensions=[].concat(m(r.audioExtensions),m(o.audioExtensions)),t.videoExtensions=[].concat(m(r.videoExtensions),m(o.videoExtensions))):t=o,i?((n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(m(i.audioCodecs),m(o.audioCodecs)),n.videoCodecs=[].concat(m(i.videoCodecs),m(o.videoCodecs)),n.audioExtensions=[].concat(m(i.audioExtensions),m(o.audioExtensions)),n.videoExtensions=[].concat(m(i.videoExtensions),m(o.videoExtensions))):n=o,{send:t,recv:n}}function cI(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((function(e){var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((function(e){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}!function(e,t){e.exports=function(){var e={8:function(e,t,n){n.r(t),n.d(t,{Parser:function(){return A},Printer:function(){return L},parse:function(){return V},print:function(){return F}});var r,i="\n",o="".concat("\r").concat(i),c=" ";function u(e){return e>="0"&&e<="9"}function d(e){return e>="!"&&e<="~"}function m(e){return d(e)||e>="\x80"&&e<="\xff"}function g(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function E(e){return e>="1"&&e<="9"}function _(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function b(e){return"d"===e||"h"===e||"m"===e||"s"===e}function S(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function w(e){return _(e)||u(e)||"+"===e||"/"===e}function k(e){return u(e)||_(e)||"+"===e||"/"===e||"-"===e||"_"===e}function T(e){return _(e)||u(e)||"+"===e||"/"===e}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(r||(r={}));var O=function(){function e(){h(this,e)}return v(e,[{key:"consumeText",value:function(e,t){for(var n=t;n<e.length;){var r=e[n];if("\0"===r||"\r"===r||r===i)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}},{key:"consumeUnicastAddress",value:function(e,t,n){return this.consumeTill(e,t,c)}},{key:"consumeOneOrMore",value:function(e,t,n){for(var r=t;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}},{key:"consumeSpace",value:function(e,t){if(e[t]===c)return t+1;throw new Error("Invalid space at ".concat(t,"."))}},{key:"consumeIP4Address",value:function(e,t){for(var n=t,r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}},{key:"consumeDecimalUChar",value:function(e,t){for(var n=t,r=0;r<3&&u(e[n]);r++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");var i=parseInt(e.slice(t,n));if(i>=0&&i<=255)return n;throw new Error("Invalid decimal uchar")}},{key:"consumeIP6Address",value:function(e,t){var n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n)):n}},{key:"consumeHexpart",value:function(e,t){var n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(":"===e[n=this.consumeHexseq(e,n)]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}},{key:"consumeHexseq",value:function(e,t){for(var n=t;":"===e[n=this.consumeHex4(e,n)]&&":"!==e[n+1];)n+=1;return n}},{key:"consumeHex4",value:function(e,t){for(var n,r=0;r<4;r++)if(!((n=e[t+r])>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F")){if(0===r)throw new Error("Invalid hex 4");break}return t+r}},{key:"consumeFQDN",value:function(e,t){for(var n=t;u(e[n])||_(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}},{key:"consumeExtnAddr",value:function(e,t){return this.consumeOneOrMore(e,t,m)}},{key:"consumeMulticastAddress",value:function(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}},{key:"consumeIP6MulticastAddress",value:function(e,t){var n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}},{key:"consumeIP4MulticastAddress",value:function(e,t){var n=t+3,r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(var o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),"/"===e[n=this.consumeTTL(e,n)]&&(n=this.consumeInteger(e,n)),n}},{key:"consumeInteger",value:function(e,t){if(!E(e[t]))throw new Error("Invalid integer.");for(t+=1;u(e[t]);)t+=1;return t}},{key:"consumeTTL",value:function(e,t){if("0"===e[t])return t+1;if(!E(e[t]))throw new Error("Invalid TTL.");t+=1;for(var n=0;n<2&&u(e[t]);n++)t+=1;return t}},{key:"consumeToken",value:function(e,t){return this.consumeOneOrMore(e,t,g)}},{key:"consumeTime",value:function(e,t){var n=t;if("0"===e[n])return n+1;for(E(e[n])&&(n+=1);u(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}},{key:"consumeAddress",value:function(e,t){return this.consumeTill(e,t,c)}},{key:"consumeTypedTime",value:function(e,t){var n=t;return b(e[n=this.consumeOneOrMore(e,n,u)])?n+1:n}},{key:"consumeRepeatInterval",value:function(e,t){if(!E(e[t]))throw new Error("Invalid repeat interval");for(t+=1;u(e[t]);)t+=1;return b(e[t])&&(t+=1),t}},{key:"consumePort",value:function(e,t){return this.consumeOneOrMore(e,t,u)}},{key:"consume",value:function(e,t,n){for(var r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}},{key:"consumeTill",value:function(e,t,n){for(var r=t;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}]),e}(),A=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),I(l(e),"records",[]),I(l(e),"currentLine",0),e}return v(n,[{key:"parse",value:function(e){var t=this.probeEOL(e);this.records=e.split(t).filter((function(e){return!!e.trim()})).map(this.parseLine),this.currentLine=0;var n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),a=this.parseUri(),s=this.parseEmail(),c=this.parsePhone(),u=this.parseConnection(),l=this.parseBandWidth(),d=this.parseTimeFields(),f=this.parseKey(),p=this.parseSessionAttribute(),h=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:a,emails:s,phones:c,connection:u,bandwidths:l,timeFields:d,key:f,attributes:p,mediaDescriptions:h}}},{key:"getCurrentRecord",value:function(){var e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}},{key:"probeEOL",value:function(e){for(var t=0;t<e.length;t++)if(e[t]===i)return"\r"===e[t-1]?o:i;throw new Error("Invalid newline character.")}},{key:"parseLine",value:function(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");var n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}},{key:"parseSessionAttribute",value:function(){for(var e=new D;this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.ATTRIBUTE)break;var n={attField:this.extractOneOrMore(t,(function(e){return g(e)&&":"!==e})),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,S)),e.parse(n),this.currentLine++}return e.digest()}},{key:"parseMediaAttributes",value:function(e){for(var t=new x(e);this.currentLine<this.records.length;){var n=this.getCurrentRecord();if(n.type!==r.ATTRIBUTE)break;var i={attField:this.extractOneOrMore(n,(function(e){return g(e)&&":"!==e})),_cur:0};":"===n.value[n.cur]&&(n.cur+=1,i.attValue=this.extractOneOrMore(n,S)),t.parse(i),this.currentLine++}return t.digest()}},{key:"parseKey",value:function(){var e=this.getCurrentRecord();if(e.type===r.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}},{key:"parseZone",value:function(){var e=this.getCurrentRecord();if(e.type===r.ZONE_ADJUSTMENTS){for(var t=[];;)try{var n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var i=!1;"-"===e.value[e.cur]&&(i=!0,e.cur+=1);var o=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:o,back:i})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}},{key:"parseRepeat",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.REPEAT)break;var n=this.extract(t,this.consumeRepeatInterval),i=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:i}),this.currentLine++}return e}},{key:"parseTypedTime",value:function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}},{key:"parseTime",value:function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}},{key:"parseBandWidth",value:function(){for(var e=[];this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.BANDWIDTH)break;var n=this.extractOneOrMore(t,g);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;var i=this.extractOneOrMore(t,u);e.push({bwtype:n,bandwidth:i}),this.currentLine++}return e}},{key:"parseVersion",value:function(){var e=this.getCurrentRecord();if(e.type!==r.VERSION)throw new Error("first sdp record must be version");var t=e.value.slice(0,this.consumeOneOrMore(e.value,0,u));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}},{key:"parseOrigin",value:function(){var e=this.getCurrentRecord();if(e.type!==r.ORIGIN)throw new Error("second line of sdp must be origin");var t=this.extractOneOrMore(e,m);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);var i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);var o=this.extractOneOrMore(e,g);this.consumeSpaceForRecord(e);var a=this.extractOneOrMore(e,g);this.consumeSpaceForRecord(e);var s=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:i,nettype:o,addrtype:a,unicastAddress:s}}},{key:"parseSessionName",value:function(){var e=this.getCurrentRecord();if(e.type===r.SESSION_NAME){var t=this.extract(e,this.consumeText);return this.currentLine++,t}}},{key:"parseInformation",value:function(){var e=this.getCurrentRecord();if(e.type===r.INFORMATION){var t=this.extract(e,this.consumeText);return this.currentLine++,t}}},{key:"parseUri",value:function(){var e=this.getCurrentRecord();if(e.type===r.URI)return this.currentLine++,e.value}},{key:"parseEmail",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.EMAIL)break;e.push(t.value),this.currentLine++}return e}},{key:"parsePhone",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.PHONE)break;e.push(t.value),this.currentLine++}return e}},{key:"parseConnection",value:function(){var e=this.getCurrentRecord();if(e.type===r.CONNECTION){var t=this.extractOneOrMore(e,g);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,g);this.consumeSpaceForRecord(e);var i=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:i}}}},{key:"parseMedia",value:function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);var r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");var i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}},{key:"parseTimeFields",value:function(){for(var e=[];this.getCurrentRecord().type===r.TIME;){var t=this.parseTime(),n=this.parseRepeat(),i=this.parseZone();e.push({time:t,repeats:n,zones:i})}return e}},{key:"parseMediaDescription",value:function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.MEDIA;){var t=this.parseMedia(),n=this.parseInformation(),i=this.parseConnections(),o=this.parseBandWidth(),a=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:i,bandwidths:o,key:a,attributes:s})}return e}},{key:"parseConnections",value:function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.CONNECTION;)e.push(this.parseConnection());return e}},{key:"parseFmt",value:function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}},{key:"extract",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.value,e.cur].concat(r)),a=e.value.slice(e.cur,o);return e.cur=o,a}},{key:"extractOneOrMore",value:function(e,t){var n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}},{key:"consumeSpaceForRecord",value:function(e){if(e.value[e.cur]!==c)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}]),n}(O),N=function(e){f(n,e);var t=p(n);function n(){var e;h(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),I(l(e),"attributes",void 0),I(l(e),"digested",!1),e}return v(n,[{key:"extractOneOrMore",value:function(e,t,n){var r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),o=a(n||[],2),s=o[0],c=o[1];if("number"==typeof s&&i.length<s)throw new Error("error in length, should be more or equal than ".concat(s," characters."));if("number"==typeof c&&i.length>c)throw new Error("error in length, should be less or equal than ".concat(c," characters."));return e._cur=r,i}},{key:"consumeAttributeSpace",value:function(e){if(e.attValue[e._cur]!==c)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}},{key:"extract",value:function(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.attValue,e._cur].concat(r)),a=e.attValue.slice(e._cur,o);return e._cur=o,a}},{key:"atEnd",value:function(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}},{key:"peekChar",value:function(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}},{key:"peek",value:function(e,t){if(!e.attValue)throw new Error;for(var n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}},{key:"parseIceUfrag",value:function(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,w,[4,256])}},{key:"parseIcePwd",value:function(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,w,[22,256])}},{key:"parseIceOptions",value:function(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");for(var t=[];!this.atEnd(e);){t.push(this.extractOneOrMore(e,w));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}},{key:"parseFingerprint",value:function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}},{key:"parseExtmap",value:function(e){var t,n=this.extractOneOrMore(e,u);"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),t=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeTill,c),i=C(C({entry:parseInt(n,10)},t&&{direction:t}),{},{extensionName:r});this.peekChar(e)===c&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}},{key:"parseSetup",value:function(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");var t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}]),n}(O),D=function(e){f(r,e);var n=p(r);function r(){var e;h(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),I(l(e),"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]}),e}return v(r,[{key:"parse",value:function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}},{key:"digest",value:function(){return this.digested=!0,this.attributes}},{key:"parseGroup",value:function(e){for(var t=this.extract(e,this.consumeToken),n=[];!this.atEnd(e)&&this.peekChar(e)===c;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}},{key:"parseIceLite",value:function(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}},{key:"parseTlsId",value:function(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,k)}},{key:"parseIdentity",value:function(e){for(var t=this.extractOneOrMore(e,T),n=[];!this.atEnd(e)&&this.peekChar(e)===c;){this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");var i=this.extractOneOrMore(e,(function(e){return e!==c&&S(e)}));n.push({name:r,value:i})}this.attributes.identities.push({assertionValue:t,extensions:n})}},{key:"parseMsidSemantic",value:function(e){this.peekChar(e)===c&&this.consumeAttributeSpace(e);for(var t={semantic:this.extract(e,this.consumeToken),identifierList:[]};;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}var n=this.extract(e,this.consumeTill,c);t.identifierList.push(n)}this.attributes.msidSemantic=t}}]),r}(N),x=function(e){f(r,e);var n=p(r);function r(e){var t;return h(this,r),t=n.call(this),I(l(t),"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),t.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]},t}return v(r,[{key:"parse",value:function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}},{key:"parseCandidate",value:function(e){var t=this.extractOneOrMore(e,w,[1,32]);this.consumeAttributeSpace(e);var n=this.extractOneOrMore(e,u,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var i=this.extractOneOrMore(e,u,[1,10]);this.consumeAttributeSpace(e);var o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var a=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);var s={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:o,port:a,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),s.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),s.relPort=this.extract(e,this.consumePort));this.peekChar(e)===c;){this.consumeAttributeSpace(e);var l=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),s.extension[l]=this.extractOneOrMore(e,d)}this.attributes.candidates.push(s)}},{key:"parseRemoteCandidate",value:function(e){for(var t=[];;){var n=this.extractOneOrMore(e,u,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}},{key:"parseEndOfCandidates",value:function(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}},{key:"parseRtpmap",value:function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");var r={encodingName:n,clockRate:this.extractOneOrMore(e,u)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}},{key:"parsePtime",value:function(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}},{key:"parseMaxPtime",value:function(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}},{key:"parseDirection",value:function(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}},{key:"parseSSRC",value:function(e){var t=this.extractOneOrMore(e,u);this.consumeAttributeSpace(e);var n,r=this.extract(e,this.consumeTill,":");":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),n=this.extract(e,this.consumeTill));var i=this.attributes.ssrcs.find((function(e){return e.ssrcId===parseInt(t,10)}));i?i.attributes[r]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:y({},r,n)})}},{key:"parseFmtp",value:function(e){var t=this.extract(e,this.consumeTill,c);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((function(e){var t=e.split("="),n=a(t,2),i=n[0],o=n[1];i=i.trim();var s="string"==typeof o?o.trim():null;"string"==typeof i&&i.length>0&&(r[i]=s)}));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}},{key:"parseFmtParameters",value:function(e){var t={},n=this.extract(e,this.consumeTill,"=");e._cur++;var r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){var i=this.extract(e,this.consumeTill,"=");e._cur++;var o=this.extract(e,this.consumeTill,";");t[i]=o}return t}},{key:"parseRtcpFb",value:function(e){var t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,c),this.consumeAttributeSpace(e);var n,r=this.extract(e,this.consumeTill,c);if("trr-int"===r)n={type:r,interval:this.extract(e,this.consumeTill)};else{var i={type:r};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),i.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===c&&(i.additional=this.extract(e,this.consumeTill))),n=i}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{var o=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));o?o.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}},{key:"parseRTCPMux",value:function(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}},{key:"parseRTCPMuxOnly",value:function(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}},{key:"parseRTCPRsize",value:function(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}},{key:"parseRTCP",value:function(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");var t={port:this.extract(e,this.consumePort)};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,g),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,g),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}},{key:"parseMsid",value:function(e){var t={id:this.extractOneOrMore(e,g,[1,64])};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,g,[1,64])),this.attributes.msids.push(t)}},{key:"parseImageAttr",value:function(e){this.attributes.imageattr.push(e.attValue)}},{key:"parseRid",value:function(e){var t=this.extractOneOrMore(e,(function(e){return _(e)||u(e)||"_"===e||"-"===e}));this.consumeAttributeSpace(e);var n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===c){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");for(var r=[];;){var i=this.extract(e,this.consumeToken);r.push(i);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=r,this.peekChar(e)===c&&this.extract(e,this.consume,c)}for(;;){var o=this.extract(e,this.consumeToken);if("depend"===o){var a={type:o,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(a)}else{var s={type:o};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),s.val=this.extract(e,this.consumeTill,";")),n.params.push(s)}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}},{key:"parseSimulcast",value:function(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}},{key:"parseSctpPort",value:function(e){this.attributes.sctpPort=this.extractOneOrMore(e,u,[1,5])}},{key:"parseMaxMessageSize",value:function(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,u,[1,void 0])}},{key:"digest",value:function(){return this.digested=!0,this.attributes}},{key:"parseMid",value:function(e){this.attributes.mid=this.extract(e,this.consumeToken)}},{key:"parseSSRCGroup",value:function(e){for(var t=this.extract(e,this.consumeToken),n=[];;)try{this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeInteger);n.push(parseInt(r,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}]),r}(N);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(){h(this,e),P(this,"eol",o)}return v(e,[{key:"print",value:function(e,t){var n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions)}},{key:"printVersion",value:function(e){return"v=".concat(e).concat(this.eol)}},{key:"printOrigin",value:function(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}},{key:"printSessionName",value:function(e){return e?"s=".concat(e).concat(this.eol):""}},{key:"printInformation",value:function(e){return e?"i=".concat(e).concat(this.eol):""}},{key:"printUri",value:function(e){return e?"u=".concat(e).concat(this.eol):""}},{key:"printEmail",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="e=".concat(i).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printPhone",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="e=".concat(i).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printConnection",value:function(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}},{key:"printBandwidth",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="b=".concat(i.bwtype,":").concat(i.bandwidth).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printTimeFields",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="t=".concat(i.time.startTime," ").concat(i.time.startTime).concat(this.eol);var o,a=s(i.repeats);try{for(a.s();!(o=a.n()).done;){var c=o.value;n+="r=".concat(c.repeatInterval," ").concat(c.typedTimes.join(" ")).concat(this.eol)}}catch(u){a.e(u)}finally{a.f()}i.zoneAdjustments&&(n+="z=",n+="z=".concat(i.zoneAdjustments.map((function(e){return"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)})).join(" ")).concat(this.eol),n+=this.eol)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"printKey",value:function(e){return e?"k=".concat(e).concat(this.eol):""}},{key:"printAttributes",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="a=".concat(i.attField).concat(i.attValue?":".concat(i.attValue):"").concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printMediaDescription",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.printMedia(i.media),n+=this.printInformation(i.information),n+=this.printConnections(i.connections),n+=this.printBandwidth(i.bandwidths),n+=this.printKey(i.key),n+=this.printMediaAttributes(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printConnections",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.printConnection(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printMedia",value:function(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}},{key:"printSessionAttributes",value:function(e){return new U(this.eol).print(e)}},{key:"printMediaAttributes",value:function(e){return new j(this.eol).print(e)}}]),e}(),M=function(){function e(t){h(this,e),P(this,"eol",void 0),this.eol=t}return v(e,[{key:"printIceUfrag",value:function(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}},{key:"printIcePwd",value:function(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}},{key:"printIceOptions",value:function(e){return void 0===e?"":"a=ice-options:".concat(e.join(c)).concat(this.eol)}},{key:"printFingerprints",value:function(e){return e.length>0?e.map((function(e){return"a=fingerprint:".concat(e.hashFunction).concat(c).concat(e.fingerprint)})).join(this.eol)+this.eol:""}},{key:"printExtmap",value:function(e){var t=this;return e.map((function(e){return"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(c).concat(e.extensionName).concat(e.extensionAttributes?"".concat(c).concat(e.extensionAttributes):"").concat(t.eol)})).join("")}},{key:"printSetup",value:function(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}},{key:"printUnrecognized",value:function(e){var t=this;return e.map((function(e){return"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(t.eol)})).join("")}}]),e}(),U=function(e){f(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"print",value:function(e){var t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized)}},{key:"printGroups",value:function(e){var t=this,n="";return e.length>0&&(n+=e.map((function(e){return"a=group:".concat(e.semantic).concat(e.identificationTag.map((function(e){return"".concat(c).concat(e)})).join("")).concat(t.eol)})).join("")),n}},{key:"printIceLite",value:function(e){return void 0===e?"":"a=ice-lite"+this.eol}},{key:"printTlsId",value:function(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}},{key:"printIdentity",value:function(e){return 0===e.length?"":e.map((function(e){return"a=identity:".concat(e.assertionValue).concat(e.extensions.map((function(e){return"".concat(c).concat(e.name).concat(e.value?"=".concat(e.value):"")})))})).join(this.eol)+this.eol}},{key:"printMsidSemantic",value:function(e){if(!e)return"";var t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(c,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((function(e){return"".concat(c).concat(e)}))),t+this.eol}}]),n}(M),j=function(e){f(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"print",value:function(e){var t=e.attributes,n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized)}},{key:"printCandidates",value:function(e){var t=this;return e.map((function(e){return"a=candidate:".concat(e.foundation).concat(c).concat(e.componentId).concat(c).concat(e.transport).concat(c).concat(e.priority).concat(c).concat(e.connectionAddress).concat(c).concat(e.port).concat(c,"typ").concat(c).concat(e.type).concat(e.relAddr?"".concat(c,"raddr").concat(c).concat(e.relAddr):"").concat(e.relPort?"".concat(c,"rport").concat(c).concat(e.relPort):"").concat(Object.keys(e.extension).map((function(t){return"".concat(c).concat(t).concat(c).concat(e.extension[t])})).join("")).concat(t.eol)})).join("")}},{key:"printRemoteCandidatesList",value:function(e){var t=this;return e.map((function(e){return"a=remote-candidates:".concat(e.join(c)).concat(t.eol)})).join("")}},{key:"printEndOfCandidates",value:function(e){return void 0===e?"":"a=end-of-candidates"+this.eol}},{key:"printRTPRelated",value:function(e){var t=this;if(!e.payloads)return"";var n=e.payloads,r="";r+=e.rtcpFeedbackWildcards.map((function(e){return t.printRTCPFeedback("*",e)})).join("");var i,o=s(n);try{var a=function(){var e=i.value;r+=t.printRtpMap(e.payloadType,e.rtpMap),r+=t.printFmtp(e.payloadType,e.fmtp),r+=e.rtcpFeedbacks.map((function(n){return t.printRTCPFeedback(e.payloadType,n)})).join("")};for(o.s();!(i=o.n()).done;)a()}catch(c){o.e(c)}finally{o.f()}return r}},{key:"printFmtp",value:function(e,t){if(!t)return"";var n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(c).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(c).concat(Object.keys(t.parameters).map((function(e){return"".concat(e,"=").concat(t.parameters[e])})).join(";")).concat(this.eol)}},{key:"printRtpMap",value:function(e,t){return t?"a=rtpmap:".concat(e).concat(c).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}},{key:"printRTCPFeedback",value:function(e,t){var n="a=rtcp-fb:".concat(e).concat(c),r=t;return"trr-int"===r.type?n+="ttr-int".concat(c).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(c).concat(r.parameter),r.additional&&(n+="".concat(c).concat(r.additional)))),n+this.eol}},{key:"printPtime",value:function(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}},{key:"printMaxPtime",value:function(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}},{key:"printDirection",value:function(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}},{key:"printSSRC",value:function(e){var t=this;return e.map((function(e){return Object.keys(e.attributes).map((function(n){return"a=ssrc:".concat(e.ssrcId.toString(10)).concat(c).concat(n).concat(e.attributes[n]?":".concat(e.attributes[n]):"").concat(t.eol)})).join("")})).join("")}},{key:"printRTCPMux",value:function(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}},{key:"printRTCPMuxOnly",value:function(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}},{key:"printRTCPRsize",value:function(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}},{key:"printRTCP",value:function(e){if(void 0===e)return"";var t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(c).concat(e.netType)),e.addressType&&(t+="".concat(c).concat(e.addressType)),e.address&&(t+="".concat(c).concat(e.address)),t+this.eol}},{key:"printMSId",value:function(e){var t=this;return e.map((function(e){return"a=msid:".concat(e.id).concat(e.appdata?"".concat(c).concat(e.appdata):"").concat(t.eol)})).join("")}},{key:"printImageattr",value:function(e){var t=this;return e.map((function(e){return"a=imageattr:".concat(e).concat(t.eol)})).join("")}},{key:"printRid",value:function(e){var t=this;return e.map((function(e){var n="a=rid:".concat(e.id).concat(c).concat(e.direction);return e.payloads&&(n+="".concat(c,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(n+="".concat(c).concat(e.params.map((function(e){return"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)})).join(";"))),n+t.eol})).join("")}},{key:"printSimulcast",value:function(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}},{key:"printSCTPPort",value:function(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}},{key:"printMaxMessageSize",value:function(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}},{key:"printMid",value:function(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}},{key:"printSSRCGroups",value:function(e){var t=this;return e.map((function(e){return"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((function(e){return"".concat(c).concat(e.toString(10))})).join("")).concat(t.eol)})).join("")}}]),n}(M);function V(e){return(new A).parse(e)}function F(e,t){return(new L).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)}()}(HC);var uI=function(){function e(t){h(this,e),xp(this,"sessionDesc",void 0),xp(this,"localCapabilities",void 0),xp(this,"rtpCapabilities",void 0),xp(this,"candidates",void 0),xp(this,"iceParameters",void 0),xp(this,"dtlsParameters",void 0),xp(this,"setup",void 0),xp(this,"currentMidIndex",void 0),xp(this,"cname",void 0);var n=t=pw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,s=n.remoteSetup,c=n.localCapabilities,u=n.sdkCodec,l=n.cname,d=HC.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=a,this.candidates=o,this.iceParameters=r,this.dtlsParameters=i,this.setup=s,this.localCapabilities=c,this.cname=l;for(var f=0;f<d.mediaDescriptions.length;f++){var p=d.mediaDescriptions[f];if(p.attributes.iceUfrag=r.iceUfrag,p.attributes.icePwd=r.icePwd,p.attributes.fingerprints=i.fingerprints,p.attributes.candidates=o,p.attributes.setup=s,"video"===p.media.mediaType){p.media.fmts=a.videoCodecs.map((function(e){return e.payloadType.toString(10)}));var v=a.videoCodecs.filter((function(e){var t;return null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase().includes(u)}));if(0===v.length)throw new Error("Codec ".concat(u," not supported by remote SDP."));p.attributes.payloads=v,p.attributes.extmaps=a.videoExtensions}"audio"===p.media.mediaType&&(p.media.fmts=a.audioCodecs.map((function(e){return e.payloadType.toString(10)})),p.attributes.payloads=a.audioCodecs,p.attributes.extmaps=a.audioExtensions),d.mediaDescriptions[f]=this.mungMediaDesc(p)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}return v(e,[{key:"toString",value:function(){return HC.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n){var r=JC(t,this.cname),i=r.ssrcs,o=r.ssrcGroups,a=this.sessionDesc.mediaDescriptions.find((function(t){return e===Fg.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType})),s=i[0].attributes.label,c=i[0].attributes.mslabel;return a.attributes.ssrcs=a.attributes.ssrcs.concat(i),a.attributes.ssrcGroups=a.attributes.ssrcGroups.concat(o),{id:s,mslabel:c}}},{key:"batchSend",value:function(e){var t=this;return e.map((function(e){var n=e.kind,r=e.ssrcMsg;return t.send(n,r,void 0)}))}},{key:"stopSending",value:function(e){this.sessionDesc.mediaDescriptions.forEach((function(t){var n=[],r=[],i=[];t.attributes.ssrcs.forEach((function(t){e.includes(t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((function(e){i.map((function(e){return e.ssrcId})).includes(e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"receive",value:function(e,t,n){var r=this;e.forEach((function(e,t){var n=e._mediaStreamTrack,i=r.sessionDesc.mediaDescriptions.findIndex((function(e){return e.attributes.mid===n.kind})),o=r.mungRecvMediaDsec(r.sessionDesc.mediaDescriptions[i],e);r.sessionDesc.mediaDescriptions[i]=o}))}},{key:"stopReceiving",value:function(e){}},{key:"restartICE",value:function(e){e=pw(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"mungRecvMediaDsec",value:function(e,t){var n=pw(e);return QC(n,t),eI(n,t),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"updateTrackLabel",value:function(e,t,n){var r=this.sessionDesc.mediaDescriptions.find((function(t){return e===Fg.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid}));if(r){var i,o=r.attributes.ssrcs.find((function(e){return e.attributes.label===t}));o&&(o.attributes.label=n,null===(i=o.attributes.msid)||void 0===i||i.replace(t,n))}}},{key:"mungMediaDesc",value:function(e){var t=pw(e);return $C(t),function(e){var t=e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}},{key:"getSSRC",value:function(e){var t,n=s(this.sessionDesc.mediaDescriptions);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=s(i.attributes.ssrcs);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.attributes.label===e)return[a]}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}}}]),e}();function lI(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!dI(e))return e;var t={};for(var n in e)dI(e[n])||Array.isArray(e[n])?t[n]=lI(e[n]):t[n]=e[n];return t}function dI(e){return!("object"!=typeof e||Array.isArray(e)||!e)}function fI(){var e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}function pI(e){return!!window.RTCStatsReport&&e.getStats()instanceof Vd}var hI=function(){function e(t){h(this,e),xp(this,"input",[]),xp(this,"size",void 0),this.size=t}return v(e,[{key:"add",value:function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}},{key:"diffMean",value:function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}]),e}(),vI={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},mI={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:vI,remoteCandidate:vI}},yI={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},gI={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},EI={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},_I={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0},bI=function(){function e(t,n){var r=this;h(this,e),xp(this,"onFirstVideoReceived",void 0),xp(this,"onFirstVideoDecoded",void 0),xp(this,"onFirstAudioReceived",void 0),xp(this,"onFirstVideoDecodedTimeout",void 0),xp(this,"onFirstAudioDecoded",void 0),xp(this,"onSelectedLocalCandidateChanged",void 0),xp(this,"onSelectedRemoteCandidateChanged",void 0),xp(this,"videoIsReady",!1),xp(this,"videoIsReady2",{}),xp(this,"pc",void 0),xp(this,"options",void 0),xp(this,"intervalTimer",void 0),xp(this,"stats",lI(mI)),xp(this,"isFirstVideoReceived",{}),xp(this,"isFirstVideoDecoded",{}),xp(this,"isFirstAudioReceived",{}),xp(this,"isFirstAudioDecoded",{}),xp(this,"isFirstVideoDecodedTimeout",{}),xp(this,"lossRateWindowStats",[]),this.pc=t,this.options=n,this.intervalTimer=window.setInterval(u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.updateStats();case 1:case"end":return e.stop()}}),e)}))),this.options.updateInterval)}return v(e,[{key:"getStats",value:function(){return this.stats}},{key:"setVideoIsReady",value:function(e){this.videoIsReady=e}},{key:"setVideoIsReady2",value:function(e,t){this.videoIsReady2[e]=t}},{key:"getVideoIsReady",value:function(e){return this.videoIsReady2[e]||!1}},{key:"setIsFirstAudioDecoded",value:function(e){}},{key:"destroy",value:function(){window.clearInterval(this.intervalTimer),this.pc=void 0}},{key:"calcLossRate",value:function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,r=0,i=0,o=0,a=0,s=function(){var s=u[c];e[s].forEach((function(e,c){if(t.lossRateWindowStats[n-1][s][c]&&t.lossRateWindowStats[0][s][c]){var u=t.lossRateWindowStats[n-1][s][c].packets-t.lossRateWindowStats[0][s][c].packets,l=t.lossRateWindowStats[n-1][s][c].packetsLost-t.lossRateWindowStats[0][s][c].packetsLost;"videoSend"===s||"audioSend"===s?(r+=u,o+=l):(i+=u,a+=l),Number.isNaN(u)||Number.isNaN(u)?e.packetLostRate=0:e.packetLostRate=u<=0||l<=0?0:l/(u+l)}}))},c=0,u=["videoSend","audioSend","videoRecv","audioRecv"];c<u.length;c++)s();e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}}]),e}();function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SI(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kI=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.apply(this,arguments),xp(l(e),"_stats",mI),xp(l(e),"lastDecodeVideoReceiverStats",new Map),e}return v(n,[{key:"updateStats",value:function(){var e=u(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStats();case 2:t=e.sent,n=this.statsResponsesToObjects(t),this._stats=lI(mI),r=n.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(r),i=n.find((function(e){return"VideoBwe"===e.type})),i&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"processBandwidthStats",value:function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}},{key:"processSSRCStats",value:function(e){var t=this;e.forEach((function(e){var n=e.id.includes("send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":var r=lI(gI);r.codec=e.googCodecName,r.adaptionChangeReason="none",e.googCpuLimitedResolution&&(r.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(r.adaptionChangeReason="bandwidth"),r.avgEncodeMs=Number(e.googAvgEncodeMs),r.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.firsCount=Number(e.googFirReceived),r.nacksCount=Number(e.googNacksReceived),r.plisCount=Number(e.googPlisReceived),r.frameCount=Number(e.framesEncoded),r.bytes=Number(e.bytesSent),r.packets=Number(e.packetsSent),r.packetsLost=Number(e.packetsLost),r.ssrc=Number(e.ssrc),r.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(r),t._stats.rtt=r.rttMs;break;case"video_recv":var i=lI(yI),o=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(i.codec=e.googCodecName,i.targetDelayMs=Number(e.googTargetDelayMs),i.renderDelayMs=Number(e.googRenderDelayMs),i.currentDelayMs=Number(e.googCurrentDelayMs),i.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),i.decodeMs=Number(e.googDecodeMs),i.maxDecodeMs=Number(e.googMaxDecodeMs),i.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},i.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},i.decodeFrameRate=Number(e.googFrameRateDecoded),i.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},i.jitterBufferMs=Number(e.googJitterBufferMs),i.firsCount=Number(e.googFirsSent),i.nacksCount=Number(e.googNacksSent),i.plisCount=Number(e.googPlisSent),i.framesDecodeCount=Number(e.framesDecoded),i.bytes=Number(e.bytesReceived),i.packets=Number(e.packetsReceived),i.packetsLost=Number(e.packetsLost),i.ssrc=Number(e.ssrc),i.packets>0&&!t.isFirstVideoReceived[i.ssrc]&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(i.ssrc),t.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!t.isFirstVideoDecoded[i.ssrc]&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),t.isFirstVideoDecoded[i.ssrc]=!0),o){var a=o.stats,s=Date.now()-o.lts;i.framesDecodeFreezeTime=a.framesDecodeFreezeTime,i.framesDecodeInterval=a.framesDecodeInterval,i.framesDecodeCount>a.framesDecodeCount&&t.isFirstVideoDecoded[i.ssrc]?(o.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=t.options.freezeRateLimit&&(t.getVideoIsReady(parseInt(e.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:t.setVideoIsReady2(parseInt(e.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:wI({},i),lts:Date.now()}),t._stats.videoRecv.push(i);break;case"audio_recv":var c=lI(_I);c.codec=e.googCodecName,c.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,c.decodingCNG=Number(e.googDecodingCNG),c.decodingCTN=Number(e.googDecodingCTN),c.decodingCTSG=Number(e.googDecodingCTSG),c.decodingNormal=Number(e.googDecodingNormal),c.decodingPLC=Number(e.googDecodingPLC),c.decodingPLCCNG=Number(e.googDecodingPLCCNG),c.expandRate=Number(e.googExpandRate),c.accelerateRate=Number(e.googAccelerateRate),c.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),c.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),c.speechExpandRate=Number(e.googSpeechExpandRate),c.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),c.jitterBufferMs=Number(e.googJitterBufferMs),c.jitterMs=Number(e.googJitterReceived),c.bytes=Number(e.bytesReceived),c.packets=Number(e.packetsReceived),c.packetsLost=Number(e.packetsLost),c.ssrc=Number(e.ssrc),c.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),c.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),c.receivedFrames>0&&!t.isFirstAudioReceived[c.ssrc]&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(c.ssrc),t.isFirstAudioReceived[c.ssrc]=!0),c.decodingNormal>0&&!t.isFirstAudioDecoded[c.ssrc]&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(c.ssrc),t.isFirstAudioDecoded[c.ssrc]=!0),t._stats.audioRecv.push(c);break;case"audio_send":var u=lI(EI);u.codec=e.googCodecName,u.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,u.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),u.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),u.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),u.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),u.bytes=Number(e.bytesSent),u.packets=Number(e.packetsSent),u.packetsLost=Number(e.packetsLost),u.ssrc=Number(e.ssrc),u.rttMs=Number(e.googRtt||0),t._stats.rtt=u.rttMs,t._stats.audioSend.push(u)}}))}},{key:"_getStats",value:function(){var e=this;return new Vd((function(t,n){e.pc.getStats(t,n)}))}},{key:"statsResponsesToObjects",value:function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t}}]),n}(bI);function TI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TI(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CI,II=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.apply(this,arguments),xp(l(e),"_stats",mI),xp(l(e),"report",void 0),xp(l(e),"lastDecodeVideoReceiverStats",new Map),xp(l(e),"lastVideoFramesRecv",new Map),xp(l(e),"lastVideoFramesSent",new Map),xp(l(e),"lastVideoFramesDecode",new Map),xp(l(e),"lastVideoJBDelay",new Map),xp(l(e),"lastAudioJBDelay",new Map),xp(l(e),"mediaBytesSent",new Map),xp(l(e),"mediaBytesRetransmit",new Map),xp(l(e),"mediaBytesTargetEncode",new Map),xp(l(e),"lastEncoderMs",new Map),e}return v(n,[{key:"updateStats",value:function(){var e=u(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.getStats();case 2:this.report=e.sent,this._stats=lI(mI),this.report.forEach((function(e){switch(e.type){case ep.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case ep.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case ep.TRANSPORT:var n=t.report.get(e.selectedCandidatePairId);n&&t.processCandidatePairStats(n);break;case ep.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"processCandidatePairStats",value:function(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){var t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){var n=this.report.get(e.remoteCandidateId);n&&this.processCandidateStats(n)}}},{key:"processCandidateStats",value:function(e){var t;e.type===ep.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===ep.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===ep.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(RI({},t),RI({},this.stats.selectedCandidatePair.localCandidate)),e.type===ep.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(RI({},t),RI({},this.stats.selectedCandidatePair.remoteCandidate)))}},{key:"processAudioInboundStats",value:function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=lI(_I),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}},{key:"processVideoInboundStats",value:function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=lI(yI),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){var o=t.decodedFrame?t.decodedFrame.width:0,a=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,a),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){var s=n.stats,c=i-n.lts;t.framesDecodeFreezeTime=s.framesDecodeFreezeTime,t.framesDecodeInterval=s.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&c>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>s.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=c,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<s.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:RI({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}},{key:"processVideoOutboundStats",value:function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=lI(gI),this._stats.videoSend.push(t));var n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{var r=new hI(10);r.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,r)}if(void 0!==e.retransmittedBytesSent){var i=this.mediaBytesRetransmit.get(e.ssrc);if(i)i.add(e.retransmittedBytesSent);else{var o=new hI(10);o.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,o)}}if(e.totalEncodedBytesTarget){var a=this.mediaBytesTargetEncode.get(e.ssrc);if(a)a.add(e.totalEncodedBytesTarget);else{var s=new hI(10);s.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,s)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){var c=this.lastEncoderMs.get(e.ssrc);if(!c||c.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var u=e.framesEncoded-c.lastFrameCount,l=e.totalEncodeTime-c.lastEncoderTime;t.avgEncodeMs=1e3*l/u}}if(e.framesEncoded&&e.qpSum){var d=this.lastEncoderMs.get(e.ssrc);!d||d.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-d.lastQpSum)/(e.framesEncoded-d.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var f=this.findRemoteStatsId(e.ssrc,ep.REMOTE_INBOUND);f&&this.processRemoteInboundStats(f,t)}}},{key:"processAudioOutboundStats",value:function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=lI(EI),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,ep.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}},{key:"findRemoteStatsId",value:function(e,t){var n,r=Array.from(vS(n=this.report).call(n)).find((function(n){return n.type===t&&n.ssrc===e}));return r?r.id:null}},{key:"processVideoMediaSource",value:function(e,t){var n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}},{key:"processAudioMediaSource",value:function(e,t){var n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}},{key:"processVideoTrackSenderStats",value:function(e,t,n){var r,i,o,a=t?this.report.get(t):void 0,s=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent,c=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight;if("number"==typeof s){0!==s||"number"==typeof c&&"number"==typeof u||(c=0,u=0);var l=0,d=Date.now(),f=this.lastVideoFramesSent.get(n.ssrc);f&&d-f.lts>=800?(l=Math.round((s-f.count)/((d-f.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:s,lts:d,rate:l})):f?l=f.rate:this.lastVideoFramesSent.set(n.ssrc,{count:s,lts:d,rate:0}),n.sentFrame={width:c,height:u,frameRate:Math.max(0,l)}}}},{key:"processVideoTrackReceiverStats",value:function(e,t,n){var r,i,o,a,s,c=t?this.report.get(t):void 0,u=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,l=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,f=null!==(a=null==c?void 0:c.jitterBufferDelay)&&void 0!==a?a:e.jitterBufferDelay,p=null!==(s=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount;if("number"==typeof u){var h=this.lastVideoFramesRecv.get(n.ssrc),v=Date.now();n.framesReceivedCount=u;var m=0;h&&v-h.lts>=800?(m=Math.round((u-h.count)/((v-h.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:v,rate:m})):h?m=h.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:v,rate:0}),n.receivedFrame={width:l||0,height:d||0,frameRate:m||0},n.decodedFrame={width:l||0,height:d||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:l||0,height:d||0,frameRate:n.decodeFrameRate||0}}if(f&&p){var y=this.lastVideoJBDelay.get(n.ssrc);this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:p}),y||(y={jitterBufferDelay:0,jitterBufferEmittedCount:0});var g=1e3*(f-y.jitterBufferDelay)/(p-y.jitterBufferEmittedCount);n.jitterBufferMs=g,n.currentDelayMs=Math.round(g)}}},{key:"processAudioTrackSenderStats",value:function(e,t,n){var r,i,o,a,s=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==s?void 0:s.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,u=null!==(o=null!==(a=null==s?void 0:s.echoReturnLossEnhancement)&&void 0!==a?a:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=u}},{key:"processAudioTrackReceiverStats",value:function(e,t,n){var r,i,o,a,s,c,u,l=t?this.report.get(t):void 0,d=null!==(r=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,f=null!==(i=null==l?void 0:l.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,p=null!==(o=null==l?void 0:l.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,h=null!==(a=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount,v=null!==(s=null==l?void 0:l.audioLevel)&&void 0!==s?s:null==e?void 0:e.audioLevel,m=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,y=null!==(u=null==l?void 0:l.concealedSamples)&&void 0!==u?u:e.concealedSamples;if(d&&f&&(n.accelerateRate=d/f),p&&h){var g=this.lastAudioJBDelay.get(n.ssrc);this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:h}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0});var E=1e3*(p-g.jitterBufferDelay)/(h-g.jitterBufferEmittedCount);n.jitterBufferMs=Math.round(E)}n.outputLevel=v;var _=1920;m&&f&&(_=f/m/50,n.receivedFrames=Math.round(f/_)),y&&(n.droppedFrames=Math.round(y/_))}},{key:"processRemoteInboundStats",value:function(e,t){var n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime))}},{key:"getCodecFromCodecStats",value:function(e){var t=this.report.get(e);if(!t)return"";var n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}},{key:"updateSendBitrate",value:function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()}));var r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}]),n}(bI),OI=function(e){f(n,e);var t=p(n);function n(){return h(this,n),t.apply(this,arguments)}return v(n,[{key:"updateStats",value:function(){return Vd.resolve()}}]),n}(bI);function AI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,o=fI();return o?o<76?new kI(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new II(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):pI(e)?new II(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new OI(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function NI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NI(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xI=(v_((CI=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this,e,r),xp(l(i),"store",void 0),xp(l(i),"peerConnection",void 0),xp(l(i),"remoteSDP",void 0),xp(l(i),"initialOffer",void 0),xp(l(i),"statsFilter",void 0),xp(l(i),"useRTX",!1),xp(l(i),"localCapabilities",void 0),xp(l(i),"localCandidateCount",0),xp(l(i),"allCandidatesReceived",!1),xp(l(i),"establishPromise",void 0),xp(l(i),"mutex",new G_("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.statsFilter=AI(i.peerConnection,void 0,void 0,fp()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}return v(n,[{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 3:if((t=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return n=qC(t.sdp),r=YC(t.sdp,!this.useRTX,sm("FILTER_VIDEO_FEC"),sm("FILTER_AUDIO_FEC"),["opus"]),e.abrupt("return",(this.localCapabilities=r,this.initialOffer=t,DI(DI({},n),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:r},offerSDP:t.sdp})));case 10:throw e.prev=10,e.t0=e.catch(0),new Uv(Dv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new uI({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i.send,remoteSetup:o,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:a}),s=this.remoteSDP.toString(),e.next=7,this.peerConnection.setLocalDescription(this.initialOffer);case 7:return e.next=9,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t){var n=this;return VC(c().mark((function r(){var i,o,a,s,u,l,d,f;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,FC(n.mutex.lock());case 2:if(i=r.sent,r.prev=3,n.remoteSDP){r.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:return o=e.map((function(e){return n.peerConnection.addTrack(e._mediaStreamTrack)})),r.next=9,FC(n.peerConnection.createOffer());case 9:return a=r.sent,s=HC.exports.parse(a.sdp),u=e.map((function(e){var t=e._mediaStreamTrack,r=s.mediaDescriptions.find((function(e){return e.attributes.mid===t.kind}));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){var r=e.attributes.ssrcs.filter((function(e){return e.attributes.label===t})),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){var o=i.find((function(e){return-1!==e.ssrcIds.indexOf(r[0].ssrcId)}));return o?[{ssrcId:o.ssrcIds[0],rtx:n?o.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)})),r.prev=12,r.next=15,u;case 15:l=r.sent,r.next=21;break;case 18:throw r.prev=18,r.t0=r.catch(12),o.forEach((function(e){dp()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),r.t0;case 21:return d=n.mungSendOfferSDP(a.sdp,e),n.remoteSDP.receive(e,t,l),f=n.remoteSDP.toString(),r.next=26,FC(n.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 26:return r.next=28,FC(n.applySendEncodings(o,e));case 28:return r.next=30,FC(n.peerConnection.setRemoteDescription({type:"answer",sdp:f}));case 30:return r.abrupt("return",e.map((function(e,t){var n=e._mediaStreamTrack.id;return{localSSRC:u[t],id:n}})));case 33:throw r.prev=33,r.t1=r.catch(3),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(r.t1.toString()));case 36:return r.prev=36,i(),r.finish(36);case 39:case"end":return r.stop()}}),r,null,[[3,33,36,39],[12,18]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 6:return n.map((function(e){dp()&&e.replaceTrack(null),o.peerConnection.removeTrack(e)})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return this.remoteSDP.stopReceiving(t),i=this.remoteSDP.toString(),e.next=16,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t0.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:return o=this.remoteSDP.send(t,n,i),a=o.id,s=o.mslabel,u=new Vd((function(e,n){var r=setTimeout((function(){n(new Error("Cannot receive track, id: ".concat(a)))}),1e4),i=function n(i){var o=rp();if(("Safari"===o.name&&11===Number(o.version)||pp())&&i.track.id!==a&&i.streams[0].id===s){var c,u=i.streams[0].getTracks()[0];return null===(c=f.remoteSDP)||void 0===c||c.updateTrackLabel(t,a,i.track.id),f.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(u)}if(i.track.id===a)return f.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(i.track)};f.peerConnection.addEventListener("track",i)})),l=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:l});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return d=e.sent,e.next=11,this.peerConnection.setLocalDescription(d);case 11:return e.next=13,u;case 13:return e.t0=e.sent,e.t1=a,e.abrupt("return",{track:e.t0,id:e.t1});case 18:throw e.prev=18,e.t2=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t2.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("sender' length doesn't match mids' length.");case 6:n.map((function(e){if(dp()&&e.track)e.track.enabled=!1;else{var t=e.getParameters();t.encodings.forEach((function(e){return e.active=!1})),e.setParameters(t)}})),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("Senders' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dp()||!t.track){e.next=4;break}t.track.enabled=!0,e.next=8;break;case 4:return(n=t.getParameters()).encodings.forEach((function(e){return e.active=!0})),e.next=8,t.setParameters(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return i=this.remoteSDP.toString(),e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(){var e=this;return VC(c().mark((function t(){var n,r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FC(e.mutex.lock("From P2PConnection.restartICE"));case 2:return n=t.sent,t.prev=3,t.next=6,FC(e.peerConnection.createOffer({iceRestart:!0}));case 6:if((r=t.sent).sdp){t.next=9;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 9:return i=qC(r.sdp),t.next=12,i.iceParameters;case 12:if(o=t.sent,a=o.remoteIceParameters,e.remoteSDP){t.next=16;break}throw new Error("Cannot restartICE before remoteSDP created.");case 16:return e.remoteSDP.restartICE(a),s=e.remoteSDP.toString(),t.next=20,FC(e.peerConnection.setLocalDescription(r));case 20:return t.next=22,FC(e.peerConnection.setRemoteDescription({type:"answer",sdp:s}));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(3),zv.warning("restart ICE failed, abort operation",t.t0);case 27:return t.prev=27,n(),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[3,24,27,30]])})))()}},{key:"close",value:function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n]),this.remoteSDP.updateRecvMedia(n._mediaStreamTrack.kind,n),o=this.remoteSDP.toString(),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return e.next=13,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,e.t0.toString());case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().filter((function(e){var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t})),e.t0=1===r.length,!e.t0){e.next=5;break}return e.next=5,this.applySendEncodings(r,[n]);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),sm("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,rE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=29;break}if(o=t[r],a=n[r]){e.next=10;break}return e.abrupt("continue",26);case 10:if(s={},u={},!(a instanceof NT)){e.next=20;break}e.t0=a._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return s.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return s.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:s.degradationPreference="balanced";case 20:return sm("DSCP_TYPE")&&wp()&&(l=sm("DSCP_TYPE"),["very-low","low","medium","high"].includes(l)&&(u.networkPriority=l)),d=o.getParameters(),(f=null===(i=d.encodings)||void 0===i?void 0:i[0])&&Object.assign(f,u),Object.assign(d,s),e.next=26,o.setParameters(d);case 26:r++,e.next=6;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),zv.debug("Apply RTPSendEncodings failed.");case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t){var n=HC.exports.parse(e);return t.forEach((function(e,t){var r=e._mediaStreamTrack,i=n.mediaDescriptions.find((function(e){return e.attributes.mid===r.kind}));i&&QC(i,e)})),HC.exports.print(n)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:return n=this.remoteSDP.batchSend(t).map((function(e,n){var r=e.id,i=e.mslabel,a=t[n].kind;return new Vd((function(e,t){var n=setTimeout((function(){t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=function t(s){var c=rp();if("Safari"===c.name&&11===Number(c.version)&&s.track.id!==r&&s.streams[0].id===i){var u,l=s.streams[0].getTracks()[0];return null===(u=o.remoteSDP)||void 0===u||u.updateTrackLabel(a,r,s.track.id),o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:l,id:r})}if(s.track.id===r)return o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:s.track,id:r})};o.peerConnection.addEventListener("track",s)}))})),r=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:r});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return i=e.sent,e.next=11,this.peerConnection.setLocalDescription(i);case 11:return e.next=13,Vd.all(n);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(rE().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&($y(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,m(n.turnServerConfigToIceServers(e.turnServer.servers))),sm("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,m(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(eE)).prototype,"connect",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"connect"),CI.prototype),v_(CI.prototype,"stopSending",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"stopSending"),CI.prototype),v_(CI.prototype,"receive",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"receive"),CI.prototype),v_(CI.prototype,"stopReceiving",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"stopReceiving"),CI.prototype),v_(CI.prototype,"muteRemote",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"muteRemote"),CI.prototype),v_(CI.prototype,"unmuteRemote",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"unmuteRemote"),CI.prototype),v_(CI.prototype,"muteLocal",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"muteLocal"),CI.prototype),v_(CI.prototype,"unmuteLocal",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"unmuteLocal"),CI.prototype),v_(CI.prototype,"close",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"close"),CI.prototype),v_(CI.prototype,"updateEncoderConfig",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"updateEncoderConfig"),CI.prototype),v_(CI.prototype,"updateSendParameters",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"updateSendParameters"),CI.prototype),v_(CI.prototype,"replaceTrack",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"replaceTrack"),CI.prototype),v_(CI.prototype,"getRemoteSSRC",[PI],Object.getOwnPropertyDescriptor(CI.prototype,"getRemoteSSRC"),CI.prototype),CI);function PI(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("Locking from P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}var LI,MI="9",UI=4e4,jI=function(){function e(t){h(this,e),xp(this,"sessionDesc",void 0),xp(this,"_localCapabilities",void 0),xp(this,"_rtpCapabilities",void 0),xp(this,"_candidates",void 0),xp(this,"_iceParameters",void 0),xp(this,"_dtlsParameters",void 0),xp(this,"setup",void 0),xp(this,"currentMidIndex",void 0),xp(this,"cname",void 0),xp(this,"firefoxSsrcMidMap",new Map);var n=t=pw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,c=n.remoteSetup,u=n.localCapabilities,l=n.cname,d=HC.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=a,this._candidates=o,this._iceParameters=r,this._dtlsParameters=i,this._localCapabilities=u,this.setup=c,this.cname=l;var f,p=this.rtpCapabilities.send,v=s(d.mediaDescriptions);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(m.attributes.iceUfrag=r.iceUfrag,m.attributes.icePwd=r.icePwd,m.attributes.fingerprints=i.fingerprints,m.attributes.candidates=o,m.attributes.setup=c,"video"===m.media.mediaType&&(m.media.fmts=p.videoCodecs.map((function(e){return e.payloadType.toString(10)})),m.attributes.payloads=p.videoCodecs,m.attributes.extmaps=p.videoExtensions,sm("PRELOAD_MEDIA_COUNT")>0)){var y=JC([{ssrcId:UI,rtx:sm("USE_RTX")?40001:void 0}],this.cname),g=y.ssrcs,E=y.ssrcGroups;m.attributes.ssrcs=g,m.attributes.ssrcGroups=E}if("audio"===m.media.mediaType&&(m.media.fmts=p.audioCodecs.map((function(e){return e.payloadType.toString(10)})),m.attributes.payloads=p.audioCodecs,m.attributes.extmaps=p.audioExtensions,cI(m),sm("PRELOAD_MEDIA_COUNT")>0)){var _=JC([{ssrcId:2e4}],this.cname),b=_.ssrcs,S=_.ssrcGroups;m.attributes.ssrcs=b,m.attributes.ssrcGroups=S}}}catch(w){v.e(w)}finally{v.f()}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}return v(e,[{key:"localCapabilities",get:function(){return pw(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return pw(this._rtpCapabilities)}},{key:"candidates",get:function(){return pw(this._candidates)}},{key:"iceParameters",get:function(){return pw(this._iceParameters)}},{key:"dtlsParameters",get:function(){return pw(this._dtlsParameters)}},{key:"preloadRemoteMedia",value:function(){var e=sm("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+UI,s=JC([{ssrcId:2*o+2e4}],this.cname),c=s.ssrcs,u=s.ssrcGroups,l=JC([{ssrcId:a,rtx:sm("USE_RTX")?a+1:void 0}],this.cname),d=l.ssrcs,f=l.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:MI,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:MI,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}},{key:"toString",value:function(){return HC.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n,r){var i=JC(t,this.cname,sm("AV_SYNC")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(fp()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,l=this.findAvailableMediaIndex(e,o);return-1===l||1===l&&(dp()||hp())||vp()?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=pw(this.sessionDesc.mediaDescriptions[l])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(u,r)),fp()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}}},{key:"batchSend",value:function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}}},{key:"stopSending",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||fp()||vp()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"muteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))}},{key:"unmuteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))}},{key:"receive",value:function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()}},{key:"stopReceiving",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}},{key:"restartICE",value:function(e){e=pw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"findAvailableMediaIndex",value:function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(fp()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))}},{key:"createOrRecycleRecvMedia",value:function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=this.localCapabilities.send,u=[];if(a===Fg.VIDEO){var l,d;if(sm("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(u=s.videoCodecs.filter((function(e){var t,n;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)&&(null==e||null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])===sm("H264_PROFILE_LEVEL_ID")}))),!u||0===(null===(l=u)||void 0===l?void 0:l.length)){var f=c.videoCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}));0!==f.length&&(u=s.videoCodecs.filter((function(e){return f.some((function(t){return t.payloadType===e.payloadType}))})))}if(sm("USE_RTX")){var p=u.map((function(e){return e.payloadType.toString()})),h=s.videoCodecs.filter((function(e){var t,n;return"rtx"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)&&p.includes((null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)||"")}));u=[].concat(m(u),m(h))}0===u.length&&(zv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(d=s.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),u=s.videoCodecs)}else u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(i)})),0===u.length&&(zv.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")})));var v=a===Fg.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var y="".concat(this.currentMidIndex),g={media:{mediaType:a,port:MI,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:u,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(y)}};g=this.mungRecvMediaDsec(g,e,o);var E=this.findFirstClosedMedia(a);if(E){var _=this.sessionDesc.mediaDescriptions.indexOf(E);this.sessionDesc.mediaDescriptions[_]=g}else this.sessionDesc.mediaDescriptions.push(g);return g}},{key:"createOrRecycleSendMedia",value:function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===Fg.VIDEO?o.videoCodecs:o.audioCodecs,s=e===Fg.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:MI,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var l=this.findFirstClosedMedia(e);if(l){var d=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[d]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}},{key:"updateBundleMids",value:function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))}},{key:"mungRecvMediaDsec",value:function(e,t,n){var r=pw(e);return $C(r),QC(r,t),eI(r,t),tI(r),nI(r,n,this.localCapabilities.send),r}},{key:"mungSendMediaDesc",value:function(e,t){var n=pw(e);return nI(n,t,this.localCapabilities.recv),cI(n),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"findFirstClosedMedia",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return fp()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))}},{key:"findPreloadMediaDesc",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n,r;return(null===(n=t.attributes)||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId)===e[0].ssrcId}))}},{key:"getSSRC",value:function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs}}]),e}();function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VI(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BI,WI,GI,HI,KI,zI,YI,qI,ZI,XI,JI,QI,$I=(v_((LI=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this,e,r),xp(l(i),"store",void 0),xp(l(i),"peerConnection",void 0),xp(l(i),"remoteSDP",void 0),xp(l(i),"initialOffer",void 0),xp(l(i),"transportEventReceiver",void 0),xp(l(i),"statsFilter",void 0),xp(l(i),"useRTX",sm("USE_RTX")),xp(l(i),"localCapabilities",void 0),xp(l(i),"localCandidateCount",0),xp(l(i),"allCandidatesReceived",!1),xp(l(i),"establishPromise",void 0),xp(l(i),"mutex",new G_("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.statsFilter=AI(i.peerConnection,void 0,void 0,fp()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"}),e.next=4,this.peerConnection.createOffer();case 4:if((t=e.sent).sdp){e.next=7;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 7:return n=qC(t.sdp),e.next=10,iI(!this.useRTX,sm("FILTER_VIDEO_FEC"),sm("FILTER_AUDIO_FEC"));case 10:return r=e.sent,e.abrupt("return",(this.localCapabilities=sI(r),this.initialOffer=t,FI(FI({},n),{},{rtpCapabilities:r,offerSDP:t.sdp})));case 14:throw e.prev=14,e.t0=e.catch(0),new Uv(Dv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s,u,l,d,f,p,h,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new jI({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:this.localCapabilities,cname:a}),s=this.remoteSDP.toString(),u=HC.exports.parse(this.initialOffer.sdp),(l=u.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&cI(l),d=HC.exports.print(u),f=this.logSDPExchange(d||"","offer","local","connect"),e.next=9,this.peerConnection.setLocalDescription({type:"offer",sdp:d});case 9:return null==f||f(s),e.next=12,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 12:if(null!=(p=this.peerConnection.getTransceivers()[0])&&p.receiver&&this.tryBindTransportEvents(p.receiver),!(sm("PRELOAD_MEDIA_COUNT")>0)){e.next=23;break}return this.remoteSDP.preloadRemoteMedia(),h=this.remoteSDP.toString(),e.next=18,this.peerConnection.setRemoteDescription({type:"offer",sdp:h});case 18:return e.next=20,this.peerConnection.createAnswer();case 20:return v=e.sent,e.next=23,this.peerConnection.setLocalDescription(v);case 23:e.next=28;break;case 25:throw e.prev=25,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return VC(c().mark((function i(){var o,a,s,u,l,d,f,p,h,v,m;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FC(r.mutex.lock("From P2PConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t)})),i.t0=fp()&&!0===sm("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,FC(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,FC(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(s.sdp,e,u),d=HC.exports.parse(l),f=u.map((function(e){var t=d.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return ZC(t,r.useRTX)})),i.prev=19,i.next=22,f;case 22:p=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),p=[],r.remoteSDP.receive(e,t,n,p),h=r.remoteSDP.toString(),i.next=31,FC(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 31:return i.next=33,FC(r.peerConnection.setRemoteDescription({type:"answer",sdp:h}));case 33:return i.next=35,FC(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,p),v=r.remoteSDP.toString(),m=r.logSDPExchange(l,"offer","local","send"),i.next=40,FC(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 40:return i.next=42,FC(r.applySimulcastEncodings(a,e));case 42:return i.next=44,FC(r.applySendEncodings(a,e));case 44:return null==m||m(v),i.next=47,FC(r.peerConnection.setRemoteDescription({type:"answer",sdp:v}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:f[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Uv?i.t2:new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From P2PConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 11:if(i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)})),i.length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return l=e.sent,d=this.mungReceiveAnswerSDP(l.sdp,a,t),null==u||u(d||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:d});case 15:zv.debug("[P2PConnection] receive ".concat(t," by exchanging SDP.")),e.next=19;break;case 18:zv.debug("[P2PConnection] receive ".concat(t," no need to exchange SDP."));case 19:if(f=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:f.receiver.track,id:a});case 25:throw e.prev=25,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:zv.debug("[P2PConnection] batchReceive by exchanging SDP."),e.next=18;break;case 17:zv.debug("[P2PConnection] batchReceive no need to exchange SDP.");case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(){var e=this;return VC(c().mark((function t(){var n,r,i,o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FC(e.mutex.lock("From P2PConnection.restartICE"));case 2:return n=t.sent,t.prev=3,t.next=6,FC(e.peerConnection.createOffer({iceRestart:!0}));case 6:if((r=t.sent).sdp){t.next=9;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 9:return i=qC(r.sdp),t.next=12,i.iceParameters;case 12:if(o=t.sent,a=o.remoteIceParameters,e.remoteSDP){t.next=16;break}throw new Error("Cannot restartICE before remoteSDP created.");case 16:return e.remoteSDP.restartICE(a),s=e.remoteSDP.toString(),u=e.logSDPExchange(r.sdp||"","offer","local","restartICE"),t.next=20,FC(e.peerConnection.setLocalDescription(r));case 20:return null==u||u(s),t.next=23,FC(e.peerConnection.setRemoteDescription({type:"answer",sdp:s}));case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(3),zv.warning("restart ICE failed, abort operation",t.t0);case 28:return t.prev=28,n(),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[3,25,28,31]])})))()}},{key:"close",value:function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=fp(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),sm("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"tryBindTransportEvents",value:function(e){var t=this;e.transport&&(this.transportEventReceiver=e,e.transport.onstatechange=function(){var n,r;null!==(n=e.transport)&&void 0!==n&&n.state&&(null===(r=t.onDTLSTransportStateChange)||void 0===r||r.call(t,e.transport.state))},e.transport.onerror=function(e){var n;null===(n=t.onDTLSTransportError)||void 0===n||n.call(t,e.error)},e.transport.iceTransport&&(e.transport.iceTransport.onstatechange=function(){var n,r,i;null!==(n=e.transport)&&void 0!==n&&n.iceTransport.state&&(null===(r=t.onICETransportStateChange)||void 0===r||r.call(t,null===(i=e.transport)||void 0===i?void 0:i.iceTransport.state))}))}},{key:"tryUnbindTransportEvents",value:function(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f,p,h,v,m,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,rE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=32;break}if(i=t[r],!((o=n[r])&&o instanceof NT)){e.next=29;break}if(!this.isVP8Simulcast(o)){e.next=11;break}return e.abrupt("continue",29);case 11:u={},l={},e.t0=o._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return u.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return u.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:u.degradationPreference="balanced";case 20:return null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(l.maxBitrate=1e3*(null===(d=o._encoderConfig)||void 0===d?void 0:d.bitrateMax)),o._hints.includes(Rg.LOW_STREAM)&&(null!==(f=o._encoderConfig)&&void 0!==f&&f.frameRate&&(l.maxFramerate=BS(o._encoderConfig.frameRate)),null!==(p=o._encoderConfig)&&void 0!==p&&p.scaleResolutionDownBy&&(null===(h=o._encoderConfig)||void 0===h?void 0:h.scaleResolutionDownBy)>1&&(l.scaleResolutionDownBy=o._encoderConfig.scaleResolutionDownBy)),sm("DSCP_TYPE")&&wp()&&(v=sm("DSCP_TYPE"),["very-low","low","medium","high"].includes(v)&&(l.networkPriority=v)),m=i.sender.getParameters(),y=null===(s=m.encodings)||void 0===s?void 0:s[0],fp()&&!y&&(u.encodings=[l]),y&&Object.assign(y,l),Object.assign(m,u),e.next=29,i.sender.setParameters(m);case 29:r++,e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),zv.debug("Apply RTPSendEncodings failed.");case 37:case"end":return e.stop()}}),e,this,[[0,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t,n){var r=this,i=HC.exports.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(QC(a,e),rI(a,e,r.store.codec))})),HC.exports.print(i)}},{key:"mungReceiveAnswerSDP",value:function(e,t,n){var r=HC.exports.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&n===Fg.AUDIO&&"audio"===i.media.mediaType&&cI(i),HC.exports.print(r)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}},{key:"applySimulcastForFirefox",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(u=t[r],!((l=n[r])instanceof NT&&!l._hints.includes(Rg.LOW_STREAM)&&null!==(i=l._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(a=l._scalabiltyMode)&&void 0!==a&&a.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return d={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},d.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}],p=u.sender.getParameters(),e.next=10,u.sender.setParameters(Object.assign(p,d));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"applySimulcastEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fp()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof NT&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"isVP8Simulcast",value:function(e){var t,n,r,i;return!!(e instanceof NT&&sm("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(Rg.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(i=e._scalabiltyMode)||void 0===i?void 0:i.numSpatialLayers)>1)}},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(sm("SDP_LOGGING"))return zv.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(rE().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&($y(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,m(n.turnServerConfigToIceServers(e.turnServer.servers))),sm("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,m(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),sm("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(VS(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!sm("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(eE)).prototype,"connect",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"connect"),LI.prototype),v_(LI.prototype,"receive",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"receive"),LI.prototype),v_(LI.prototype,"batchReceive",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"batchReceive"),LI.prototype),v_(LI.prototype,"stopReceiving",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"stopReceiving"),LI.prototype),v_(LI.prototype,"muteRemote",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"muteRemote"),LI.prototype),v_(LI.prototype,"unmuteRemote",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"unmuteRemote"),LI.prototype),v_(LI.prototype,"muteLocal",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"muteLocal"),LI.prototype),v_(LI.prototype,"unmuteLocal",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"unmuteLocal"),LI.prototype),v_(LI.prototype,"close",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"close"),LI.prototype),v_(LI.prototype,"updateEncoderConfig",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"updateEncoderConfig"),LI.prototype),v_(LI.prototype,"updateSendParameters",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"updateSendParameters"),LI.prototype),v_(LI.prototype,"replaceTrack",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"replaceTrack"),LI.prototype),v_(LI.prototype,"getRemoteSSRC",[eO],Object.getOwnPropertyDescriptor(LI.prototype,"getRemoteSSRC"),LI.prototype),LI);function eO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function tO(e,t){var n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=BS(t.width),r.height=BS(t.height);var i=BS(t.framerate||15);document.body.append(n),document.body.append(r);var o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();var a=r.getContext("2d");if(!a)throw new Uv(Dv.UNEXPECTED_ERROR,"can not get canvas context");var s=rE(),c=r.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0],u=eb((function(){return function(){if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){var t=n.videoWidth,i=n.videoHeight/t,s=r.width*i;Math.abs(s-r.height)>=2&&(zv.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(s)),r.height=s)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))}()}),i),l=c.stop;return c.stop=function(){l.call(c),u(),n&&(n.remove(),n=null),r&&(r.width=0,r.remove(),r=null),zv.debug("clean low stream renderer")},c}function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iO=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this,e,"track-".concat(e.kind,"-").concat(r,"-").concat(o.clientId,"_").concat(tw(5,""))),xp(l(a),"_userId",void 0),xp(l(a),"_uintId",void 0),xp(l(a),"_isDestroyed",!1),xp(l(a),"store",void 0),xp(l(a),"processor",void 0),xp(l(a),"processorContext",void 0),a._userId=r,a._uintId=i,a.store=o,a}return v(n,[{key:"getUserId",value:function(){return this._userId}},{key:"_updateOriginMediaStreamTrack",value:function(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}},{key:"_destroy",value:function(){this._isDestroyed=!0,zv.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),i(o(n.prototype),"close",this).call(this)}},{key:"getProcessorStats",value:function(){return this.processorContext.gatherStats()}},{key:"getProcessorUsage",value:function(){return this.processorContext.gatherUsage()}}]),n}(B_),oO=(BI=j_({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:"HTMLElement",n]}}),WI=j_({argsMap:function(e){return[e.getTrackId()]}}),GI=j_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),HI=j_({argsMap:function(e){return[e.getTrackId()]}}),v_((KI=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this,e,r,i,o),xp(l(a),"_videoVisibleTimer",null),xp(l(a),"_previousVideoVisibleStatus",void 0),xp(l(a),"_clearPreviousVideoVisibleStatus",(function(){return a._previousVideoVisibleStatus=void 0})),xp(l(a),"trackMediaType","video"),xp(l(a),"_videoWidth",void 0),xp(l(a),"_videoHeight",void 0),xp(l(a),"_player",void 0),xp(l(a),"processorDestination",void 0),xp(l(a),"processorContext",void 0),a.updateMediaStreamTrackResolution(),a.processorContext=new ES(a.getTrackId(),"remote"),a.processorDestination=new gS(a.processorContext),a.bindProcessorDestinationEvents(),a}return v(n,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==ay.PLAYING)}},{key:"__className__",get:function(){return"RemoteVideoTrack"}},{key:"getStats",value:function(){return vw((function(){zv.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),cw(this,Tg.GET_STATS)||rO({},ug)}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(zv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}zv.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(n));var i=rO(rO({fit:"cover"},n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new Kk(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=function(){t.store.subscribe(t.getUserId(),"video",void 0,void 0,Date.now()),t.emit(Ag.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var n=t.getVideoElementVisibleStatus();t.emit(Ag.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch(e){}}),sm("CHECK_VIDEO_VISIBLE_INTERVAL"))}},{key:"stop",value:function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,zv.debug("[".concat(this.getTrackId(),"] stop video playback")))}},{key:"getCurrentFrameData",value:function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}},{key:"updateMediaStreamTrackResolution",value:function(){var e=this;iw(this._originMediaStreamTrack).then((function(t){var n=a(t,2),r=n[0],i=n[1];e._videoHeight=i,e._videoWidth=r})).catch(rw)}},{key:"_updatePlayerSource",value:function(){zv.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}},{key:"getVideoElementVisibleStatus",value:function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=IT.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(e){throw new Uv(Dv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}},{key:"pipe",value:function(e){if(this.processor===e)return e;if(e._source)throw new Uv(Dv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}},{key:"unpipe",value:function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(zg.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource()):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(zg.ON_TRACK)}},{key:"_destroy",value:function(){i(o(n.prototype),"_destroy",this).call(this),this.unbindProcessorDestinationEvents()}}]),n}(iO)).prototype,"play",[BI],Object.getOwnPropertyDescriptor(KI.prototype,"play"),KI.prototype),v_(KI.prototype,"stop",[WI],Object.getOwnPropertyDescriptor(KI.prototype,"stop"),KI.prototype),v_(KI.prototype,"pipe",[GI],Object.getOwnPropertyDescriptor(KI.prototype,"pipe"),KI.prototype),v_(KI.prototype,"unpipe",[HI],Object.getOwnPropertyDescriptor(KI.prototype,"unpipe"),KI.prototype),KI),aO=(zI=j_({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),YI=j_({argsMap:function(e,t){return[e.getTrackId(),t]}}),qI=j_({argsMap:function(e){return[e.getTrackId()]}}),ZI=j_({argsMap:function(e){return[e.getTrackId()]}}),XI=j_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),JI=j_({argsMap:function(e){return[e.getTrackId()]}}),v_((QI=function(e){f(n,e);var t=p(n);function n(e,r,i,o){var a;return h(this,n),a=t.call(this,e,r,i,o),xp(l(a),"trackMediaType","audio"),xp(l(a),"_source",void 0),xp(l(a),"_useAudioElement",!0),xp(l(a),"_volume",100),xp(l(a),"processorContext",void 0),xp(l(a),"processorDestination",void 0),xp(l(a),"_played",!1),xp(l(a),"_bypassWebAudio",!1),sm("DISABLE_WEBAUDIO")?(a._source=new SS,a._bypassWebAudio=!0,a._useAudioElement=!0):(a._source=new rb(e,!0),sm("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(a._useAudioElement=!1)),a._source.once(Zy.RECEIVE_TRACK_BUFFER,(function(){a.emit(Ag.FIRST_FRAME_DECODED)})),a.processorContext=new bS(a._source.context,a.getTrackId(),"remote"),a.processorDestination=new _S(a.processorContext),a.bindProcessorDestinationEvents(),a._source.on(Zy.UPDATE_SOURCE,(function(){a.processor&&a.processor.updateInput({node:a._source.processSourceNode,context:a.processorContext})})),a}return v(n,[{key:"isPlaying",get:function(){return this._useAudioElement?wb.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"RemoteAudioTrack"}},{key:"setAudioFrameCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Zy.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zy.ON_AUDIO_BUFFER),this._source.on(Zy.ON_AUDIO_BUFFER,(function(t){return e(t)}))}},{key:"setVolume",value:function(e){this._volume=e,this._useAudioElement?wb.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}},{key:"setPlaybackDevice",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Uv(Dv.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,wb.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getVolumeLevel",value:function(){return this._source.getAccurateVolumeLevel()}},{key:"getStats",value:function(){return vw((function(){zv.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),cw(this,Tg.GET_STATS)||rO({},sg)}},{key:"play",value:function(){zv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(zv.debug("[".concat(this.getTrackId(),"] use audio element to play")),wb.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}},{key:"stop",value:function(){zv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?wb.stop(this.getTrackId()):this._source.stop()}},{key:"_destroy",value:function(){i(o(n.prototype),"_destroy",this).call(this),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}},{key:"_isFreeze",value:function(){return this._source.isFreeze}},{key:"_updatePlayerSource",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];zv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wb.updateTrack(this.getTrackId(),this._mediaStreamTrack)}},{key:"pipe",value:function(e){if(this._bypassWebAudio)throw new Uv(Dv.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Uv(Dv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}},{key:"unpipe",value:function(){var e;if(this._bypassWebAudio)throw new Uv(Dv.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(zg.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n)):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(zg.ON_NODE,(function(t){e._source.processedNode=t;var n=!t;e._useAudioElement!==n&&(e._played?(e.stop(),e._useAudioElement=n,e.play()):e._useAudioElement=n)}))}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(zg.ON_TRACK),this.processorDestination.removeAllListeners(zg.ON_NODE)}}]),n}(iO)).prototype,"setVolume",[zI],Object.getOwnPropertyDescriptor(QI.prototype,"setVolume"),QI.prototype),v_(QI.prototype,"setPlaybackDevice",[YI],Object.getOwnPropertyDescriptor(QI.prototype,"setPlaybackDevice"),QI.prototype),v_(QI.prototype,"play",[qI],Object.getOwnPropertyDescriptor(QI.prototype,"play"),QI.prototype),v_(QI.prototype,"stop",[ZI],Object.getOwnPropertyDescriptor(QI.prototype,"stop"),QI.prototype),v_(QI.prototype,"pipe",[XI],Object.getOwnPropertyDescriptor(QI.prototype,"pipe"),QI.prototype),v_(QI.prototype,"unpipe",[JI],Object.getOwnPropertyDescriptor(QI.prototype,"unpipe"),QI.prototype),QI);function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sO(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uO,lO=function(e){f(n,e);var t=p(n);function n(){var e;return h(this,n),e=t.call(this),xp(l(e),"uplinkStatsUploadInterval",void 0),xp(l(e),"uplinkStatsUploadSlowInterval",void 0),xp(l(e),"uplinkRelatedStatsUploadInterval",void 0),xp(l(e),"uplinkDenoiserStatsUploadInterval",void 0),xp(l(e),"transportStatsUploadInterval",void 0),xp(l(e),"uplinkExtensionStatsUploadInterval",void 0),xp(l(e),"downlinkExtensionStatsUploadInterval",void 0),xp(l(e),"extensionUsageStatsUploadInterval",void 0),xp(l(e),"downlinkStatsUploadInterval",void 0),xp(l(e),"downlinkStatsUploadSlowInterval",void 0),xp(l(e),"downlinkRelatedStatsUploadInterval",void 0),xp(l(e),"lastStats",void 0),xp(l(e),"uploadUnplinkStarted",!1),xp(l(e),"uploadDownlinkStarted",!1),xp(l(e),"uploadTransportStarted",!1),xp(l(e),"uploadExtensionUsageStarted",!1),xp(l(e),"requestStats",void 0),xp(l(e),"requestLocalMedia",void 0),xp(l(e),"requestRemoteMedia",void 0),xp(l(e),"requestAllTracks",void 0),xp(l(e),"requestVideoIsReady",void 0),xp(l(e),"requestUpload",void 0),e}return v(n,[{key:"startUploadTransportStats",value:function(){var e=this;this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadTransportStats(n)}),6e3))}},{key:"startUploadExtensionUsageStats",value:function(){var e=this;if(!this.uploadExtensionUsageStarted){this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);var t=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(u(c().mark((function n(){var r,i,o,u,l,d,f,p,h,v,m,y,g,E,_,b,S,w;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=Date.now(),l={connectionInterval:sm("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:u},d=[],f=(null===(r=e.requestAllTracks)||void 0===r?void 0:r.call(e))||[],p=s(f),n.prev=4,p.s();case 6:if((h=p.n()).done){n.next=17;break}if(v=h.value,n.t0=!v.muted&&v.enabled,!n.t0){n.next=15;break}return n.t1=d,n.next=13,v.getProcessorUsage();case 13:n.t2=n.sent,d=n.t1.concat.call(n.t1,n.t2);case 15:n.next=6;break;case 17:n.next=22;break;case 19:n.prev=19,n.t3=n.catch(4),p.e(n.t3);case 22:return n.prev=22,p.f(),n.finish(22);case 25:m=(null===(i=e.requestRemoteMedia)||void 0===i?void 0:i.call(e))||[],y=s(m),n.prev=27,y.s();case 29:if((g=y.n()).done){n.next=47;break}if(E=a(g.value,2),_=E[0],b=E[1],n.t4=b.has(Fg.VIDEO)&&_.videoTrack,!n.t4){n.next=38;break}return n.t5=d,n.next=36,_.videoTrack.getProcessorUsage();case 36:n.t6=n.sent,d=n.t5.concat.call(n.t5,n.t6);case 38:if(n.t7=b.has(Fg.AUDIO)&&_.audioTrack,!n.t7){n.next=45;break}return n.t8=d,n.next=43,_.audioTrack.getProcessorUsage();case 43:n.t9=n.sent,d=n.t8.concat.call(n.t8,n.t9);case 45:n.next=29;break;case 47:n.next=52;break;case 49:n.prev=49,n.t10=n.catch(27),y.e(n.t10);case 52:return n.prev=52,y.f(),n.finish(52);case 55:if(0!==d.length){n.next=57;break}return n.abrupt("return");case 57:l.details=function(e,t){var n,r={},i=s(e);try{for(i.s();!(n=i.n()).done;){var o,a,c,u=n.value,l=u.id,d=u.value,f=u.level,p=u.direction,h=null!==(o=t.get(l))&&void 0!==o?o:0,v=2===d?h+sm("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:h;t.set(l,v),r[l]?(2===d&&(r[l].value=d),f>r[l].level&&(r[l].level=f),"remote"===p&&(r[l].remoteUidCount+=1),r[l].totalTs=null!==(a=t.get(l))&&void 0!==a?a:0):r[l]={value:d,level:f,remoteUidCount:"local"===p?0:1,totalTs:null!==(c=t.get(l))&&void 0!==c?c:0}}}catch(m){i.e(m)}finally{i.f()}return Object.keys(r).map((function(e){var t=r[e];return{id:e,level:t.level,value:t.value,totalTs:t.totalTs}}))}(d,t),S=Date.now(),w=S>u?S:u+1,null===(o=e.requestUpload)||void 0===o||o.call(e,zy.EXTENSION_USAGE_STATS,{usageStats:l,sendTs:w});case 60:case"end":return n.stop()}}),n,null,[[4,19,22,25],[27,49,52,55]])}))),sm("EXTENSION_USAGE_UPLOAD_INTERVAL"))}}},{key:"startUploadUplinkStats",value:function(){var e=this;this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&(e.uploadUplinkStats(n),e.lastStats=n)}),3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadSlowUplinkStats(n)}),6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadRelatedUplinkStats(n,e.lastStats),e.lastStats=n}),1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadDenoiserStats(n)}),2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadExtensionStats(n)}),2e3))}},{key:"uploadTransportStats",value:function(e){var t=this;fw((function(){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,zy.TRANSPORT_STATS,function(e){var t={connectionType:100};if("relay"===e.selectedCandidatePair.localCandidate.candidateType){var n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t.connectionType=101),"tcp"===n&&(t.connectionType=103),"tls"===n&&(t.connectionType=104)}return t}(e))}))}},{key:"uploadUplinkStats",value:function(e){var t,n=this;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).forEach((function(t){var r=a(t,2),i=r[0],o=r[1],s=o.track,c=o.ssrcs;switch(i){case Bg.LocalVideoLowTrack:case Bg.LocalVideoTrack:var u=function(e,t,n){var r,i=t.videoSend.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:tw(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};switch(o.A_vstd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?"1":"0",i.sentFrame&&(o.A_fhs=i.sentFrame.height.toString(),o.A_frs=i.sentFrame.frameRate.toString(),o.A_fws=i.sentFrame.width.toString()),i.adaptionChangeReason){case"none":o.A_ac="0";break;case"cpu":o.A_ac="1";break;case"bandwidth":o.A_ac="2";break;case"other":o.A_ac="3"}return o.A_lvps=ky[n._player?n._player.videoElementStatus:"uninit"].toString(),o.A_nr=null===(r=i.nacksCount)||void 0===r?void 0:r.toString(),i.avgEncodeMs&&(o.A_aem=i.avgEncodeMs.toFixed(0).toString()),o}(c[0].ssrcId,e,s),l=i===Bg.LocalVideoTrack?GS(c[0].ssrcId,e,s):null;u&&fw((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,zy.PUBLISH_STATS,{stream_type:i===Bg.LocalVideoLowTrack?"low":"high",stats:cO(cO({},u),l)})}));var d=function(e){var t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);d&&setTimeout((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,zy.PUBLISH_STATS,{stream_type:i===Bg.LocalVideoLowTrack?"low":"high",stats:d})}),1e3);break;case Bg.LocalAudioTrack:var f=function(e,t,n){var r=t.audioSend.find((function(t){return t.ssrc===e}));if(!r)return null;var i={id:tw(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};return i.A_astd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1",r.inputLevel?i.A_ail=Math.round(100*r.inputLevel).toString():i.A_ail=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),i.A_apil=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),r.aecReturnLoss&&(i.A_ecrl=Math.round(r.aecReturnLoss).toString()),r.aecReturnLossEnhancement&&(i.A_ecrle=Math.round(r.aecReturnLossEnhancement).toString()),i}(c[0].ssrcId,e,s);f&&fw((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,zy.PUBLISH_STATS,{stream_type:"high",stats:f})}))}}))}},{key:"uploadSlowUplinkStats",value:function(e){var t,n=this;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).filter((function(e){var t=a(e,1)[0];return t===Bg.LocalVideoLowTrack||t===Bg.LocalVideoTrack})).forEach((function(t){var r=a(t,2),i=r[0],o=GS(r[1].ssrcs[0].ssrcId,e);o&&fw((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,zy.PUBLISH_STATS,{stream_type:i===Bg.LocalVideoLowTrack?"low":"high",stats:o})}))}))}},{key:"uploadRelatedUplinkStats",value:function(e,t){var n,r=this;((null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[]).filter((function(e){var t=a(e,1)[0];return t===Bg.LocalVideoLowTrack||t===Bg.LocalVideoTrack})).forEach((function(t){var n=a(t,2),i=n[0],o=function(e,t){var n=t.videoSend.find((function(t){return t.ssrc===e}));return n?{mediaType:"video",isVideoMute:!1,frameRateInput:n.inputFrame&&n.inputFrame.frameRate.toString(),frameRateSent:n.sentFrame&&n.sentFrame.frameRate.toString(),googRtt:n.rttMs.toString(),qpSumPerFrame:Math.floor(n.qpSumPerFrame).toString()}:null}(n[1].ssrcs[0].ssrcId,e);o&&fw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,zy.PUBLISH_RELATED_STATS,{stream_type:i===Bg.LocalVideoLowTrack?"low":"high",stats:o})}))}))}},{key:"uploadDenoiserStats",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof CS){var r,i,o,a=null===(r=(i=n._external).getDenoiserStats)||void 0===r?void 0:r.call(i);return void(a&&(null===(o=this.requestUpload)||void 0===o||o.call(this,zy.DENOISER_STATS,a)))}}}},{key:"uploadExtensionStats",value:function(e){for(var t=this,n=0;n<e.length;n++)e[n].getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))}},{key:"stopUploadUplinkStats",value:function(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}},{key:"startUploadDownlinkStats",value:function(){var e=this;if(!this.uploadDownlinkStarted){var t;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);var n=!1;this.downlinkStatsUploadInterval=window.setInterval((function(){var r,i=null===(r=e.requestStats)||void 0===r?void 0:r.call(e);i&&(e.uploadDownlinkStats(i,n,t),t=i),n=!n}),3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadSlowDownlinkStats(n)}),6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&(e.uploadRelatedDownlinkStats(n,e.lastStats),e.lastStats=n)}),1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestRemoteMedia)||void 0===t?void 0:t.call(e);n&&e.uploadDownlinkExtensionStats(n)}),2e3)}}},{key:"uploadDownlinkStats",value:function(e,t,n){var r,i=this;((null===(r=this.requestRemoteMedia)||void 0===r?void 0:r.call(this))||[]).forEach((function(r){var o=a(r,2),s=o[0],c=o[1];if(c.has(Fg.VIDEO)&&s.videoTrack){var u=s.videoTrack?function(e,t,n,r,i){var o=t.videoRecv.find((function(t){return t.ssrc===e}));if(!o)return null;var a,s,c={id:tw(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};if(c.bytesReceived=o.bytes.toString(),c.packetsLost=o.packetsLost.toString(),c.packetsReceived=o.packets.toString(),o.framesRateFirefox&&(c.A_frr=o.framesRateFirefox.toString()),o.receivedFrame?(c.A_frr=o.receivedFrame.frameRate.toString(),c.A_fhr=o.receivedFrame.height.toString(),c.A_fwr=o.receivedFrame.width.toString()):(c.A_fhr=null===(a=r._videoHeight)||void 0===a?void 0:a.toString(),c.A_fwr=null===(s=r._videoWidth)||void 0===s?void 0:s.toString()),c.A_frd=o.decodeFrameRate.toString(),o.outputFrame&&(c.A_fro=o.outputFrame.frameRate.toString()),void 0!==o.jitterBufferMs&&(c.A_jbm=Math.floor(o.jitterBufferMs).toString()),void 0!==o.currentDelayMs&&(c.A_cdm=Math.floor(o.currentDelayMs).toString()),c.A_fs=o.firsCount.toString(),c.A_ns=o.nacksCount.toString(),c.A_ps=o.plisCount.toString(),r&&(c.A_vrtd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),r._player&&r._player.freezeTimeCounterList.length>0&&(c.A_vrft=Math.round(r._player.freezeTimeCounterList.splice(0,1)[0]).toString()),i&&r._player&&"visible"===MS.visibility){var u=Math.min(6e3,r._player.renderFreezeAccTime);c.A_vrrft=Math.round(u).toString(),r._player.renderFreezeAccTime=Math.max(0,r._player.renderFreezeAccTime-u)}if(c.A_rvps=ky[r._player?r._player.videoElementStatus:"uninit"].toString(),n){var l=n.videoRecv.find((function(t){return t.ssrc===e}));if(l&&void 0!==o.totalInterFrameDelay&&void 0!==o.totalSquaredInterFrameDelay&&void 0!==l.totalInterFrameDelay&&void 0!==l.totalSquaredInterFrameDelay){var d=o.totalInterFrameDelay-l.totalInterFrameDelay,f=o.totalSquaredInterFrameDelay-l.totalSquaredInterFrameDelay,p=o.framesDecodeCount-l.framesDecodeCount,h=d/p*1e3,v=Math.round(1e3*Math.sqrt((f-Math.pow(d,2)/p)/p));!isNaN(v)&&h+v>Math.max(3*h,h+150)&&(c.A_ifdsd=v.toString())}}return c}(s._videoSSRC,e,n,s.videoTrack,t):void 0;u&&fw((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,zy.SUBSCRIBE_STATS,{stream_id:s.uid,stats:u})}))}if(c.has(Fg.AUDIO)&&s.audioTrack){var l=s.audioTrack?function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:tw(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};if(o.bytesReceived=i.bytes.toString(),o.packetsLost=i.packetsLost.toString(),o.packetsReceived=i.packets.toString(),i.outputLevel?o.A_aol=Math.round(100*i.outputLevel).toString():o.A_aol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),r&&(o.A_artd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),o.A_jr=i.jitterMs.toString(),o.A_jbm=Math.floor(i.jitterBufferMs).toString(),o.A_cdm=Math.floor(i.jitterBufferMs).toString(),o.A_raps=ky[wb.getPlayerState(r.getTrackId())].toString(),n){var a=n.audioRecv.find((function(t){return t.ssrc===e}));if(a){var s=i.concealedSamples-a.concealedSamples;s>0&&(o.A_cs=Math.round(s).toString())}}return o}(s._audioSSRC,e,n,s.audioTrack):void 0;l&&fw((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,zy.SUBSCRIBE_STATS,{stream_id:s.uid,stats:l})}))}}))}},{key:"uploadSlowDownlinkStats",value:function(e){}},{key:"uploadRelatedDownlinkStats",value:function(e,t){var n,r=this;((null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[]).forEach((function(n){var i=a(n,2),o=i[0],s=i[1];if(s.has(Fg.VIDEO)&&o.videoTrack){var c,u=!0===(o._videoSSRC&&(null===(c=r.requestVideoIsReady)||void 0===c?void 0:c.call(r,o._videoSSRC))||!1),l=function(e,t,n,r,i,o){var a=n.videoRecv.find((function(t){return t.ssrc===e})),s=i?i.videoRecv.find((function(t){return t.ssrc===e})):void 0;if(!a)return null;var c=LS.isRemoteVideoFreeze(o,a,s)&&t,u={mediaType:"video",isVideoMute:!1,peerId:r,frameRateReceived:a.receivedFrame&&a.receivedFrame.frameRate.toString(),frameRateDecoded:a.decodedFrame&&a.decodedFrame.frameRate.toString(),isFreeze:c,bytesReceived:a.bytes.toString(),packetsReceived:a.packets.toString(),packetsLost:a.packetsLost.toString(),qpSumPerFrame:Math.floor(a.qpSumPerFrame).toString()};return a.framesRateFirefox&&(u.frameRateDecoded=a.framesRateFirefox.toString(),u.frameRateReceived=a.framesRateFirefox.toString()),u}(o._videoSSRC,u,e,o.uid,t,o.videoTrack);l&&fw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,zy.SUBSCRIBE_RELATED_STATS,{stream_id:o.uid,stats:l})}))}if(s.has(Fg.AUDIO)&&o.audioTrack){var d=function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o=LS.isRemoteAudioFreeze(r);return{mediaType:"audio",isAudioMute:!1,peerId:n,googJitterReceived:i.jitterMs.toString(),isFreeze:o,bytesReceived:i.bytes.toString(),packetsReceived:i.packets.toString(),packetsLost:i.packetsLost.toString(),frameReceived:i.receivedFrames.toString(),frameDropped:i.droppedFrames.toString()}}(o._audioSSRC,e,o.uid,o.audioTrack);d&&fw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,zy.SUBSCRIBE_RELATED_STATS,{stream_id:o.uid,stats:d})}))}}))}},{key:"stopUploadDownlinkStats",value:function(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}},{key:"stopUploadTransportStats",value:function(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}},{key:"stopUploadExtensionUsageStats",value:function(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}},{key:"uploadDownlinkExtensionStats",value:function(e){var t=this;e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1];i.has(Fg.VIDEO)&&r.videoTrack&&r.videoTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)})),i.has(Fg.AUDIO)&&r.audioTrack&&r.audioTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))}))}}]),n}(Lv),dO="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",fO="9",pO=2e4,hO=4e4,vO=function(){function e(t){h(this,e),xp(this,"sessionDesc",void 0),xp(this,"_localCapabilities",void 0),xp(this,"_rtpCapabilities",void 0),xp(this,"_candidates",void 0),xp(this,"_iceParameters",void 0),xp(this,"_dtlsParameters",void 0),xp(this,"setup",void 0),xp(this,"currentMidIndex",void 0),xp(this,"cname",void 0),xp(this,"firefoxSsrcMidMap",new Map);var n=t=pw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,c=n.remoteSetup,u=n.localCapabilities,l=n.cname,d=HC.exports.parse(dO);this._rtpCapabilities=a,this._candidates=o,this._iceParameters=r,this._dtlsParameters=i,this._localCapabilities=u,this.setup=c,this.cname=l;var f,p=this.rtpCapabilities.send,v=s(d.mediaDescriptions);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(m.attributes.iceUfrag=r.iceUfrag,m.attributes.icePwd=r.icePwd,m.attributes.fingerprints=i.fingerprints,m.attributes.candidates=o,m.attributes.setup=c,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=p.videoCodecs.map((function(e){return e.payloadType.toString(10)})),m.attributes.payloads=p.videoCodecs,m.attributes.extmaps=p.videoExtensions,sm("PRELOAD_MEDIA_COUNT")>0)){var y=JC([{ssrcId:hO,rtx:sm("USE_RTX")?40001:void 0}],this.cname),g=y.ssrcs,E=y.ssrcGroups;m.attributes.ssrcs=g,m.attributes.ssrcGroups=E}if("audio"===m.media.mediaType&&(m.media.fmts=p.audioCodecs.map((function(e){return e.payloadType.toString(10)})),m.attributes.payloads=p.audioCodecs,m.attributes.extmaps=p.audioExtensions,cI(m),sm("PRELOAD_MEDIA_COUNT")>0)){var _=JC([{ssrcId:pO}],this.cname),b=_.ssrcs,S=_.ssrcGroups;m.attributes.ssrcs=b,m.attributes.ssrcGroups=S}}}catch(w){v.e(w)}finally{v.f()}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}return v(e,[{key:"localCapabilities",get:function(){return pw(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return pw(this._rtpCapabilities)}},{key:"candidates",get:function(){return pw(this._candidates)}},{key:"iceParameters",get:function(){return pw(this._iceParameters)}},{key:"dtlsParameters",get:function(){return pw(this._dtlsParameters)}},{key:"updateRemoteRTPCapabilities",value:function(e){var t=HC.exports.parse(dO);this._rtpCapabilities=e;var n,r=this.rtpCapabilities.send,i=s(t.mediaDescriptions);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,"application"===o.media.mediaType&&(o.attributes.sctpPort="5000"),"video"===o.media.mediaType&&(o.media.fmts=r.videoCodecs.map((function(e){return e.payloadType.toString(10)})),o.attributes.payloads=r.videoCodecs,o.attributes.extmaps=r.videoExtensions,sm("PRELOAD_MEDIA_COUNT")>0)){var a=JC([{ssrcId:hO,rtx:sm("USE_RTX")?40001:void 0}],this.cname),c=a.ssrcs,u=a.ssrcGroups;o.attributes.ssrcs=c,o.attributes.ssrcGroups=u}if("audio"===o.media.mediaType&&(o.media.fmts=r.audioCodecs.map((function(e){return e.payloadType.toString(10)})),o.attributes.payloads=r.audioCodecs,o.attributes.extmaps=r.audioExtensions,sm("PRELOAD_MEDIA_COUNT")>0)){var l=JC([{ssrcId:pO}],this.cname),d=l.ssrcs,f=l.ssrcGroups;o.attributes.ssrcs=d,o.attributes.ssrcGroups=f}}}catch(p){i.e(p)}finally{i.f()}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}},{key:"preloadRemoteMedia",value:function(e){this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+hO,s=JC([{ssrcId:2*o+pO}],this.cname),c=s.ssrcs,u=s.ssrcGroups,l=JC([{ssrcId:a,rtx:sm("USE_RTX")?a+1:void 0}],this.cname),d=l.ssrcs,f=l.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:fO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:fO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()}},{key:"toString",value:function(){return HC.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n,r){var i=JC(t,this.cname,sm("AV_SYNC")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(fp()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,l=this.findAvailableMediaIndex(e,o);return-1===l||dp()||pp()||hp()?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=pw(this.sessionDesc.mediaDescriptions[l])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(u,r)),fp()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}}},{key:"batchSend",value:function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}}},{key:"stopSending",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||fp()||dp()||pp()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"muteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))}},{key:"unmuteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))}},{key:"receive",value:function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()}},{key:"stopReceiving",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}},{key:"restartICE",value:function(e){e=pw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"findAvailableMediaIndex",value:function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(fp()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))}},{key:"createOrRecycleRecvMedia",value:function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=this.localCapabilities.send,u=[];if(a===Fg.VIDEO){var l,d;if(sm("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(u=s.videoCodecs.filter((function(e){var t,n;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)&&(null==e||null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])===sm("H264_PROFILE_LEVEL_ID")}))),!u||0===(null===(l=u)||void 0===l?void 0:l.length)){var f=c.videoCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}));0!==f.length&&(u=s.videoCodecs.filter((function(e){return f.some((function(t){return t.payloadType===e.payloadType}))})))}if(sm("USE_RTX")){var p=u.map((function(e){return e.payloadType.toString()})),h=s.videoCodecs.filter((function(e){var t,n;return"rtx"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)&&p.includes((null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)||"")}));u=[].concat(m(u),m(h))}0===u.length&&(zv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(d=s.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),u=s.videoCodecs)}else u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(i)})),0===u.length&&(zv.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")})));var v=a===Fg.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var y="".concat(this.currentMidIndex),g={media:{mediaType:a,port:fO,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:u,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(y)}};g=this.mungRecvMediaDsec(g,e,o);var E=this.findFirstClosedMedia(a);if(E){var _=this.sessionDesc.mediaDescriptions.indexOf(E);this.sessionDesc.mediaDescriptions[_]=g}else this.sessionDesc.mediaDescriptions.push(g);return g}},{key:"createOrRecycleSendMedia",value:function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===Fg.VIDEO?o.videoCodecs:o.audioCodecs,s=e===Fg.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:fO,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var l=this.findFirstClosedMedia(e);if(l){var d=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[d]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}},{key:"updateBundleMids",value:function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))}},{key:"mungRecvMediaDsec",value:function(e,t,n){var r=pw(e);return $C(r),QC(r,t),eI(r,t),tI(r),nI(r,n,this.localCapabilities.send),r}},{key:"mungSendMediaDesc",value:function(e,t){var n=pw(e);return nI(n,t,this.localCapabilities.recv),cI(n),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"findFirstClosedMedia",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return fp()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))}},{key:"findPreloadMediaDesc",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n,r;return(null===(n=t.attributes)||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId)===e[0].ssrcId}))}},{key:"getSSRC",value:function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs}}]),e}();function mO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mO(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gO,EO=(v_((uO=function(e){f(n,e);var t=p(n);function n(e,r,i){var o;return h(this,n),o=t.call(this,e,r),xp(l(o),"store",void 0),xp(l(o),"peerConnection",void 0),xp(l(o),"remoteSDP",void 0),xp(l(o),"initialOffer",void 0),xp(l(o),"transportEventReceiver",void 0),xp(l(o),"statsFilter",void 0),xp(l(o),"useRTX",sm("USE_RTX")),xp(l(o),"localCapabilities",void 0),xp(l(o),"localCandidateCount",0),xp(l(o),"allCandidatesReceived",!1),xp(l(o),"establishPromise",void 0),xp(l(o),"mutex",new G_("NVExtentionsConnection-mutex")),xp(l(o),"rtcMedia",void 0),o.store=r,o.peerConnection=i,o.statsFilter=AI(o.peerConnection,void 0,void 0,fp()?1200:void 0),o.bindPCEvents(),o.bindStatsEvents(),o.store.p2pId=o.store.p2pId+1,o.establishPromise=o.establish(),o}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"establish",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer();case 3:if((n=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return r=qC(n.sdp),e.next=9,iI(!this.useRTX,sm("FILTER_VIDEO_FEC"),sm("FILTER_AUDIO_FEC"));case 9:return i=e.sent,e.abrupt("return",(this.localCapabilities=i,this.initialOffer=n,yO(yO({},r),{},{rtpCapabilities:i,offerSDP:n.sdp})));case 13:throw e.prev=13,e.t0=e.catch(0),new Uv(Dv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish NVConnection without initial offer.");case 3:return this.remoteSDP=new vO({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:sI(this.localCapabilities),cname:a}),s=this.remoteSDP.toString(),u=HC.exports.parse(this.initialOffer.sdp),(l=u.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&cI(l),d=HC.exports.print(u),f=this.logSDPExchange(d||"","offer","local","connect"),e.next=9,this.peerConnection.setLocalDescription({type:"offer",sdp:d});case 9:return null==f||f(s),e.next=12,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"updateRemoteConnect",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=this.remoteSDP)||void 0===n||n.updateRemoteRTPCapabilities(t),null===(r=this.remoteSDP)||void 0===r||r.preloadRemoteMedia(2),o=null===(i=this.remoteSDP)||void 0===i?void 0:i.toString(),e.next=4,this.peerConnection.setRemoteDescription({type:"offer",sdp:o});case 4:return e.next=6,this.peerConnection.createAnswer();case 6:return a=e.sent,e.next=9,this.peerConnection.setLocalDescription(a);case 9:zv.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.");case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return VC(c().mark((function i(){var o,a,s,u,l,d,f,p,h,v,m;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FC(r.mutex.lock("From NVExtentionsConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t)})),i.t0=fp()&&!0===sm("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,FC(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,FC(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(s.sdp,e,u),d=HC.exports.parse(l),f=u.map((function(e){var t=d.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return ZC(t,r.useRTX)})),i.prev=19,i.next=22,f;case 22:p=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),p=[],r.remoteSDP.receive(e,t,n,p),h=r.remoteSDP.toString(),i.next=31,FC(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 31:return i.next=33,FC(r.peerConnection.setRemoteDescription({type:"answer",sdp:h}));case 33:return i.next=35,FC(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,p),v=r.remoteSDP.toString(),m=r.logSDPExchange(l,"offer","local","send"),i.next=40,FC(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 40:return i.next=42,FC(r.applySimulcastEncodings(a,e));case 42:return i.next=44,FC(r.applySendEncodings(a,e));case 44:return null==m||m(v),i.next=47,FC(r.peerConnection.setRemoteDescription({type:"answer",sdp:v}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:f[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Uv?i.t2:new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From NVExtentionsConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");case 11:if(i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)})),i.length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return l=e.sent,d=this.mungReceiveAnswerSDP(l.sdp,a,t),null==u||u(d||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:d});case 15:zv.debug("[NVExtentionsConnection] receive ".concat(t," by exchanging SDP.")),e.next=19;break;case 18:zv.debug("[NVExtentionsConnection] receive ".concat(t," no need to exchange SDP."));case 19:if(f=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:f.receiver.track,id:a});case 25:throw e.prev=25,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:zv.debug("[NVExtentionsConnection] batchReceive by exchanging SDP."),e.next=18;break;case 17:zv.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(){var e=this;return VC(c().mark((function t(){var n,r,i,o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FC(e.mutex.lock("From NVExtentionsConnection.restartICE"));case 2:return n=t.sent,t.prev=3,t.next=6,FC(e.peerConnection.createOffer({iceRestart:!0}));case 6:if((r=t.sent).sdp){t.next=9;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 9:return i=qC(r.sdp),t.next=12,i.iceParameters;case 12:if(o=t.sent,a=o.remoteIceParameters,e.remoteSDP){t.next=16;break}throw new Error("Cannot restartICE before remoteSDP created.");case 16:return e.remoteSDP.restartICE(a),s=e.remoteSDP.toString(),u=e.logSDPExchange(r.sdp||"","offer","local","restartICE"),t.next=20,FC(e.peerConnection.setLocalDescription(r));case 20:return null==u||u(s),t.next=23,FC(e.peerConnection.setRemoteDescription({type:"answer",sdp:s}));case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(3),zv.warning("restart ICE failed, abort operation",t.t0);case 28:return t.prev=28,n(),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[3,25,28,31]])})))()}},{key:"close",value:function(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Uv(Dv.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=fp(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getP2PConnectionParams",value:function(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return yO(yO({},qC(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,zv.debug("[pc-".concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),sm("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f,p,h,v,m,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,rE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=32;break}if(i=t[r],!((o=n[r])&&o instanceof NT)){e.next=29;break}if(!this.isVP8Simulcast(o)){e.next=11;break}return e.abrupt("continue",29);case 11:u={},l={},e.t0=o._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return u.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return u.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:u.degradationPreference="balanced";case 20:return null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(l.maxBitrate=1e3*(null===(d=o._encoderConfig)||void 0===d?void 0:d.bitrateMax)),o._hints.includes(Rg.LOW_STREAM)&&(null!==(f=o._encoderConfig)&&void 0!==f&&f.frameRate&&(l.maxFramerate=BS(o._encoderConfig.frameRate)),null!==(p=o._encoderConfig)&&void 0!==p&&p.scaleResolutionDownBy&&(null===(h=o._encoderConfig)||void 0===h?void 0:h.scaleResolutionDownBy)>1&&(l.scaleResolutionDownBy=o._encoderConfig.scaleResolutionDownBy)),sm("DSCP_TYPE")&&wp()&&(v=sm("DSCP_TYPE"),["very-low","low","medium","high"].includes(v)&&(l.networkPriority=v)),m=i.sender.getParameters(),y=null===(s=m.encodings)||void 0===s?void 0:s[0],fp()&&!y&&(u.encodings=[l]),y&&Object.assign(y,l),Object.assign(m,u),e.next=29,i.sender.setParameters(m);case 29:r++,e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),zv.debug("Apply RTPSendEncodings failed.");case 37:case"end":return e.stop()}}),e,this,[[0,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t,n){var r=this,i=HC.exports.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(QC(a,e),rI(a,e,r.store.codec))})),HC.exports.print(i)}},{key:"mungReceiveAnswerSDP",value:function(e,t,n){var r=HC.exports.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&n===Fg.AUDIO&&"audio"===i.media.mediaType&&cI(i),HC.exports.print(r)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}},{key:"applySimulcastForFirefox",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(u=t[r],!((l=n[r])instanceof NT&&!l._hints.includes(Rg.LOW_STREAM)&&null!==(i=l._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(a=l._scalabiltyMode)&&void 0!==a&&a.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return d={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},d.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}],p=u.sender.getParameters(),e.next=10,u.sender.setParameters(Object.assign(p,d));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"applySimulcastEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fp()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof NT&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"isVP8Simulcast",value:function(e){var t,n,r,i;return!!(e instanceof NT&&sm("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(Rg.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(i=e._scalabiltyMode)||void 0===i?void 0:i.numSpatialLayers)>1)}},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(sm("SDP_LOGGING"))return zv.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(rE().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&($y(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,m(n.turnServerConfigToIceServers(e.turnServer.servers))),sm("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,m(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),sm("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(VS(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!sm("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(eE)).prototype,"connect",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"connect"),uO.prototype),v_(uO.prototype,"updateRemoteConnect",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"updateRemoteConnect"),uO.prototype),v_(uO.prototype,"receive",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"receive"),uO.prototype),v_(uO.prototype,"batchReceive",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"batchReceive"),uO.prototype),v_(uO.prototype,"stopReceiving",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"stopReceiving"),uO.prototype),v_(uO.prototype,"muteRemote",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"muteRemote"),uO.prototype),v_(uO.prototype,"unmuteRemote",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"unmuteRemote"),uO.prototype),v_(uO.prototype,"muteLocal",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"muteLocal"),uO.prototype),v_(uO.prototype,"unmuteLocal",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"unmuteLocal"),uO.prototype),v_(uO.prototype,"close",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"close"),uO.prototype),v_(uO.prototype,"updateEncoderConfig",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"updateEncoderConfig"),uO.prototype),v_(uO.prototype,"updateSendParameters",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"updateSendParameters"),uO.prototype),v_(uO.prototype,"replaceTrack",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"replaceTrack"),uO.prototype),v_(uO.prototype,"getRemoteSSRC",[_O],Object.getOwnPropertyDescriptor(uO.prototype,"getRemoteSSRC"),uO.prototype),uO);function _O(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From NVExtentionsConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function bO(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=GC,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new SO(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function SO(e){function t(e){if(Object(e)!==e)return Vd.reject(new TypeError(e+" is not an object."));var t=e.done;return Vd.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(SO=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vd.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vd.reject(e):t(n.apply(this.s,arguments))}},new SO(e)}var wO,kO=(v_((gO=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this,e,r),xp(l(i),"store",void 0),xp(l(i),"peerConnection",void 0),xp(l(i),"cname",void 0),xp(l(i),"mutex",new G_("DataChannelConnection-mutex")),xp(l(i),"dataChannel",void 0),xp(l(i),"_p2pConnection",void 0),xp(l(i),"establishPromise",void 0),xp(l(i),"_nvMedia",void 0),i.store=r,i.store.dcId=i.store.dcId+1,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.dataChannel=i.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),i.dataChannel.binaryType="arraybuffer",i._p2pConnection=new EO(e,r,i.peerConnection),i.bindPCEvents(),i.establishPromise=i._p2pConnection.establishPromise,i}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=this._nvMedia)||void 0===t?void 0:t.getLocalRtpCapabilities(),e.next=3,this._p2pConnection.establish(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getP2PConnectionParams",value:function(){return this._p2pConnection.getP2PConnectionParams()}},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cname=a,e.next=3,this._p2pConnection.connect(t,n,r,i,o,a);case 3:return e.next=5,new Vd((function(e,t){var n=setTimeout((function(){s.closeSignal(),t(new Uv(Dv.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(r))))}),2e3);s.dataChannel.onopen=function(){if("open"===s.dataChannel.readyState)return clearTimeout(n),void e()},s.dataChannel.onerror=function(e){s.closeSignal(),t(e)}}));case 5:return e.abrupt("return",{transmitter:this.dataChannel,close:this.closeSignal.bind(this)});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return VC(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FC(r.mutex.lock("From DataChannelConnection.send"));case 2:return o=i.sent,i.prev=3,i.delegateYield(WC(bO(r._p2pConnection.send(e,t,n)),FC),"t0",5);case 5:return i.abrupt("return",i.t0);case 6:return i.prev=6,o(),i.finish(6);case 9:case"end":return i.stop()}}),i,null,[[3,,6,9]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.stopSending(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._nvMedia){e.next=7;break}return zv.debug("[DataChannelConnection] receive ".concat(t," by DataChannel.")),e.next=4,this._nvMedia.reveiveByRTCMedia(t,n,this.cname);case 4:e.t0=e.sent,e.next=11;break;case 7:return zv.debug("[DataChannelConnection] receive ".concat(t," by WebRTC.")),e.next=10,this._p2pConnection.receive(t,n,r,i);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,this._p2pConnection.batchReceive(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.stopReceiving(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(){var e=this;return VC(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(WC(bO(e._p2pConnection.restartICE()),FC),"t0",1);case 1:return t.abrupt("return",t.t0);case 2:case"end":return t.stop()}}),t)})))()}},{key:"close",value:function(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}},{key:"getStats",value:function(){return this._p2pConnection.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this._p2pConnection.getRemoteVideoIsReady(e)}},{key:"updateRemoteConnect",value:function(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateEncoderConfig(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateSendParameters(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.replaceTrack(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.getRemoteSSRC(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(sm("SDP_LOGGING"))return zv.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"bindPCEvents",value:function(){var e=this;this._p2pConnection.onICEConnectionStateChange=function(t){var n;return null===(n=e.onICEConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onConnectionStateChange=function(t){var n;return null===(n=e.onConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportStateChange=function(t){var n;return null===(n=e.onDTLSTransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportError=function(t){var n;return null===(n=e.onDTLSTransportError)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onICETransportStateChange=function(t){var n;return null===(n=e.onICETransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioReceived=function(t){var n;return null===(n=e.onFirstAudioReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoReceived=function(t){var n;return null===(n=e.onFirstVideoReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioDecoded=function(t){var n;return null===(n=e.onFirstAudioDecoded)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoDecoded=function(t,n,r){var i;return null===(i=e.onFirstVideoDecoded)||void 0===i?void 0:i.call(e,t,n,r)},this._p2pConnection.onFirstVideoDecodedTimeout=function(t){var n;return null===(n=e.onFirstVideoDecodedTimeout)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onSelectedLocalCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedLocalCandidateChanged)||void 0===r?void 0:r.call(e,t,n)},this._p2pConnection.onSelectedRemoteCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r?void 0:r.call(e,t,n)}}},{key:"closeSignal",value:function(){this.dataChannel.close(),this.peerConnection.close()}},{key:"unbindConnectionEvents",value:function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}},{key:"setConfiguration",value:function(e){this._p2pConnection.setConfiguration(e)}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&($y(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,m(n.turnServerConfigToIceServers(e.turnServer.servers))),sm("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,m(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),sm("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(VS(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!sm("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(eE)).prototype,"connect",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"connect"),gO.prototype),v_(gO.prototype,"receive",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"receive"),gO.prototype),v_(gO.prototype,"stopReceiving",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"stopReceiving"),gO.prototype),v_(gO.prototype,"muteRemote",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"muteRemote"),gO.prototype),v_(gO.prototype,"unmuteRemote",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"unmuteRemote"),gO.prototype),v_(gO.prototype,"muteLocal",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"muteLocal"),gO.prototype),v_(gO.prototype,"unmuteLocal",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"unmuteLocal"),gO.prototype),v_(gO.prototype,"close",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"close"),gO.prototype),v_(gO.prototype,"updateEncoderConfig",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"updateEncoderConfig"),gO.prototype),v_(gO.prototype,"updateSendParameters",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"updateSendParameters"),gO.prototype),v_(gO.prototype,"replaceTrack",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"replaceTrack"),gO.prototype),v_(gO.prototype,"getRemoteSSRC",[TO],Object.getOwnPropertyDescriptor(gO.prototype,"getRemoteSSRC"),gO.prototype),gO);function TO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From DataChannelConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function RO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RO(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IO(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=GC,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new OO(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function OO(e){function t(e){if(Object(e)!==e)return Vd.reject(new TypeError(e+" is not an object."));var t=e.done;return Vd.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(OO=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vd.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vd.reject(e):t(n.apply(this.s,arguments))}},new OO(e)}var AO,NO=(v_((wO=function(e){f(n,e);var t=p(n);function n(e,r){var i;return h(this,n),i=t.call(this),xp(l(i),"store",void 0),xp(l(i),"statsUploader",void 0),xp(l(i),"connection",void 0),xp(l(i),"localTrackMap",new Map),xp(l(i),"remoteUserMap",new Map),xp(l(i),"pendingLocalTracks",[]),xp(l(i),"pendingRemoteTracks",[]),xp(l(i),"statsCollector",void 0),xp(l(i),"isPlanB",!1),xp(l(i),"shouldForwardP2PCreation",void 0),xp(l(i),"iceFailedCount",0),xp(l(i),"dtlsFailedCount",0),xp(l(i),"mutex",new G_("P2PChannel-mutex")),xp(l(i),"_state",Wg.Disconnected),xp(l(i),"handleMuteLocalTrack",function(){var e=u(c().mark((function e(t,n,r){var o,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");case 2:if(o=e.sent,e.prev=3,i.connection&&i.state===Wg.Connected){e.next=6;break}return e.abrupt("return",void r(new Uv(Dv.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established.")));case 6:if(0!==(s=i.filterTobeMutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:return u=s.find((function(e){return"videoLowTrack"===e[0]})),u&&u[1].track._originMediaStreamTrack.stop(),e.next=13,i.connection.muteLocal(s.map((function(e){return a(e,2)[1].id})));case 13:return d=i.createMuteMessage(s),e.next=16,sw(l(i),Gg.RequestMuteLocal,d);case 16:n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),r(e.t0);case 22:return e.prev=22,o(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,19,22,25]])})));return function(t,n,r){return e.apply(this,arguments)}}()),xp(l(i),"handleUnmuteLocalTrack",function(){var e=u(c().mark((function e(t,n,r){var o,s,u,d,f,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");case 2:if(o=e.sent,e.prev=3,i.connection&&i.state===Wg.Connected){e.next=6;break}return e.abrupt("return",void r(new Uv(Dv.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.")));case 6:if(0!==(s=i.filterTobeUnmutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:if(u=s.find((function(e){return"videoLowTrack"===e[0]})),!u){e.next=15;break}return(d=u[1]).track._originMediaStreamTrack.stop(),rE().supportDualStreamEncoding?(f=t._mediaStreamTrack.clone(),d.track._mediaStreamTrack=f,d.track._originMediaStreamTrack=f):(p=tO(t,uw(l(i),Gg.RequestLowStreamParameter)),d.track._mediaStreamTrack=p,d.track._originMediaStreamTrack=p),e.next=15,new Vd((function(e,t){i.handleReplaceTrack(d.track,e,t,!0)}));case 15:return e.next=17,i.connection.unmuteLocal(s.map((function(e){return a(e,2)[1].id})));case 17:return h=i.createUnmuteMessage(s),e.next=20,sw(l(i),Gg.RequestUnmuteLocal,h);case 20:n(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),r(e.t0);case 26:return e.prev=26,o(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[3,23,26,29]])})));return function(t,n,r){return e.apply(this,arguments)}}()),xp(l(i),"handleUpdateVideoEncoder",function(){var e=u(c().mark((function e(t,n,r){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");case 2:if(o=e.sent,e.prev=3,a=i.localTrackMap.get(Bg.LocalVideoTrack),i.connection&&a&&a.track===t&&i.state===Wg.Connected){e.next=7;break}return e.abrupt("return",void n());case 7:return s=a.id,u=a.track,e.next=10,i.connection.updateSendParameters(s,u);case 10:return e.next=12,i.connection.updateEncoderConfig(s,u);case 12:i.emit(Gg.UpdateVideoEncoder,u),n(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),r(e.t0);case 19:return e.prev=19,o(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}()),xp(l(i),"handleSetOptimizationMode",function(){var e=u(c().mark((function e(t,n,r){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");case 2:if(o=e.sent,e.prev=3,a=i.localTrackMap.get(Bg.LocalVideoTrack),i.connection&&a&&a.track===t&&i.state===Wg.Connected){e.next=7;break}return e.abrupt("return");case 7:return s=a.id,u=a.track,e.next=10,i.connection.updateSendParameters(s,u);case 10:n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r(e.t0);case 16:return e.prev=16,o(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t,n,r){return e.apply(this,arguments)}}()),xp(l(i),"handleReplaceTrack",function(){var e=u(c().mark((function e(t,n,r,o){var s,u,l,d,f,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.debug("P2PChannel handleReplaceTrack for [track-id-".concat(t.getTrackId(),"]")),e.t0="boolean"==typeof o&&o,e.t0){e.next=6;break}return e.next=5,i.mutex.lock("From P2PChannel.handleReplaceTrack");case 5:s=e.sent;case 6:if(e.prev=6,l=Array.from(i.localTrackMap.entries()).find((function(e){var n=a(e,2)[1].track;return t===n})),i.connection&&l&&i.state===Wg.Connected){e.next=10;break}return e.abrupt("return",void n());case 10:return e.next=12,null===(u=i.connection)||void 0===u?void 0:u.replaceTrack(t,l[1].id);case 12:if(!i.isPlanB){e.next=15;break}(d=l[1]).id=t._mediaStreamTrack.id,i.localTrackMap.set(l[0],d);case 15:if(l[0]!==Bg.LocalVideoTrack||!rE().supportDualStreamEncoding){e.next=24;break}if(!(f=i.localTrackMap.get(Bg.LocalVideoLowTrack))){e.next=24;break}return p=t._mediaStreamTrack.clone(),f.track._originMediaStreamTrack.stop(),f.track._mediaStreamTrack=p,f.track._originMediaStreamTrack=p,e.next=24,new Vd((function(e,t){i.handleReplaceTrack(f.track,e,t,!0)}));case 24:n(),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(6),r(e.t1);case 30:return e.prev=30,null===(h=s)||void 0===h||h(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[6,27,30,33]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),xp(l(i),"handleGetLocalVideoStats",(function(e){e(i.statsCollector.getLocalVideoTrackStats())})),xp(l(i),"handleGetLocalAudioStats",(function(e){e(i.statsCollector.getLocalAudioTrackStats())})),xp(l(i),"handleGetRemoteVideoStats",(function(e){return i.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid]})),xp(l(i),"handleGetRemoteAudioStats",(function(e){return i.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid]})),i.store=e,i.statsCollector=r,i.statsCollector.addP2PChannel(l(i)),i.statsUploader=new lO,i.bindStatsUploaderEvents(),i.isPlanB=!rE().supportUnifiedPlan||sm("CHROME_FORCE_PLAN_B")&&wp(),i.shouldForwardP2PCreation=sm("FORWARD_P2P_CREATION")&&rE().supportPCSetConfiguration,i.shouldForwardP2PCreation&&(i.connection=i.store.useDataChannel?new kO({},i.store):i.isPlanB?new xI({},i.store):new $I({},i.store),i.bindConnectionEvents(i.connection)),i}return v(n,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,this.emit(Gg.StateChange,t,this._state)}},{key:"startP2PConnection",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=Wg.New,this.shouldForwardP2PCreation||(this.connection=this.store.useDataChannel?new kO(t,this.store):this.isPlanB?new xI(t,this.store):new $I(t,this.store),this.bindConnectionEvents(this.connection)),this.connection){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");case 2:return e.abrupt("return",(this.connection.setConfiguration(t),this.connection.establishPromise));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:if(!(this.connection instanceof kO)){e.next=6;break}this.connection.updateRemoteConnect(i),e.next=12;break;case 6:return this.store.peerConnectionStart(),e.next=9,this.connection.connect(t,n,r,i,o,a);case 9:this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Wg.Connected;case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"preConnect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Uv(Dv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:return this.store.peerConnectionStart(),e.next=5,this.connection.connect(t,n,r,i,o,a);case 5:return s=e.sent,e.abrupt("return",(this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Wg.Connected,s));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"getEstablishParams",value:function(){if(this.connection instanceof kO)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}},{key:"publish",value:function(e,t,n){var r=this;return VC(c().mark((function i(){var o,a,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FC(r.mutex.lock("From P2PChannel.publish"));case 2:if(o=i.sent,i.prev=3,r.connection&&r.state===Wg.Connected){i.next=10;break}if(r.state!==Wg.Disconnected){i.next=7;break}throw new Uv(Dv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");case 7:return r.throwIfTrackTypeNotMatch(e),a=e.filter((function(e){return-1===r.pendingLocalTracks.indexOf(e)})),i.abrupt("return",void(r.pendingLocalTracks=r.pendingLocalTracks.concat(a)));case 10:if(r.store.pubId=r.store.pubId+1,DS.markPublishStart(r.store.clientId,r.store.pubId),0!==(s=r.filterTobePublishedTracks(e,t,n)).length){i.next=16;break}return i.next=15,FC(r.tryToUnmuteAudio(e));case 15:return i.abrupt("return",void i.sent);case 16:return i.delegateYield(WC(IO(r.doPublish(r.connection,s)),FC),"t0",17);case 17:return i.prev=17,o(),i.finish(17);case 20:case"end":return i.stop()}}),i,null,[[3,,17,20]])})))()}},{key:"doPublish",value:function(e,t){var n=this;return VC(c().mark((function r(){var i,o,a,s,u,l;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===Bg.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t),r.next=3,FC(e.send(t.map((function(e){return e.track})),n.store.codec,n.store.audioCodec));case 3:return i=r.sent,r.next=6,FC(i.next());case 6:return o=r.sent.value,a=n.createGatewayPublishMessage(t,o),r.prev=8,r.next=11,a;case 11:s=r.sent,r.next=17;break;case 14:throw r.prev=14,r.t0=r.catch(8),i.throw(r.t0),(null==r.t0?void 0:r.t0.code)===Dv.WS_ABORT&&t.forEach((function(e){var t=e.track;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),r.t0;case 17:return u=n.mapPubResToRemoteConfig(a,s),r.next=20,FC(i.next(u));case 20:l=r.sent.value,t.forEach((function(e){var t=e.type;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadUplinkStats(),t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===Bg.LocalAudioTrack?"audio":"video",void 0,i)}));case 22:case"end":return r.stop()}}),r,null,[[8,14]])})))()}},{key:"publishLowStream",value:function(e){var t=this;return VC(c().mark((function n(){var r,i,o,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connection&&t.state===Wg.Connected){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,FC(t.mutex.lock("Locking from P2PChannel.publishLowStream"));case 4:if(r=n.sent,n.prev=5,i=t.localTrackMap.get(Bg.LocalVideoTrack)){n.next=9;break}throw new Uv(Dv.UNEXPECTED_ERROR,"Could not find high stream");case 9:if(!t.localTrackMap.has(Bg.LocalVideoLowTrack)){n.next=11;break}throw new Uv(Dv.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));case 11:return o=[{track:t.getLowVideoTrack(i.track,e),type:Bg.LocalVideoLowTrack}],n.delegateYield(WC(IO(t.doPublish(t.connection,o)),FC),"t0",13);case 13:if(!i.track.muted&&i.track.enabled){n.next=19;break}if(s=null===(a=t.localTrackMap.get(Bg.LocalVideoLowTrack))||void 0===a?void 0:a.id,n.t1=void 0!==s,!n.t1){n.next=19;break}return n.next=19,FC(t.connection.muteLocal([s]));case 19:return n.prev=19,r(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[5,,19,22]])})))()}},{key:"republish",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.pendingLocalTracks.length>0,!e.t0){e.next=7;break}return zv.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),e.next=5,aw(this,Gg.RequestRePublish,this.pendingLocalTracks);case 5:this.emit(Gg.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[];case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reSubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u,l,d,f,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.pendingRemoteTracks.length-1;n>=0;n--)r=this.pendingRemoteTracks[n],i=r.user,((o=r.kind)!==Fg.AUDIO||i._audio_added_&&i._audioSSRC)&&(o!==Fg.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(n,1);if(!t){e.next=6;break}return e.next=4,aw(this,Gg.RequestReSubscribe,this.pendingRemoteTracks);case 4:e.next=23;break;case 6:a=s(this.pendingRemoteTracks),e.prev=7,a.s();case 9:if((u=a.n()).done){e.next=15;break}return l=u.value,d=l.user,f=l.kind,e.next=13,this.subscribe(d,f,f===Fg.VIDEO?d._videoSSRC:d._audioSSRC);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:this.pendingRemoteTracks.forEach((function(e){var t=e.user;p.emit(Gg.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[];case 24:case"end":return e.stop()}}),e,this,[[7,17,20,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Wg.Connected){e.next=2;break}return e.abrupt("return",void t.forEach((function(e){var t=i.pendingLocalTracks.indexOf(e);-1!==t&&i.pendingLocalTracks.splice(t,1)})));case 2:if(0!==(n=this.filterTobeUnpublishedTracks(t)).length){e.next=5;break}return e.abrupt("return");case 5:return r=n.find((function(e){return"videoLowTrack"===e[0]})),r&&r[1].track.close(),e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublishLowStream",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Wg.Connected){e.next=2;break}return e.abrupt("return");case 2:if(t=this.localTrackMap.get(Bg.LocalVideoLowTrack)){e.next=5;break}return e.abrupt("return");case 5:return t.track.close(),n=[[Bg.LocalVideoLowTrack,t]],e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doUnpublish",value:function(){var e=u(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createGatewayUnpublishMessage(n),e.next=3,t.stopSending(n.map((function(e){return a(e,2)[1].id})));case 3:return this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map((function(e){var t=a(e,2);return{type:t[0],track:t[1].track}}))),n.forEach((function(e){var t=a(e,1)[0];i.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,f,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Wg.Connected){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");case 2:if(null===(a=this.remoteUserMap.get(t))||void 0===a||!a.has(n)){e.next=4;break}return e.abrupt("return");case 4:if(!o){e.next=14;break}if(l=o.find((function(e){return e.stream_type===n})),l){e.next=8;break}throw new Uv(Dv.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));case 8:return e.next=10,this.connection.receive(n,l.ssrcs,String(t._uintid),l.attributes);case 10:d=e.sent,s=d.track,u=d.id,e.next=18;break;case 14:return e.next=16,this.connection.receive(n,[{ssrcId:r,rtx:i}],String(t._uintid),void 0);case 16:f=e.sent,s=f.track,u=f.id;case 18:n===Fg.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new aO(s,t.uid,t._uintid,this.store),zv.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new oO(s,t.uid,t._uintid,this.store),zv.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._videoTrack)),(p=this.remoteUserMap.get(t))?p.set(n,u):this.remoteUserMap.set(t,new Map([[n,u]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadDownlinkStats(),h=this.pendingRemoteTracks.findIndex((function(e){var r=e.user,i=e.kind;return r.uid===t.uid&&n===i})),-1!==h&&(this.pendingRemoteTracks.splice(h,1),this.emit(Gg.MediaReconnectEnd,t.uid));case 23:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"massSubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massSubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"massSubscribeNoLock",value:function(){var e=u(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Wg.Connected){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");case 2:return t=t.filter((function(e){var t,n=e.user,i=e.mediaType;return!(null!==(t=r.remoteUserMap.get(n))&&void 0!==t&&t.has(i))})),e.next=5,this.connection.batchReceive(t.map((function(e){var t=e.user;return{kind:e.mediaType,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtxSsrcId}],mslabel:String(t._uintid)}})));case 5:n=e.sent,t.forEach((function(e,t){var i=e.user,o=e.mediaType,a=n[t],s=a.track,c=a.id;o===Fg.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(s):(i._audioTrack=new aO(s,i.uid,i._uintid,r.store),zv.info("[".concat(r.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),r.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(s):(i._videoTrack=new oO(s,i.uid,i._uintid,r.store),zv.info("[".concat(r.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),r.bindRemoteTrackEvents(i,i._videoTrack));var u=r.remoteUserMap.get(i);u?u.set(o,c):r.remoteUserMap.set(i,new Map([[o,c]])),r.statsCollector.addRemoteStats(i.uid),r.statsUploader.startUploadDownlinkStats();var l=r.pendingRemoteTracks.findIndex((function(e){var t=e.user,n=e.kind;return t.uid===i.uid&&o===n}));-1!==l&&(r.pendingRemoteTracks.splice(l,1),r.emit(Gg.MediaReconnectEnd,i.uid))}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,s,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.pendingRemoteTracks.filter((function(e){var r=e.user,i=e.kind;return void 0!==n?r.uid===t.uid&&n===i:r.uid===t.uid})),i.forEach((function(e){var t=u.pendingRemoteTracks.indexOf(e);u.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===Wg.Connected||r||i.forEach((function(e){var n,r=e.kind;if(r===Fg.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(r===Fg.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}})),this.connection&&this.state===Wg.Connected){e.next=3;break}return e.abrupt("return");case 3:if(0!==(o=this.filterTobeUnSubscribedTracks(t,n)).length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.connection.stopReceiving(o.map((function(e){return a(e,2)[1].id})));case 8:return s=this.createUnsubscribeMessage(o),e.abrupt("return",(this.withdrawRemoteTracks(o),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),o.forEach((function(e){var t,n,i=a(e,2),o=i[0],s=i[1].kind;if(s===Fg.VIDEO&&o._videoSSRC&&(null===(t=u.connection)||void 0===t||t.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),s===Fg.VIDEO)u.unbindRemoteTrackEvents(o._videoTrack),r||(null===(n=o._videoTrack)||void 0===n||n._destroy(),o._videoTrack=void 0);else if(s===Fg.AUDIO){var c;u.unbindRemoteTrackEvents(o._audioTrack),r||(null===(c=o._audioTrack)||void 0===c||c._destroy(),o._audioTrack=void 0)}})),s));case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massUnsubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribeNoLock",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,u,l,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=s(t),e.prev=2,o=c().mark((function e(){var t,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.value,r=t.user,o=t.mediaType,a=d.pendingRemoteTracks.filter((function(e){var t=e.user,n=e.kind;return void 0!==o?t.uid===r.uid&&o===n:t.uid===r.uid})),a.forEach((function(e){var t=d.pendingRemoteTracks.indexOf(e);d.pendingRemoteTracks.splice(t,1)})),n=n.concat(a);case 3:case"end":return e.stop()}}),e)})),r.s();case 5:if((i=r.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:if(this.connection&&this.state===Wg.Connected){e.next=19;break}return e.abrupt("return",void n.forEach((function(e){var t,n=e.user,r=e.kind;if(r===Fg.AUDIO)null===(t=n._audioTrack)||void 0===t||t._destroy(),n._audioTrack=void 0;else if(r===Fg.VIDEO){var i;null===(i=n._videoTrack)||void 0===i||i._destroy(),n._videoTrack=void 0}})));case 19:if(u=gr(t).call(t,(function(e,t){var n=t.user,r=t.mediaType,i=d.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]),0!==u.length){e.next=22;break}return e.abrupt("return");case 22:return e.next=24,this.connection.stopReceiving(u.map((function(e){return a(e,2)[1].id})));case 24:return l=this.createUnsubscribeAllMessage(u),e.abrupt("return",(this.withdrawRemoteTracks(u),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),u.forEach((function(e){var t,n,r=a(e,2),i=r[0],o=r[1].kind;if(o===Fg.VIDEO&&i._videoSSRC&&(null===(t=d.connection)||void 0===t||t.setStatsRemoteVideoIsReady(i._videoSSRC,!1)),o===Fg.VIDEO)d.unbindRemoteTrackEvents(i._videoTrack),null===(n=i._videoTrack)||void 0===n||n._destroy(),i._videoTrack=void 0;else if(o===Fg.AUDIO){var s;d.unbindRemoteTrackEvents(i._audioTrack),null===(s=i._audioTrack)||void 0===s||s._destroy(),i._audioTrack=void 0}})),l));case 26:case"end":return e.stop()}}),e,this,[[2,11,14,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void zv.warning("P2PChannel.muteRemote has no remote user ".concat(t.uid,".")));case 5:if(r.get(n)){e.next=7;break}return e.abrupt("return",void zv.warning("P2PChannel.muteRemote has no remote user ".concat(t.uid," media type ").concat(n,".")));case 7:void 0!==(i=n===Fg.VIDEO?t._videoSSRC:t._audioSSRC)&&this.connection.setStatsRemoteVideoIsReady(i,!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.unmuteRemoteNoLock(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteRemoteNoLock",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void zv.warning("P2PChannel.unmuteRemote has no remote user ".concat(t.uid,".")));case 5:r.get(n)||zv.warning("P2PChannel.unmuteRemote has no remote user ".concat(t.uid," media type ").concat(n,"."));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAllTracks",value:function(e){var t=this.localTrackMap.get(Bg.LocalAudioTrack);if((null==t?void 0:t.track)instanceof OS){var n=t.track;return Array.from(this.localTrackMap.entries()).filter((function(e){return a(e,1)[0]!==Bg.LocalAudioTrack})).filter((function(t){var n=a(t,1)[0];return!(e&&n===Bg.LocalVideoLowTrack)})).map((function(e){return a(e,2)[1].track})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((function(t){var n=a(t,1)[0];return!(e&&n===Bg.LocalVideoLowTrack)})).map((function(e){return a(e,2)[1].track}))}},{key:"reportPublishEvent",value:function(e,t,n,r,i){if(e){var o=this.localTrackMap.get(Bg.LocalAudioTrack),a=r?this.localTrackMap.get(Bg.LocalVideoLowTrack):this.localTrackMap.get(Bg.LocalVideoTrack);V_.publish(this.store.sessionId,{eventElapse:DS.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.track.getTrackLabel(),videoName:null==a?void 0:a.track.getTrackLabel(),screenshare:-1!==(null==a?void 0:a.track._hints.indexOf(Rg.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);var c=n.find((function(e){return e instanceof RS})),u=r?null===(s=this.localTrackMap.get(Bg.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((function(e){return e instanceof NT}));V_.publish(this.store.sessionId,{eventElapse:DS.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==c?void 0:c.getTrackLabel(),videoName:null==u?void 0:u.getTrackLabel(),screenshare:-1!==(null==u?void 0:u._hints.indexOf(Rg.SCREEN_TRACK)),audio:!!c,video:!!u,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}},{key:"reportSubscribeEvent",value:function(e,t,n,r){var i=r===Fg.VIDEO?n._videoSSRC:n._audioSSRC;i&&V_.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===Fg.VIDEO,audio:r===Fg.AUDIO,peerid:n.uid,subscribeRequestid:r===Fg.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:DS.measureFromSubscribeStart(this.store.clientId,i)})}},{key:"reset",value:function(){zv.debug("P2PChannel.reset"),this.mutex=new G_("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new kO({},this.store):this.isPlanB?new xI({},this.store):new $I({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Wg.Disconnected}},{key:"getStats",value:function(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}},{key:"getLocalAudioVolume",value:function(){var e=this.localTrackMap.get(Bg.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}},{key:"getLocalVideoSize",value:function(){var e=this.localTrackMap.get(Bg.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}},{key:"getEncoderConfig",value:function(e){var t=this.localTrackMap.get(e);return t&&t.track instanceof NT||t&&t.track instanceof RS?t.track._encoderConfig:void 0}},{key:"getLocalMedia",value:function(e){return this.localTrackMap.get(e)}},{key:"hasLocalMedia",value:function(){return this.localTrackMap.size>0}},{key:"hasRemoteMedia",value:function(e,t){if(!e)return this.remoteUserMap.size>0;var n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}},{key:"hasRemoteMediaWithLock",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.remoteUserMap.size>0);case 2:return r=this.remoteUserMap.get(t),e.abrupt("return",!!r&&(!n||r.has(n)));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRemoteMedia",value:function(e){var t,n=Array.from(w_(t=this.remoteUserMap).call(t)).find((function(t){return t.uid===e}));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}},{key:"getAudioLevels",value:function(){var e=Array.from(this.remoteUserMap.entries()).map((function(e){var t=a(e,1)[0];return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}})),t=this.localTrackMap.get(Bg.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=dy(e).call(e,(function(e,t){return e.level-t.level})),e}},{key:"disconnectForReconnect",value:function(){var e=u(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection&&(zv.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=Wg.Reconnecting,sm("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var t,n,r,i,o=a(e,1)[0];null===(t=o._videoTrack)||void 0===t||null===(n=t._player)||void 0===n||null===(r=n.getVideoElement())||void 0===r||r.pause(),null===(i=o._videoTrack)||void 0===i||i._originMediaStreamTrack.stop()})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new kO({},this.store):this.isPlanB?new xI({},this.store):new $I({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1].track;switch(r){case Bg.LocalVideoTrack:i._hints.includes(Rg.LOW_STREAM)?i.close():t.pendingLocalTracks.push(i);break;case Bg.LocalAudioTrack:i instanceof OS?t.pendingLocalTracks=t.pendingLocalTracks.concat(i.trackList):t.pendingLocalTracks.push(i);case Bg.LocalVideoLowTrack:}})),this.emit(Gg.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1];Array.from(w_(i).call(i)).forEach((function(e){t.setPendingRemoteMedia(r,e)})),t.emit(Gg.MediaReconnectStart,r.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),zv.debug("P2PChannel disconnected, waiting to reconnect."));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPendingRemoteMedia",value:function(e,t){var n,r=s(this.pendingRemoteTracks);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.user,a=i.kind;if((e instanceof xT?e.uid:e)===o.uid&&t===a)return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"setPendingRemoteMedia",value:function(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}},{key:"restartICE",value:function(){var e=this;return VC(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.connection&&e.state===Wg.Connected&&!(e.connection instanceof kO)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,FC(e.mutex.lock("From P2PChannel.restartICE"));case 4:return n=t.sent,t.prev=5,t.delegateYield(WC(IO(e.connection.restartICE()),FC),"t0",7);case 7:return t.prev=7,n(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))()}},{key:"getUplinkNetworkQuality",value:function(){if(!this.connection)return 0;var e=this.connection.getStats(),t=this.localTrackMap.get(Bg.LocalVideoTrack),n=this.localTrackMap.get(Bg.LocalAudioTrack),r=e.videoSend.find((function(e){return e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId)})),i=e.audioSend.find((function(e){return e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)}));if(!r||!i)return 1;var o=cw(this,Gg.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,u=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*u/1500,d=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,f=null==t?void 0:t.track;if(f&&f._encoderConfig&&-1===f._hints.indexOf(Rg.SCREEN_TRACK)){var p=f._encoderConfig.bitrateMax,h=e.bitrate.actualEncoded;if(p&&h){var v=(1e3*p-h)/(1e3*p);return hm[v<.15?0:v<.3?1:v<.45?2:v<.6?3:4][d]}}return d}},{key:"getDownlinkNetworkQuality",value:function(){var e=this;if(!this.connection)return 0;var t=this.connection.getStats(),n=0;return Array.from(this.remoteUserMap.entries()).forEach((function(r){var i=a(r,1)[0],o=i._audioSSRC,s=i._videoSSRC,c=t.audioRecv.find((function(e){return e.ssrc===o})),u=t.videoRecv.find((function(e){return e.ssrc===s}));if(c||u){var l=cw(e,Gg.NeedSignalRTT),d=t.rtt,f=(d&&l?(d+l)/2:d||l)||0,p=c?c.jitterMs:void 0,h=t.recvPacketLossRate,v=.7*h*100/50+.3*f/1500;p&&(v=.6*h*100/50+.2*f/1500+.2*p/400),n+=v<.1?1:v<.17?2:v<.36?3:v<.59?4:5}else n+=1})),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}},{key:"muteLocalTrack",value:function(){var e=u(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vd((function(e,r){n.handleMuteLocalTrack(t,e,r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterTobePublishedTracks",value:function(e,t,n){var r=[],i=rE(),o=this.getAllTracks();e=dw(e=e.filter((function(e){return-1===o.indexOf(e)})));var a,c=!1,u=!1,l=s(e);try{for(l.s();!(a=l.n()).done;){var d=a.value;if(d instanceof NT&&(this.localTrackMap.has(Bg.LocalVideoTrack)||c?new Uv(Dv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:d,type:Bg.LocalVideoTrack}),c=!0),t)){var f=this.getLowVideoTrack(d,n);r.push({track:f,type:Bg.LocalVideoLowTrack})}if(d instanceof RS){var p=this.localTrackMap.get(Bg.LocalAudioTrack);if(p){if(!(p.track instanceof OS))throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(d._bypassWebAudio)throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");p.track.addAudioTrack(d),this.bindLocalAudioTrackEvents(d,!0)}else if(u){var h=r.find((function(e){return e.type===Bg.LocalAudioTrack}));if(!(h.track instanceof OS))throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(d._bypassWebAudio)throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");h.track.addAudioTrack(d)}else{if(!i.webAudioMediaStreamDest||d instanceof OS||d._bypassWebAudio)r.push({track:d,type:Bg.LocalAudioTrack});else{var v=new OS;v.addAudioTrack(d),r.push({track:v,type:Bg.LocalAudioTrack})}u=!0}}}}catch(m){l.e(m)}finally{l.f()}return r}},{key:"filterTobeUnpublishedTracks",value:function(e){var t=[],n=this.getAllTracks();e=dw(e=e.filter((function(e){return-1!==n.indexOf(e)})));var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o instanceof RS){var a=this.localTrackMap.get(Bg.LocalAudioTrack);if(!a)continue;a.track instanceof OS?(a.track.removeAudioTrack(o),this.unbindLocalAudioTrackEvents(o),0===a.track.trackList.length&&(t.push([Bg.LocalAudioTrack,a]),a.track.close())):t.push([Bg.LocalAudioTrack,a])}if(o instanceof NT){var c=this.localTrackMap.get(Bg.LocalVideoTrack);if(!c)continue;t.push([Bg.LocalVideoTrack,c]);var u=this.localTrackMap.get(Bg.LocalVideoLowTrack);u&&t.push([Bg.LocalVideoLowTrack,u])}}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"bindLocalTrackEvents",value:function(e){var t=this;e.forEach((function(e){var n=e.track;switch(e.type){case Bg.LocalVideoTrack:n.addListener(Tg.GET_STATS,t.handleGetLocalVideoStats),n.addListener(Tg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.addListener(Tg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.addListener(Tg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.addListener(Tg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.addListener(Tg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.addListener(Tg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.addListener(Tg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case Bg.LocalAudioTrack:t.bindLocalAudioTrackEvents(n);case Bg.LocalVideoLowTrack:}}))}},{key:"bindLocalAudioTrackEvents",value:function(e,t){var n=this;e instanceof OS?e.trackList.forEach((function(e){e.addListener(Tg.NEED_DISABLE_TRACK,n.handleMuteLocalTrack),e.addListener(Tg.NEED_ENABLE_TRACK,n.handleUnmuteLocalTrack),e.addListener(Tg.GET_STATS,n.handleGetLocalAudioStats),e.addListener(Tg.NEED_MUTE_TRACK,n.handleMuteLocalTrack),e.addListener(Tg.NEED_UNMUTE_TRACK,n.handleUnmuteLocalTrack)})):(e.addListener(Tg.GET_STATS,this.handleGetLocalAudioStats),e.addListener(Tg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(Tg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(Tg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(Tg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(Tg.NEED_REPLACE_TRACK,this.handleReplaceTrack))}},{key:"unbindLocalTrackEvents",value:function(e){var t=this;e||(e=Array.from(this.localTrackMap.entries()).map((function(e){var t=a(e,2),n=t[0];return{track:t[1].track,type:n}}))),e.forEach((function(e){var n=e.track;switch(e.type){case Bg.LocalVideoTrack:n.off(Tg.GET_STATS,t.handleGetLocalVideoStats),n.off(Tg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.off(Tg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.off(Tg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.off(Tg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.off(Tg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.off(Tg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.off(Tg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case Bg.LocalAudioTrack:t.unbindLocalAudioTrackEvents(n);case Bg.LocalVideoLowTrack:}}))}},{key:"unbindLocalAudioTrackEvents",value:function(e){var t=this;e instanceof OS?e.trackList.forEach((function(e){e.off(Tg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),e.off(Tg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),e.off(Tg.GET_STATS,t.handleGetLocalAudioStats),e.off(Tg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),e.off(Tg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack)})):(e.off(Tg.GET_STATS,this.handleGetLocalAudioStats),e.off(Tg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(Tg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(Tg.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(Tg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(Tg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}},{key:"bindRemoteTrackEvents",value:function(e,t){var n=this;t instanceof oO&&t.addListener(Tg.GET_STATS,(function(t){t(n.handleGetRemoteVideoStats(e))})),t instanceof aO&&t.addListener(Tg.GET_STATS,(function(t){t(n.handleGetRemoteAudioStats(e))}))}},{key:"unbindRemoteTrackEvents",value:function(e){e&&e.removeAllListeners(Tg.GET_STATS)}},{key:"unbindAllRemoteTrackEvents",value:function(){var e=this;Array.from(this.remoteUserMap.entries()).forEach((function(t){var n=a(t,2),r=n[0],i=n[1];i.has(Fg.AUDIO)&&e.unbindRemoteTrackEvents(r._audioTrack),i.has(Fg.VIDEO)&&e.unbindRemoteTrackEvents(r._videoTrack)}))}},{key:"createGatewayPublishMessage",value:function(e,t){var n=this;return e.map((function(e,r){var i,o,a=e.track;switch(e.type){case Bg.LocalAudioTrack:i=bg.Audio,o={dtx:a instanceof CS&&a._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Bg.LocalVideoTrack:i=a._hints.includes(Rg.SCREEN_TRACK)?bg.Screen:bg.High,o=CO(CO({},WS(a)),{},{codec:n.store.codec});break;case Bg.LocalVideoLowTrack:i=bg.Low,o=CO(CO({},WS(a)),{},{codec:n.store.codec})}return{stream_type:i,attributes:o,ssrcs:t[r]}}))}},{key:"createGatewayUnpublishMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Bg.LocalVideoTrack:t=o._hints.includes(Rg.SCREEN_TRACK)?bg.Screen:bg.High;break;case Bg.LocalAudioTrack:t=bg.Audio;break;case Bg.LocalVideoLowTrack:t=bg.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"assignLocalTracks",value:function(e,t){var n=this;e.forEach((function(e,r){var i=e.track,o=e.type;n.localTrackMap.set(o,{track:i,id:t[r].id,ssrcs:t[r].localSSRC})}))}},{key:"withdrawLocalTracks",value:function(e){var t=this;e.forEach((function(e){var n=a(e,1)[0];t.localTrackMap.delete(n)}))}},{key:"bindConnectionEvents",value:function(e){var t=this;e.onConnectionStateChange=function(){var n=u(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),t.emit(Gg.PeerConnectionStateChange,r),"connected"!==r||t.store.keyMetrics.peerConnectionEnd||t.store.peerConnectionEnd(),"disconnected"!==r||"disconnected"!==e.iceConnectionState){n.next=2;break}return n.abrupt("return",(setTimeout((function(){"disconnected"===e.iceConnectionState&&sm("ICE_RESTART")&&"CONNECTED"===cw(t,Gg.QueryClientConnectionState)&&t.emit(Gg.RequestRestartICE)}),800),void setTimeout((function(){"disconnected"===e.peerConnectionState&&(zv.debug("P2PConnection disconnected timeout 4000ms, force reconnect"),setTimeout((function(){return t.emit(Gg.P2PLost)}),0),t.iceFailedCount+=1,t.requestReconnect())}),4e3)));case 2:if(n.t0="failed"===r,!n.t0){n.next=9;break}return zv.debug("P2PConnection state failed, force reconnect"),setTimeout((function(){return t.emit(Gg.P2PLost)}),0),t.iceFailedCount+=1,n.next=9,t.requestReconnect();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.onICEConnectionStateChange=function(e){"connected"!==e||t.store.keyMetrics.iceConnectionEnd||t.store.iceConnectionEnd(),zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),V_.reportApiInvoke(t.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Ny.TRACER}).onSuccess(),t.emit(Gg.IceConnectionStateChange,e)},e.onICETransportStateChange=function(e){zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=function(e){zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=function(e){zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=function(e){var n,r,i=Array.from(w_(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));i&&(t.store.subscribe(i.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=i.audioTrack)||void 0===r||r.emit(Ag.FIRST_FRAME_DECODED),V_.firstRemoteFrame(t.store.sessionId,Ry.FIRST_AUDIO_DECODE,Cy.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:DS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId}))},e.onFirstAudioReceived=function(e){var n,r=Array.from(w_(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));r&&V_.firstRemoteFrame(t.store.sessionId,Ry.FIRST_AUDIO_RECEIVED,Cy.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:DS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onFirstVideoDecoded=function(e,n,r){t.reportVideoFirstFrameDecoded(e,n,r)},e.onFirstVideoReceived=function(e){var n,r=Array.from(w_(n=t.remoteUserMap).call(n)).find((function(t){return t._videoSSRC===e}));r&&V_.firstRemoteFrame(t.store.sessionId,Ry.FIRST_VIDEO_RECEIVED,Cy.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:DS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onSelectedLocalCandidateChanged=function(e,n){var r="relay"===e.candidateType,i="relay"===n.candidateType;"unknown"!==n.candidateType&&r===i||t.emit(Gg.ConnectionTypeChange,r),zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(ZS(n))," -> ").concat(JSON.stringify(ZS(e)),")"))},e.onSelectedRemoteCandidateChanged=function(e,n){zv.info("[p2pId: ".concat(t.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(ZS(n))," -> ").concat(JSON.stringify(ZS(e)),")"))},e.onFirstVideoDecodedTimeout=function(e){t.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}},{key:"unbindConnectionEvents",value:function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}},{key:"filterTobeMutedTracks",value:function(e){var t=[];if(-1===this.getAllTracks().indexOf(e))return t;var n=this.localTrackMap.get(Bg.LocalAudioTrack);if(e instanceof RS&&(null==n?void 0:n.track)instanceof OS)return n.track.isActive||t.push([Bg.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=a(t,2)[1].track;return e===n}));if(r&&(t.push(r),r[0]===Bg.LocalVideoTrack)){var i=this.localTrackMap.get(Bg.LocalVideoLowTrack);i&&t.push([Bg.LocalVideoLowTrack,i])}return t}},{key:"filterTobeUnmutedTracks",value:function(e){var t=[],n=this.localTrackMap.get(Bg.LocalAudioTrack);if(e instanceof RS&&(null==n?void 0:n.track)instanceof OS)return n.track.isActive&&t.push([Bg.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=a(t,2)[1].track;return e===n}));if(r)if(r[0]===Bg.LocalVideoTrack){t.push(r);var i=this.localTrackMap.get(Bg.LocalVideoLowTrack);i&&t.push([Bg.LocalVideoLowTrack,i])}else t.push(r);return t}},{key:"createMuteMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Bg.LocalAudioTrack:t=bg.Audio;break;case Bg.LocalVideoTrack:t=o._hints.includes(Rg.SCREEN_TRACK)?bg.Screen:bg.High;break;case Bg.LocalVideoLowTrack:t=bg.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"createUnmuteMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Bg.LocalAudioTrack:t=bg.Audio;break;case Bg.LocalVideoTrack:t=o._hints.includes(Rg.SCREEN_TRACK)?bg.Screen:bg.High;break;case Bg.LocalVideoLowTrack:t=bg.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"filterTobeUnSubscribedTracks",value:function(e,t){var n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){var i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((function(t){var r=a(t,2),i=r[0],o=r[1];n.push([e,{kind:i,id:o}])}));return n}},{key:"createUnsubscribeMessage",value:function(e){var t=[];return e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1],o=i.kind;switch(i.id,o){case Fg.VIDEO:return void(r._videoSSRC&&t.push({stream_type:Fg.VIDEO,ssrcId:r._videoSSRC}));case Fg.AUDIO:return void(r._audioSSRC&&t.push({stream_type:Fg.AUDIO,ssrcId:r._audioSSRC}))}})),t}},{key:"createUnsubscribeAllMessage",value:function(e){var t=new Map;return e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1].kind;if(t.has(r)){var o=t.get(r);i===Fg.VIDEO?o|=wg.Video:o|=wg.Audio,t.set(r,o)}else i===Fg.VIDEO?t.set(r,wg.Video):t.set(r,wg.Audio)})),{users:Array.from(t.entries()).map((function(e){var t=a(e,2),n=t[0],r=t[1];return{stream_id:n.uid,stream_type:r}}))}}},{key:"withdrawRemoteTracks",value:function(e){var t=this;e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1].kind,o=t.remoteUserMap.get(r);o&&(o.delete(i),0===Array.from(o.entries()).length&&t.remoteUserMap.delete(r))}))}},{key:"updateBitrateLimit",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localTrackMap.get(Bg.LocalVideoTrack),r=this.localTrackMap.get(Bg.LocalVideoLowTrack),e.t0=n,!e.t0){e.next=5;break}return e.next=5,n.track.setBitrateLimit(t.uplink);case 5:if(e.t1=r&&t.low_stream_uplink,!e.t1){e.next=9;break}return e.next=9,r.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isP2PDisconnected",value:function(){return!this.connection||"connected"!==this.connection.peerConnectionState}},{key:"mapPubResToRemoteConfig",value:function(e,t){return e.map((function(e,n){var r,i=e.stream_type;return null===(r=t.find((function(e){var t=e.stream_type;return i===t})))||void 0===r?void 0:r.attributes}))}},{key:"tryToUnmuteAudio",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=15;break}if(!(t[n]instanceof RS)){e.next=12;break}if(0!==(i=this.filterTobeUnmutedTracks(t[n])).length){e.next=6;break}return e.abrupt("continue",12);case 6:return e.next=8,null===(r=this.connection)||void 0===r?void 0:r.unmuteLocal(i.map((function(e){return a(e,2)[1].id})));case 8:return o=this.createUnmuteMessage(i),e.next=11,sw(this,Gg.RequestUnmuteLocal,o);case 11:return e.abrupt("return",void e.sent);case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bindStatsUploaderEvents",value:function(){var e=this;this.statsUploader.requestStats=function(){return e.getStats()},this.statsUploader.requestLocalMedia=function(){return Array.from(e.localTrackMap.entries())},this.statsUploader.requestRemoteMedia=function(){return Array.from(e.remoteUserMap.entries())},this.statsUploader.requestVideoIsReady=function(t){var n;return!(null===(n=e.connection)||void 0===n||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=function(t,n){return e.emit(Gg.RequestUploadStats,t,n)},this.statsUploader.requestAllTracks=function(){return e.getAllTracks()}}},{key:"unbindStatsUploaderEvents",value:function(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}},{key:"requestReconnect",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dtlsFailedCount+=1,e.next=3,$S(Vv(this.dtlsFailedCount,jv));case 3:this.emit(Gg.RequestReconnect);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnectP2P",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(t),Array.from(this.remoteUserMap.entries()),e.t0=n.length>0,!e.t0){e.next=6;break}return e.next=6,aw(this,Gg.RequestUnpublishForReconnectPC,n);case 6:this.disconnectForReconnect(),this.emit(Gg.RequestReconnectPC);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"canPublishLowStream",value:function(){return this.localTrackMap.has(Bg.LocalVideoTrack)||this.pendingLocalTracks.some((function(e){return e instanceof NT}))}},{key:"throwIfTrackTypeNotMatch",value:function(e){if(e.filter((function(e){return e instanceof NT})).length>1)throw new Uv(Dv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((function(e){return e instanceof RS})).length>1&&(e.some((function(e){return e instanceof RS&&e._bypassWebAudio}))||!rE().webAudioMediaStreamDest))throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof NT&&this.pendingLocalTracks.some((function(e){return e instanceof NT})))throw new Uv(Dv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof RS&&this.pendingLocalTracks.some((function(e){return e instanceof RS}))&&(!rE().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some((function(e){return e instanceof RS&&e._bypassWebAudio}))))throw new Uv(Dv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}catch(i){n.e(i)}finally{n.f()}}},{key:"getLowVideoTrack",value:function(e,t){var n,r=rE().supportDualStreamEncoding,i=CO(CO({},{width:160,height:120,framerate:15,bitrate:50}),t);n=r?e._mediaStreamTrack.clone():tO(e,i);var o=tw(8,"track-low-"),a=new NT(n,CO(CO({},r&&{scaleResolutionDownBy:qS(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,o);return a._hints.push(Rg.LOW_STREAM),e.addListener(Tg.NEED_CLOSE,(function(){a.close()})),a}},{key:"globalLock",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutex.lock("From P2PChannel.globalLock"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reportVideoFirstFrameDecoded",value:function(e,t,n,r){var i,o=Array.from(w_(i=this.remoteUserMap).call(i)).find((function(t){return t._videoSSRC===e}));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());var a=this.store.keyMetrics,s=a.subscribe.find((function(e){return e.userId===o.uid&&"video"===e.type}));V_.firstRemoteVideoDecode(this.store.sessionId,Ry.FIRST_VIDEO_DECODE,Cy.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:DS.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}},{key:"remoteMediaSsrcChanged",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",!1);case 5:if(o=i.get(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,this.connection.getRemoteSSRC(o);case 10:return a=e.sent,e.abrupt("return",void 0!==a&&a!==r);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"resetConnection",value:function(e){zv.debug("[P2PChannel] reset connection to ".concat(e)),this.state===Wg.Connected?(zv.debug("[P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first"),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===kg.datachannel?new kO({},this.store):this.isPlanB?new xI({},this.store):new $I({},this.store),this.bindConnectionEvents(this.connection)))}}]),n}(Lv)).prototype,"startP2PConnection",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"startP2PConnection"),wO.prototype),v_(wO.prototype,"connect",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"connect"),wO.prototype),v_(wO.prototype,"preConnect",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"preConnect"),wO.prototype),v_(wO.prototype,"unpublish",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"unpublish"),wO.prototype),v_(wO.prototype,"unpublishLowStream",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"unpublishLowStream"),wO.prototype),v_(wO.prototype,"subscribe",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"subscribe"),wO.prototype),v_(wO.prototype,"massSubscribe",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"massSubscribe"),wO.prototype),v_(wO.prototype,"unsubscribe",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"unsubscribe"),wO.prototype),v_(wO.prototype,"massUnsubscribe",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"massUnsubscribe"),wO.prototype),v_(wO.prototype,"muteRemote",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"muteRemote"),wO.prototype),v_(wO.prototype,"unmuteRemote",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"unmuteRemote"),wO.prototype),v_(wO.prototype,"hasRemoteMediaWithLock",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"hasRemoteMediaWithLock"),wO.prototype),v_(wO.prototype,"disconnectForReconnect",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"disconnectForReconnect"),wO.prototype),v_(wO.prototype,"updateBitrateLimit",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"updateBitrateLimit"),wO.prototype),v_(wO.prototype,"remoteMediaSsrcChanged",[DO],Object.getOwnPropertyDescriptor(wO.prototype,"remoteMediaSsrcChanged"),wO.prototype),wO);function DO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PChannel.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xO(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"}(AO||(AO={}));var LO,MO=function(){function e(t,n,r,i){h(this,e),xp(this,"state",void 0),this.state={codec:t,audioCodec:n,mode:r,clientId:i,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}return v(e,[{key:"dispatch",value:function(e){this.state=function(e,t){switch(t.type){case AO.SET_SESSION_ID:return PO(PO({},e),{},{sessionId:t.sessionId});case AO.SET_P2P_ID:return PO(PO({},e),{},{p2pId:t.p2pId});case AO.SET_UID:return PO(PO({},e),{},{uid:t.uid});case AO.SET_PUB_ID:return PO(PO({},e),{},{pubId:t.pubId});case AO.KEY_METRIC_CLIENT_CREATED:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{clientCreated:t.metric})});case AO.KEY_METRIC_JOIN_START:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{joinStart:t.metric})});case AO.AVOID_JOIN_START:return PO(PO({},e),{},{avoidJoinStart:t.avoidJoinStart});case AO.KEY_METRIC_JOIN_END:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{joinEnd:t.metric})});case AO.KEY_METRIC_REQUEST_AP_START:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{requestAPStart:t.metric})});case AO.KEY_METRIC_REQUEST_AP_END:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{requestAPEnd:t.metric})});case AO.KEY_METRIC_JOIN_GATEWAY_START:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case AO.KEY_METRIC_JOIN_GATEWAY_END:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case AO.KEY_METRIC_PEER_CONNECTION_START:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case AO.KEY_METRIC_PEER_CONNECTION_END:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case AO.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case AO.KEY_METRIC_ICE_CONNECTION_END:return PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case AO.KEY_METRIC_PUBLISH:var n=e.keyMetrics.publish,r=n.findIndex((function(e){return e.trackId===t.metric.trackId}));return-1!==r?(n[r]=PO(PO({},n[r]),t.metric),PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{publish:m(n)})})):PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{publish:[].concat(m(e.keyMetrics.publish),[t.metric])})});case AO.KEY_METRIC_SUBSCRIBE:var i=e.keyMetrics.subscribe,o=i.findIndex((function(e){return e.userId===t.metric.userId&&e.type===t.metric.type}));return-1!==o?(i[o]=PO(PO({},i[o]),t.metric),PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{subscribe:m(i)})})):PO(PO({},e),{},{keyMetrics:PO(PO({},e.keyMetrics),{},{subscribe:[].concat(m(e.keyMetrics.subscribe),[t.metric])})});case AO.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case AO.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[].concat(m(e.joinChannelServiceRecords),[t.record]):(e.joinChannelServiceRecords[t.index]=PO(PO({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=m(e.joinChannelServiceRecords)),e;case AO.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case AO.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case AO.SET_USE_DATACHANNEL:return PO(PO({},e),{},{useDataChannel:t.val});default:return e}}(this.state,e)}},{key:"sessionId",get:function(){return this.state.sessionId},set:function(e){this.dispatch({type:AO.SET_SESSION_ID,sessionId:e})}},{key:"codec",get:function(){return this.state.codec}},{key:"audioCodec",get:function(){return this.state.audioCodec}},{key:"clientId",get:function(){return this.state.clientId}},{key:"p2pId",get:function(){return this.state.p2pId},set:function(e){this.dispatch({type:AO.SET_P2P_ID,p2pId:e})}},{key:"dcId",get:function(){return this.state.dcId},set:function(e){this.dispatch({type:AO.SET_DC_ID,dcId:e})}},{key:"uid",get:function(){return this.state.uid},set:function(e){this.dispatch({type:AO.SET_UID,uid:e})}},{key:"pubId",get:function(){return this.state.pubId},set:function(e){this.dispatch({type:AO.SET_PUB_ID,pubId:e})}},{key:"cloudProxyServerMode",get:function(){return this.state.cloudProxyServerMode},set:function(e){this.dispatch({type:AO.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}},{key:"useDataChannel",get:function(){return this.state.useDataChannel},set:function(e){this.dispatch({type:AO.SET_USE_DATACHANNEL,val:e})}},{key:"clientCreated",value:function(){this.dispatch({type:AO.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}},{key:"joinStart",value:function(){this.dispatch({type:AO.KEY_METRIC_JOIN_START,metric:Date.now()})}},{key:"joinEnd",value:function(){this.dispatch({type:AO.KEY_METRIC_JOIN_END,metric:Date.now()})}},{key:"requestAPStart",value:function(){this.dispatch({type:AO.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}},{key:"requestAPEnd",value:function(){this.dispatch({type:AO.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}},{key:"joinGatewayStart",value:function(){this.dispatch({type:AO.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}},{key:"joinGatewayEnd",value:function(){this.dispatch({type:AO.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}},{key:"peerConnectionStart",value:function(){this.dispatch({type:AO.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}},{key:"peerConnectionEnd",value:function(){this.dispatch({type:AO.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}},{key:"signalChannelOpen",value:function(){this.dispatch({type:AO.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}},{key:"iceConnectionEnd",value:function(){this.dispatch({type:AO.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}},{key:"publish",value:function(e,t,n,r){this.dispatch({type:AO.KEY_METRIC_PUBLISH,metric:PO(PO({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}},{key:"subscribe",value:function(e,t,n,r,i,o,a){this.dispatch({type:AO.KEY_METRIC_SUBSCRIBE,metric:PO(PO(PO(PO(PO({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}},{key:"massSubscribe",value:function(e,t,n,r){var i=this;e.forEach((function(e){i.dispatch({type:AO.KEY_METRIC_SUBSCRIBE,metric:PO(PO(PO({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}},{key:"keyMetrics",get:function(){return this.state.keyMetrics}},{key:"recordJoinChannelService",value:function(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((function(e){return e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")})));try{return"number"!=typeof t?(this.dispatch({type:AO.RECORD_JOIN_CHANNEL_SERVICE,record:PO(PO({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:AO.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}},{key:"resetJoinChannelServiceRecords",value:function(){this.dispatch({type:AO.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}},{key:"resetKeyMetrics",value:function(){this.dispatch({type:AO.RESET_KEY_METRICS})}},{key:"joinChannelServiceRecords",get:function(){try{return this.state.joinChannelServiceRecords}catch(b){return[]}}},{key:"avoidJoinStart",get:function(){return this.state.avoidJoinStart},set:function(e){this.dispatch({type:AO.AVOID_JOIN_START,avoidJoinStart:e})}}]),e}(),UO=function(){return"HTTPS"===(LO||LO||(LO=(window.location.protocol.split(":")[0]||"").toUpperCase()))},jO=function(){return void 0!==window.isSecureContext};function VO(e){var t=XO();return function(e,t){var n=e.appId;void 0!==n&&(lA(t,10),rA(t,n));var r=e.cid;void 0!==r&&(lA(t,16),lA(t,r));var i=e.cname;void 0!==i&&(lA(t,26),rA(t,i));var o=e.deviceId;void 0!==o&&(lA(t,34),rA(t,o));var a=e.elapse;void 0!==a&&(lA(t,40),dA(t,a));var c=e.fileSize;void 0!==c&&(lA(t,48),dA(t,qO(c)));var u=e.height;void 0!==u&&(lA(t,56),dA(t,qO(u)));var l=e.jpg;void 0!==l&&(lA(t,66),lA(t,l.length),function(e,t){var n=eA(e,t.length);e.bytes.set(t,n)}(t,l));var d=e.networkType;void 0!==d&&(lA(t,72),dA(t,qO(d)));var f=e.osType;void 0!==f&&(lA(t,80),dA(t,qO(f)));var p=e.requestId;void 0!==p&&(lA(t,90),rA(t,p));var h=e.sdkVersion;void 0!==h&&(lA(t,98),rA(t,h));var v=e.sequence;void 0!==v&&(lA(t,104),dA(t,qO(v)));var m=e.sid;void 0!==m&&(lA(t,114),rA(t,m));var y=e.timestamp;void 0!==y&&(lA(t,120),dA(t,y));var g=e.uid;void 0!==g&&(lA(t,128),lA(t,g));var E=e.vid;void 0!==E&&(lA(t,136),lA(t,E));var _=e.width;void 0!==_&&(lA(t,144),dA(t,qO(_)));var b=e.service;void 0!==b&&(lA(t,152),lA(t,b));var S=e.callbackData;void 0!==S&&(lA(t,162),rA(t,S));var w=e.jpgEncryption;void 0!==w&&(lA(t,168),lA(t,w));var k=e.requestType;void 0!==k&&(lA(t,176),lA(t,k));var T=e.scorePorn;void 0!==T&&(lA(t,185),cA(t,T));var R=e.scoreSexy;void 0!==R&&(lA(t,193),cA(t,R));var C=e.scoreNeutral;void 0!==C&&(lA(t,201),cA(t,C));var I=e.scene;void 0!==I&&(lA(t,208),lA(t,I));var O=e.ossFilePrefix;void 0!==O&&(lA(t,218),rA(t,O));var A=e.serviceVendor;if(void 0!==A){var N,D=s(A);try{for(D.s();!(N=D.n()).done;){var x=N.value;lA(t,226);var P=XO();WO(x,P),lA(t,P.limit),iA(t,P),JO(P)}}catch(L){D.e(L)}finally{D.f()}}}(e,t),function(e){var t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function FO(e){return function(e){var t={};e:for(;!$O(e);){var n=uA(e);switch(n>>>3){case 0:break e;case 1:t.code=uA(e);break;case 2:t.msg=nA(e,uA(e));break;case 3:var r=GO(e);t.data=BO(e),e.limit=r;break;default:HO(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function BO(e){var t={};e:for(;!$O(e);){var n=uA(e);switch(n>>>3){case 0:break e;case 1:t.requestId=nA(e,uA(e));break;case 2:t.requestType=uA(e)>>>0;break;case 3:t.scorePorn=sA(e);break;case 4:t.scoreSexy=sA(e);break;case 5:t.scoreNeutral=sA(e);break;case 6:t.requestScene=uA(e)>>>0;break;case 7:t.scene=uA(e)>>>0;break;default:HO(e,7&n)}}return t}function WO(e,t){var n=e.service;void 0!==n&&(lA(t,8),lA(t,n));var r=e.vendor;void 0!==r&&(lA(t,16),lA(t,r));var i=e.token;void 0!==i&&(lA(t,26),rA(t,i));var o=e.callbackUrl;void 0!==o&&(lA(t,34),rA(t,o))}function GO(e){var t=uA(e),n=e.limit;return e.limit=e.offset+t,n}function HO(e,t){switch(t){case 0:for(;128&oA(e););break;case 2:QO(e,uA(e));break;case 5:QO(e,4);break;case 1:QO(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var KO=new Float32Array(1);new Uint8Array(KO.buffer);var zO=new Float64Array(1),YO=new Uint8Array(zO.buffer);function qO(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var ZO=[];function XO(){var e=ZO.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function JO(e){ZO.push(e)}function QO(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function $O(e){return e.offset>=e.limit}function eA(e,t){var n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){var a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function tA(e,t){var n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function nA(e,t){for(var n=tA(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="",s=0;s<t;s++){var c=void 0,u=void 0,l=void 0,d=void 0,f=i[s+n];0==(128&f)?a+=r(f):192==(224&f)?s+1>=t||128!=(192&(c=i[s+n+1]))||(d=(31&f)<<6|63&c)<128?a+=o:(a+=r(d),s++):224==(240&f)?s+2>=t||32896!=(49344&((c=i[s+n+1])|(u=i[s+n+2])<<8))||(d=(15&f)<<12|(63&c)<<6|63&u)<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2):240==(248&f)?s+3>=t||8421504!=(12632256&((c=i[s+n+1])|(u=i[s+n+2])<<8|(l=i[s+n+3])<<16))||(d=(7&f)<<18|(63&c)<<12|(63&u)<<6|63&l)<65536||d>1114111?a+=o:(a+=r(55296+((d-=65536)>>10),56320+(1023&d)),s+=3):a+=o}return a}function rA(e,t){for(var n=t.length,r=0,i=0;i<n;i++){var o=t.charCodeAt(i);o>=55296&&o<=56319&&i+1<n&&(o=(o<<10)+t.charCodeAt(++i)-56613888),r+=o<128?1:o<2048?2:o<65536?3:4}lA(e,r);for(var a=eA(e,r),s=e.bytes,c=0;c<n;c++){var u=t.charCodeAt(c);u>=55296&&u<=56319&&c+1<n&&(u=(u<<10)+t.charCodeAt(++c)-56613888),u<128?s[a++]=u:(u<2048?s[a++]=u>>6&31|192:(u<65536?s[a++]=u>>12&15|224:(s[a++]=u>>18&7|240,s[a++]=u>>12&63|128),s[a++]=u>>6&63|128),s[a++]=63&u|128)}}function iA(e,t){for(var n=eA(e,t.limit),r=e.bytes,i=t.bytes,o=0,a=t.limit;o<a;o++)r[o+n]=i[o]}function oA(e){return e.bytes[tA(e,1)]}function aA(e,t){var n=eA(e,1);e.bytes[n]=t}function sA(e){var t=tA(e,8),n=e.bytes;return YO[0]=n[t++],YO[1]=n[t++],YO[2]=n[t++],YO[3]=n[t++],YO[4]=n[t++],YO[5]=n[t++],YO[6]=n[t++],YO[7]=n[t++],zO[0]}function cA(e,t){var n=eA(e,8),r=e.bytes;zO[0]=t,r[n++]=YO[0],r[n++]=YO[1],r[n++]=YO[2],r[n++]=YO[3],r[n++]=YO[4],r[n++]=YO[5],r[n++]=YO[6],r[n++]=YO[7]}function uA(e){var t,n=0,r=0;do{t=oA(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function lA(e,t){for(t>>>=0;t>=128;)aA(e,127&t|128),t>>>=7;aA(e,t)}function dA(e,t){var n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=eA(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}var fA=function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){var t="0123456789abcdef";function n(e){var n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,a)),o),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}var u,l,d,f,p,h=function(e){var t,n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e),v=1732584193,m=-271733879,y=-1732584194,g=271733878;for(u=0;u<h.length;u+=16)l=v,d=m,f=y,p=g,v=o(v,m,y,g,h[u+0],7,-680876936),g=o(g,v,m,y,h[u+1],12,-389564586),y=o(y,g,v,m,h[u+2],17,606105819),m=o(m,y,g,v,h[u+3],22,-1044525330),v=o(v,m,y,g,h[u+4],7,-176418897),g=o(g,v,m,y,h[u+5],12,1200080426),y=o(y,g,v,m,h[u+6],17,-1473231341),m=o(m,y,g,v,h[u+7],22,-45705983),v=o(v,m,y,g,h[u+8],7,1770035416),g=o(g,v,m,y,h[u+9],12,-1958414417),y=o(y,g,v,m,h[u+10],17,-42063),m=o(m,y,g,v,h[u+11],22,-1990404162),v=o(v,m,y,g,h[u+12],7,1804603682),g=o(g,v,m,y,h[u+13],12,-40341101),y=o(y,g,v,m,h[u+14],17,-1502002290),v=a(v,m=o(m,y,g,v,h[u+15],22,1236535329),y,g,h[u+1],5,-165796510),g=a(g,v,m,y,h[u+6],9,-1069501632),y=a(y,g,v,m,h[u+11],14,643717713),m=a(m,y,g,v,h[u+0],20,-373897302),v=a(v,m,y,g,h[u+5],5,-701558691),g=a(g,v,m,y,h[u+10],9,38016083),y=a(y,g,v,m,h[u+15],14,-660478335),m=a(m,y,g,v,h[u+4],20,-405537848),v=a(v,m,y,g,h[u+9],5,568446438),g=a(g,v,m,y,h[u+14],9,-1019803690),y=a(y,g,v,m,h[u+3],14,-187363961),m=a(m,y,g,v,h[u+8],20,1163531501),v=a(v,m,y,g,h[u+13],5,-1444681467),g=a(g,v,m,y,h[u+2],9,-51403784),y=a(y,g,v,m,h[u+7],14,1735328473),v=s(v,m=a(m,y,g,v,h[u+12],20,-1926607734),y,g,h[u+5],4,-378558),g=s(g,v,m,y,h[u+8],11,-2022574463),y=s(y,g,v,m,h[u+11],16,1839030562),m=s(m,y,g,v,h[u+14],23,-35309556),v=s(v,m,y,g,h[u+1],4,-1530992060),g=s(g,v,m,y,h[u+4],11,1272893353),y=s(y,g,v,m,h[u+7],16,-155497632),m=s(m,y,g,v,h[u+10],23,-1094730640),v=s(v,m,y,g,h[u+13],4,681279174),g=s(g,v,m,y,h[u+0],11,-358537222),y=s(y,g,v,m,h[u+3],16,-722521979),m=s(m,y,g,v,h[u+6],23,76029189),v=s(v,m,y,g,h[u+9],4,-640364487),g=s(g,v,m,y,h[u+12],11,-421815835),y=s(y,g,v,m,h[u+15],16,530742520),v=c(v,m=s(m,y,g,v,h[u+2],23,-995338651),y,g,h[u+0],6,-198630844),g=c(g,v,m,y,h[u+7],10,1126891415),y=c(y,g,v,m,h[u+14],15,-1416354905),m=c(m,y,g,v,h[u+5],21,-57434055),v=c(v,m,y,g,h[u+12],6,1700485571),g=c(g,v,m,y,h[u+3],10,-1894986606),y=c(y,g,v,m,h[u+10],15,-1051523),m=c(m,y,g,v,h[u+1],21,-2054922799),v=c(v,m,y,g,h[u+8],6,1873313359),g=c(g,v,m,y,h[u+15],10,-30611744),y=c(y,g,v,m,h[u+6],15,-1560198380),m=c(m,y,g,v,h[u+13],21,1309151649),v=c(v,m,y,g,h[u+4],6,-145523070),g=c(g,v,m,y,h[u+11],10,-1120210379),y=c(y,g,v,m,h[u+2],15,718787259),m=c(m,y,g,v,h[u+9],21,-343485551),v=r(v,l),m=r(m,d),y=r(y,f),g=r(g,p);return n(v)+n(m)+n(y)+n(g)}(""+n+r)).slice(0,16),o=i.slice(0,12),e.next=4,window.crypto.subtle.importKey("raw",i,"AES-GCM",!0,["encrypt"]);case 4:return a=e.sent,e.t0=Uint8Array,e.next=8,window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,t);case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function pA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hA,vA,mA,yA,gA,EA,_A,bA,SA,wA,kA,TA,RA,CA,IA,OA,AA,NA,DA,xA,PA,LA,MA,UA,jA,VA,FA,BA,WA,GA,HA,KA,zA,YA,qA,ZA,XA,JA,QA,$A=new Map([["moderation",1],["supervise",2]]),eN=function(e){f(n,e);var t=p(n);function n(e){var r;return h(this,n),r=t.call(this),xp(l(r),"name","AgoraRTCVideoContentInspect"),xp(l(r),"_connectionState",qg.CONNECTING),xp(l(r),"_innerConnectionState",void 0),xp(l(r),"sequence",0),xp(l(r),"inspectStartTime",void 0),xp(l(r),"workerManagerConnection",void 0),xp(l(r),"workerConnection",void 0),xp(l(r),"workerMessageLengthLimit",void 0),xp(l(r),"inspectIntervalMinimum",void 0),xp(l(r),"qualityRatio",void 0),xp(l(r),"_connectInfo",void 0),xp(l(r),"_cancelTokenSource",xv.CancelToken.source()),xp(l(r),"_retryConfig",void 0),xp(l(r),"wmSequence",0),xp(l(r),"inspectInterval",void 0),xp(l(r),"inspectTimer",null),xp(l(r),"ossFilePrefix",void 0),xp(l(r),"extraInfo",void 0),xp(l(r),"_inspectType",void 0),xp(l(r),"_inspectMode",void 0),xp(l(r),"_quality",1),xp(l(r),"qualityTimer",null),xp(l(r),"_inspectId",void 0),xp(l(r),"_needWorkUrlOnly",!1),xp(l(r),"inspectImage",(function(){if(r.connectionState!==qg.CONNECTED)throw new Uv(Dv.OPERATION_ABORTED,"content inspect service connection status is ".concat(r.connectionState));r.inspectTimer&&(window.clearInterval(r.inspectTimer),r.inspectTimer=null),r.inspectTimer=window.setInterval((function(){r.connectionState===qg.CONNECTED?r.requestToInspectImage():zv.debug("[".concat(r._inspectId,"] Inspect State is not connected , "),r.connectionState)}),r.inspectInterval<r.inspectIntervalMinimum?r.inspectIntervalMinimum:r.inspectInterval),r.requestToInspectImage()})),r._inspectId=tw(5,"inspect-"),r.workerMessageLengthLimit=sm("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),r.inspectIntervalMinimum=sm("VIDEO_INSPECT_INTERVAL_MINIMUM"),r.qualityRatio=sm("VIDEO_INSPECT_QUALITY_RATIO"),r.inspectInterval=e.interval,r.ossFilePrefix=e.ossFilePrefix,r.extraInfo=e.extraInfo,r.inspectType=e.inspectType,r.inspectStartTime=Number(Date.now()),r.workerManagerConnection=new Cw("worker-manager-"+r._inspectId,jv),r.on(Xg.STATE_CHANGE,(function(e,t){r._innerConnectionState=e,zv.debug("[".concat(r._inspectId,"] Inspect operation :").concat(Zg[e]," ").concat(t||""))})),r.handleWorkerManagerEvents(),r.workerConnection=new Cw("worker-"+r._inspectId,jv),r.handleWorkerEvents(),r}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){if(this._connectionState!==e){var t=this._connectionState;this._connectionState=e,this.emit(Xg.CONNECTION_STATE_CHANGE,t,e)}}},{key:"inspectType",get:function(){return this._inspectType},set:function(e){var t;this._inspectMode=gr(t=e.map((function(e){return $A.get(e)||0}))).call(t,(function(e,t){return e+t})),this._inspectType=e}},{key:"quality",get:function(){return this._quality},set:function(e){var t=this;this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((function(){t.quality=t._quality/t.qualityRatio}),6e4))}},{key:"init",value:function(){var e=u(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(Xg.STATE_CHANGE,Zg.CONNECT_AP),this._connectInfo=t,r=this._cancelTokenSource.token,e.abrupt("return",(this._retryConfig=n,new Vd((function(e,o){i.on(Xg.CONNECTION_STATE_CHANGE,(function(t,n){n===qg.CONNECTED&&e()})),i.requestAP(t,r,n).then((function(e){i.connectWorkerManager(e)})).catch((function(e){o(e)}))}))));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestAP",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sm("WEBCS_DOMAIN").map((function(e){return"https://".concat(e,"/api/v1")})),e.next=3,function(e,t,n,r){var i=t.appId,o=t.areaCode,a=t.cname,s=t.sid,l=t.token,d=t.uid;uk++;var f,p,h="image_moderation_api",v={service_name:h,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:uk,seq:uk,sid:s,token:l,ts:Date.now(),uid:d+""})},m=e[0];return Fv(u(c().mark((function e(){var t,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=Date.now(),e.next=3,R_(m,{data:v,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});case 3:if(t=e.sent,p=Date.now()-f,0===t.code){e.next=7;break}throw r=new Uv(Dv.UNEXPECTED_RESPONSE,"image inspect ap error, code"+t.code,{retry:!0,responseTime:p}),zv.error(r.toString()),r;case 7:if(200===(i=JSON.parse(t.json_body)).code){e.next=11;break}throw o=new Uv(Dv.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(i.code,", reason: ").concat(i.reason),{code:i.code,responseTime:p}),zv.error(o.toString()),o;case 11:if(i.servers&&Array.isArray(i.servers)&&0!==i.servers.length){e.next=14;break}throw a=new Uv(Dv.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:i.code,responseTime:p}),zv.error(a.toString()),a;case 14:return s=sm("VIDEO_INSPECT_WORKER_MANAGER_HOST"),u=sm("VIDEO_INSPECT_WORKER_MANAGER_PORT"),e.abrupt("return",{addressList:i.servers.map((function(e){var t=e.address,n=e.wss;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(s,":").concat(u||n)})).filter((function(e){return!!e})),workerToken:i.workerToken,vid:i.vid,responseTime:p});case 16:case"end":return e.stop()}}),e)}))),(function(t,n){return V_.apworkerEvent(s,{success:!0,sc:200,serviceName:h,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1}),(function(t,n){return V_.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:h,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==Dv.OPERATION_ABORTED&&t.code!==Dv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(m=e[(n+1)%e.length],!0)}),r)}(i,t,n,r);case 3:return o=e.sent,this.emit(Xg.STATE_CHANGE,Zg.AP_CONNECTED),a=o.addressList,e.abrupt("return",(this.wmSequence++,a));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"connectWorkerManager",value:function(){var e=u(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],this._needWorkUrlOnly=n,this.emit(Xg.STATE_CHANGE,Zg.CONNECT_WORKER_MANAGER),e.next=5,this.workerManagerConnection.init(t,1e4);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connectWorker",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerConnection.init([t]);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleWorkerManagerEvents",value:function(){var e=this;this.workerManagerConnection.on(ng.CONNECTED,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(Xg.STATE_CHANGE,Zg.WORKER_MANAGER_CONNECTED,e.workerManagerConnection.url),e.workerManagerConnection.sendMessage({appId:e._connectInfo.appId,cname:e._connectInfo.cname,uid:e._connectInfo.uid+"",sdkVersion:"4.17.0",sid:e._connectInfo.sid,seq:e.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0);case 1:case"end":return t.stop()}}),t)})))),this.workerManagerConnection.on(ng.CLOSED,(function(){e._innerConnectionState<Zg.GET_WORKER_MANAGER_RESPONSE&&zv.debug("[".concat(e._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(ng.FAILED,(function(){e._innerConnectionState<Zg.GET_WORKER_MANAGER_RESPONSE&&zv.debug("[".concat(e._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(ng.RECONNECTING,(function(){e._innerConnectionState<Zg.GET_WORKER_MANAGER_RESPONSE&&zv.debug("[".concat(e._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(ng.ON_MESSAGE,function(){var t=u(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.emit(Xg.STATE_CHANGE,Zg.GET_WORKER_MANAGER_RESPONSE),r=e.workerManagerConnection.url,e.workerManagerConnection.close(),200===(i=JSON.parse(n.data)).code){t.next=6;break}throw zv.error("[".concat(e._inspectId,"] Unexpected code ").concat(i.code," from worker manager")),new Uv(Dv.UNEXPECTED_RESPONSE,"response code of worker is unexpected",i);case 6:if(i.serverResponse&&i.serverResponse.portWss&&r){t.next=8;break}throw zv.error("[".concat(e._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(i))),new Uv(Dv.UNEXPECTED_RESPONSE,"response content of worker is unexpected",i);case 8:if(o=sm("VIDEO_INSPECT_WORKER_PORT")||i.serverResponse.portWss,a=r.replace(/:\d+\/?$/,":".concat(o)),e.emit(Xg.STATE_CHANGE,Zg.CONNECT_WORKER,a),!e._needWorkUrlOnly){t.next=14;break}e.emit(Xg.REQUEST_NEW_WORKER_URL,a),t.next=16;break;case 14:return t.next=16,e.connectWorker(a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerManagerConnection.on(ng.WILL_RECONNECT,(function(e,t){t(e)})),this.workerManagerConnection.on(ng.REQUEST_NEW_URLS,(function(t,n){e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then(t).catch(n)}))}},{key:"handleWorkerEvents",value:function(){var e=this;this.workerConnection.on(ng.CONNECTED,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(Xg.STATE_CHANGE,Zg.WORKER_CONNECTED,e.workerConnection.url),e.connectionState=qg.CONNECTED;case 1:case"end":return t.stop()}}),t)})))),this.workerConnection.on(ng.ON_MESSAGE,function(){var t=u(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.data instanceof ArrayBuffer)){t.next=11;break}if(r=FO(new Uint8Array(n.data)),sm("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&zv.debug("[".concat(e._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),200!==r.code){t.next=8;break}if(!Array.isArray(e.inspectType)||1!==e.inspectType.length||"supervise"!==e.inspectType[0]){t.next=5;break}return t.abrupt("return",void e.emit(Xg.INSPECT_RESULT,void 0,void 0));case 5:r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral?(o={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},a=gr(i=Object.keys(o)).call(i,(function(e,t){return o[e]>o[t]?e:t}),"porn"),s=Object.keys(o).find((function(e){return e===a})),e.emit(Xg.INSPECT_RESULT,s)):e.emit(Xg.INSPECT_RESULT,void 0,new Uv(Dv.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message")),t.next=9;break;case 8:e.emit(Xg.INSPECT_RESULT,void 0,new Uv(Dv.UNEXPECTED_RESPONSE,r.code+"",r.msg));case 9:t.next=12;break;case 11:zv.error("[".concat(e._inspectId,"] Unexpected message type from worker")),e.emit(Xg.INSPECT_RESULT,void 0,new Uv(Dv.UNEXPECTED_RESPONSE,"invalid worker message type"));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerConnection.on(ng.CLOSED,(function(){e.connectionState=qg.CLOSED})),this.workerConnection.on(ng.FAILED,(function(){e.connectionState=qg.CLOSED})),this.workerConnection.on(ng.RECONNECTING,(function(){e.connectionState=e.connectionState===qg.CONNECTED?qg.RECONNECTING:qg.CONNECTING})),this.workerConnection.on(ng.WILL_RECONNECT,(function(e,t){"recover"===e&&t(e),t("tryNext")})),this.workerConnection.on(ng.REQUEST_NEW_URLS,(function(t,n){e.workerManagerConnection.close(),e.once(Xg.REQUEST_NEW_WORKER_URL,(function(e){t([e])})),e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then((function(t){e.connectWorkerManager(t,!0)})).catch((function(e){n(e)}))}))}},{key:"requestToInspectImage",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sequence++,t=cw(this,Xg.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid},!t){e.next=11;break}if(t.isPlaying){e.next=5;break}return e.abrupt("return",void this.emit(Xg.INSPECT_RESULT,void 0,new Uv(Dv.INVALID_OPERATION,"Only the track being played can be inspected")));case 5:return e.next=7,this.generateRequestData(t,n);case 7:r=e.sent,this.workerConnection.sendMessage(r,!0,!0),e.next=12;break;case 11:this.emit(Xg.INSPECT_RESULT,void 0,new Uv(Dv.INVALID_OPERATION,"Only the track being published can be inspected"));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateRequestData",value:function(){var e=u(c().mark((function e(t,r){var i,o,a,s,l,d,f,p,h,v,m,y,g,E;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.appId,o=r.cname,a=r.cid,s=r.vid,l=r.sid,d=r.uid,f=Date.now(),e.next=4,t.getCurrentFrameImage("image/jpeg",this.quality);case 4:return p=e.sent,e.next=7,function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fA(t.buffer,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(p,i,o);case 7:if(h=e.sent,v=this.sequence+"-"+a+"-"+d+"-"+f+"-"+tw(12,""),m={appId:i,cid:a,cname:o,deviceId:"",elapse:n.intToLong(Number(f-this.inspectStartTime)),fileSize:h.byteLength,jpgEncryption:2,height:p.height,width:p.width,jpg:h,networkType:6,osType:7,requestId:v,sdkVersion:"4.17.0",sequence:this.sequence,sid:l,timestamp:n.intToLong(f),uid:d,vid:s,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix},void 0===this.extraInfo&&delete m.callbackData,void 0===this.ossFilePrefix&&delete m.ossFilePrefix,!((y=VO(m)).byteLength<this.workerMessageLengthLimit)){e.next=15;break}return sm("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&(g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pA(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m),delete g.jpg,zv.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(g))),e.abrupt("return",y);case 15:return E=this.quality*this.qualityRatio,this.quality=E,e.next=19,this.generateRequestData(t,{appId:i,cname:o,cid:a,vid:s,sid:l,uid:d});case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){this._cancelTokenSource.cancel(),this._cancelTokenSource=xv.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=qg.CLOSED,this.emit(Xg.STATE_CHANGE,Zg.CLOSED)}}],[{key:"intToLong",value:function(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}}]),n}(Lv);function tN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tN(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rN=(hA=j_(),vA=j_({argsMap:function(e,t){return Array.isArray(t)||(t=[t]),t.map((function(e){return e?Object(e).toString():"null"}))}}),mA=j_({argsMap:function(e,t){return t||(t=[]),Array.isArray(t)||(t=[t]),t.map((function(e){return e.getTrackId()}))}}),yA=j_({argsMap:function(e,t,n){return[t.uid,n]}}),gA=j_({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return[null==t?void 0:t.uid,n]}))}}),EA=j_({argsMap:function(e,t,n){return[t.uid,n]}}),_A=j_({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return{uid:null==t?void 0:t.uid,mediaType:n}}))}}),bA=j_(),SA=j_(),wA=j_(),kA=j_(),TA=j_(),RA=j_(),CA=j_(),IA=j_(),OA=j_(),AA=j_(),NA=j_(),DA=j_(),xA=j_(),PA=j_(),LA=j_({argsMap:function(e,t){return[t]}}),MA=j_(),UA=j_(),jA=j_(),VA=j_(),FA=j_(),BA=j_(),WA=j_(),GA=j_(),HA=j_(),KA=j_(),zA=j_({argsMap:function(e,t){return Array.isArray(t)||(t=[t]),[JSON.stringify(t)]}}),YA=j_(),qA=j_(),ZA=j_(),XA=j_({reportResult:!0}),JA=j_(),v_((QA=function(e){f(n,e);var t=p(n);function n(e){var i,o;if(h(this,n),i=t.call(this),xp(l(i),"store",void 0),xp(l(i),"_uid",void 0),xp(l(i),"_channelName",void 0),xp(l(i),"_uintUid",void 0),xp(l(i),"_users",[]),xp(l(i),"_codec",void 0),xp(l(i),"_mode",void 0),xp(l(i),"_config",void 0),xp(l(i),"_clientId",void 0),xp(l(i),"_appId",void 0),xp(l(i),"_sessionId",null),xp(l(i),"_key",void 0),xp(l(i),"_joinInfo",void 0),xp(l(i),"_gateway",void 0),xp(l(i),"_statsCollector",void 0),xp(l(i),"_configDistribute",void 0),xp(l(i),"_leaveMutex",new G_("client-leave")),xp(l(i),"_publishMutex",new G_("client-publish")),xp(l(i),"_renewTokenMutex",new G_("client-renewtoken")),xp(l(i),"_subscribeMutex",new G_("client-subscribe")),xp(l(i),"_encryptionMode","none"),xp(l(i),"_encryptionSecret",null),xp(l(i),"_encryptionSalt",null),xp(l(i),"_proxyServer",void 0),xp(l(i),"_turnServer",{servers:[],mode:"auto"}),xp(l(i),"_cloudProxyServerMode","disabled"),xp(l(i),"_isDualStreamEnabled",!1),xp(l(i),"_defaultStreamFallbackType",void 0),xp(l(i),"_lowStreamParameter",void 0),xp(l(i),"_streamFallbackTypeCacheMap",new Map),xp(l(i),"_remoteStreamTypeCacheMap",new Map),xp(l(i),"_axiosCancelSource",xv.CancelToken.source()),xp(l(i),"_audioVolumeIndicationInterval",void 0),xp(l(i),"_networkQualityInterval",void 0),xp(l(i),"_userOfflineTimeout",void 0),xp(l(i),"_streamRemovedTimeout",void 0),xp(l(i),"_injectStreamingClient",void 0),xp(l(i),"_liveTranscodeStreamingClient",void 0),xp(l(i),"_liveRawStreamingClient",void 0),xp(l(i),"_channelMediaRelayClient",void 0),xp(l(i),"_networkQualitySensitivity","normal"),xp(l(i),"_p2pChannel",void 0),xp(l(i),"_useLocalAccessPoint",!1),xp(l(i),"_setLocalAPVersion",void 0),xp(l(i),"_joinAndNotLeaveYet",!1),xp(l(i),"_numberOfJoinCount",0),xp(l(i),"_remoteDefaultVideoStreamType",void 0),xp(l(i),"_inspect",void 0),xp(l(i),"_license",void 0),xp(l(i),"_handleLocalTrackEnable",(function(e,t,n){i.publish(e,!1).then(t).catch(n)})),xp(l(i),"_handleLocalTrackDisable",(function(e,t,n){i.unpublish(e).then(t).catch(n)})),xp(l(i),"_handleUserOnline",(function(e){i.isStringUID&&"string"!=typeof e.uid&&zv.error("[".concat(i._clientId,"] StringUID is Mixed with UintUID"));var t=i._users.find((function(t){return t.uid===e.uid}));if(t)t._trust_in_room_=!0;else{var n=new xT(e.uid,e.uint_id||e.uid);i._users.push(n),zv.debug("[".concat(i._clientId,"] user online"),e.uid),i.emit(By.USER_JOINED,n)}})),xp(l(i),"_handleUserOffline",(function(e){var t=i._users.find((function(t){return t.uid===e.uid}));t&&(i._handleRemoveStream(e),lw(i._users,t),i._remoteStreamTypeCacheMap.delete(t.uid),i._streamFallbackTypeCacheMap.delete(t.uid),zv.debug("[".concat(i._clientId,"] user offline"),e.uid,"reason:",e.reason),i.emit(By.USER_LEAVED,t,e.reason))})),xp(l(i),"_handleAddAudioOrVideoStream",(function(e,t,n,r,o,a,s){var c=i._users.find((function(e){return e.uid===t}));if(c){zv.debug("[".concat(i._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),i.store.subscribe(c.uid,e,void 0,void 0,void 0,Date.now());var u="audio"===e?c.hasAudio:c.hasVideo;c._uintid||(c._uintid=o||t),"audio"===e?c._trust_audio_stream_added_state_=!0:c._trust_video_stream_added_state_=!0,"audio"===e?(c._audio_added_=!0,void 0!==n&&(c._audioSSRC=n),void 0!==r&&(c._cname=r),a&&(c._audioOrtc=a)):(c._video_added_=!0,void 0!==n&&(c._videoSSRC=n),void 0!==r&&(c._cname=r),void 0!==s&&(c._rtxSsrcId=s),a&&(c._videoOrtc=a)),("audio"===e?c.hasAudio:c.hasVideo)&&!u&&(zv.info("[".concat(i._clientId,"] remote user ").concat(c.uid," published ").concat(e)),i.emit(By.USER_PUBLISHED,c,e)),"video"===e?V_.onGatewayStream(i._sessionId,Ry.ON_ADD_VIDEO_STREAM,Cy.ON_ADD_VIDEO_STREAM,{peer:o||t}):V_.onGatewayStream(i._sessionId,Ry.ON_ADD_AUDIO_STREAM,Cy.ON_ADD_AUDIO_STREAM,{peer:o||t}),i._p2pChannel.remoteMediaSsrcChanged(c,e,n).then((function(t){if(t)return zv.debug("[".concat(i._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after rejoin because SSRC id changed.")),i._p2pChannel.unsubscribe(c,e,!0).then((function(){return i._subscribe(c,e,!0).catch((function(e){zv.error("[".concat(i._clientId,"] resubscribe error"),e.toString())}))}))})),i._p2pChannel.hasPendingRemoteMedia(c,e)&&(zv.debug("[".concat(i._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after reconnect.")),i._subscribe(c,e,!0).catch((function(e){zv.error("[".concat(i._clientId,"] resubscribe error"),e.toString())})))}else zv.error("[".concat(i._clientId,"] can not find target user!(on_add_stream)"))})),xp(l(i),"_handleRemoveStream",(function(e){var t=i._users.find((function(t){return t.uid===e.uid}));if(t){zv.debug("[".concat(i._clientId,"] stream removed with uid ").concat(e.uid));var n=function(){};t.hasAudio&&t.hasVideo?n=function(){zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished audio track")),i.emit(By.USER_UNPUBLISHED,t,"audio"),zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished video track")),i.emit(By.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=function(){zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished video track")),i.emit(By.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=function(){zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished audio track")),i.emit(By.USER_UNPUBLISHED,t,"audio")}),t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,i._p2pChannel.unsubscribe(t).then((function(e){if(e)return i._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0,V_.onGatewayStream(i._sessionId,Ry.ON_REMOVE_STREAM,Cy.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()}else zv.warning("[".concat(i._clientId,"] can not find target user!(on_remove_stream)"))})),xp(l(i),"_handleSetStreamLocalEnable",(function(e,t,n){var r=i._users.find((function(e){return e.uid===t}));if(r){zv.debug("[".concat(i._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));var o="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;var a=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===a)return;var s=r._audio_enabled_?"enable-local-audio":"disable-local-audio";zv.debug("[".concat(i._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(s)),i.emit(By.USER_INFO_UPDATED,t,s)}else{r._trust_video_enabled_state_=!0;var c=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===c)return;var u=r._video_enabled_?"enable-local-video":"disable-local-video";zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(u)),i.emit(By.USER_INFO_UPDATED,t,u)}var l="audio"===e?r.hasAudio:r.hasVideo;return o!==l?!o&&l?(zv.info("[".concat(i._clientId,"] remote user ").concat(t," published ").concat(e)),void i.emit(By.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,i._p2pChannel.muteRemote(r,e),zv.info("[".concat(i._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void i.emit(By.USER_UNPUBLISHED,r,e)):void 0}zv.error("[".concat(i._clientId,"] can not find target user!(disable_local)"))})),xp(l(i),"_handleMuteStream",(function(e,t,n){zv.debug("[".concat(i._clientId,"] receive mute message"),e,t,n);var r=i._users.find((function(t){return t.uid===e}));if(r){var o="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;var a=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===a)return;var s=r._audio_muted_?"mute-audio":"unmute-audio";zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(s)),i.emit(By.USER_INFO_UPDATED,e,s)}else{r._trust_video_mute_state_=!0;var c=r._video_muted_;if(r._video_muted_=n,r._video_muted_===c)return;var u=r._video_muted_?"mute-video":"unmute-video";zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(u)),i.emit(By.USER_INFO_UPDATED,e,u)}var l="audio"===t?r.hasAudio:r.hasVideo;if(o!==l){if(!o&&l)return("audio"===t?r._audioSSRC:r._videoSSRC)?(zv.info("[".concat(i._clientId,"] remote user ").concat(e," published ").concat(t)),void i.emit(By.USER_PUBLISHED,r,t)):void zv.warning("[".concat(i._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,i._p2pChannel.muteRemote(r,t),zv.info("[".concat(i._clientId,"] remote user ").concat(e," unpublished ").concat(t)),i.emit(By.USER_UNPUBLISHED,r,t)}}else zv.warning("[".concat(i._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e))})),xp(l(i),"_handleP2PLost",function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zv.debug("[".concat(i._clientId,"] receive p2p lost"),t),parseInt(t.p2pid,10)!==i.store.p2pId){e.next=6;break}return e.next=4,i._p2pChannel.requestReconnect();case 4:e.next=7;break;case 6:zv.warning("P2PLost stream not found",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xp(l(i),"_handleTokenWillExpire",(function(){zv.debug("[".concat(i._clientId,"] received message onTokenPrivilegeWillExpire")),i.emit(By.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),xp(l(i),"_handleBeforeUnload",(function(e){"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(i.leave(),zv.info("[".concat(i._clientId,"] auto leave onbeforeunload or pagehide")))})),xp(l(i),"_handleUpdateNetworkQuality",(function(){if("normal"!==i._networkQualitySensitivity)if(!navigator||void 0===navigator.onLine||navigator.onLine){var e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=i._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=i._p2pChannel.getDownlinkNetworkQuality(),i.emit(By.NETWORK_QUALITY,e)}else i.emit(By.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6})})),i._codec=e.codec,i._mode=e.mode,i._clientId=tw(5,"client-"),i.store=new MO(e.codec,e.audioCodec,e.mode,i._clientId),i.store.clientCreated(),e.proxyServer&&i.setProxyServer(e.proxyServer,!0),e.turnServer&&i.setTurnServer(e.turnServer,!0),zv.info("[".concat(i._clientId,"] Initializing AgoraRTC client v").concat(qv," build: ").concat(Yv,", mode: ").concat(i._mode,", codec: ").concat(i._codec)),e.clientRoleOptions)try{tg(e.clientRoleOptions),o=Object.assign({},e.clientRoleOptions)}catch(e){zv.warning("[".concat(i._clientId,"] ").concat(e.toString()))}return i._statsCollector=new LS(i.store),i._statsCollector.onStatsException=function(e,t,n){zv.debug("[".concat(i._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),i.emit(By.EXCEPTION,{code:e,msg:t,uid:n})},i._statsCollector.onUploadPublishDuration=function(e,t,n,r){var o=i._users.find((function(t){return t.uid===e}));o&&V_.peerPublishStatus(i._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},i.store.useDataChannel=rE().supportDataChannel&&sm("SIGNAL_CHANNEL"),i._gateway=new Bw(i.store,{clientId:i._clientId,mode:i._mode,codec:i._codec,websocketRetryConfig:e.websocketRetryConfig||jv,httpRetryConfig:e.httpRetryConfig||jv,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:i._statsCollector,role:e.role,clientRoleOptions:o}),i._config=e,i._configDistribute=new Ik,i._p2pChannel=new NO(i.store,i._statsCollector),i._handleP2PChannelEvents(),i._handleGatewayEvents(),i._handleGatewaySignalEvents(),r(i)}return v(n,[{key:"connectionState",get:function(){return this._gateway.state}},{key:"remoteUsers",get:function(){return this._users}},{key:"localTracks",get:function(){return this._p2pChannel.getAllTracks(!0)}},{key:"uid",get:function(){return this._uid}},{key:"channelName",get:function(){return this._channelName}},{key:"isStringUID",get:function(){return!!this._joinInfo&&!!this._joinInfo.stringUid}},{key:"__className__",get:function(){return"Client"}},{key:"join",value:function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,l,d,f,p,h,v,m,y,g,E,_,b,S,w,k,T,R=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=++this._numberOfJoinCount,this.store.joinStart(),i&&(this.store.uid=i),s=UO(),l=jO()?window.isSecureContext:"Browser Not Support",(jO()||s)&&window.isSecureContext||(d="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",zv.warning(d)),f=nw(),"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),zv.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),p=V_.reportApiInvoke(f,{name:Ay.JOIN,options:[t,n,r,i],states:{isHttps:s,isSecureContext:l},tag:Ny.TRACER}),V_.setAppId(t),e.prev=8,r||null===r){e.next=11;break}throw new Uv(Dv.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));case 11:r&&my(r,"token",1,2047),my(t,"appid",1,2047),gy(n),i&&Ey(i),o&&my(o,"optionalInfo",1,2047),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),p.onError(e.t0),e.t0;case 17:if(zv.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(a)),!this._leaveMutex.isLocked){e.next=24;break}return zv.debug("[".concat(this._clientId,"] join: waiting leave operation")),e.next=21,this._leaveMutex.lock();case 21:e.t1=e.sent,(0,e.t1)(),zv.debug("[".concat(this._clientId,"] join: continue"));case 24:if(this._joinAndNotLeaveYet=!0,"DISCONNECTED"===this.connectionState){e.next=27;break}throw h=new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state")),p.onError(h),h;case 27:if(this._sessionId||(this._sessionId=f,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING",v=nN({clientId:this._clientId,appId:t,sid:this._sessionId,cname:n,uid:"string"!=typeof i?i:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:o,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),this._useLocalAccessPoint&&(v.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof i&&(v.stringUid=i,this._uintUid?(v.uid=this._uintUid,this._uintUid=void 0):v.uid=0),"none"===this._encryptionMode||!this._encryptionSecret){e.next=37;break}return v.aesmode=this._encryptionMode,e.next=33,function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mw("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),e.next=3,window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);case 3:return r=e.sent,i=x_(t),e.next=7,window.crypto.subtle.encrypt({name:"RSA-OAEP"},r,i);case 7:return o=e.sent,e.abrupt("return",yw(new Uint8Array(o)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this._encryptionSecret);case 33:if(v.aespassword=e.sent,this._joinAndNotLeaveYet){e.next=36;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 36:this._encryptionSalt&&(v.aessalt=this._encryptionSalt);case 37:if(this._startSession(this._sessionId,{channel:n,appId:t}),m=this._sessionId,setTimeout((function(){"CONNECTING"===R.connectionState&&m===R._sessionId&&V_.joinChannelTimeout(R._sessionId,5)}),5e3),e.prev=40,g=v.cloudProxyServer,["proxy3","proxy4","proxy5"].includes(g)&&(E=sm("PROXY_SERVER_TYPE3"),Array.isArray(E)?v.proxyServer=E[0]:v.proxyServer=E),V_.setProxyServer(v.proxyServer),zv.setProxyServer(v.proxyServer),this.store.requestAPStart(),!v.stringUid||v.uid){e.next=54;break}return e.next=46,hk(v.stringUid,v,this._axiosCancelSource.token,this._config.httpRetryConfig||jv,this.store);case 46:return _=e.sent,zv.debug("getUserAccount Success ".concat(v.stringUid," => ").concat(_)),v.uid=_,e.next=51,fk(v,this._axiosCancelSource.token,this._config.httpRetryConfig||jv,!0,this.store);case 51:y=e.sent,e.next=57;break;case 54:return e.next=56,fk(v,this._axiosCancelSource.token,this._config.httpRetryConfig||jv,!0,this.store);case 56:y=e.sent;case 57:if(this._joinAndNotLeaveYet){e.next=59;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 59:return this.store.requestAPEnd(),setTimeout((function(){R._configDistribute.startGetConfigDistribute(v,R._axiosCancelSource.token),R._configDistribute.on(jg.UPDATE_BITRATE_LIMIT,(function(e){R._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=r||t,b=y.gatewayInfo,this._joinInfo=nN(nN({},v),{},{cid:b.cid,uid:v.uid?v.uid:b.uid,vid:b.vid,apResponse:b.res,uni_lbs_ip:b.uni_lbs_ip,gatewayAddrs:b.gatewayAddrs}),e.next=64,this._joinGateway();case 64:if(S=e.sent,this._joinAndNotLeaveYet){e.next=67;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 67:return p.onSuccess(S),this._appId=t,this._channelName=v.cname,this._uid=S,this.store.uid=S,setTimeout((function(){R._networkQualityInterval&&window.clearInterval(R._networkQualityInterval),R._networkQualityInterval=window.setInterval(R._handleUpdateNetworkQuality,2e3),window.addEventListener(dp()?"beforeunload":"pagehide",R._handleBeforeUnload)}),0),w=v.stringUid?"string uid: ".concat(v.stringUid,",uid: ").concat(v.uid):"uid: ".concat(this._uid),e.abrupt("return",(zv.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(w)),setTimeout((function(){zv.startUpload()}),5e3),this.store.joinEnd(),T=this,vm.includes(T)||vm.push(T),S));case 72:throw e.prev=72,e.t2=e.catch(40),k=Array.isArray(e.t2)?e.t2[0]:e.t2,zv.error("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),k),k.code!==Dv.OPERATION_ABORTED&&this._numberOfJoinCount===a&&(this._gateway.state="DISCONNECTED",this._reset()),p.onError(k),k;case 76:case"end":return e.stop()}}),e,this,[[8,14],[40,72]])})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"_joinGateway",value:function(){var e=this;if(!this._joinInfo||!this._key)throw new Uv(Dv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!sm("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((function(e){return e})).catch((function(t){if(t.code===Dv.INIT_WEBSOCKET_TIMEOUT)return e._gateway.leave(!0,Fy.FALLBACK),t;if(t.code===Dv.INIT_DATACHANNEL_TIMEOUT)return e._gateway.leave(!0,Fy.FALLBACK),t;throw t})).then((function(t){if(t instanceof Uv){if(t.code===Dv.INIT_WEBSOCKET_TIMEOUT){if(zv.info("[".concat(e._clientId,"] join timeout, fallback to proxy")),!e._joinInfo||!e._key)throw new Uv(Dv.INVALID_OPERATION);e._joinInfo.cloudProxyServer="fallback",e._cloudProxyServerMode="fallback",e.store.cloudProxyServerMode="fallback";var n=sm("PROXY_SERVER_TYPE3");if(Array.isArray(n))if(e._joinInfo.apUrl){var r=/^https?:\/\/(.+?)(\/.*)?$/.exec(e._joinInfo.apUrl)[1].split("."),i=r.slice(r.length-2).join(".");n.forEach((function(t){e._joinInfo&&t.includes(i)&&(e._joinInfo.proxyServer=t)})),e._joinInfo.proxyServer||(e._joinInfo.proxyServer=n[0])}else e._joinInfo.proxyServer=n[0];else e._joinInfo.proxyServer=n;var o=sm("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&"443"!==o[1]&&zv.setProxyServer(e._joinInfo.proxyServer),"443"!==sm("STATS_COLLECTOR_PORT").toString()&&V_.setProxyServer(e._joinInfo.proxyServer),V_.reportApiInvoke(e._sessionId,{name:Ay.JOIN_FALLBACK_TO_PROXY,options:[e._joinInfo.proxyServer],tag:Ny.TRACER}).onSuccess(),e.emit(By.JOIN_FALLBACK_TO_PROXY,e._joinInfo.proxyServer),e._gateway.join(e._joinInfo,e._key)}if(zv.info("[".concat(e._clientId,"] join by datachannel timeout, fallback to websocket")),!e._joinInfo||!e._key)throw new Uv(Dv.INVALID_OPERATION);return V_.reportApiInvoke(e._sessionId,{name:Ay.DATACHANNEL_FAILBACK,options:[e.store.clientId],tag:Ny.TRACER}).onSuccess(),e._joinGateway()}return t})).then((function(e){return e}))}},{key:"leave",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zv.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(dp()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){var t=vm.indexOf(e);-1!==t&&vm.splice(t,1)}(this),e.next=3,this._leaveMutex.lock();case 3:if(t=e.sent,"DISCONNECTED"!==this.connectionState){e.next=6;break}return e.abrupt("return",(zv.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void t()));case 6:return e.next=8,this._gateway.leave("CONNECTED"!==this.connectionState);case 8:zv.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),t();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"publish",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u=this,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(l.length>1&&void 0!==l[1])||l[1],Array.isArray(t)||(t=[t]),0!==t.length){e.next=3;break}throw new Uv(Dv.INVALID_PARAMS,"track list is empty");case 3:if("audience"!==this._gateway.role){e.next=5;break}throw new Uv(Dv.INVALID_OPERATION,"audience can not publish stream");case 5:r=s(t),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=16;break}if((o=i.value)instanceof K_){e.next=12;break}throw new Uv(Dv.INVALID_PARAMS,"parameter is not local track");case 12:if(o._enabled||!n){e.next=14;break}throw new Uv(Dv.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(o.getTrackId()));case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return zv.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=27,this._configDistribute.awaitConfigDistributeComplete();case 27:return n&&t.forEach((function(e){var t=u._configDistribute.getBitrateLimit();e instanceof NT&&t&&e.setBitrateLimit(t.uplink)})),e.next=30,this._publishMutex.lock();case 30:return a=e.sent,e.prev=31,e.next=34,this._publishHighStream(t);case 34:zv.info("[".concat(this._clientId,"] Publish success, id ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=40;break;case 37:throw e.prev=37,e.t1=e.catch(31),zv.error("[".concat(this._clientId,"] publish error"),e.t1.toString()),e.t1;case 40:return e.prev=40,a(),e.finish(40);case 43:case"end":return e.stop()}}),e,this,[[6,18,21,24],[31,37,40,43]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");case 2:return t?Array.isArray(t)||(t=[t]):t=this._p2pChannel.getAllTracks(!0),zv.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")}))," ")),e.next=5,this._publishMutex.lock();case 5:return n=e.sent,e.prev=6,e.next=9,this._p2pChannel.unpublish(t);case 9:if(r=e.sent,e.t0=r,!e.t0){e.next=14;break}return e.next=14,this._gateway.unpublish(r,this._uid);case 14:zv.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((function(e){return"".concat(e.getTrackId())})))),e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(6),zv.error("[".concat(this._clientId,"] unpublish error"),e.t1.toString()),e.t1;case 20:return e.prev=20,n&&n(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[6,17,20,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._subscribe(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_subscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,f,p,h=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(py(n,"mediaType",["audio","video"]),this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:if(this._users.find((function(e){return e===t}))){e.next=7;break}throw i=new Uv(Dv.INVALID_REMOTE_USER,"user is not in the channel"),zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),i;case 7:if(t.hasAudio||t.hasVideo){e.next=10;break}throw o=new Uv(Dv.INVALID_REMOTE_USER,"user is not published"),zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),o;case 10:if(r||("audio"!==n||t.hasAudio&&void 0!==t._audioSSRC)&&("video"!==n||t.hasVideo&&void 0!==t._videoSSRC)){e.next=13;break}throw a=new Uv(Dv.REMOTE_USER_IS_NOT_PUBLISHED),zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),a;case 13:return s="audio"===n?t._audioSSRC:t._videoSSRC,u="audio"===n?t._audioOrtc:t._videoOrtc,l="video"===n?t._rtxSsrcId:void 0,d={stream_type:"audio"===n?Fg.AUDIO:Fg.VIDEO,ssrcId:s},e.next=19,this._subscribeMutex.lock();case 19:return f=e.sent,zv.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n)),e.prev=21,e.next=24,this._p2pChannel.hasRemoteMediaWithLock(t,n);case 24:if(!e.sent){e.next=29;break}return e.next=27,this._p2pChannel.unmuteRemote(t,n);case 27:e.next=54;break;case 29:return e.prev=29,DS.markSubscribeStart(this.store.clientId,s),this.store.subscribe(t.uid,n,Date.now()),e.next=34,this._p2pChannel.subscribe(t,n,s,l,u);case 34:return e.prev=34,e.next=37,this._gateway.subscribe(t.uid,d,!0);case 37:e.next=48;break;case 39:if(e.prev=39,e.t0=e.catch(34),(null==e.t0?void 0:e.t0.code)===Dv.WS_ABORT){e.next=45;break}return e.next=44,this._p2pChannel.unsubscribe(t,n);case 44:throw e.t0;case 45:return e.next=47,this._p2pChannel.unsubscribe(t,n,!0);case 47:this._p2pChannel.setPendingRemoteMedia(t,n);case 48:this.store.subscribe(t.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,n),e.next=54;break;case 51:throw e.prev=51,e.t1=e.catch(29),this._p2pChannel.reportSubscribeEvent(!1,null==e.t1?void 0:e.t1.code,t,n),e.t1;case 54:if(zv.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch((function(e){zv.warning("[".concat(h._clientId,"] auto set fallback failed"),e)})),p="audio"===n?t._audioTrack:t._videoTrack){e.next=58;break}throw new Uv(Dv.UNEXPECTED_ERROR,"can not find remote track in user object");case 58:return e.abrupt("return",p);case 61:throw e.prev=61,e.t2=e.catch(21),zv.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),e.t2),e.t2;case 64:return e.prev=64,f(),e.finish(64);case 67:case"end":return e.stop()}}),e,this,[[21,61,64,67],[29,51],[34,39]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"massSubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,u,l,d,f,p,h,v,y,g,E,_,b,S,w,k,T,R,C,I,O,A=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yy(t,"subscribeList"),this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:return n=Date.now(),r=new Map,e.next=8,this._subscribeMutex.lock();case 8:return i=e.sent,zv.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),o=(t=m(t)).map((function(e){return{user:e.user,mediaType:e.mediaType}})),e.next=13,this._p2pChannel.globalLock();case 13:u=e.sent,e.prev=14,d=c().mark((function e(){var n,i,a,s,u,l,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[f],i=n.user,py(a=n.mediaType,"mediaType",["audio","video"]),i){e.next=4;break}throw s=new Uv(Dv.INVALID_PARAMS,"user property does not exist in subscribeList item"),zv.error("[".concat(A._clientId,"] user property does not exist in subscribeList item")),s;case 4:if(A._users.find((function(e){return e===i}))){e.next=8;break}return u=new Uv(Dv.INVALID_REMOTE_USER,"user is not in the channel"),zv.error("[".concat(A._clientId,"] can not massSubscribe ").concat(i.uid,", this user is not in the channel")),o[f].error=u,t.splice(f,1),e.abrupt("return","continue");case 8:if(("audio"!==a||i.hasAudio&&void 0!==i._audioSSRC)&&("video"!==a||i.hasVideo&&void 0!==i._videoSSRC)){e.next=12;break}return l=new Uv(Dv.REMOTE_USER_IS_NOT_PUBLISHED),zv.error("[".concat(A._clientId,"] can not subscribe ").concat(i.uid," with mediaType ").concat(a,", remote user is not published")),o[f].error=l,t.splice(f,1),e.abrupt("return","continue");case 12:if(d=wg.Video|wg.LwoVideo,!(p=r.get(i))){e.next=20;break}if(!("video"===a?p&d:p&wg.Audio)){e.next=17;break}return t.splice(f,1),zv.warning("repeat massSubscribe user:".concat(i.uid,", mediaType:").concat(a," twice")),e.abrupt("return","continue");case 17:r.set(i,p|("video"===a?d:wg.Audio)),e.next=21;break;case 20:r.set(i,"video"===a?d:wg.Audio);case 21:case"end":return e.stop()}}),e)})),f=t.length-1;case 17:if(!(f>=0)){e.next=25;break}return e.delegateYield(d(),"t0",19);case 19:if("continue"!==e.t0){e.next=22;break}return e.abrupt("continue",22);case 22:f--,e.next=17;break;case 25:p=t.length-1;case 26:if(!(p>=0)){e.next=36;break}if(h=t[p],v=h.user,y=h.mediaType,g=wg.Video|wg.LwoVideo,!this._p2pChannel.hasRemoteMedia(v,y)){e.next=33;break}return e.next=31,this._p2pChannel.unmuteRemoteNoLock(v,y);case 31:E=r.get(v),r.set(v,"video"===y?E^g:E^wg.Audio),t.splice(p,1);case 33:p--,e.next=26;break;case 36:if(this.store.massSubscribe(t.map((function(e){return{userId:e.user.uid,type:e.mediaType}})),n),_=gr(l=Array.from(r.entries())).call(l,(function(e,t){var n=a(t,2),r=n[0],i=n[1];if(0===i)return e;var o={stream_id:r.uid,stream_type:i};return i&wg.Audio&&(o.audio_ssrc=r._audioSSRC),i&wg.Video&&(o.video_ssrc=r._videoSSRC),e.push(o),e}),[]),e.prev=38,e.t1=t.length>0,!e.t1){e.next=43;break}return e.next=43,this._p2pChannel.massSubscribeNoLock(t.map((function(e){var t=e.user,n=e.mediaType;return{user:t,mediaType:n,ssrcId:n===Fg.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:t._rtxSsrcId}})));case 43:if(b=new Map,!(_.length>0)){e.next=49;break}return e.next=47,this._gateway.subscribeAll(_,!0);case 47:((null==(S=e.sent)?void 0:S.users)||[]).forEach((function(e){var t=e.stream_id,n=e.video_error_code,r=e.audio_error_code,i=e.error_code;(n||r||i)&&b.set(t,{video_error_code:n,audio_error_code:r,error_code:i})}));case 49:if(!(Array.from(b.entries()).length>0)){e.next=53;break}return w=Array.from(b.entries()).map((function(e){var t,n=a(e,2),r=n[0],i=n[1];return i.error_code||i.video_error_code&&i.audio_error_code?t=void 0:i.video_error_code?t=Fg.VIDEO:i.audio_error_code&&(t=Fg.AUDIO),{user:A.remoteUsers.find((function(e){return e.uid===r})),mediaType:t}})),e.next=53,this._p2pChannel.massUnsubscribeNoLock(w);case 53:k=s(o);try{for(k.s();!(T=k.n()).done;)R=T.value,(C=b.get(R.user.uid))&&(I=C.error_code||"audio"===R.mediaType&&C.audio_error_code||"video"===R.mediaType&&C.video_error_code)&&(O=Tw(I),zv.error("user:".concat(R.user.uid," mediaType:").concat(R.mediaType," has massSubscribe error ").concat(O.desc)),R.error=new Uv(Dv.SUBSCRIBE_FAILED,"code ".concat(I,": ").concat(O.desc))),R.error||("video"===R.mediaType?R.track=R.user.videoTrack:R.track=R.user.audioTrack)}catch(N){k.e(N)}finally{k.f()}return e.abrupt("return",(this.store.massSubscribe(o.filter((function(e){return!e.error})).map((function(e){return{userId:e.user.uid,type:e.mediaType}})),void 0,Date.now()),o.forEach((function(e){var t;V_.subscribe(A.store.sessionId,{succ:!!e.error,ec:(null===(t=e.error)||void 0===t?void 0:t.code)||null,video:e.mediaType===Fg.VIDEO,audio:e.mediaType===Fg.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===Fg.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:A.store.p2pId,eventElapse:Math.floor(performance.now()-n)},!0)})),zv.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),o));case 58:return e.prev=58,e.t2=e.catch(38),e.next=62,this._p2pChannel.massUnsubscribeNoLock(t);case 62:throw e.t2;case 63:return e.prev=63,u(),i(),e.finish(63);case 66:case"end":return e.stop()}}),e,this,[[14,,63,66],[38,58]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&py(n,"mediaType",["audio","video"]),this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");case 2:if(this._users.find((function(e){return e===t}))){e.next=5;break}throw r=new Uv(Dv.INVALID_REMOTE_USER,"user is not in the channel"),zv.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),r;case 5:return zv.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(n)),e.prev=6,e.next=9,this._p2pChannel.unsubscribe(t,n);case 9:if(i=e.sent,e.t0=i,!e.t0){e.next=14;break}return e.next=14,this._gateway.unsubscribe(i,t.uid);case 14:zv.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(n)),e.next=22;break;case 17:if(e.prev=17,e.t1=e.catch(6),e.t1.code!==Dv.DISCONNECT_P2P){e.next=21;break}return e.abrupt("return",void zv.warning("disconnecting p2p, abort unsubscribe request."));case 21:throw zv.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),e.t1.toString()),e.t1;case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yy(t,"unsubscribeList"),this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");case 2:zv.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),t=m(t),n=new Map,r=c().mark((function e(){var r,o,s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[i],o=r.user,s=r.mediaType,o){e.next=4;break}throw u=new Uv(Dv.INVALID_PARAMS,"user property does not exist in unsubscribeList item"),zv.error("[".concat(a._clientId,"] user property does not exist in unsubscribeList item")),u;case 4:if(py(s,"mediaType",["video","audio",void 0]),a._users.find((function(e){return e===o}))){e.next=8;break}return zv.warning("[".concat(a._clientId,"] can not unsubscribe ").concat(o.uid,", user is not in the channel")),t.splice(i,1),e.abrupt("return","continue");case 8:if(l=wg.Video|wg.LwoVideo,!n.has(o)){e.next=25;break}d=n.get(o),e.t0=s,e.next="video"===e.t0?14:"audio"===e.t0?16:18;break;case 14:return f=d&l,e.abrupt("break",19);case 16:return f=d&wg.Audio,e.abrupt("break",19);case 18:f=d&(wg.Audio|l);case 19:if(!f){e.next=22;break}return zv.warning("repeat massUnsubscribe user:".concat(o.uid,",mediaType:").concat(s," twice.")),t.splice(i,1),e.abrupt("return","continue");case 22:s?"audio"===s?n.set(o,d|wg.Audio):"video"===s&&n.set(o,d|l):n.set(o,d|wg.Audio|l),e.next=26;break;case 25:s?"audio"===s?n.set(o,wg.Audio):"video"===s&&n.set(o,l):n.set(o,wg.Audio|l);case 26:case"end":return e.stop()}}),e)})),i=t.length-1;case 6:if(!(i>=0)){e.next=14;break}return e.delegateYield(r(),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:i--,e.next=6;break;case 14:return e.prev=14,e.next=17,this._p2pChannel.massUnsubscribe(t);case 17:if(o=e.sent,e.t1=o,!e.t1){e.next=22;break}return e.next=22,this._gateway.massUnsubscribe(o);case 22:zv.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e.next=30;break;case 25:if(e.prev=25,e.t2=e.catch(14),e.t2.code!==Dv.DISCONNECT_P2P){e.next=29;break}return e.abrupt("return",void zv.warning("disconnecting p2p, abort unsubscribe request."));case 29:throw zv.error("[".concat(this._clientId,"] massUnsubscribe error"),e.t2.toString()),e.t2;case 30:case"end":return e.stop()}}),e,this,[[14,25]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setLowStreamParameter",value:function(e){!function(e){if(!e)throw new Uv(Dv.INVALID_PARAMS);_y(e.width)||vy(e.width,"streamParameter.width"),_y(e.height)||vy(e.height,"streamParameter.height"),_y(e.framerate)||vy(e.framerate,"streamParameter.framerate"),_y(e.bitrate)||hy(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&zv.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),zv.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));var t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e}},{key:"enableDualStream",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rE().supportDualStream){e.next=2;break}throw V_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Uv(Dv.NOT_SUPPORTED,"Your browser is not support dual stream");case 2:if(!this._isDualStreamEnabled){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"Dual stream is already enabled");case 4:if(!this._p2pChannel.canPublishLowStream()){e.next=13;break}return e.prev=5,e.next=8,this._publishLowStream();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),V_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e.t0;case 13:this._isDualStreamEnabled=!0,V_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),zv.info("[".concat(this._clientId,"] enable dual stream"));case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"disableDualStream",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isDualStreamEnabled){e.next=18;break}if(this._joinInfo){e.next=3;break}throw new Uv(Dv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 3:if(!this._p2pChannel.getLocalMedia(Bg.LocalVideoLowTrack)){e.next=17;break}return e.prev=4,e.next=7,this._p2pChannel.unpublishLowStream();case 7:if(t=e.sent,e.t0=t,!e.t0){e.next=12;break}return e.next=12,this._gateway.unpublish(t,this._joinInfo.stringUid||this._joinInfo.uid);case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),V_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e.t1;case 17:this._isDualStreamEnabled=!1,V_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),zv.info("[".concat(this._clientId,"] disable dual stream"));case 18:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setClientRole",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(function(e){py(e,"role",["audience","host"])}(t),n&&tg(n),"rtc"!==this._mode){e.next=2;break}throw zv.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Uv(Dv.INVALID_OPERATION,"rtc mode can not use setClientRole");case 2:if(!n||!n.level||"host"!==t){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"host mode can not set audience latency level");case 4:if("audience"!==t||!this._p2pChannel.hasLocalMedia()){e.next=6;break}throw new Uv(Dv.INVALID_OPERATION,"can not set client role to audience when publishing stream");case 6:return e.next=8,this._gateway.setClientRole(t,n);case 8:zv.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(n&&n.level));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setProxyServer",value:function(e,t){if(my(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new Uv(Dv.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Uv(Dv.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,V_.setProxyServer(this._proxyServer),zv.setProxyServer(this._proxyServer),zv.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}},{key:"setTurnServer",value:function(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new Uv(Dv.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Uv(Dv.INVALID_OPERATION,"You have already set the proxy")}if($y(e))return this._turnServer={servers:e,mode:"original-manual"},void zv.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((function(e){return e.urls})).join(","),"."));e.forEach((function(e){return eg(e)})),this._turnServer={servers:e,mode:"manual"},zv.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}},{key:"setLicense",value:function(e){if("DISCONNECTED"!==this.connectionState)throw new Uv(Dv.INVALID_OPERATION,"you should set license before join channel");if(my(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new Uv(Dv.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,zv.info("[".concat(this._clientId,"] set license success"),e)}},{key:"startProxyServer",value:function(e){if("DISCONNECTED"!==this.connectionState)throw new Uv(Dv.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new Uv(Dv.INVALID_OPERATION,"You have already set the proxy");var t,n=[3,4,5];switch(void 0===e&&(e=3),e){case 1:case 2:throw new Uv(Dv.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:t="proxy3";break;case 4:t="proxy4";break;case 5:t="proxy5";break;default:throw new Uv(Dv.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=t,this.store.cloudProxyServerMode=t,zv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}},{key:"stopProxyServer",value:function(){if("DISCONNECTED"!==this.connectionState)throw new Uv(Dv.INVALID_OPERATION,"Stop proxy server after leave channel");V_.setProxyServer(),zv.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",zv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}},{key:"setLocalAccessPointsV2",value:function(e){if(!e.accessPoints)throw new Uv(Dv.INVALID_PARAMS,"accessPoints is required.");yy(e.accessPoints.serverList,"accessPoints.serverList"),my(e.accessPoints.domain,"accessPoints.domain");var t=function(e,t){hy(e,t,0,65535,!0)},n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Uv(Dv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");sm("CLOSE_AFB_FOR_LOCAL_AP")&&(am("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),am("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));var r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((function(e){return r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),a=o.map((function(e){return"".concat(e,":").concat(n)}));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,am("WEBCS_DOMAIN",a),am("WEBCS_DOMAIN_BACKUP_LIST",a),am("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(yy(e.report.hostname,"report.hostname"),am("EVENT_REPORT_DOMAIN",e.report.hostname[0]),am("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(am("EVENT_REPORT_DOMAIN",o[0]),am("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));var s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),am("STATS_COLLECTOR_PORT",s),e.report?am("ENABLE_EVENT_REPORT",!0):am("ENABLE_EVENT_REPORT",!1);var c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(yy(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];var u=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),u=e.log.port),am("LOG_UPLOAD_SERVER","".concat(c,":").concat(u));var l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(yy(e.cds.hostname,"cds.hostname"),l=e.cds.hostname):l=o;var d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),am("CDS_AP",l.map((function(e){return"".concat(e,":").concat(d)}))),e.cds?am("ENABLE_CONFIG_DISTRIBUTE",!0):am("ENABLE_CONFIG_DISTRIBUTE",!1),zv.info("set local access point v2 success")}},{key:"setLocalAccessPoints",value:function(e,t){if(yy(e,"serverList"),my(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Uv(Dv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");var n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((function(e){return n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e})),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,am("WEBCS_DOMAIN",e),am("WEBCS_DOMAIN_BACKUP_LIST",e),am("GATEWAY_DOMAINS",[t]),am("EVENT_REPORT_DOMAIN",e[0]),am("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),am("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),zv.info("set local access point success")}},{key:"setRemoteDefaultVideoStreamType",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(py(t,"streamType",[0,1]),this._remoteDefaultVideoStreamType=t,!this._joinInfo){e.next=12;break}return e.prev=1,e.next=4,this._gateway.setDefaultRemoteVideoStreamType(t);case 4:this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),zv.error("[".concat(this._clientId,"] set default remote video stream type error"),e.t0.toString()),e.t0;case 10:e.next=13;break;case 12:zv.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(t));case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return py(n,"streamType",[0,1]),e.prev=1,e.next=4,this._gateway.setRemoteVideoStreamType(t,n);case 4:setTimeout((function(){var e=r._users.find((function(e){return e.uid===t}));e&&e.videoTrack&&e.videoTrack.updateMediaStreamTrackResolution()}),2e3),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),zv.error("[".concat(this._clientId,"] set remote video stream type error"),e.t0.toString()),e.t0;case 10:zv.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(t,n);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStreamFallbackOption",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return py(n,"fallbackType",[0,1,2]),e.prev=1,e.next=4,this._gateway.setStreamFallbackOption(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),zv.error("[".concat(this._clientId,"] set stream fallback option"),e.t0.toString()),e.t0;case 9:zv.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(t,n);case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setEncryptionConfig",value:function(e,t,n){if(function(e){py(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),my(t,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new Uv(Dv.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new Uv(Dv.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||zv.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=yw(n))}},{key:"renewToken",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(my(t,"token",1,2047),this._key&&this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"renewToken should not be called before user join");case 2:return n=this._key,this._key=t,this._joinInfo&&(this._joinInfo.token=t),e.next=6,this._renewTokenMutex.lock();case 6:if(r=e.sent,e.prev=7,!sm("USE_NEW_TOKEN")){e.next=18;break}return zv.debug("start renew token with ticket from unilbs"),e.next=12,kk(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||jv);case 12:return i=e.sent,zv.debug("[".concat(this._clientId,"] get ticket from unilbs success")),e.next=16,this._gateway.renewToken({token:t,ticket:i});case 16:e.next=21;break;case 18:return zv.debug("start renew token without ticket"),e.next=21,this._gateway.renewToken({token:t});case 21:zv.debug("[".concat(this._clientId,"] renewToken success")),e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(7),this._key=n,this._joinInfo.token=n,zv.error("[".concat(this._clientId,"] renewToken failed"),e.t0.toString()),e.t0;case 27:return e.prev=27,r(),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[7,24,27,30]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"enableAudioVolumeIndicator",value:function(){var e=this;this._audioVolumeIndicationInterval?zv.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((function(){var t=e._p2pChannel.getAudioLevels();e.emit(By.VOLUME_INDICATOR,t)}),sm("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}},{key:"getRTCStats",value:function(){var e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}},{key:"startLiveStreaming",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if("h264"===this._codec){e.next=3;break}throw new Uv(Dv.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");case 3:if(this._p2pChannel.hasLocalMedia()){e.next=5;break}throw new Uv(Dv.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");case 5:if(!(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t))){e.next=7;break}throw new Uv(Dv.LIVE_STREAMING_TASK_CONFLICT);case 7:return r=n?rg.TRANSCODE:rg.RAW,e.abrupt("return",this._createLiveStreamingClient(r).startLiveStreamingTask(t,r));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setLiveTranscoding",value:function(e){return this._createLiveStreamingClient(rg.TRANSCODE).setTranscodingConfig(e)}},{key:"stopLiveStreaming",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((function(e){return e&&e.hasUrl(t)}))).length){e.next=3;break}throw new Uv(Dv.INVALID_PARAMS,"can not find live streaming url to stop");case 3:return e.next=5,Vd.all(n.map((function(e){return e&&e.stopLiveStreamingTask(t)})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addInjectStreamUrl",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");case 2:return(r=this._createLiveStreamingClient(rg.INJECT)).setInjectStreamConfig(n,0),e.next=6,r.startLiveStreamingTask(t,rg.INJECT);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeInjectStreamUrl",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._createLiveStreamingClient(rg.INJECT),r=Array.from(vS(t=n.streamingTasks).call(t)).find((function(e){return e.mode===rg.INJECT})),this._joinInfo&&r){e.next=3;break}throw new Uv(Dv.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");case 3:return e.next=5,n.stopLiveStreamingTask(r.url);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"startChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mk(t),n=this._createChannelMediaRelayClient(),e.next=4,n.startChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mk(t),n=this._createChannelMediaRelayClient(),e.next=4,n.updateChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopChannelMediaRelay",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._createChannelMediaRelayClient(),e.next=3,t.stopChannelMediaRelay();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendStreamMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Uv(Dv.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new Uv(Dv.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Ky.DATA_STREAM,{payload:yw(e)},!t)}},{key:"sendMetadata",value:function(e){if(!this._joinInfo)throw new Uv(Dv.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new Uv(Dv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ky.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:yw(e)})}},{key:"sendCustomReportMessage",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)||(t=[t]),t.forEach(Ty),this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"can not send custom report, not joined");case 2:return e.next=4,V_.sendCustomReportMessage(this._joinInfo.sid,t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getLocalAudioStats",value:function(){return this._statsCollector.getLocalAudioTrackStats()}},{key:"getRemoteAudioStats",value:function(){return this._statsCollector.getRemoteAudioTrackStats()}},{key:"getLocalVideoStats",value:function(){return this._statsCollector.getLocalVideoTrackStats()}},{key:"getRemoteVideoStats",value:function(){return this._statsCollector.getRemoteVideoTrackStats()}},{key:"getRemoteNetworkQuality",value:function(){return this._statsCollector.getRemoteNetworkQualityStats()}},{key:"pickSVCLayer",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return py(n.spatialLayer,"spatialLayer",[0,1,2,3]),py(n.temporalLayer,"temporalLayer",[0,1,2,3]),e.prev=1,e.next=4,this._gateway.pickSVCLayer(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),zv.error("[".concat(this._clientId,"] pick SVC layer failed"),e.t0.toString()),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_reset",value:function(){if(zv.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=xv.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach((function(e){e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new G_("client-publish"),this._subscribeMutex=new G_("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(b){}}},{key:"_startSession",value:function(e,t){var n=e||nw();e?zv.debug("[".concat(this._clientId,"] new Session ").concat(n)):zv.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n)),this._sessionId=n,this.store.sessionId=n,t?V_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?V_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&V_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}},{key:"_publishHighStream",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:if("auto"!==this._turnServer.mode||!sm("FORCE_TURN")||sm("TURN_ENABLE_TCP")||sm("TURN_ENABLE_UDP")){e.next=6;break}throw new Uv(Dv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");case 6:return zv.debug("[".concat(this._clientId,"] publish high stream")),e.prev=7,e.next=10,this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);case 10:return n=e.sent,e.next=13,n.next();case 13:if(!(r=e.sent.value)){e.next=27;break}return e.prev=15,e.next=18,this._gateway.publish(this._uid,r,!0);case 18:o=e.sent,e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(15),e.t0.code===Dv.DISCONNECT_P2P){e.next=25;break}throw n.throw(e.t0),e.t0;case 25:return e.next=27,n.next((null===(i=o)||void 0===i?void 0:i.ortc)||[]);case 27:this._p2pChannel.reportPublishEvent(!0,null),a=s(t),e.prev=29,a.s();case 31:if((u=a.n()).done){e.next=40;break}if((l=u.value)instanceof NT&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),e.t1=!l.muted&&l.enabled,e.t1){e.next=38;break}return e.next=38,this._p2pChannel.muteLocalTrack(l);case 38:e.next=31;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(29),a.e(e.t2);case 45:return e.prev=45,a.f(),e.finish(45);case 48:e.next=55;break;case 50:if(e.prev=50,e.t3=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t3?void 0:e.t3.code,t),(null==e.t3?void 0:e.t3.code)!==Dv.WS_ABORT){e.next=54;break}return e.abrupt("return");case 54:throw e.t3;case 55:case"end":return e.stop()}}),e,this,[[7,50],[15,21],[29,42,45,48]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_publishLowStream",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:return zv.debug("[".concat(this._clientId,"] publish low stream")),(t=this._configDistribute.getLowStreamConfigDistribute())&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),e.prev=7,e.next=10,this._p2pChannel.publishLowStream(this._lowStreamParameter);case 10:return n=e.sent,e.next=13,n.next();case 13:if(!(r=e.sent.value)){e.next=26;break}return e.prev=15,e.next=18,this._gateway.publish(this._uid,r,!0);case 18:o=e.sent,e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(15),e.t0.code===Dv.DISCONNECT_P2P){e.next=25;break}throw n.throw(e.t0),e.t0;case 25:n.next((null===(i=o)||void 0===i?void 0:i.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0);case 26:e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t1?void 0:e.t1.code,void 0,!0),(null==e.t1?void 0:e.t1.code)!==Dv.WS_ABORT){e.next=32;break}return e.abrupt("return");case 32:throw e.t1;case 33:case"end":return e.stop()}}),e,this,[[7,28],[15,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_createLiveStreamingClient",value:function(e){var t=this;if(!this._joinInfo||!this._appId)return new Uv(Dv.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();var n=function(){return new Pk(t._joinInfo,t._config.websocketRetryConfig||jv,t._config.httpRetryConfig||jv)},r=function(e){e.onLiveStreamError=function(e,n){V_.reportApiInvoke(t._sessionId,{name:Ay.ON_LIVE_STREAM_ERROR,options:[e,n],tag:Ny.TRACER}).onSuccess(),t.emit(By.LIVE_STREAMING_ERROR,e,n)},e.onLiveStreamWarning=function(e,n){V_.reportApiInvoke(t._sessionId,{name:Ay.ON_LIVE_STREAM_WARNING,options:[e,n],tag:Ny.TRACER}).onSuccess(),t.emit(By.LIVE_STREAMING_WARNING,e,n)},e.on(hg.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Uv(Dv.INVALID_OPERATION,"can not find join info to get worker manager"));_k(e,t._joinInfo,t._axiosCancelSource.token,jv).then(n).catch(r)}))};switch(e){case rg.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=n(),r(this._liveRawStreamingClient)),this._liveRawStreamingClient;case rg.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=n(),r(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case rg.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=n(),this._injectStreamingClient.on(hg.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Uv(Dv.INVALID_OPERATION,"can not find join info to get worker manager"));_k(e,t._joinInfo,t._axiosCancelSource.token,jv).then(n).catch(r)})),this._injectStreamingClient.onInjectStatusChange=function(e,n,r){t.emit(By.INJECT_STREAM_STATUS,e,n,r)}),this._injectStreamingClient}}},{key:"_createChannelMediaRelayClient",value:function(){var e=this;return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new jk(this._joinInfo,this._clientId,this._config.websocketRetryConfig||jv,this._config.httpRetryConfig||jv),this._channelMediaRelayClient.on("state",(function(t){t===Eg.RELAY_STATE_FAILURE&&e._channelMediaRelayClient&&e._channelMediaRelayClient.dispose(),e.emit(By.CHANNEL_MEDIA_RELAY_STATE,t)})),this._channelMediaRelayClient.on("event",(function(t){e.emit(By.CHANNEL_MEDIA_RELAY_EVENT,t)}))),this._channelMediaRelayClient):new Uv(Dv.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}},{key:"_handleGatewayEvents",value:function(){var e=this;this._gateway.on(Sg.DISCONNECT_P2P,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.disconnectForReconnect();case 2:case"end":return t.stop()}}),t)})))),this._gateway.on(Sg.CONNECTION_STATE_CHANGE,(function(t,n,r){var i;if(r!==Fy.FALLBACK){var o=function(){e.emit(By.CONNECTION_STATE_CHANGE,t,n,r)};if(V_.reportApiInvoke(e._sessionId||(null===(i=e._gateway.joinInfo)||void 0===i?void 0:i.sid)||null,{name:Ay.CONNECTION_STATE_CHANGE,options:[t,n,r],tag:Ny.TRACER}).onSuccess(JSON.stringify({cur:t,prev:n,reason:r})),zv.info("[".concat(e._clientId,"] connection state change: ").concat(n," -> ").concat(t)),"DISCONNECTED"===t)return e._reset(),void o();if("RECONNECTING"===t)e._users.forEach((function(e){e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._audioSSRC=void 0,e._videoSSRC=void 0,e._videoOrtc=void 0,e._audioOrtc=void 0,e._cname=void 0,e._rtxSsrcId=void 0})),e._userOfflineTimeout&&window.clearTimeout(e._userOfflineTimeout),e._streamRemovedTimeout&&window.clearTimeout(e._streamRemovedTimeout),e._userOfflineTimeout=void 0,e._streamRemovedTimeout=void 0;else if("CONNECTED"===t){var a;e._streamFallbackTypeCacheMap.forEach((function(t,n){e._gateway.setStreamFallbackOption(n,t).catch((function(t){zv.warning("[".concat(e._clientId,"] auto set stream fallback option failed"),t)}))})),e._remoteStreamTypeCacheMap.forEach((function(t,n){e._gateway.setRemoteVideoStreamType(n,t).catch((function(t){zv.warning("[".concat(e._clientId,"] auto set remote stream type failed"),t)}))})),void 0!==e._remoteDefaultVideoStreamType&&void 0===(null===(a=e._joinInfo)||void 0===a?void 0:a.defaultVideoStream)&&e.setRemoteDefaultVideoStreamType(e._remoteDefaultVideoStreamType).then((function(){zv.debug("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((function(t){zv.error("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(t))})),e._p2pChannel.republish(),e._userOfflineTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._userOfflineTimeout=void 0,e._users.filter((function(e){return!e._trust_in_room_})).forEach((function(t){zv.debug("[".concat(e._clientId,"] user offline timeout, emit user offline ").concat(t.uid)),e._handleUserOffline({uid:t.uid})})))}),3e3),e._streamRemovedTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._streamRemovedTimeout=void 0,e._users.forEach((function(t){t._trust_audio_mute_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch audio unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,"audio",!1)),t._trust_video_mute_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch video unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,"video",!1)),t._trust_audio_enabled_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch enable local audio ").concat(t.uid)),e._handleSetStreamLocalEnable("audio",t.uid,!0)),t._trust_video_enabled_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch enable local video ").concat(t.uid)),e._handleSetStreamLocalEnable("video",t.uid,!0)),t._trust_video_stream_added_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch reset video stream added ").concat(t.uid)),e._handleResetAddStream(t,"video")),t._trust_audio_stream_added_state_||(zv.debug("[".concat(e._clientId,"] auto dispatch reset audio stream added ").concat(t.uid)),e._handleResetAddStream(t,"audio")),t._video_added_||t._audio_added_||(zv.debug("[".concat(e._clientId,"] auto dispatch stream remove ").concat(t.uid)),e._handleRemoveStream({uid:t.uid,uint_id:t._uintid}))})))}),1e3)}o()}})),this._gateway.on(Sg.REQUEST_NEW_GATEWAY_LIST,(function(t,n){if(!e._joinInfo)return n(new Uv(Dv.UNEXPECTED_ERROR,"can not recover, no join info"));lk(e._joinInfo,e._axiosCancelSource.token,e._config.httpRetryConfig||jv,e.store).then((function(n){e._joinInfo&&(e._joinInfo.apResponse=n.gatewayInfo.res,e._joinInfo.gatewayAddrs=n.gatewayInfo.gatewayAddrs,e._joinInfo.uni_lbs_ip=n.gatewayInfo.uni_lbs_ip),t(n.gatewayInfo.gatewayAddrs.map((function(t){if(e._joinInfo&&e._joinInfo.proxyServer){var n=t.address.split(":");return"wss://".concat(e._joinInfo.proxyServer,"/ws/?h=").concat(n[0],"&p=").concat(n[1])}return"wss://".concat(t.address)})))})).catch(n)})),this._gateway.on(Sg.NETWORK_QUALITY,(function(t){"normal"===e._networkQualitySensitivity&&e.emit(By.NETWORK_QUALITY,t)})),this._gateway.on(Sg.STREAM_TYPE_CHANGE,(function(t,n){e.emit(By.STREAM_TYPE_CHANGED,t,n),V_.reportApiInvoke(e._sessionId,{name:Ay.STREAM_TYPE_CHANGE,options:[t,n],tag:Ny.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:n}))})),this._gateway.on(Sg.IS_P2P_DISCONNECTED,(function(t){e._p2pChannel.isP2PDisconnected()?t(!0):e._p2pChannel.hasLocalMedia()||e._p2pChannel.hasRemoteMedia()?t(!1):t(!0)})),this._gateway.on(Sg.NEED_RENEW_SESSION,(function(){e._startSession()})),this._gateway.on(Sg.REQUEST_P2P_CONNECTION_PARAMS,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._p2pChannel.startP2PConnection(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.on(Sg.JOIN_RESPONSE,(function(t,n){var r=XC(t.ortc,n),i=r.dtlsParameters,o=r.iceParameters,a=r.candidates,s=r.rtpCapabilities,c=r.setup,u=r.cname;e._p2pChannel.connect(o,i,a,s,c,u)})),this._gateway.on(Sg.REQUEST_DC_CONNECTION_PARAMS,(function(t){t(e._p2pChannel.getEstablishParams())})),this._gateway.on(Sg.RESET_SIGNAL,(function(t){e._p2pChannel.resetConnection(t),e._handleGatewaySignalEvents()})),this._gateway.on(Sg.DATACHANNEL_FAILBACK,(function(){e._joinGateway()})),this._gateway.on(Sg.DATACHANNEL_PRECONNECT,function(){var t=u(c().mark((function t(n,r,i,o){var a,s,u,l,d,f,p;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(a=e._joinInfo)||void 0===a?void 0:a.turnServer},!0);case 2:return p=function(e,t){var n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],zv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),zv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(n,r),t.abrupt("return",e._p2pChannel.preConnect({iceUfrag:"".concat(null===(s=e._joinInfo)||void 0===s?void 0:s.apResponse.cid,"_").concat(null===(u=e._joinInfo)||void 0===u?void 0:u.apResponse.cert),icePwd:"".concat(null===(l=e._joinInfo)||void 0===l?void 0:l.apResponse.cid,"_").concat(null===(d=e._joinInfo)||void 0===d?void 0:d.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(f=sm("FINGERPRINT"))&&void 0!==f?f:n.fingerprint}]},p,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(o));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}())}},{key:"_handleGatewaySignalEvents",value:function(){var e=this;this._gateway.signal.on(Yy.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Yy.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Yy.ON_ADD_AUDIO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)})),this._gateway.signal.on(Yy.ON_ADD_VIDEO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)})),this._gateway.signal.on(Yy.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Yy.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Yy.MUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,"audio",!0)})),this._gateway.signal.on(Yy.UNMUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,"audio",!1)})),this._gateway.signal.on(Yy.MUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,"video",!0)})),this._gateway.signal.on(Yy.UNMUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,"video",!1)})),this._gateway.signal.on(Yy.RECEIVE_METADATA,(function(t){var n=mw(t.metadata);e.emit(By.RECEIVE_METADATA,t.uid,n)})),this._gateway.signal.on(Yy.ON_DATA_STREAM,(function(t){t.seq&&delete t.seq,t.payload=mw(t.payload),e.emit(By.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)})),this._gateway.signal.on(Yy.ON_CRYPT_ERROR,(function(){vw((function(){zv.warning("[".concat(e._clientId,"] on crypt error")),e.emit(By.CRYPT_ERROR)}),e._sessionId)})),this._gateway.signal.on(Yy.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Yy.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){zv.warning("[".concat(e._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),e._gateway.leave(!0),e.emit(By.ON_TOKEN_PRIVILEGE_DID_EXPIRE),e._reset()})),this._gateway.signal.on(Yy.ON_STREAM_FALLBACK_UPDATE,(function(t){zv.debug("[".concat(e._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),e.emit(By.STREAM_FALLBACK,t.stream_id,1===t.stream_type?"fallback":"recover")})),this._gateway.signal.on(Yy.ON_PUBLISH_STREAM,(function(t){e.uid===e._uid&&(e._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),zv.info("[".concat(e._clientId,"] on publish stream, ").concat(JSON.stringify(t))))})),this._gateway.signal.on(Yy.ENABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!0)})),this._gateway.signal.on(Yy.DISABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!1)})),this._gateway.signal.on(Hy.REQUEST_TIMEOUT,(function(t,n){if(e._joinInfo)switch(t){case Ky.PUBLISH:if(!n)return;var r=n.ortc;if(r){var i,o,a,s,c=r.some((function(e){return e.stream_type===bg.Audio})),u=r.some((function(e){return e.stream_type!==bg.Audio})),l=r.some((function(e){var t=e.stream_type;return t===bg.Screen||t===bg.ScreenLow}));"offer"===n.state&&V_.publish(e._joinInfo.sid,{eventElapse:DS.measureFromPublishStart(e.store.clientId,e.store.pubId),succ:!1,ec:Dv.TIMEOUT,audio:c,video:u,p2pid:n.p2p_id,publishRequestid:e.store.pubId,screenshare:l,audioName:c?null===(i=r.find((function(e){return e.stream_type===bg.Audio})))||void 0===i||null===(o=i.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0,videoName:u?null===(a=r.find((function(e){return e.stream_type!==bg.Audio})))||void 0===a||null===(s=a.ssrcs[0])||void 0===s?void 0:s.ssrcId.toString():void 0})}break;case Ky.SUBSCRIBE:n&&V_.subscribe(e._joinInfo.sid,{succ:!1,ec:Dv.TIMEOUT,audio:n.stream_type===Fg.AUDIO,video:n.stream_type===Fg.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:e.store.p2pId,eventElapse:DS.measureFromSubscribeStart(e.store.clientId,n.ssrcId)})}})),this._gateway.signal.on(Yy.ON_P2P_OK,(function(t){e.uid,e._uid})),this._gateway.signal.on(Yy.ON_PUBLISHED_USER_LIST,(function(t){if(null!=t&&t.users){var n,r=[],i=[],o=s(t.users);try{var a=function(){var t=n.value,o=e._users.find((function(e){return e.uid===t.stream_id}));o?o._trust_in_room_=!0:(o=new xT(t.stream_id,t.stream_id),e._users.push(o),0===e.getListeners(By.PUBLISHED_USER_LIST).length&&(zv.debug("[".concat(e._clientId,"] user online"),t.stream_id),e.emit(By.USER_JOINED,o)));var a=wg.Audio&t.stream_type,s=(wg.Video|wg.LwoVideo)&t.stream_type,c=a&&o.hasAudio,u=s&&o.hasVideo;s&&(o._trust_video_stream_added_state_=!0,o._video_added_=!0,o._videoSSRC=t.video_ssrc),a&&(o._trust_audio_stream_added_state_=!0,o._audio_added_=!0,o._audioSSRC=t.audio_ssrc),a&&!c&&0===e.getListeners(By.PUBLISHED_USER_LIST).length&&(zv.info("[".concat(e._clientId,"] remote user ").concat(o.uid," published audio")),e.emit(By.USER_PUBLISHED,o,"audio")),s&&!u&&0===e.getListeners(By.PUBLISHED_USER_LIST).length&&(zv.info("[".concat(e._clientId,"] remote user ").concat(o.uid," published video")),e.emit(By.USER_PUBLISHED,o,"video")),(a&&!c||s&&!u)&&r.push(o),s&&e._p2pChannel.hasPendingRemoteMedia(o,"video")&&i.push({user:o,mediaType:"video"}),a&&e._p2pChannel.hasPendingRemoteMedia(o,"audio")&&i.push({user:o,mediaType:"audio"})};for(o.s();!(n=o.n()).done;)a()}catch(c){o.e(c)}finally{o.f()}i.length>0&&(zv.debug("[".concat(e._clientId,"] RE massSubscribe after reconnect ").concat(i.map((function(e){return"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType)})).join("; ")," ")),e.massSubscribe(i).catch((function(t){zv.error("[".concat(e._clientId,"] mass resubscribe error"),t.toString())}))),e.getListeners(By.PUBLISHED_USER_LIST).length>0?(zv.info("[".concat(e._clientId,"] client emit user-list event, users: ").concat(r.map((function(e){return e.uid})).join(", "))),e.emit(By.PUBLISHED_USER_LIST,r)):zv.info("[".concat(e._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map((function(e){return e.uid})).join(", ")))}}))}},{key:"_handleP2PChannelEvents",value:function(){var e=this;this._p2pChannel.on(Gg.RequestMuteLocal,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.muteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===Dv.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Gg.RequestUnmuteLocal,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.unmuteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===Dv.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Gg.RequestRePublish,(function(t,n,r){e.publish(t,!1).then(n).catch(r)})),this._p2pChannel.on(Gg.RequestReSubscribe,function(){var t=u(c().mark((function t(n,r,i){var o,a,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,o=s(n),t.prev=2,o.s();case 4:if((a=o.n()).done){t.next=15;break}if(u=a.value,l=u.user,u.kind!==Fg.VIDEO){t.next=11;break}return t.next=9,e.subscribe(l,"video");case 9:t.next=13;break;case 11:return t.next=13,e.subscribe(l,"audio");case 13:t.next=4;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),o.e(t.t0);case 20:return t.prev=20,o.f(),t.finish(20);case 23:r(),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(0),i(t.t1);case 29:case"end":return t.stop()}}),t,null,[[0,26],[2,17,20,23]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Gg.RequestUploadStats,(function(t,n){e._gateway.uploadStats(t,n)})),this._p2pChannel.on(Gg.MediaReconnectStart,(function(t){e.emit(By.MEDIA_RECONNECT_START,t)})),this._p2pChannel.on(Gg.MediaReconnectEnd,(function(t){e.emit(By.MEDIA_RECONNECT_END,t)})),this._p2pChannel.on(Gg.NeedSignalRTT,(function(t){t(e._gateway.getSignalRTT())})),this._p2pChannel.on(Gg.RequestRestartICE,u(c().mark((function t(){var n,r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.restartICE();case 2:return n=t.sent,t.next=5,n.next();case 5:if(!(r=t.sent).done){t.next=8;break}return t.abrupt("return");case 8:return i=r.value,t.prev=9,t.next=12,e._gateway.restartICE({iceParameters:i});case 12:o=t.sent,t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return",void n.throw(t.t0));case 18:return a=function(e){var t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(o),s=a.iceParameters,t.next=21,n.next({remoteIceParameters:s});case 21:case"end":return t.stop()}}),t,null,[[9,15]])})))),this._p2pChannel.on(Gg.RequestReconnect,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._gateway.reconnect();case 1:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Gg.RequestReconnectPC,u(c().mark((function t(){var n,r,i,o,a,s,u,l,d,f,p,h,v,m,y;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(n=e._joinInfo)||void 0===n?void 0:n.turnServer});case 2:return r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,t.next=8,e._gateway.reconnectPC({iceParameters:i,dtlsParameters:o,rtpCapabilities:a});case 8:return s=t.sent,u=s.gatewayEstablishParams,l=s.gatewayAddress,d=XC(u,l),f=d.dtlsParameters,p=d.iceParameters,h=d.candidates,v=d.rtpCapabilities,m=d.setup,y=d.cname,t.next=20,e._p2pChannel.connect(p,f,h,v,m,y);case 20:return t.next=22,e._p2pChannel.republish();case 22:return t.next=24,e._p2pChannel.reSubscribe();case 24:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Gg.RequestUnpublishForReconnectPC,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo||void 0===e._uid){t.next=6;break}return t.next=3,e._gateway.unpublish(n,e._uid);case 3:r(),t.next=7;break;case 6:i();case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Gg.P2PLost,(function(){e.emit(By.P2P_LOST,e.store.uid)})),this._p2pChannel.on(Gg.UpdateVideoEncoder,(function(t){t._encoderConfig&&e._gateway.setVideoProfile(t._encoderConfig)})),this._p2pChannel.on(Gg.ConnectionTypeChange,(function(t){e.emit(By.IS_USING_CLOUD_PROXY,t)})),this._p2pChannel.on(Gg.RequestLowStreamParameter,(function(t){t(e._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(Gg.QueryClientConnectionState,(function(t){t(e.connectionState)}))}},{key:"getKeyMetrics",value:function(){return this.store.keyMetrics}},{key:"enableContentInspect",value:function(){var e=u(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.connectionState&&this._joinInfo){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));case 2:if(!this._inspect){e.next=4;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));case 4:if(t){e.next=6;break}throw new Uv(Dv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));case 6:if(t.inspectType&&Array.isArray(t.inspectType)){e.next=8;break}throw new Uv(Dv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));case 8:if((n=m(new Set(t.inspectType))).forEach((function(e){if(!["supervise","moderation"].includes(e))throw new Uv(Dv.INVALID_PARAMS,"[".concat(i._clientId,"] ").concat(e," is not a valid inspect type."))})),t.inspectType=n,!(t&&t.extraInfo&&t.extraInfo.length>1024)){e.next=12;break}throw new Uv(Dv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));case 12:return e.prev=12,r=new eN(t),this._inspect=r,this.handleVideoInspectEvents(this._inspect),e.next=18,r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},jv);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(12),Array.isArray(e.t0)?e.t0[0]:e.t0;case 23:case"end":return e.stop()}}),e,this,[[12,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disableContentInspect",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._inspect){e.next=2;break}throw new Uv(Dv.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));case 2:e.prev=2,this._inspect.close(),this._inspect=void 0,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),Array.isArray(e.t0)?e.t0[0]:e.t0;case 9:case"end":return e.stop()}}),e,this,[[2,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleVideoInspectEvents",value:function(e){var t=this;e.on(Xg.CONNECTION_STATE_CHANGE,(function(n,r){if(t.emit(By.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,r),r===qg.CONNECTED){if("CONNECTED"!==t.connectionState)return void t.emit(By.CONTENT_INSPECT_ERROR,new Uv(Dv.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(Xg.INSPECT_RESULT,(function(e,n){var r;if((null==n?void 0:n.code)===Dv.INVALID_OPERATION&&"DISCONNECTED"===t.connectionState)return zv.debug("Stop inspect content because that has left channel"),null==t||null===(r=t._inspect)||void 0===r||r.close(),void(t._inspect=void 0);t.emit(By.CONTENT_INSPECT_RESULT,e,n)})),e.on(Xg.CLIENT_LOCAL_VIDEO_TRACK,(function(e){e(t.localTracks.filter((function(e){return"video"===e.trackMediaType}))[0])}))}},{key:"getJoinChannelServiceRecords",value:function(){return zv.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}},{key:"setPublishAudioFilterEnabled",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fy(t,"enabled"),am("ENABLE_PUBLISH_AUDIO_FILTER",t),e.t0=this._joinInfo,!e.t0){e.next=6;break}return e.next=6,this._gateway.setPublishAudioFilterEnabled(t);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_handleResetAddStream",value:function(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}]),n}(Lv)).prototype,"leave",[hA],Object.getOwnPropertyDescriptor(QA.prototype,"leave"),QA.prototype),v_(QA.prototype,"publish",[vA],Object.getOwnPropertyDescriptor(QA.prototype,"publish"),QA.prototype),v_(QA.prototype,"unpublish",[mA],Object.getOwnPropertyDescriptor(QA.prototype,"unpublish"),QA.prototype),v_(QA.prototype,"subscribe",[yA],Object.getOwnPropertyDescriptor(QA.prototype,"subscribe"),QA.prototype),v_(QA.prototype,"massSubscribe",[gA],Object.getOwnPropertyDescriptor(QA.prototype,"massSubscribe"),QA.prototype),v_(QA.prototype,"unsubscribe",[EA],Object.getOwnPropertyDescriptor(QA.prototype,"unsubscribe"),QA.prototype),v_(QA.prototype,"massUnsubscribe",[_A],Object.getOwnPropertyDescriptor(QA.prototype,"massUnsubscribe"),QA.prototype),v_(QA.prototype,"setLowStreamParameter",[bA],Object.getOwnPropertyDescriptor(QA.prototype,"setLowStreamParameter"),QA.prototype),v_(QA.prototype,"enableDualStream",[SA],Object.getOwnPropertyDescriptor(QA.prototype,"enableDualStream"),QA.prototype),v_(QA.prototype,"disableDualStream",[wA],Object.getOwnPropertyDescriptor(QA.prototype,"disableDualStream"),QA.prototype),v_(QA.prototype,"setClientRole",[kA],Object.getOwnPropertyDescriptor(QA.prototype,"setClientRole"),QA.prototype),v_(QA.prototype,"setProxyServer",[TA],Object.getOwnPropertyDescriptor(QA.prototype,"setProxyServer"),QA.prototype),v_(QA.prototype,"setTurnServer",[RA],Object.getOwnPropertyDescriptor(QA.prototype,"setTurnServer"),QA.prototype),v_(QA.prototype,"setLicense",[CA],Object.getOwnPropertyDescriptor(QA.prototype,"setLicense"),QA.prototype),v_(QA.prototype,"startProxyServer",[IA],Object.getOwnPropertyDescriptor(QA.prototype,"startProxyServer"),QA.prototype),v_(QA.prototype,"stopProxyServer",[OA],Object.getOwnPropertyDescriptor(QA.prototype,"stopProxyServer"),QA.prototype),v_(QA.prototype,"setLocalAccessPointsV2",[AA],Object.getOwnPropertyDescriptor(QA.prototype,"setLocalAccessPointsV2"),QA.prototype),v_(QA.prototype,"setLocalAccessPoints",[NA],Object.getOwnPropertyDescriptor(QA.prototype,"setLocalAccessPoints"),QA.prototype),v_(QA.prototype,"setRemoteDefaultVideoStreamType",[DA],Object.getOwnPropertyDescriptor(QA.prototype,"setRemoteDefaultVideoStreamType"),QA.prototype),v_(QA.prototype,"setRemoteVideoStreamType",[xA],Object.getOwnPropertyDescriptor(QA.prototype,"setRemoteVideoStreamType"),QA.prototype),v_(QA.prototype,"setStreamFallbackOption",[PA],Object.getOwnPropertyDescriptor(QA.prototype,"setStreamFallbackOption"),QA.prototype),v_(QA.prototype,"setEncryptionConfig",[LA],Object.getOwnPropertyDescriptor(QA.prototype,"setEncryptionConfig"),QA.prototype),v_(QA.prototype,"renewToken",[MA],Object.getOwnPropertyDescriptor(QA.prototype,"renewToken"),QA.prototype),v_(QA.prototype,"enableAudioVolumeIndicator",[UA],Object.getOwnPropertyDescriptor(QA.prototype,"enableAudioVolumeIndicator"),QA.prototype),v_(QA.prototype,"startLiveStreaming",[jA],Object.getOwnPropertyDescriptor(QA.prototype,"startLiveStreaming"),QA.prototype),v_(QA.prototype,"setLiveTranscoding",[VA],Object.getOwnPropertyDescriptor(QA.prototype,"setLiveTranscoding"),QA.prototype),v_(QA.prototype,"stopLiveStreaming",[FA],Object.getOwnPropertyDescriptor(QA.prototype,"stopLiveStreaming"),QA.prototype),v_(QA.prototype,"addInjectStreamUrl",[BA],Object.getOwnPropertyDescriptor(QA.prototype,"addInjectStreamUrl"),QA.prototype),v_(QA.prototype,"removeInjectStreamUrl",[WA],Object.getOwnPropertyDescriptor(QA.prototype,"removeInjectStreamUrl"),QA.prototype),v_(QA.prototype,"startChannelMediaRelay",[GA],Object.getOwnPropertyDescriptor(QA.prototype,"startChannelMediaRelay"),QA.prototype),v_(QA.prototype,"updateChannelMediaRelay",[HA],Object.getOwnPropertyDescriptor(QA.prototype,"updateChannelMediaRelay"),QA.prototype),v_(QA.prototype,"stopChannelMediaRelay",[KA],Object.getOwnPropertyDescriptor(QA.prototype,"stopChannelMediaRelay"),QA.prototype),v_(QA.prototype,"sendCustomReportMessage",[zA],Object.getOwnPropertyDescriptor(QA.prototype,"sendCustomReportMessage"),QA.prototype),v_(QA.prototype,"pickSVCLayer",[YA],Object.getOwnPropertyDescriptor(QA.prototype,"pickSVCLayer"),QA.prototype),v_(QA.prototype,"enableContentInspect",[qA],Object.getOwnPropertyDescriptor(QA.prototype,"enableContentInspect"),QA.prototype),v_(QA.prototype,"disableContentInspect",[ZA],Object.getOwnPropertyDescriptor(QA.prototype,"disableContentInspect"),QA.prototype),v_(QA.prototype,"getJoinChannelServiceRecords",[XA],Object.getOwnPropertyDescriptor(QA.prototype,"getJoinChannelServiceRecords"),QA.prototype),v_(QA.prototype,"setPublishAudioFilterEnabled",[JA],Object.getOwnPropertyDescriptor(QA.prototype,"setPublishAudioFilterEnabled"),QA.prototype),QA),iN=function(e){f(n,e);var t=p(n);function n(e){var r;h(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=t.call(this),xp(l(r),"audioBuffer",void 0),xp(l(r),"sourceNode",void 0),xp(l(r),"startPlayTime",0),xp(l(r),"startPlayOffset",0),xp(l(r),"pausePlayTime",0),xp(l(r),"options",void 0),xp(l(r),"currentLoopCount",0),xp(l(r),"_currentState","stopped"),r.audioBuffer=e,r.options=i,r.startPlayOffset=r.options.startPlayTime||0,r}return v(n,[{key:"currentState",get:function(){return this._currentState},set:function(e){e!==this._currentState&&(this._currentState=e,this.emit(Zy.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}},{key:"createWebAudioDiagram",value:function(){return this.context.createGain()}},{key:"duration",get:function(){return this.audioBuffer.duration}},{key:"currentTime",get:function(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}},{key:"updateOptions",value:function(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):zv.warning("can not set audio source options")}},{key:"startProcessAudioBuffer",value:function(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}},{key:"pauseProcessAudioBuffer",value:function(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}},{key:"seekAudioBuffer",value:function(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}},{key:"resumeProcessAudioBuffer",value:function(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}},{key:"stopProcessAudioBuffer",value:function(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(b){}this.reset()}}},{key:"startSourceNode",value:function(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}},{key:"createSourceNode",value:function(){var e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}},{key:"handleSourceNodeEnded",value:function(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}},{key:"reset",value:function(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}]),n}(nb),oN=new Map;function aN(e,t){return sN.apply(this,arguments)}function sN(){return sN=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,"string"!=typeof t){e.next=16;break}if(!(i=oN.get(t))){e.next=5;break}return e.abrupt("return",(zv.debug("use cached audio resource: ",t),i));case 5:return e.prev=5,e.next=8,Fv((function(){return xv.get(t,{responseType:"arraybuffer"})}),void 0,void 0,{maxRetryCount:3});case 8:r=e.sent.data,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Uv(Dv.FETCH_AUDIO_FILE_FAILED,e.t0.toString());case 14:e.next=20;break;case 16:return o=new Vd((function(e,n){var r=new FileReader;r.onload=function(t){t.target?e(t.target.result):n(new Uv(Dv.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=function(){n(new Uv(Dv.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(t)})),e.next=19,o;case 19:r=e.sent;case 20:return e.next=22,function(e){var t=J_();return new Vd((function(n,r){t.decodeAudioData(e,(function(e){n(e)}),(function(e){r(new Uv(Dv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(r);case 22:return a=e.sent,e.abrupt("return",("string"==typeof t&&n&&oN.set(t,a),a));case 24:case"end":return e.stop()}}),e,null,[[5,11]])}))),sN.apply(this,arguments)}function cN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cN(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lN(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=uN(uN({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?zv.debug("[".concat(e,"] set content hint to"),n.optimizationMode):zv.debug("[".concat(e,"] set content hint failed")))):zv.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var dN=rp().name;function fN(e,t,n,r){var i,o=0,a=null;return new Vd((function(s,c){setTimeout((function(){i&&(i(),s(o))}),t),i=eb((function(){!function(){o>r&&i&&(i(),s(o));var t=n.getContext("2d");if(!t){var u=new Uv(Dv.UNEXPECTED_ERROR,"can not get canvas 2d context.");return zv.error(u.toString()),void c(u)}t.drawImage(e,0,0,160,120);var l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(a){for(var f=0;f<d;f+=3)if(l.data[f]!==a[f])return o+=1,void(a=l.data);a=l.data}else a=l.data}()}),30)}))}var pN,hN,vN=function(){function e(t,n){h(this,e),xp(this,"id",0),xp(this,"element",void 0),xp(this,"peerPair",void 0),xp(this,"context",void 0),xp(this,"audioPlayerElement",void 0),xp(this,"audioTrack",void 0),e.count+=1,this.id=e.count,this.element=t,this.context=n}return v(e,[{key:"initPeers",value:function(){var e=this;this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=function(t){var n=document.createElement("audio");n.srcObject=new MediaStream([t.track]),n.play(),e.audioPlayerElement=n}}},{key:"switchSdp",value:function(){var e=u(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerPair){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("offer"!==n){e.next=6;break}return e.next=3,t.createOffer();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,t.createAnswer();case 8:e.t0=e.sent;case 9:return r=e.t0,e.next=12,t.setLocalDescription(r);case 12:return e.abrupt("return","complete"===t.iceGatheringState?t.localDescription:new Vd((function(e){t.onicegatheringstatechange=function(){"complete"===t.iceGatheringState&&e(t.localDescription)}})));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setRemoteDescription(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,t(this.peerPair[0],"offer");case 6:return r=e.sent,e.next=9,n(this.peerPair[1],r);case 9:return e.next=11,t(this.peerPair[1],"answer");case 11:return i=e.sent,e.next=14,n(this.peerPair[0],i);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(3),new Uv(Dv.LOCAL_AEC_ERROR,e.t0.toString()).print();case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTracksFromMediaElement",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioTrack){e.next=2;break}return e.abrupt("return",this.audioTrack);case 2:e.prev=2,t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),n=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Uv(Dv.LOCAL_AEC_ERROR,e.t0.toString()).print();case 10:if(n){e.next=12;break}throw new Uv(Dv.LOCAL_AEC_ERROR,"no dest node when local aec").print();case 12:return r=n.stream.getAudioTracks()[0],e.abrupt("return",(this.audioTrack=r,r));case 14:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getElement",value:function(){return this.element}},{key:"startEchoCancellation",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.context.resume(),this.peerPair&&this.close(),this.initPeers(),t=this.element,e.next=4,this.getTracksFromMediaElement(t);case 4:return n=e.sent,this.peerPair&&this.peerPair[0].addTrack(n),e.next=8,this.switchSdp();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){zv.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((function(e){e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}]),e}();xp(vN,"count",0);var mN=window.AudioContext||window.webkitAudioContext,yN=new(pN=j_({report:V_}),v_((hN=function(){function e(){h(this,e),xp(this,"units",[]),xp(this,"context",void 0)}return v(e,[{key:"processExternalMediaAEC",value:function(e){if(!this._doesEnvironmentNeedAEC())return zv.debug("the system does not need to process local aec"),-1;this.context||(this.context=new mN);var t=this.units.find((function(t){return t&&t.getElement()===e}));return t||(t=new vN(e,this.context),this.units.push(t)),t.startEchoCancellation(),zv.debug("start processing local audio echo cancellation, id is",t.id),t.id}},{key:"_doesEnvironmentNeedAEC",value:function(){return rp().name!==Jf.SAFARI}}]),e}()).prototype,"processExternalMediaAEC",[pN],Object.getOwnPropertyDescriptor(hN.prototype,"processExternalMediaAEC"),hN.prototype),hN);am("PROCESS_ID","process-".concat(tw(8,""),"-").concat(tw(4,""),"-").concat(tw(4,""),"-").concat(tw(4,""),"-").concat(tw(12,""))),function(){var e=rp();nE.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),nE.getStreamFromExtension=e.name===Jf.CHROME&&Number(e.version)>34,nE.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),nE.supportMinBitrate=e.name===Jf.CHROME||e.name===Jf.EDGE,nE.supportSetRtpSenderParameters=function(){var e=rp();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!wp()||!(!dp()&&!sp())||e.name===Jf.FIREFOX&&Number(e.version)>=64)}(),e.name===Jf.SAFARI&&(Number(e.version)>=14?nE.supportDualStream=!0:nE.supportDualStream=!1),nE.webAudioMediaStreamDest=function(){var e=rp();return!(e.name===Jf.SAFARI&&Number(e.version)<12)}(),nE.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,nE.supportWebGL="undefined"!=typeof WebGLRenderingContext,nE.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,wp()||(nE.webAudioWithAEC=!0),nE.supportShareAudio=function(){var e=rp();return(e.os===Xf.WIN_10||e.os===Xf.WIN_81||e.os===Xf.WIN_7||e.os===Xf.LINUX||e.os===Xf.MAC_OS)&&e.name===Jf.CHROME&&Number(e.version)>=74}(),nE.supportDualStreamEncoding=function(){var e=rp();return!!sm("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&sm("CHROME_DUAL_STREAM_USE_ENCODING"))}(),nE.supportDataChannel=!!(function(e){var t=rp();return!(t.name!==Jf.CHROME||!t.osVersion)&&Number(t.version)>=e}(76)||function(e){var t=rp();return!(t.name!==Jf.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){var t=rp();return!(t.name!==Jf.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),zv.info("browser compatibility",JSON.stringify(nE),JSON.stringify(e)),nE.supportPCSetConfiguration=!fp()&&!!RTCPeerConnection.prototype.setConfiguration}(),function(){var e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void zv.error("Error loading sdk config",e.message)}if(e)try{var t=JSON.parse(window.atob(e)),n=Date.now();zv.debug("Loading global parameters from cache",t),Object.keys(t).forEach((function(e){if(Object.prototype.hasOwnProperty.call(cm,e)){var r=t[e],i=r.value,o=r.expires;if(o&&o<=n)return;um[e]=i,cm[e]=i}}))}catch(t){zv.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(um.AREAS)&&um.AREAS.length>0&&Xw(um.AREAS,!0);var gN={__CLIENT_LIST__:vm,__TRACK_LIST__:mm,VERSION:qv,BUILD:Yv,setParameter:function(e,t,n){zv.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),am(e,t,n)},getParameter:sm,getSupportedCodec:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:[],video:[]},e.prev=1,(n=new RTCPeerConnection).addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),e.next=6,n.createOffer();case 6:if(r=e.sent.sdp){e.next=9;break}return e.abrupt("return",t);case 9:n.close(),n=null,t=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(r),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),new Uv(Dv.CREATE_OFFER_FAILED,e.t0.toString&&e.t0.toString()).print();case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),checkSystemRequirements:function(){var e=V_.reportApiInvoke(null,{name:Ay.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Ny.TRACER}),t=!1;try{var n=window.RTCPeerConnection,r=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;t=!!(n&&r&&i)}catch(e){return zv.error("check system requirement failed: ",e),!1}var o=!1,a=rp();a.name===Jf.CHROME&&Number(a.version)>=58&&(!up()||cp())&&(o=!0),a.name===Jf.FIREFOX&&Number(a.version)>=56&&(o=!0),a.name===Jf.OPERA&&Number(a.version)>=45&&(o=!0),a.name===Jf.SAFARI&&Number(a.version)>=11&&(o=!0),(bp()||rp().name===Jf.QQ)&&(o=!0),zv.debug("checkSystemRequirements, api:",t,"browser",o);var s=t&&o;return e.onSuccess(s),s},getDevices:function(e){return bb.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return bb.getRecordingDevices(e)},getCameras:function(e){return bb.getCamerasDevices(e)},getElectronScreenSources:cb,getPlaybackDevices:function(e){return bb.getSpeakers(e)},createClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},t=V_.reportApiInvoke(null,{name:Ay.CREATE_CLIENT,options:[e],tag:Ny.TRACER});try{Qy(e)}catch(e){throw t.onError(e),e}return void 0===e.audioCodec&&(e.audioCodec="opus"),t.onSuccess(),new rN(nN(nN({forceWaitGatewayResponse:!0},e),{},{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_CAM_VIDEO_TRACK,options:[uN({},t)]}),r=Yk(t),i=tw(8,"track-cam-"),o=null,zv.info("start create camera video track with config",JSON.stringify(t),"trackId",i),e.prev=4,e.next=7,vb({video:r},i);case 7:if(e.t0=e.sent.getVideoTracks()[0],e.t0){e.next=10;break}e.t0=null;case 10:o=e.t0,e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(4),n.onError(e.t1),e.t1;case 16:if(o){e.next=19;break}return a=new Uv(Dv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(a),a.throw()));case 19:return t.optimizationMode&&lN(i,o,t,tm(t.encoderConfig)),s=new DT(o,t,r,t.scalabiltyMode?rm(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i),e.abrupt("return",(n.onSuccess(s.getTrackId()),zv.info("create camera video success, trackId:",i),s));case 22:case"end":return e.stop()}}),e,null,[[4,13]])})));function t(){return e.apply(this,arguments)}return t}(),createCustomVideoTrack:function(e){var t=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new NT(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?rm(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(n.getTrackId()),zv.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u,l,d,f,p,h,v,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},n=m.length>1&&void 0!==m[1]?m[1]:"disable",r=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_SCREEN_VIDEO_TRACK,options:[uN({},t),n]}),t.encoderConfig?"string"==typeof t.encoderConfig||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2",i=qk(t),o=tw(8,"track-scr"),a=null,s=null,(u=rE()).supportShareAudio||"enable"!==n){e.next=9;break}return l=new Uv(Dv.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio"),e.abrupt("return",(r.onError(l),l.throw()));case 9:return zv.info("start create screen video track with config",t,"withAudio",n,"trackId",o),e.prev=10,e.next=13,vb({screen:i,screenAudio:"auto"===n?u.supportShareAudio:"enable"===n},o);case 13:d=e.sent,a=d.getVideoTracks()[0]||null,s=d.getAudioTracks()[0]||null,e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(10),r.onError(e.t0),e.t0;case 20:if(a){e.next=23;break}return f=new Uv(Dv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(r.onError(f),f.throw()));case 23:if(s||"enable"!==n){e.next=27;break}return a&&a.stop(),p=new Uv(Dv.SHARE_AUDIO_NOT_ALLOWED),e.abrupt("return",(r.onError(p),p.throw()));case 27:if(t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(lN(o,a,t,t.encoderConfig&&nm(t.encoderConfig)),t.encoderConfig&&"string"!=typeof t.encoderConfig&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax)),h=new NT(a,t.encoderConfig?nm(t.encoderConfig):{},t.scalabiltyMode?rm(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,o,[Rg.SCREEN_TRACK]),s){e.next=31;break}return e.abrupt("return",(r.onSuccess(h.getTrackId()),zv.info("create screen video track success","video:",h.getTrackId()),h));case 31:return v=new RS(s),e.abrupt("return",(r.onSuccess([h.getTrackId(),v.getTrackId()]),zv.info("create screen video track success","video:",h.getTrackId(),"audio:",v.getTrackId()),[h,v]));case 33:case"end":return e.stop()}}),e,null,[[10,17]])})));function t(){return e.apply(this,arguments)}return t}(),createMicrophoneAndCameraTracks:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u,l,d,f,p,h,v=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},n=v.length>1&&void 0!==v[1]?v[1]:{},r=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_MIC_AND_CAM_TRACKS,options:[t,n]}),i=Yk(n),o=Zk(t),a=tw(8,"track-mic-"),s=tw(8,"track-cam-"),u=null,l=null,zv.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(n))),e.prev=4,e.next=7,vb({audio:o,video:i},"".concat(a,"-").concat(s));case 7:d=e.sent,u=d.getAudioTracks()[0],l=d.getVideoTracks()[0],e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(4),r.onError(e.t0),e.t0;case 14:if(u&&l){e.next=17;break}return f=new Uv(Dv.UNEXPECTED_ERROR,"can not find tracks in media stream"),e.abrupt("return",(r.onError(f),f.throw()));case 17:return n.optimizationMode&&lN(s,l,n,tm(n.encoderConfig)),p=new CS(u,t,o,a),h=new DT(l,n,i,n.scalabiltyMode?rm(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s),e.abrupt("return",(r.onSuccess([p.getTrackId(),h.getTrackId()]),zv.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[p,h]));case 20:case"end":return e.stop()}}),e,null,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),createMicrophoneAudioTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_MIC_AUDIO_TRACK,options:[t]}),r=Zk(t),i=tw(8,"track-mic-"),o=null,zv.info("start create microphone audio track with config",JSON.stringify(t),"trackId",i),e.prev=4,e.next=7,vb({audio:r},i);case 7:if(e.t0=e.sent.getAudioTracks()[0],e.t0){e.next=10;break}e.t0=null;case 10:o=e.t0,e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(4),n.onError(e.t1),e.t1;case 16:if(o){e.next=19;break}return a=new Uv(Dv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(a),a.throw()));case 19:return s=new CS(o,t,r,i),e.abrupt("return",(n.onSuccess(s.getTrackId()),zv.info("create microphone audio track success, trackId:",i),s));case 21:case"end":return e.stop()}}),e,null,[[4,13]])})));function t(){return e.apply(this,arguments)}return t}(),createCustomAudioTrack:function(e){var t=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new RS(e.mediaStreamTrack,e.encoderConfig?om(e.encoderConfig):{});return zv.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:function(){var e=u(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CREATE_BUFFER_AUDIO_TRACK,options:[t]}),!sm("DISABLE_WEBAUDIO")){e.next=3;break}throw new Uv(Dv.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");case 3:if(r=tw(8,"track-buf-"),zv.info("start create buffer source audio track with config",JSON.stringify(t),"trackId",r),i=t.source,t.source instanceof AudioBuffer){e.next=16;break}return e.prev=7,e.next=10,aN(t.source,t.cacheOnlineFile);case 10:t.source=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",(n.onError(e.t0),e.t0.throw()));case 16:return o=new iN(t.source),a=new IS(i,o,t.encoderConfig?om(t.encoderConfig):{},r),e.abrupt("return",(zv.info("create buffer source audio track success, trackId:",r),n.onSuccess(a.getTrackId()),a));case 18:case"end":return e.stop()}}),e,null,[[7,13]])})));function t(t){return e.apply(this,arguments)}return t}(),setAppType:function(e){if(zv.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw zv.debug("Invalid appType"),new Uv(Dv.INVALID_PARAMS,"invalid app type",e);am("APP_TYPE",Math.floor(e))},setLogLevel:function(e){zv.setLogLevel(e)},enableLogUpload:function(){sm("USE_NEW_LOG")?am("UPLOAD_LOG",!0):zv.enableLogUpload()},disableLogUpload:function(){sm("USE_NEW_LOG")?am("UPLOAD_LOG",!1):zv.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Lk},checkAudioTrackIsActive:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:5e3,r=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]}),t instanceof RS||t instanceof aO){e.next=5;break}return i=new Uv(Dv.INVALID_TRACK,"the parameter is not a audio track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return n&&n<1e3&&(n=1e3),o=t instanceof RS?t.getTrackLabel():"remote_track",a=t.getVolumeLevel(),s=a,u=a,l=Date.now(),e.abrupt("return",new Vd((function(e){var i=setInterval((function(){var a=t.getVolumeLevel(),c=(s=a>s?a:s)-(u=a<u?a:u)>1e-4,d=Date.now()-l;if(c||d>n){clearInterval(i);var f=c,p={duration:d,deviceLabel:o,maxVolumeLevel:s,result:f};zv.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(p))),r.onSuccess(p),e(f)}}),200)})));case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),checkVideoTrackIsActive:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d,f,p,h,v,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:5e3,r=V_.reportApiInvoke(null,{tag:Ny.TRACER,name:Ay.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]}),t instanceof NT||t instanceof oO){e.next=5;break}return i=new Uv(Dv.INVALID_TRACK,"the parameter is not a video track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return o=4,n&&n<1e3&&(n=1e3),a=t instanceof NT?t.getTrackLabel():"remote_track",s=t.getMediaStreamTrack(!0),(u=document.createElement("video")).style.width="1px",u.style.height="1px",u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.controls=!1,(dp()||sp())&&(u.style.opacity="0.01",u.style.position="fixed",u.style.left="0",u.style.top="0",document.body.appendChild(u)),u.srcObject=new MediaStream([s]),u.play(),(l=document.createElement("canvas")).width=160,l.height=120,d=0,f=0,e.prev=12,p=Date.now(),e.next=16,fN(u,n,l,o);case 16:d=e.sent,f=Date.now()-p,e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(12),r.onError(e.t0),e.t0;case 23:return dN===Jf.SAFARI&&(u.pause(),u.remove()),u.srcObject=null,v={duration:f,changedPicNum:d,deviceLabel:a,result:h=d>o},e.abrupt("return",(zv.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(v))),r.onSuccess(v),h));case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));function t(t){return e.apply(this,arguments)}return t}(),setArea:Xw,audioElementPlayCenter:wb,processExternalMediaAEC:function(e){yN.processExternalMediaAEC(e)},registerExtensions:function(e){e.forEach((function(e){var t=e;t.__registered__=!0,t.logger.hookLog=zv.extLog,t.reporter.hookApiInvoke=V_.extApiInvoke,t.parameters&&Object.keys(t.parameters).forEach((function(e){t.parameters[e]=sm(e)}))}))},ChannelMediaRelayError:_g,ChannelMediaRelayEvent:gg,ChannelMediaRelayState:Eg,RemoteStreamFallbackType:Ig,RemoteStreamType:Cg,ConnectionDisconnectedReason:Fy,AudienceLatencyLevelType:Vy,AREAS:Ng},EN=window||document;return Object.defineProperties(gN,{onAudioAutoplayFailed:{get:function(){return N_.onAudioAutoplayFailed},set:function(e){N_.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:function(){return N_.onAutoplayFailed},set:function(e){N_.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:function(){return gN._onSecurityPolicyViolation},set:function(e){if(gN._onSecurityPolicyViolation=e,EN){var t=function(e){if(e&&e.blockedURI&&gN.onSecurityPolicyViolation){var t=e.blockedURI;sm("CSP_DETECTED_HOSTNAME_LIST").some((function(e){return t.includes(e)}))&&gN.onSecurityPolicyViolation&&"function"==typeof gN.onSecurityPolicyViolation&&gN.onSecurityPolicyViolation(e)}},n=gN._cspEventHandlerPointer;n&&EN.removeEventListener("securitypolicyviolation",n),e&&"function"==typeof e&&EN.addEventListener("securitypolicyviolation",t),gN._cspEventHandlerPointer=t}}}}),bb.on(xy.CAMERA_DEVICE_CHANGED,(function(e){zv.info("camera device changed",JSON.stringify(e)),gN.onCameraChanged&&gN.onCameraChanged(e)})),bb.on(xy.RECORDING_DEVICE_CHANGED,(function(e){zv.info("microphone device changed",JSON.stringify(e)),gN.onMicrophoneChanged&&gN.onMicrophoneChanged(e)})),bb.on(xy.PLAYOUT_DEVICE_CHANGED,(function(e){zv.debug("playout device changed",JSON.stringify(e)),gN.onPlaybackDeviceChanged&&gN.onPlaybackDeviceChanged(e)})),wb.onAutoplayFailed=function(){zv.info("detect audio element autoplay failed"),N_.onAudioAutoplayFailed&&N_.onAudioAutoplayFailed()},Z_.on("autoplay-failed",(function(){zv.info("detect webaudio autoplay failed"),N_.onAudioAutoplayFailed&&N_.onAudioAutoplayFailed()})),window&&(window.__ARTC__=gN),gN}()},1707:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},8126:function(e,t,n){"use strict";var r=n(6704);t.Z=r.default},4408:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r={};function i(){return r}},3462:function(e,t){"use strict";var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(s,t))}};t.Z=i},4697:function(e,t,n){"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{Z:function(){return r}})},5611:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(8527),i=n(4522),o=n(9853);function a(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=(0,o.Z)(a),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var u=(0,o.Z)(c);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}},9153:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(8527),i=n(9853),o=n(5611),a=n(4522);var s=6048e5;function c(e){(0,a.Z)(1,arguments);var t=(0,r.default)(e),n=(0,i.Z)(t).getTime()-function(e){(0,a.Z)(1,arguments);var t=(0,o.Z)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.Z)(n)}(t).getTime();return Math.round(n/s)+1}},9726:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(8527),i=n(4522),o=n(1230),a=n(9297),s=n(4408);function c(e,t){var n,c,u,l,d,f,p,h;(0,i.Z)(1,arguments);var v=(0,r.default)(e),m=v.getUTCFullYear(),y=(0,s.j)(),g=(0,a.Z)(null!==(n=null!==(c=null!==(u=null!==(l=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==l?l:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==u?u:y.firstWeekContainsDate)&&void 0!==c?c:null===(p=y.locale)||void 0===p||null===(h=p.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=new Date(0);E.setUTCFullYear(m+1,0,g),E.setUTCHours(0,0,0,0);var _=(0,o.Z)(E,t),b=new Date(0);b.setUTCFullYear(m,0,g),b.setUTCHours(0,0,0,0);var S=(0,o.Z)(b,t);return v.getTime()>=_.getTime()?m+1:v.getTime()>=S.getTime()?m:m-1}},9934:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(8527),i=n(1230),o=n(9726),a=n(4522),s=n(9297),c=n(4408);var u=6048e5;function l(e,t){(0,a.Z)(1,arguments);var n=(0,r.default)(e),l=(0,i.Z)(n,t).getTime()-function(e,t){var n,r,u,l,d,f,p,h;(0,a.Z)(1,arguments);var v=(0,c.j)(),m=(0,s.Z)(null!==(n=null!==(r=null!==(u=null!==(l=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==l?l:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==u?u:v.firstWeekContainsDate)&&void 0!==r?r:null===(p=v.locale)||void 0===p||null===(h=p.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1),y=(0,o.Z)(e,t),g=new Date(0);return g.setUTCFullYear(y,0,m),g.setUTCHours(0,0,0,0),(0,i.Z)(g,t)}(n,t).getTime();return Math.round(l/u)+1}},8552:function(e,t,n){"use strict";n.d(t,{Do:function(){return a},Iu:function(){return o},qp:function(){return s}});var r=["D","DD"],i=["YY","YYYY"];function o(e){return-1!==r.indexOf(e)}function a(e){return-1!==i.indexOf(e)}function s(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},4522:function(e,t,n){"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return r}})},9853:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),o=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t}},1230:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8527),i=n(4522),o=n(9297),a=n(4408);function s(e,t){var n,s,c,u,l,d,f,p;(0,i.Z)(1,arguments);var h=(0,a.j)(),v=(0,o.Z)(null!==(n=null!==(s=null!==(c=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==c?c:h.weekStartsOn)&&void 0!==s?s:null===(f=h.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.default)(e),y=m.getUTCDay(),g=(y<v?7:0)+y-v;return m.setUTCDate(m.getUTCDate()-g),m.setUTCHours(0,0,0,0),m}},9297:function(e,t,n){"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:function(){return r}})},9040:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}},2074:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(9297),i=n(4377),o=n(4522),a=36e5;function s(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.Z)(e,n*a)}},4377:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e).getTime(),a=(0,r.Z)(t);return new Date(n+a)}},1518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(9297),i=n(4377),o=n(4522),a=6e4;function s(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.Z)(e,n*a)}},1104:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var s=n.getDate(),c=new Date(n.getTime());return c.setMonth(n.getMonth()+a+1,0),s>=c.getDate()?c:(n.setFullYear(c.getFullYear(),c.getMonth(),s),n)}},6689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(1104),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=3*(0,r.Z)(t);return(0,i.default)(e,n)}},20:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(9040),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=7*(0,r.Z)(t);return(0,i.default)(e,n)}},5105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(1104),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.default)(e,12*n)}},2729:function(e,t,n){"use strict";n.d(t,{qk:function(){return o},vh:function(){return i},yJ:function(){return r}});Math.pow(10,8);var r=6e4,i=36e5,o=1e3},9759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(4697),i=n(8347),o=n(4522),a=864e5;function s(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),s=(0,i.default)(t),c=n.getTime()-(0,r.Z)(n),u=s.getTime()-(0,r.Z)(s);return Math.round((c-u)/a)}},5951:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}},7223:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(3629),i=n(4697),o=n(4522),a=6048e5;function s(e,t,n){(0,o.Z)(2,arguments);var s=(0,r.default)(e,n),c=(0,r.default)(t,n),u=s.getTime()-(0,i.Z)(s),l=c.getTime()-(0,i.Z)(c);return Math.round((u-l)/a)}},7415:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()-o.getFullYear()}},786:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e);return t.setHours(23,59,59,999),t}},4888:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},4565:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(4408),i=n(8527),o=n(9297),a=n(4522);function s(e,t){var n,s,c,u,l,d,f,p;(0,a.Z)(1,arguments);var h=(0,r.j)(),v=(0,o.Z)(null!==(n=null!==(s=null!==(c=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==c?c:h.weekStartsOn)&&void 0!==s?s:null===(f=h.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,i.default)(e),y=m.getDay(),g=6+(y<v?-7:0)-(y-v);return m.setDate(m.getDate()+g),m.setHours(23,59,59,999),m}},4675:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},1951:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(9314),i=n(1633),o=n(8527),a=n(4522);var s=n(9153),c=n(5611),u=n(9934),l=n(9726);function d(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var f={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return d("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):d(n+1,2)},d:function(e,t){return d(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return d(e.getUTCHours()%12||12,t.length)},H:function(e,t){return d(e.getUTCHours(),t.length)},m:function(e,t){return d(e.getUTCMinutes(),t.length)},s:function(e,t){return d(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return d(Math.floor(r*Math.pow(10,n-3)),t.length)}},p="midnight",h="noon",v="morning",m="afternoon",y="evening",g="night",E={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return f.y(e,t)},Y:function(e,t,n,r){var i=(0,l.Z)(e,r),o=i>0?i:1-i;return"YY"===t?d(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):d(o,t.length)},R:function(e,t){return d((0,c.Z)(e),t.length)},u:function(e,t){return d(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return d(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return d(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return f.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return d(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,u.Z)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):d(i,t.length)},I:function(e,t,n){var r=(0,s.Z)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):d(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):f.d(e,t)},D:function(e,t,n){var r=function(e){(0,a.Z)(1,arguments);var t=(0,o.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):d(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return d(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return d(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return d(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?h:0===i?p:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?y:i>=12?m:i>=4?v:g,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return f.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):f.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):f.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):f.s(e,t)},S:function(e,t){return f.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return b(i);case"XXXX":case"XX":return S(i);default:return S(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return b(i);case"xxxx":case"xx":return S(i);default:return S(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_(i,":");default:return"GMT"+S(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_(i,":");default:return"GMT"+S(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return d(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return d((r._originalDate||e).getTime(),t.length)}};function _(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+d(o,2)}function b(e,t){return e%60===0?(e>0?"-":"+")+d(Math.abs(e)/60,2):S(e,t)}function S(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+d(Math.floor(i/60),2)+n+d(i%60,2)}var w=E,k=n(3462),T=n(4697),R=n(8552),C=n(9297),I=n(4408),O=n(8126),A=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D=/^'([^]*?)'?$/,x=/''/g,P=/[a-zA-Z]/;function L(e,t,n){var s,c,u,l,d,f,p,h,v,m,y,g,E,_,b,S,L,M;(0,a.Z)(2,arguments);var U=String(t),j=(0,I.j)(),V=null!==(s=null!==(c=null===n||void 0===n?void 0:n.locale)&&void 0!==c?c:j.locale)&&void 0!==s?s:O.Z,F=(0,C.Z)(null!==(u=null!==(l=null!==(d=null!==(f=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==f?f:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(h=p.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==d?d:j.firstWeekContainsDate)&&void 0!==l?l:null===(v=j.locale)||void 0===v||null===(m=v.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==u?u:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=(0,C.Z)(null!==(y=null!==(g=null!==(E=null!==(_=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==_?_:null===n||void 0===n||null===(b=n.locale)||void 0===b||null===(S=b.options)||void 0===S?void 0:S.weekStartsOn)&&void 0!==E?E:j.weekStartsOn)&&void 0!==g?g:null===(L=j.locale)||void 0===L||null===(M=L.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==y?y:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!V.localize)throw new RangeError("locale must contain localize property");if(!V.formatLong)throw new RangeError("locale must contain formatLong property");var W=(0,o.default)(e);if(!(0,r.default)(W))throw new RangeError("Invalid time value");var G=(0,T.Z)(W),H=(0,i.Z)(W,G),K={firstWeekContainsDate:F,weekStartsOn:B,locale:V,_originalDate:W};return U.match(N).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,k.Z[t])(e,V.formatLong):e})).join("").match(A).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(D);if(!t)return e;return t[1].replace(x,"'")}(r);var o=w[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,R.Do)(r)||(0,R.qp)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,R.Iu)(r)||(0,R.qp)(r,t,String(e)),o(H,r,V.localize,K);if(i.match(P))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}},6114:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getDate()}},467:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getDay()}},1537:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getHours()}},6975:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(8527),i=n(3629),o=n(4522);function a(e){return(0,o.Z)(1,arguments),(0,i.default)(e,{weekStartsOn:1})}function s(e){(0,o.Z)(1,arguments);var t=function(e){(0,o.Z)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var s=a(i),c=new Date(0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);var u=a(c);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),a(n)}var c=6048e5;function u(e){(0,o.Z)(1,arguments);var t=(0,r.default)(e),n=a(t).getTime()-s(t).getTime();return Math.round(n/c)+1}},4424:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getMinutes()}},3747:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getMonth()}},639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e);return Math.floor(t.getMonth()/3)+1}},2295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getSeconds()}},4460:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getTime()}},2599:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){return(0,i.Z)(1,arguments),(0,r.default)(e).getFullYear()}},9420:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()>o.getTime()}},9579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()<o.getTime()}},6971:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(4522);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return(0,r.Z)(1,arguments),e instanceof Date||"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e)}},7508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},4690:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8347),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},5375:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}},4845:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(3006),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},1750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()===o.getFullYear()}},9314:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(6971),i=n(8527),o=n(4522);function a(e){if((0,o.Z)(1,arguments),!(0,r.default)(e)&&"number"!==typeof e)return!1;var t=(0,i.default)(e);return!isNaN(Number(t))}},7262:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e).getTime(),o=(0,r.default)(t.start).getTime(),a=(0,r.default)(t.end).getTime();if(!(o<=a))throw new RangeError("Invalid interval");return n>=o&&n<=a}},6704:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},i=function(e,t,n){var i,o=r[e];return i="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function o(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var a={date:o({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:o({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:o({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},c=function(e,t,n,r){return s[e]};function u(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var l={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:u({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:u({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:u({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:u({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:u({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function d(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(c,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(c,(function(e){return e.test(s)}));return a=e.valueCallback?e.valueCallback(u):u,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}var f,p={ordinalNumber:(f={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(f.matchPattern);if(!n)return null;var r=n[0],i=e.match(f.parsePattern);if(!i)return null;var o=f.valueCallback?f.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:d({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:d({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:d({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:d({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:d({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},h={code:"en-US",formatDistance:i,formatLong:a,formatRelative:c,localize:l,match:p,options:{weekStartsOn:0,firstWeekContainsDate:1}}},9333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(8527),i=n(4522);function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t,n;if((0,i.Z)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==o(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,r.default)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}},1056:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(8527),i=n(4522);function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t,n;if((0,i.Z)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==o(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,r.default)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}},9831:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(2729),i=n(4522),o=n(9297);function a(e,t){var n;(0,i.Z)(1,arguments);var a=(0,o.Z)(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var v,m=function(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var i=s.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(m.date){var y=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(m.date,a);v=function(e,t){if(null===t)return new Date(NaN);var n=e.match(c);if(!n)return new Date(NaN);var r=!!n[4],i=d(n[1]),o=d(n[2])-1,a=d(n[3]),s=d(n[4]),u=d(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,u)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,u):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(p[t]||(h(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(h(e)?366:365)}(t,i)?(l.setUTCFullYear(t,o,Math.max(i,a)),l):new Date(NaN)}(y.restDateString,y.year)}if(!v||isNaN(v.getTime()))return new Date(NaN);var g,E=v.getTime(),_=0;if(m.time&&(_=function(e){var t=e.match(u);if(!t)return NaN;var n=f(t[1]),i=f(t[2]),o=f(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,o))return NaN;return n*r.vh+i*r.yJ+1e3*o}(m.time),isNaN(_)))return new Date(NaN);if(!m.timezone){var b=new Date(E+_),S=new Date(0);return S.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),S.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),S}return g=function(e){if("Z"===e)return 0;var t=e.match(l);if(!t)return 0;var n="+"===t[1]?-1:1,i=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return n*(i*r.vh+o*r.yJ)}(m.timezone),isNaN(g)?new Date(NaN):new Date(E+_+g)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function f(e){return e&&parseFloat(e.replace(",","."))||0}var p=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400===0||e%4===0&&e%100!==0}},3216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Bi}});var r=n(8126),i=n(1633),o=n(8527);function a(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var s=n(3462),c=n(4697),u=n(8552),l=n(9297),d=n(4522);function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){function e(){g(this,e),b(this,"subPriority",0)}return _(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),w=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var s;return g(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return _(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(S),k=function(e){p(n,e);var t=v(n);function n(){var e;g(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return b(m(e=t.call.apply(t,[this].concat(i))),"priority",10),b(m(e),"subPriority",-1),e}return _(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(S);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new w(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}])&&T(t.prototype,n),r&&T(t,r),e}();function C(e){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"===typeof t))return t;return N(e)}(this,n)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,n,r,i=A(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(N(e=i.call.apply(i,[this].concat(n))),"priority",140),x(N(e),"incompatibleTokens",["R","u","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}])&&I(t.prototype,n),r&&I(t,r),o}(R),L=n(2729),M={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},U=/^([+-])(\d{2})(\d{2})?|Z/,j=/^([+-])(\d{2})(\d{2})|Z/,V=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,F=/^([+-])(\d{2}):(\d{2})|Z/,B=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function W(e,t){return e?{value:t(e.value),rest:e.rest}:e}function G(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function H(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*L.vh+o*L.yJ+a*L.qk),rest:t.slice(n[0].length)}}function K(e){return G(M.anyDigitsSigned,e)}function z(e,t){switch(e){case 1:return G(M.singleDigit,t);case 2:return G(M.twoDigits,t);case 3:return G(M.threeDigits,t);case 4:return G(M.fourDigits,t);default:return G(new RegExp("^\\d{1,"+e+"}"),t)}}function Y(e,t){switch(e){case 1:return G(M.singleDigitSigned,t);case 2:return G(M.twoDigitsSigned,t);case 3:return G(M.threeDigitsSigned,t);case 4:return G(M.fourDigitsSigned,t);default:return G(new RegExp("^-?\\d{1,"+e+"}"),t)}}function q(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Z(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function X(e){return e%400===0||e%4===0&&e%100!==0}function J(e){return J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var i=ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===J(t)||"function"===typeof t))return t;return te(e)}(this,n)}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(o,e);var t,n,r,i=ee(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(te(e=i.call.apply(i,[this].concat(n))),"priority",130),re(te(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return W(z(4,e),r);case"yo":return W(n.ordinalNumber(e,{unit:"year"}),r);default:return W(z(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Z(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}])&&Q(t.prototype,n),r&&Q(t,r),o}(R),oe=n(9726),ae=n(1230);function se(e){return se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var i=fe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"===typeof t))return t;return de(e)}(this,n)}}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(o,e);var t,n,r,i=le(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pe(de(e=i.call.apply(i,[this].concat(n))),"priority",130),pe(de(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return W(z(4,e),r);case"Yo":return W(n.ordinalNumber(e,{unit:"year"}),r);default:return W(z(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=(0,oe.Z)(e,r);if(n.isTwoDigitYear){var o=Z(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,ae.Z)(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,ae.Z)(e,r)}}])&&ce(t.prototype,n),r&&ce(t,r),o}(R),ve=n(9853);function me(e){return me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var i=be(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===me(t)||"function"===typeof t))return t;return _e(e)}(this,n)}}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(o,e);var t,n,r,i=Ee(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(_e(e=i.call.apply(i,[this].concat(n))),"priority",130),Se(_e(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return Y("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,ve.Z)(r)}}])&&ye(t.prototype,n),r&&ye(t,r),o}(R);function ke(e){return ke="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var i=Oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ke(t)||"function"===typeof t))return t;return Ie(e)}(this,n)}}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(o,e);var t,n,r,i=Ce(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ae(Ie(e=i.call.apply(i,[this].concat(n))),"priority",130),Ae(Ie(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return Y("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}])&&Te(t.prototype,n),r&&Te(t,r),o}(R);function De(e){return De="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var i=Ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"===typeof t))return t;return Me(e)}(this,n)}}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(o,e);var t,n,r,i=Le(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(Me(e=i.call.apply(i,[this].concat(n))),"priority",120),je(Me(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return z(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}])&&xe(t.prototype,n),r&&xe(t,r),o}(R);function Fe(e){return Fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},We(e,t)}function Ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var i=Ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fe(t)||"function"===typeof t))return t;return He(e)}(this,n)}}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(o,e);var t,n,r,i=Ge(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ze(He(e=i.call.apply(i,[this].concat(n))),"priority",120),ze(He(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return z(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}])&&Be(t.prototype,n),r&&Be(t,r),o}(R);function qe(e){return qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xe(e,t)}function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var i=$e(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qe(t)||"function"===typeof t))return t;return Qe(e)}(this,n)}}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(o,e);var t,n,r,i=Je(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return et(Qe(e=i.call.apply(i,[this].concat(n))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),et(Qe(e),"priority",110),e}return t=o,(n=[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return W(G(M.month,e),r);case"MM":return W(z(2,e),r);case"Mo":return W(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}])&&Ze(t.prototype,n),r&&Ze(t,r),o}(R);function nt(e){return nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},it(e,t)}function ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st(e);if(t){var i=st(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nt(t)||"function"===typeof t))return t;return at(e)}(this,n)}}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ut=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(o,e);var t,n,r,i=ot(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ct(at(e=i.call.apply(i,[this].concat(n))),"priority",110),ct(at(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return W(G(M.month,e),r);case"LL":return W(z(2,e),r);case"Lo":return W(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}])&&rt(t.prototype,n),r&&rt(t,r),o}(R),lt=n(9934);function dt(e){return dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var i=mt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dt(t)||"function"===typeof t))return t;return vt(e)}(this,n)}}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(a,e);var t,n,r,i=ht(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yt(vt(e=i.call.apply(i,[this].concat(n))),"priority",100),yt(vt(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return t=a,n=[{key:"parse",value:function(e,t,n){switch(t){case"w":return G(M.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return(0,ae.Z)(function(e,t,n){(0,d.Z)(2,arguments);var r=(0,o.default)(e),i=(0,l.Z)(t),a=(0,lt.Z)(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)}}],n&&ft(t.prototype,n),r&&ft(t,r),a}(R),Et=n(9153);function _t(e){return _t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},St(e,t)}function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var i=Tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_t(t)||"function"===typeof t))return t;return kt(e)}(this,n)}}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ct=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(a,e);var t,n,r,i=wt(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rt(kt(e=i.call.apply(i,[this].concat(n))),"priority",100),Rt(kt(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return t=a,n=[{key:"parse",value:function(e,t,n){switch(t){case"I":return G(M.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return(0,ve.Z)(function(e,t){(0,d.Z)(2,arguments);var n=(0,o.default)(e),r=(0,l.Z)(t),i=(0,Et.Z)(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}],n&&bt(t.prototype,n),r&&bt(t,r),a}(R);function It(e){return It="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},At(e,t)}function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var i=xt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===It(t)||"function"===typeof t))return t;return Dt(e)}(this,n)}}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt=[31,28,31,30,31,30,31,31,30,31,30,31],Mt=[31,29,31,30,31,30,31,31,30,31,30,31],Ut=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(o,e);var t,n,r,i=Nt(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pt(Dt(e=i.call.apply(i,[this].concat(n))),"priority",90),Pt(Dt(e),"subPriority",1),Pt(Dt(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"d":return G(M.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){var n=X(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Mt[r]:t>=1&&t<=Lt[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}])&&Ot(t.prototype,n),r&&Ot(t,r),o}(R);function jt(e){return jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ft(e,t)}function Bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gt(e);if(t){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jt(t)||"function"===typeof t))return t;return Wt(e)}(this,n)}}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(o,e);var t,n,r,i=Bt(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ht(Wt(e=i.call.apply(i,[this].concat(n))),"priority",90),Ht(Wt(e),"subpriority",1),Ht(Wt(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return G(M.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return X(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}])&&Vt(t.prototype,n),r&&Vt(t,r),o}(R),zt=n(4408);function Yt(e,t,n){var r,i,a,s,c,u,f,p;(0,d.Z)(2,arguments);var h=(0,zt.j)(),v=(0,l.Z)(null!==(r=null!==(i=null!==(a=null!==(s=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==s?s:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:h.weekStartsOn)&&void 0!==i?i:null===(f=h.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==r?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,o.default)(e),y=(0,l.Z)(t),g=((y%7+7)%7<v?7:0)+y-m.getUTCDay();return m.setUTCDate(m.getUTCDate()+g),m}function qt(e){return qt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xt(e,t)}function Jt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$t(e);if(t){var i=$t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qt(t)||"function"===typeof t))return t;return Qt(e)}(this,n)}}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(o,e);var t,n,r,i=Jt(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return en(Qt(e=i.call.apply(i,[this].concat(n))),"priority",90),en(Qt(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Yt(e,n,r)).setUTCHours(0,0,0,0),e}}])&&Zt(t.prototype,n),r&&Zt(t,r),o}(R);function nn(e){return nn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},on(e,t)}function an(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var i=cn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nn(t)||"function"===typeof t))return t;return sn(e)}(this,n)}}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(o,e);var t,n,r,i=an(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return un(sn(e=i.call.apply(i,[this].concat(n))),"priority",90),un(sn(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return W(z(t.length,e),i);case"eo":return W(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Yt(e,n,r)).setUTCHours(0,0,0,0),e}}])&&rn(t.prototype,n),r&&rn(t,r),o}(R);function dn(e){return dn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pn(e,t)}function hn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mn(e);if(t){var i=mn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dn(t)||"function"===typeof t))return t;return vn(e)}(this,n)}}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e){return mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(e)}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(o,e);var t,n,r,i=hn(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(vn(e=i.call.apply(i,[this].concat(n))),"priority",90),yn(vn(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return W(z(t.length,e),i);case"co":return W(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Yt(e,n,r)).setUTCHours(0,0,0,0),e}}])&&fn(t.prototype,n),r&&fn(t,r),o}(R);function En(e){return En="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bn(e,t)}function Sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kn(e);if(t){var i=kn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===En(t)||"function"===typeof t))return t;return wn(e)}(this,n)}}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(a,e);var t,n,r,i=Sn(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tn(wn(e=i.call.apply(i,[this].concat(n))),"priority",90),Tn(wn(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return t=a,n=[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return z(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return W(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return W(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return W(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return W(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){(0,d.Z)(2,arguments);var n=(0,l.Z)(t);n%7===0&&(n-=7);var r=(0,o.default)(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}],n&&_n(t.prototype,n),r&&_n(t,r),a}(R);function Cn(e){return Cn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},On(e,t)}function An(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var i=Dn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cn(t)||"function"===typeof t))return t;return Nn(e)}(this,n)}}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(o,e);var t,n,r,i=An(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xn(Nn(e=i.call.apply(i,[this].concat(n))),"priority",80),xn(Nn(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(q(n),0,0,0),e}}])&&In(t.prototype,n),r&&In(t,r),o}(R);function Ln(e){return Ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Un(e,t)}function jn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fn(e);if(t){var i=Fn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ln(t)||"function"===typeof t))return t;return Vn(e)}(this,n)}}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e){return Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fn(e)}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(o,e);var t,n,r,i=jn(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bn(Vn(e=i.call.apply(i,[this].concat(n))),"priority",80),Bn(Vn(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(q(n),0,0,0),e}}])&&Mn(t.prototype,n),r&&Mn(t,r),o}(R);function Gn(e){return Gn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kn(e,t)}function zn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qn(e);if(t){var i=qn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gn(t)||"function"===typeof t))return t;return Yn(e)}(this,n)}}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(e)}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(o,e);var t,n,r,i=zn(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zn(Yn(e=i.call.apply(i,[this].concat(n))),"priority",80),Zn(Yn(e),"incompatibleTokens",["a","b","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(q(n),0,0,0),e}}])&&Hn(t.prototype,n),r&&Hn(t,r),o}(R);function Jn(e){return Jn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t){return $n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$n(e,t)}function er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nr(e);if(t){var i=nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jn(t)||"function"===typeof t))return t;return tr(e)}(this,n)}}function tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(o,e);var t,n,r,i=er(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rr(tr(e=i.call.apply(i,[this].concat(n))),"priority",70),rr(tr(e),"incompatibleTokens",["H","K","k","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"h":return G(M.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}])&&Qn(t.prototype,n),r&&Qn(t,r),o}(R);function or(e){return or="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sr(e,t)}function cr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lr(e);if(t){var i=lr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===or(t)||"function"===typeof t))return t;return ur(e)}(this,n)}}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e){return lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lr(e)}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(o,e);var t,n,r,i=cr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dr(ur(e=i.call.apply(i,[this].concat(n))),"priority",70),dr(ur(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"H":return G(M.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}])&&ar(t.prototype,n),r&&ar(t,r),o}(R);function pr(e){return pr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function mr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gr(e);if(t){var i=gr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pr(t)||"function"===typeof t))return t;return yr(e)}(this,n)}}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(o,e);var t,n,r,i=mr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Er(yr(e=i.call.apply(i,[this].concat(n))),"priority",70),Er(yr(e),"incompatibleTokens",["h","H","k","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"K":return G(M.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}])&&hr(t.prototype,n),r&&hr(t,r),o}(R);function br(e){return br="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t){return wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wr(e,t)}function kr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rr(e);if(t){var i=Rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===br(t)||"function"===typeof t))return t;return Tr(e)}(this,n)}}function Tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ir=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(o,e);var t,n,r,i=kr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Cr(Tr(e=i.call.apply(i,[this].concat(n))),"priority",70),Cr(Tr(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"k":return G(M.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}])&&Sr(t.prototype,n),r&&Sr(t,r),o}(R);function Or(e){return Or="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t){return Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nr(e,t)}function Dr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pr(e);if(t){var i=Pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Or(t)||"function"===typeof t))return t;return xr(e)}(this,n)}}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(o,e);var t,n,r,i=Dr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Lr(xr(e=i.call.apply(i,[this].concat(n))),"priority",60),Lr(xr(e),"incompatibleTokens",["t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"m":return G(M.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}])&&Ar(t.prototype,n),r&&Ar(t,r),o}(R);function Ur(e){return Ur="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t){return Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vr(e,t)}function Fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wr(e);if(t){var i=Wr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ur(t)||"function"===typeof t))return t;return Br(e)}(this,n)}}function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(o,e);var t,n,r,i=Fr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gr(Br(e=i.call.apply(i,[this].concat(n))),"priority",50),Gr(Br(e),"incompatibleTokens",["t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t,n){switch(t){case"s":return G(M.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return z(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}])&&jr(t.prototype,n),r&&jr(t,r),o}(R);function Kr(e){return Kr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t){return Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yr(e,t)}function qr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xr(e);if(t){var i=Xr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Kr(t)||"function"===typeof t))return t;return Zr(e)}(this,n)}}function Zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xr(e){return Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xr(e)}function Jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}(o,e);var t,n,r,i=qr(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jr(Zr(e=i.call.apply(i,[this].concat(n))),"priority",30),Jr(Zr(e),"incompatibleTokens",["t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return W(z(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}])&&zr(t.prototype,n),r&&zr(t,r),o}(R);function $r(e){return $r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(e)}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t){return ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ti(e,t)}function ni(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ii(e);if(t){var i=ii(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$r(t)||"function"===typeof t))return t;return ri(e)}(this,n)}}function ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e){return ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ii(e)}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ai=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ti(e,t)}(o,e);var t,n,r,i=ni(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oi(ri(e=i.call.apply(i,[this].concat(n))),"priority",10),oi(ri(e),"incompatibleTokens",["t","T","x"]),e}return t=o,(n=[{key:"parse",value:function(e,t){switch(t){case"X":return H(U,e);case"XX":return H(j,e);case"XXXX":return H(V,e);case"XXXXX":return H(B,e);default:return H(F,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}])&&ei(t.prototype,n),r&&ei(t,r),o}(R);function si(e){return si="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si(e)}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ui(e,t){return ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ui(e,t)}function li(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fi(e);if(t){var i=fi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===si(t)||"function"===typeof t))return t;return di(e)}(this,n)}}function di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fi(e){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fi(e)}function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hi=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ui(e,t)}(o,e);var t,n,r,i=li(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pi(di(e=i.call.apply(i,[this].concat(n))),"priority",10),pi(di(e),"incompatibleTokens",["t","T","X"]),e}return t=o,(n=[{key:"parse",value:function(e,t){switch(t){case"x":return H(U,e);case"xx":return H(j,e);case"xxxx":return H(V,e);case"xxxxx":return H(B,e);default:return H(F,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}])&&ci(t.prototype,n),r&&ci(t,r),o}(R);function vi(e){return vi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yi(e,t){return yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yi(e,t)}function gi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_i(e);if(t){var i=_i(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vi(t)||"function"===typeof t))return t;return Ei(e)}(this,n)}}function Ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Si=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(o,e);var t,n,r,i=gi(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bi(Ei(e=i.call.apply(i,[this].concat(n))),"priority",40),bi(Ei(e),"incompatibleTokens","*"),e}return t=o,(n=[{key:"parse",value:function(e){return K(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}])&&mi(t.prototype,n),r&&mi(t,r),o}(R);function wi(e){return wi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ti(e,t){return Ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ti(e,t)}function Ri(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ii(e);if(t){var i=Ii(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wi(t)||"function"===typeof t))return t;return Ci(e)}(this,n)}}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ai=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ti(e,t)}(o,e);var t,n,r,i=Ri(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oi(Ci(e=i.call.apply(i,[this].concat(n))),"priority",20),Oi(Ci(e),"incompatibleTokens","*"),e}return t=o,(n=[{key:"parse",value:function(e){return K(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}])&&ki(t.prototype,n),r&&ki(t,r),o}(R),Ni={G:new P,y:new ie,Y:new he,R:new we,u:new Ne,Q:new Ve,q:new Ye,M:new tt,L:new ut,w:new gt,I:new Ct,d:new Ut,D:new Kt,E:new tn,e:new ln,c:new gn,i:new Rn,a:new Pn,b:new Wn,B:new Xn,h:new ir,H:new fr,K:new _r,k:new Ir,m:new Mr,s:new Hr,S:new Qr,X:new ai,x:new hi,t:new Si,T:new Ai};function Di(e){return Di="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function xi(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pi(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Li=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ui=/^'([^]*?)'?$/,ji=/''/g,Vi=/\S/,Fi=/[a-zA-Z]/;function Bi(e,t,n,f){var p,h,v,m,y,g,E,_,b,S,w,T,R,C,I,O,A,N;(0,d.Z)(3,arguments);var D=String(e),x=String(t),P=(0,zt.j)(),L=null!==(p=null!==(h=null===f||void 0===f?void 0:f.locale)&&void 0!==h?h:P.locale)&&void 0!==p?p:r.Z;if(!L.match)throw new RangeError("locale must contain match property");var M=(0,l.Z)(null!==(v=null!==(m=null!==(y=null!==(g=null===f||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==g?g:null===f||void 0===f||null===(E=f.locale)||void 0===E||null===(_=E.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==y?y:P.firstWeekContainsDate)&&void 0!==m?m:null===(b=P.locale)||void 0===b||null===(S=b.options)||void 0===S?void 0:S.firstWeekContainsDate)&&void 0!==v?v:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=(0,l.Z)(null!==(w=null!==(T=null!==(R=null!==(C=null===f||void 0===f?void 0:f.weekStartsOn)&&void 0!==C?C:null===f||void 0===f||null===(I=f.locale)||void 0===I||null===(O=I.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==R?R:P.weekStartsOn)&&void 0!==T?T:null===(A=P.locale)||void 0===A||null===(N=A.options)||void 0===N?void 0:N.weekStartsOn)&&void 0!==w?w:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===x)return""===D?(0,o.default)(n):new Date(NaN);var j,V={firstWeekContainsDate:M,weekStartsOn:U,locale:L},F=[new k],B=x.match(Mi).map((function(e){var t=e[0];return t in s.Z?(0,s.Z[t])(e,L.formatLong):e})).join("").match(Li),W=[],G=xi(B);try{var H=function(){var t=j.value;null!==f&&void 0!==f&&f.useAdditionalWeekYearTokens||!(0,u.Do)(t)||(0,u.qp)(t,x,e),null!==f&&void 0!==f&&f.useAdditionalDayOfYearTokens||!(0,u.Iu)(t)||(0,u.qp)(t,x,e);var n=t[0],r=Ni[n];if(r){var i=r.incompatibleTokens;if(Array.isArray(i)){var o=W.find((function(e){return i.includes(e.token)||e.token===n}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&W.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));W.push({token:n,fullToken:t});var a=r.run(D,t,L.match,V);if(!a)return{v:new Date(NaN)};F.push(a.setter),D=a.rest}else{if(n.match(Fi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(Ui)[1].replace(ji,"'")),0!==D.indexOf(t))return{v:new Date(NaN)};D=D.slice(t.length)}};for(G.s();!(j=G.n()).done;){var K=H();if("object"===Di(K))return K.v}}catch(ee){G.e(ee)}finally{G.f()}if(D.length>0&&Vi.test(D))return new Date(NaN);var z=F.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return F.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),Y=(0,o.default)(n);if(isNaN(Y.getTime()))return new Date(NaN);var q,Z=(0,i.Z)(Y,(0,c.Z)(Y)),X={},J=xi(z);try{for(J.s();!(q=J.n()).done;){var Q=q.value;if(!Q.validate(Z,V))return new Date(NaN);var $=Q.set(Z,X,V);Array.isArray($)?(Z=$[0],a(X,$[1])):Z=$}}catch(ee){J.e(ee)}finally{J.f()}return Z}},2618:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);return n.setHours(a),n}},7227:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);return n.setMinutes(a),n}},2363:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t),s=n.getFullYear(),c=n.getDate(),u=new Date(0);u.setFullYear(s,a,15),u.setHours(0,0,0,0);var l=function(e){(0,o.Z)(1,arguments);var t=(0,i.default)(e),n=t.getFullYear(),r=t.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}(u);return n.setMonth(a,Math.min(c,l)),n}},5765:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(9297),i=n(8527),o=n(2363),a=n(4522);function s(e,t){(0,a.Z)(2,arguments);var n=(0,i.default)(e),s=(0,r.Z)(t)-(Math.floor(n.getMonth()/3)+1);return(0,o.default)(n,n.getMonth()+3*s)}},9292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);return n.setSeconds(a),n}},5617:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(8527),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),a=(0,r.Z)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(a),n)}},7152:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(8527),i=n(2363),o=n(9297),a=n(4522);function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){if((0,a.Z)(2,arguments),"object"!==s(t)||null===t)throw new RangeError("values parameter must be an object");var n=(0,r.default)(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=(0,i.default)(n,t.month)),null!=t.date&&n.setDate((0,o.Z)(t.date)),null!=t.hours&&n.setHours((0,o.Z)(t.hours)),null!=t.minutes&&n.setMinutes((0,o.Z)(t.minutes)),null!=t.seconds&&n.setSeconds((0,o.Z)(t.seconds)),null!=t.milliseconds&&n.setMilliseconds((0,o.Z)(t.milliseconds)),n)}},8347:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e);return t.setHours(0,0,0,0),t}},5719:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},3006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getMonth(),o=n-n%3;return t.setMonth(o,1),t.setHours(0,0,0,0),t}},3629:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(8527),i=n(9297),o=n(4522),a=n(4408);function s(e,t){var n,s,c,u,l,d,f,p;(0,o.Z)(1,arguments);var h=(0,a.j)(),v=(0,i.Z)(null!==(n=null!==(s=null!==(c=null!==(u=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==u?u:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==c?c:h.weekStartsOn)&&void 0!==s?s:null===(f=h.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.default)(e),y=m.getDay(),g=(y<v?7:0)+y-v;return m.setDate(m.getDate()-g),m.setHours(0,0,0,0),m}},7235:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(8527),i=n(4522);function o(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},6753:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9040),i=n(4522),o=n(9297);function a(e,t){(0,i.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.default)(e,-n)}},4433:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(2074),i=n(4522),o=n(9297);function a(e,t){(0,i.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.default)(e,-n)}},1633:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4377),i=n(4522),o=n(9297);function a(e,t){(0,i.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.Z)(e,-n)}},4851:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(1518),i=n(4522),o=n(9297);function a(e,t){(0,i.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.default)(e,-n)}},8030:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(1104),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.default)(e,-n)}},6794:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(6689),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.default)(e,-n)}},7503:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(20),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.default)(e,-n)}},7602:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(9297),i=n(5105),o=n(4522);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.default)(e,-n)}},8527:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(4522);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},6818:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,r,i){var o=n(e),a=n(t),s="("===(i=i||"()")[0],c=")"===i[1];return(s?this.isAfter(o,r):!this.isBefore(o,r))&&(c?this.isBefore(a,r):!this.isAfter(a,r))||(s?this.isBefore(o,r):!this.isAfter(o,r))&&(c?this.isAfter(a,r):!this.isBefore(a,r))}}}()},4253:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},3320:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},5898:function(e){e.exports=function(){"use strict";return function(e,t,n){var r=t.prototype,i=function(e){return e&&(e.indexOf?e:e.s)},o=function(e,t,n,r,o){var a=e.name?e:e.$locale(),s=i(a[t]),c=i(a[n]),u=s||c.map((function(e){return e.slice(0,r)}));if(!o)return u;var l=a.weekStart;return u.map((function(e,t){return u[(t+(l||0))%7]}))},a=function(){return n.Ls[n.locale()]},s=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}(e.formats[t.toUpperCase()])},c=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):o(e,"months")},monthsShort:function(t){return t?t.format("MMM"):o(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):o(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):o(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):o(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return s(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return c.bind(this)()},n.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return s(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return o(a(),"months")},n.monthsShort=function(){return o(a(),"monthsShort","months",3)},n.weekdays=function(e){return o(a(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return o(a(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return o(a(),"weekdaysMin","weekdays",2,e)}}}()},9893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,r){var i=n.prototype,o=i.format;r.en.formats=e,i.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,r=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,i){var o=i&&i.toUpperCase();return r||n[i]||e[i]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return o.call(this,r)}}}()},9026:function(e){e.exports=function(){"use strict";return function(e,t,n){var r=function(e,t){if(!t||!t.length||!t[0]||1===t.length&&!t[0].length)return null;var n;1===t.length&&t[0].length>0&&(t=t[0]),n=t[0];for(var r=1;r<t.length;r+=1)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n};n.max=function(){var e=[].slice.call(arguments,0);return r("isAfter",e)},n.min=function(){var e=[].slice.call(arguments,0);return r("isBefore",e)}}}()},3027:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var a=i.prototype;o.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=o(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var c=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var u=a.utcOffset;a.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(r),null===r))return this;var a=Math.abs(r)<=16?60*r:r,s=this;if(i)return s.$offset=a,s.$u=0===r,s;if(0!==r){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+c,e)).$offset=a,s.$x.$localOffset=c}else s=this.utc();return s};var l=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),i=o(e).local();return f.call(r,i,t,n)}}}()},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=c(t),v=c(n),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{u(t,y,g)}catch(E){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,E=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case m:case v:case c:return e;default:return t}}case i:return t}}}function S(e){return b(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||b(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===g||e.$$typeof===E||e.$$typeof===_||e.$$typeof===y)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9513:function(e,t,n){!function(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,v,m,y,g,E,_,b,S,w,k,T,R,C,I,O,A,N,D,x,P,L,M,U,j,V,F,B,W,G,H,K,z,Y,q,Z,X,J,Q,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,de,fe){"use strict";function pe(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var he=pe(t),ve=pe(r),me=pe(i),ye=pe(o),ge=pe(a),Ee=pe(s),_e=pe(c),be=pe(u),Se=pe(l),we=pe(d),ke=pe(f),Te=pe(p),Re=pe(m),Ce=pe(y),Ie=pe(g),Oe=pe(E),Ae=pe(_),Ne=pe(b),De=pe(S),xe=pe(w),Pe=pe(k),Le=pe(T),Me=pe(R),Ue=pe(C),je=pe(I),Ve=pe(O),Fe=pe(A),Be=pe(N),We=pe(D),Ge=pe(x),He=pe(P),Ke=pe(L),ze=pe(M),Ye=pe(U),qe=pe(j),Ze=pe(V),Xe=pe(F),Je=pe(W),Qe=pe(G),$e=pe(H),et=pe(K),tt=pe(z),nt=pe(Y),rt=pe(q),it=pe(X),ot=pe(J),at=pe(Q),st=pe($),ct=pe(ee),ut=pe(te),lt=pe(ne),dt=pe(re),ft=pe(ie),pt=pe(oe),ht=pe(ae),vt=pe(se),mt=pe(ce),yt=pe(ue),gt=pe(le),Et=pe(fe);function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mt(r.key),r)}}function Tt(e,t,n){return t&&kt(e.prototype,t),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rt(e,t,n){return(t=Mt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(){return(Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var i=Ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dt(this,n)}}function Pt(e){return function(e){if(Array.isArray(e))return Lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Ut(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function jt(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Vt={p:jt,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return Ut(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ut(i,t)).replace("{{time}}",jt(o,t))}},Ft=12,Bt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Wt(e){var t=e?"string"==typeof e||e instanceof String?mt.default(e):ht.default(e):new Date;return Ht(t)?t:null}function Gt(e,t,n,r,i){var o=null,a=ln(n)||ln(un()),s=!0;return Array.isArray(t)?(t.forEach((function(t){var c=vt.default(e,t,new Date,{locale:a});r&&(s=Ht(c,i)&&e===Kt(c,t,n)),Ht(c,i)&&s&&(o=c)})),o):(o=vt.default(e,t,new Date,{locale:a}),r?s=Ht(o)&&e===Kt(o,t,n):Ht(o)||(t=t.match(Bt).map((function(e){var t=e[0];return"p"===t||"P"===t?a?(0,Vt[t])(e,a.formatLong):t:e})).join(""),e.length>0&&(o=vt.default(e,t.slice(0,e.length),new Date)),Ht(o)||(o=new Date(e))),Ht(o)&&s?o:null)}function Ht(e,t){return t=t||new Date("1/1/1000"),ye.default(e)&&!ft.default(e,t)}function Kt(e,t,n){if("en"===n)return ge.default(e,t,{awareOfUnicodeTokens:!0});var r=ln(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&un()&&ln(un())&&(r=ln(un())),ge.default(e,t,{locale:r||null,awareOfUnicodeTokens:!0})}function zt(e,t){var n=t.dateFormat,r=t.locale;return e&&Kt(e,Array.isArray(n)?n[0]:n,r)||""}function Yt(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,a=t.second,s=void 0===a?0:a;return Ge.default(We.default(Be.default(e,s),o),r)}function qt(e,t){var n=t&&ln(t)||un()&&ln(un());return Me.default(e,n?{locale:n}:null)}function Zt(e,t){return Kt(e,"ddd",t)}function Xt(e){return Qe.default(e)}function Jt(e,t,n){var r=ln(t||un());return $e.default(e,{locale:r,weekStartsOn:n})}function Qt(e){return et.default(e)}function $t(e){return nt.default(e)}function en(e){return tt.default(e)}function tn(){return Qe.default(Wt())}function nn(e,t){return e&&t?ut.default(e,t):!e&&!t}function rn(e,t){return e&&t?ct.default(e,t):!e&&!t}function on(e,t){return e&&t?lt.default(e,t):!e&&!t}function an(e,t){return e&&t?st.default(e,t):!e&&!t}function sn(e,t){return e&&t?at.default(e,t):!e&&!t}function cn(e,t,n){var r,i=Qe.default(t),o=rt.default(n);try{r=pt.default(e,{start:i,end:o})}catch(e){r=!1}return r}function un(){return("undefined"!=typeof window?window:globalThis).__localeId__}function ln(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function dn(e,t){return Kt(He.default(Wt(),e),"LLLL",t)}function fn(e,t){return Kt(He.default(Wt(),e),"LLL",t)}function pn(e,t){return Kt(Ke.default(Wt(),e),"QQQ",t)}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.excludeDateIntervals,a=t.includeDates,s=t.includeDateIntervals,c=t.filterDate;return bn(e,{minDate:n,maxDate:r})||i&&i.some((function(t){return an(e,t)}))||o&&o.some((function(t){var n=t.start,r=t.end;return pt.default(e,{start:n,end:r})}))||a&&!a.some((function(t){return an(e,t)}))||s&&!s.some((function(t){var n=t.start,r=t.end;return pt.default(e,{start:n,end:r})}))||c&&!c(Wt(e))||!1}function vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,r=t.end;return pt.default(e,{start:n,end:r})})):n&&n.some((function(t){return an(e,t)}))||!1}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate;return bn(e,{minDate:et.default(n),maxDate:it.default(r)})||i&&i.some((function(t){return rn(e,t)}))||o&&!o.some((function(t){return rn(e,t)}))||a&&!a(Wt(e))||!1}function yn(e,t,n,r){var i=Ve.default(e),o=Ue.default(e),a=Ve.default(t),s=Ue.default(t),c=Ve.default(r);return i===a&&i===c?o<=n&&n<=s:i<a?c===i&&o<=n||c===a&&s>=n||c<a&&c>i:void 0}function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate;return bn(e,{minDate:n,maxDate:r})||i&&i.some((function(t){return on(e,t)}))||o&&!o.some((function(t){return on(e,t)}))||a&&!a(Wt(e))||!1}function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate,s=new Date(e,0,1);return bn(s,{minDate:nt.default(n),maxDate:ot.default(r)})||i&&i.some((function(e){return nn(s,e)}))||o&&!o.some((function(e){return nn(s,e)}))||a&&!a(Wt(s))||!1}function _n(e,t,n,r){var i=Ve.default(e),o=je.default(e),a=Ve.default(t),s=je.default(t),c=Ve.default(r);return i===a&&i===c?o<=n&&n<=s:i<a?c===i&&o<=n||c===a&&s>=n||c<a&&c>i:void 0}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&Ze.default(e,n)<0||r&&Ze.default(e,r)>0}function Sn(e,t){return t.some((function(t){return xe.default(t)===xe.default(e)&&De.default(t)===De.default(e)}))}function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,i=t.filterTime;return n&&Sn(e,n)||r&&!Sn(e,r)||i&&!i(e)||!1}function kn(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i,o=Wt(),a=Ge.default(We.default(o,De.default(e)),xe.default(e)),s=Ge.default(We.default(o,De.default(n)),xe.default(n)),c=Ge.default(We.default(o,De.default(r)),xe.default(r));try{i=!pt.default(a,{start:s,end:c})}catch(e){i=!1}return i}function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,i=Ie.default(e,1);return n&&Xe.default(n,i)>0||r&&r.every((function(e){return Xe.default(e,i)>0}))||!1}function Rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,i=we.default(e,1);return n&&Xe.default(i,n)>0||r&&r.every((function(e){return Xe.default(i,e)>0}))||!1}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,i=Ae.default(e,1);return n&&Je.default(n,i)>0||r&&r.every((function(e){return Je.default(e,i)>0}))||!1}function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,i=Te.default(e,1);return n&&Je.default(i,n)>0||r&&r.every((function(e){return Je.default(i,e)>0}))||!1}function On(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ze.default(e,t)>=0}));return Ye.default(r)}return n?Ye.default(n):t}function An(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ze.default(e,t)<=0}));return qe.default(r)}return n?qe.default(n):t}function Nn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,i=e.length;r<i;r++){var o=e[r];if(me.default(o)){var a=Kt(o,"MM.dd.yyyy"),s=n.get(a)||[];s.includes(t)||(s.push(t),n.set(a,s))}else if("object"===St(o)){var c=Object.keys(o),u=c[0],l=o[c[0]];if("string"==typeof u&&l.constructor===Array)for(var d=0,f=l.length;d<f;d++){var p=Kt(l[d],"MM.dd.yyyy"),h=n.get(p)||[];h.includes(u)||(h.push(u),n.set(p,h))}}}return n}function Dn(e,t,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var c=Ee.default(_e.default(e,xe.default(i[s])),De.default(i[s])),u=Ee.default(e,(n+1)*r);dt.default(c,t)&&ft.default(c,u)&&a.push(i[s])}return a}function xn(e){return e<10?"0".concat(e):"".concat(e)}function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft,n=Math.ceil(Ve.default(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function Ln(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;n&&(s=Ve.default(n)<=a),r&&s&&(s=Ve.default(r)>=a),s&&i.push(a)}return i}var Mn=function(e){It(r,e);var n=xt(r);function r(e){var i;wt(this,r),Rt(Nt(i=n.call(this,e)),"renderOptions",(function(){var e=i.props.year,t=i.state.yearsList.map((function(t){return he.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:i.onChange.bind(Nt(i),t),"aria-selected":e===t?"true":void 0},e===t?he.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=i.props.minDate?Ve.default(i.props.minDate):null,r=i.props.maxDate?Ve.default(i.props.maxDate):null;return r&&i.state.yearsList.find((function(e){return e===r}))||t.unshift(he.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:i.incrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&i.state.yearsList.find((function(e){return e===n}))||t.push(he.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:i.decrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),Rt(Nt(i),"onChange",(function(e){i.props.onChange(e)})),Rt(Nt(i),"handleClickOutside",(function(){i.props.onCancel()})),Rt(Nt(i),"shiftYears",(function(e){var t=i.state.yearsList.map((function(t){return t+e}));i.setState({yearsList:t})})),Rt(Nt(i),"incrementYears",(function(){return i.shiftYears(1)})),Rt(Nt(i),"decrementYears",(function(){return i.shiftYears(-1)}));var o=e.yearDropdownItemNumber,a=e.scrollableYearDropdown,s=o||(a?10:5);return i.state={yearsList:Ln(i.props.year,s,i.props.minDate,i.props.maxDate)},i.dropdownRef=t.createRef(),i}return Tt(r,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=ve.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return he.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),r}(he.default.Component),Un=yt.default(Mn),jn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"state",{dropdownVisible:!1}),Rt(Nt(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?Ve.default(e.props.minDate):1900,n=e.props.maxDate?Ve.default(e.props.maxDate):2100,r=[],i=t;i<=n;i++)r.push(he.default.createElement("option",{key:i,value:i},i));return r})),Rt(Nt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),Rt(Nt(e),"renderSelectMode",(function(){return he.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Rt(Nt(e),"renderReadView",(function(t){return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},he.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),Rt(Nt(e),"renderDropdown",(function(){return he.default.createElement(Un,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),Rt(Nt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),Rt(Nt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),Rt(Nt(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),Rt(Nt(e),"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),Rt(Nt(e),"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),Rt(Nt(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return Tt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component),Vn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"isSelectedMonth",(function(t){return e.props.month===t})),Rt(Nt(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return he.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(Nt(e),n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?he.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),Rt(Nt(e),"onChange",(function(t){return e.props.onChange(t)})),Rt(Nt(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return Tt(n,[{key:"render",value:function(){return he.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(he.default.Component),Fn=yt.default(Vn),Bn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"state",{dropdownVisible:!1}),Rt(Nt(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return he.default.createElement("option",{key:t,value:t},e)}))})),Rt(Nt(e),"renderSelectMode",(function(t){return he.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),Rt(Nt(e),"renderReadView",(function(t,n){return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},he.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),Rt(Nt(e),"renderDropdown",(function(t){return he.default.createElement(Fn,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),Rt(Nt(e),"renderScrollMode",(function(t){var n=e.state.dropdownVisible,r=[e.renderReadView(!n,t)];return n&&r.unshift(e.renderDropdown(t)),r})),Rt(Nt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),Rt(Nt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Tt(n,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return fn(e,t.props.locale)}:function(e){return dn(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return he.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component);function Wn(e,t){for(var n=[],r=Qt(e),i=Qt(t);!dt.default(r,i);)n.push(Wt(r)),r=we.default(r,1);return n}var Gn=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"renderOptions",(function(){return r.state.monthYearsList.map((function(e){var t=Fe.default(e),n=nn(r.props.date,e)&&rn(r.props.date,e);return he.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(Nt(r),t),"aria-selected":n?"true":void 0},n?he.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Kt(e,r.props.dateFormat,r.props.locale))}))})),Rt(Nt(r),"onChange",(function(e){return r.props.onChange(e)})),Rt(Nt(r),"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:Wn(r.props.minDate,r.props.maxDate)},r}return Tt(n,[{key:"render",value:function(){var e=ve.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return he.default.createElement("div",{className:e},this.renderOptions())}}]),n}(he.default.Component),Hn=yt.default(Gn),Kn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"state",{dropdownVisible:!1}),Rt(Nt(e),"renderSelectOptions",(function(){for(var t=Qt(e.props.minDate),n=Qt(e.props.maxDate),r=[];!dt.default(t,n);){var i=Fe.default(t);r.push(he.default.createElement("option",{key:i,value:i},Kt(t,e.props.dateFormat,e.props.locale))),t=we.default(t,1)}return r})),Rt(Nt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),Rt(Nt(e),"renderSelectMode",(function(){return he.default.createElement("select",{value:Fe.default(Qt(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Rt(Nt(e),"renderReadView",(function(t){var n=Kt(e.props.date,e.props.dateFormat,e.props.locale);return he.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},he.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),Rt(Nt(e),"renderDropdown",(function(){return he.default.createElement(Hn,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),Rt(Nt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),Rt(Nt(e),"onChange",(function(t){e.toggleDropdown();var n=Wt(parseInt(t));nn(e.props.date,n)&&rn(e.props.date,n)||e.props.onChange(n)})),Rt(Nt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Tt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(he.default.Component),zn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"dayEl",he.default.createRef()),Rt(Nt(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),Rt(Nt(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),Rt(Nt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),Rt(Nt(e),"isSameDay",(function(t){return an(e.props.day,t)})),Rt(Nt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!e.isSameDay(e.props.selected)&&e.isSameDay(e.props.preSelection)})),Rt(Nt(e),"isDisabled",(function(){return hn(e.props.day,e.props)})),Rt(Nt(e),"isExcluded",(function(){return vn(e.props.day,e.props)})),Rt(Nt(e),"getHighLightedClass",(function(t){var n=e.props,r=n.day,i=n.highlightDates;if(!i)return!1;var o=Kt(r,"MM.dd.yyyy");return i.get(o)})),Rt(Nt(e),"isInRange",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&cn(n,r,i)})),Rt(Nt(e),"isInSelectingRange",(function(){var t,n=e.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,s=n.selectsDisabledDaysInRange,c=n.startDate,u=n.endDate,l=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(i||o||a)||!l||!s&&e.isDisabled())&&(i&&u&&(ft.default(l,u)||sn(l,u))?cn(r,l,u):(o&&c&&(dt.default(l,c)||sn(l,c))||!(!a||!c||u||!dt.default(l,c)&&!sn(l,c)))&&cn(r,c,l))})),Rt(Nt(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,i=n.startDate,o=n.selectsStart,a=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return an(r,o?a:i)})),Rt(Nt(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,i=n.endDate,o=n.selectsEnd,a=n.selectsRange,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return an(r,o||a?s:i)})),Rt(Nt(e),"isRangeStart",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&an(r,n)})),Rt(Nt(e),"isRangeEnd",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&an(i,n)})),Rt(Nt(e),"isWeekend",(function(){var t=Pe.default(e.props.day);return 0===t||6===t})),Rt(Nt(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Ue.default(e.props.day)})),Rt(Nt(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Ue.default(e.props.day)+1)%12===e.props.month})),Rt(Nt(e),"isCurrentDay",(function(){return e.isSameDay(Wt())})),Rt(Nt(e),"isSelected",(function(){return e.isSameDay(e.props.selected)})),Rt(Nt(e),"getClassNames",(function(t){var n=e.props.dayClassName?e.props.dayClassName(t):void 0;return ve.default("react-datepicker__day",n,"react-datepicker__day--"+Zt(e.props.day),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"))})),Rt(Nt(e),"getAriaLabel",(function(){var t=e.props,n=t.day,r=t.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=t.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=e.isDisabled()||e.isExcluded()?a:i;return"".concat(s," ").concat(Kt(n,"PPPP",e.props.locale))})),Rt(Nt(e),"getTabIndex",(function(t,n){var r=t||e.props.selected,i=n||e.props.preSelection;return e.isKeyboardSelected()||e.isSameDay(r)&&an(i,r)?0:-1})),Rt(Nt(e),"handleFocusDay",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(n=!0)),n&&e.dayEl.current.focus({preventScroll:!0})})),Rt(Nt(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(Le.default(e.props.day),e.props.day):Le.default(e.props.day)})),Rt(Nt(e),"render",(function(){return he.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option","aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()},e.renderDayContents())})),e}return Tt(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),n}(he.default.Component),Yn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),e}return Tt(n,[{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,r=void 0===n?"week ":n,i={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick};return he.default.createElement("div",{className:ve.default(i),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick},t)}}]),n}(he.default.Component),qn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),Rt(Nt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Rt(Nt(e),"handleWeekClick",(function(t,n,r){"function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,r),e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),Rt(Nt(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):qt(t)})),Rt(Nt(e),"renderDays",(function(){var t=Jt(e.props.day,e.props.locale,e.props.calendarStartDay),n=[],r=e.formatWeekNumber(t);if(e.props.showWeekNumber){var i=e.props.onWeekSelect?e.handleWeekClick.bind(Nt(e),t,r):void 0;n.push(he.default.createElement(Yn,{key:"W",weekNumber:r,onClick:i,ariaLabelPrefix:e.props.ariaLabelPrefix}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=be.default(t,n);return he.default.createElement(zn,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:e.props.month,onClick:e.handleDayClick.bind(Nt(e),r),onMouseEnter:e.handleDayMouseEnter.bind(Nt(e),r),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),e}return Tt(n,[{key:"render",value:function(){return he.default.createElement("div",{className:"react-datepicker__week"},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(he.default.Component),Zn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"MONTH_REFS",Pt(Array(12)).map((function(){return he.default.createRef()}))),Rt(Nt(e),"QUARTER_REFS",Pt(Array(4)).map((function(){return he.default.createRef()}))),Rt(Nt(e),"isDisabled",(function(t){return hn(t,e.props)})),Rt(Nt(e),"isExcluded",(function(t){return vn(t,e.props)})),Rt(Nt(e),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),Rt(Nt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Rt(Nt(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),Rt(Nt(e),"isRangeStartMonth",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&rn(He.default(r,t),i)})),Rt(Nt(e),"isRangeStartQuarter",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&on(Ke.default(r,t),i)})),Rt(Nt(e),"isRangeEndMonth",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&rn(He.default(r,t),o)})),Rt(Nt(e),"isRangeEndQuarter",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&on(Ke.default(r,t),o)})),Rt(Nt(e),"isWeekInMonth",(function(t){var n=e.props.day,r=be.default(t,6);return rn(t,n)||rn(r,n)})),Rt(Nt(e),"isCurrentMonth",(function(e,t){return Ve.default(e)===Ve.default(Wt())&&t===Ue.default(Wt())})),Rt(Nt(e),"isCurrentQuarter",(function(e,t){return Ve.default(e)===Ve.default(Wt())&&t===je.default(Wt())})),Rt(Nt(e),"isSelectedMonth",(function(e,t,n){return Ue.default(e)===t&&Ve.default(e)===Ve.default(n)})),Rt(Nt(e),"isSelectedQuarter",(function(e,t,n){return je.default(e)===t&&Ve.default(e)===Ve.default(n)})),Rt(Nt(e),"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,r=0,i=!1,o=Jt(Qt(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(he.default.createElement(qn,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:r,day:o,month:Ue.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!i;){r++,o=Se.default(o,1);var a=n&&r>=6,s=!n&&!e.isWeekInMonth(o);if(a||s){if(!e.props.peekNextMonth)break;i=!0}}return t})),Rt(Nt(e),"onMonthClick",(function(t,n){e.handleDayClick(Qt(He.default(e.props.day,n)),t)})),Rt(Nt(e),"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),Rt(Nt(e),"onMonthKeyDown",(function(t,n){t.preventDefault();var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onMonthClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,we.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,Ie.default(e.props.preSelection,1));break;case"ArrowUp":e.handleMonthNavigation(n>=0&&n<=2?n+9:n-3,Ie.default(e.props.preSelection,3));break;case"ArrowDown":e.handleMonthNavigation(n>=9&&n<=11?n-9:n+3,we.default(e.props.preSelection,3))}})),Rt(Nt(e),"onQuarterClick",(function(t,n){e.handleDayClick(en(Ke.default(e.props.day,n)),t)})),Rt(Nt(e),"handleQuarterNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),Rt(Nt(e),"onQuarterKeyDown",(function(t,n){var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onQuarterClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===n?1:n+1,ke.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===n?4:n-1,Oe.default(e.props.preSelection,1))}})),Rt(Nt(e),"getMonthClassNames",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,c=n.maxDate,u=n.preSelection,l=n.monthClassName,d=n.excludeDates,f=n.includeDates,p=l?l(He.default(r,t)):void 0,h=He.default(r,t);return ve.default("react-datepicker__month-text","react-datepicker__month-".concat(t),p,{"react-datepicker__month--disabled":(s||c||d||f)&&mn(h,e.props),"react-datepicker__month--selected":e.isSelectedMonth(r,t,a),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&Ue.default(u)===t,"react-datepicker__month--in-range":yn(i,o,t,r),"react-datepicker__month--range-start":e.isRangeStartMonth(t),"react-datepicker__month--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--today":e.isCurrentMonth(r,t)})})),Rt(Nt(e),"getTabIndex",(function(t){var n=Ue.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),Rt(Nt(e),"getQuarterTabIndex",(function(t){var n=je.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),Rt(Nt(e),"getAriaLabel",(function(t){var n=e.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=n.day,c=He.default(s,t),u=e.isDisabled(c)||e.isExcluded(c)?a:i;return"".concat(u," ").concat(Kt(c,"MMMM yyyy"))})),Rt(Nt(e),"getQuarterClassNames",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,c=n.maxDate,u=n.preSelection;return ve.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter--disabled":(s||c)&&gn(Ke.default(r,t),e.props),"react-datepicker__quarter--selected":e.isSelectedQuarter(r,t,a),"react-datepicker__quarter-text--keyboard-selected":je.default(u)===t,"react-datepicker__quarter--in-range":_n(i,o,t,r),"react-datepicker__quarter--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter--range-end":e.isRangeEndQuarter(t)})})),Rt(Nt(e),"renderMonths",(function(){var t=e.props,n=t.showFullMonthYearPicker,r=t.showTwoColumnMonthYearPicker,i=t.showFourColumnMonthYearPicker,o=t.locale,a=t.day,s=t.selected;return(i?[[0,1,2,3],[4,5,6,7],[8,9,10,11]]:r?[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]]:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]]).map((function(t,r){return he.default.createElement("div",{className:"react-datepicker__month-wrapper",key:r},t.map((function(t,r){return he.default.createElement("div",{ref:e.MONTH_REFS[t],key:r,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){e.onMonthKeyDown(n,t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(a,t)?"date":void 0,"aria-selected":e.isSelectedMonth(a,t,s)},n?dn(t,o):fn(t,o))})))}))})),Rt(Nt(e),"renderQuarters",(function(){var t=e.props,n=t.day,r=t.selected;return he.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,i){return he.default.createElement("div",{key:i,ref:e.QUARTER_REFS[i],role:"option",onClick:function(n){e.onQuarterClick(n,t)},onKeyDown:function(n){e.onQuarterKeyDown(n,t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,r),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(n,t)?"date":void 0},pn(t,e.props.locale))})))})),Rt(Nt(e),"getClassNames",(function(){var t=e.props;t.day;var n=t.selectingDate,r=t.selectsStart,i=t.selectsEnd,o=t.showMonthYearPicker,a=t.showQuarterYearPicker;return ve.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||i)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":a})})),e}return Tt(n,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,i=e.ariaLabelPrefix,o=void 0===i?"month ":i;return he.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(o," ").concat(Kt(r,"yyyy-MM")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(he.default.Component),Xn=function(e){It(n,e);var t=xt(n);function n(){var e;wt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rt(Nt(e=t.call.apply(t,[this].concat(i))),"state",{height:null}),Rt(Nt(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&kn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&wn(t,e.props)||e.props.onChange(t)})),Rt(Nt(e),"isSelectedTime",(function(t,n,r){return e.props.selected&&n===xe.default(t)&&r===De.default(t)})),Rt(Nt(e),"liClasses",(function(t,n,r){var i=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t,n,r):void 0];return e.isSelectedTime(t,n,r)&&i.push("react-datepicker__time-list-item--selected"),((e.props.minTime||e.props.maxTime)&&kn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&wn(t,e.props))&&i.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*xe.default(t)+De.default(t))%e.props.intervals!=0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")})),Rt(Nt(e),"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),Rt(Nt(e),"renderTimes",(function(){for(var t=[],n=e.props.format?e.props.format:"p",r=e.props.intervals,i=Xt(Wt(e.props.selected)),o=1440/r,a=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),s=e.props.selected||e.props.openToDate||Wt(),c=xe.default(s),u=De.default(s),l=Ge.default(We.default(i,u),c),d=0;d<o;d++){var f=Ee.default(i,d*r);if(t.push(f),a){var p=Dn(i,f,d,r,a);t=t.concat(p)}}return t.map((function(t,r){return he.default.createElement("li",{key:r,onClick:e.handleClick.bind(Nt(e),t),className:e.liClasses(t,c,u),ref:function(n){(ft.default(t,l)||sn(t,l))&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:"0","aria-selected":e.isSelectedTime(t,c,u)?"true":void 0},Kt(t,n,e.props.locale))}))})),e}return Tt(n,[{key:"componentDidMount",value:function(){this.list.scrollTop=this.centerLi&&n.calcCenterPosition(this.props.monthRef?this.props.monthRef.clientHeight-this.header.clientHeight:this.list.clientHeight,this.centerLi),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return he.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},he.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),he.default.createElement("div",{className:"react-datepicker__time"},he.default.createElement("div",{className:"react-datepicker__time-box"},he.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},tabIndex:"0"},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(he.default.Component);Rt(Xn,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Jn=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"YEAR_REFS",Pt(Array(r.props.yearItemNumber)).map((function(){return he.default.createRef()}))),Rt(Nt(r),"isDisabled",(function(e){return hn(e,r.props)})),Rt(Nt(r),"isExcluded",(function(e){return vn(e,r.props)})),Rt(Nt(r),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(Nt(r));window.requestAnimationFrame(t)})),Rt(Nt(r),"handleYearClick",(function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)})),Rt(Nt(r),"handleYearNavigation",(function(e,t){var n=r.props,i=n.date,o=n.yearItemNumber,a=Pn(i,o).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(r.props.setPreSelection(t),e-a==-1?r.updateFocusOnPaginate(o-1):e-a===o?r.updateFocusOnPaginate(0):r.YEAR_REFS[e-a].current.focus())})),Rt(Nt(r),"isSameDay",(function(e,t){return an(e,t)})),Rt(Nt(r),"isCurrentYear",(function(e){return e===Ve.default(Wt())})),Rt(Nt(r),"isKeyboardSelected",(function(e){var t=$t(ze.default(r.props.date,e));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!an(t,$t(r.props.selected))&&an(t,$t(r.props.preSelection))})),Rt(Nt(r),"onYearClick",(function(e,t){var n=r.props.date;r.handleYearClick($t(ze.default(n,t)),e)})),Rt(Nt(r),"onYearKeyDown",(function(e,t){var n=e.key;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(e,t),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(t+1,Te.default(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(t-1,Ae.default(r.props.preSelection,1))}})),Rt(Nt(r),"getYearClassNames",(function(e){var t=r.props,n=t.minDate,i=t.maxDate,o=t.selected,a=t.excludeDates,s=t.includeDates,c=t.filterDate;return ve.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===Ve.default(o),"react-datepicker__year-text--disabled":(n||i||a||s||c)&&En(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})})),Rt(Nt(r),"getYearTabIndex",(function(e){return r.props.disabledKeyboardNavigation?"-1":e===Ve.default(r.props.preSelection)?"0":"-1"})),r}return Tt(n,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,r=Pn(n.date,n.yearItemNumber),i=r.startPeriod,o=r.endPeriod,a=function(n){t.push(he.default.createElement("div",{ref:e.YEAR_REFS[n-i],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},n))},s=i;s<=o;s++)a(s);return he.default.createElement("div",{className:"react-datepicker__year"},he.default.createElement("div",{className:"react-datepicker__year-wrapper"},t))}}]),n}(he.default.Component),Qn=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"onTimeChange",(function(e){r.setState({time:e});var t=new Date;t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),r.props.onChange(t)})),Rt(Nt(r),"renderTimeInput",(function(){var e=r.state.time,t=r.props,n=t.date,i=t.timeString,o=t.customTimeInput;return o?he.default.cloneElement(o,{date:n,value:e,onChange:r.onTimeChange}):he.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||i)}})})),r.state={time:r.props.timeString},r}return Tt(n,[{key:"render",value:function(){return he.default.createElement("div",{className:"react-datepicker__input-time-container"},he.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),he.default.createElement("div",{className:"react-datepicker-time__input-container"},he.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),n}(he.default.Component);function $n(e){var t=e.className,n=e.children,r=e.showPopperArrow,i=e.arrowProps,o=void 0===i?{}:i;return he.default.createElement("div",{className:t},r&&he.default.createElement("div",Ct({className:"react-datepicker__triangle"},o)),n)}var er=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],tr=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"handleClickOutside",(function(e){r.props.onClickOutside(e)})),Rt(Nt(r),"setClickOutsideRef",(function(){return r.containerRef.current})),Rt(Nt(r),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return er.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&r.props.onDropdownFocus()})),Rt(Nt(r),"getDateInView",(function(){var e=r.props,t=e.preSelection,n=e.selected,i=e.openToDate,o=On(r.props),a=An(r.props),s=Wt();return i||n||t||(o&&ft.default(s,o)?o:a&&dt.default(s,a)?a:s)})),Rt(Nt(r),"increaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:we.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Rt(Nt(r),"decreaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:Ie.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Rt(Nt(r),"handleDayClick",(function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)})),Rt(Nt(r),"handleDayMouseEnter",(function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)})),Rt(Nt(r),"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),Rt(Nt(r),"handleYearChange",(function(e){r.props.onYearChange&&(r.props.onYearChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),Rt(Nt(r),"handleMonthChange",(function(e){r.props.onMonthChange&&(r.props.onMonthChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),Rt(Nt(r),"handleMonthYearChange",(function(e){r.handleYearChange(e),r.handleMonthChange(e)})),Rt(Nt(r),"changeYear",(function(e){r.setState((function(t){var n=t.date;return{date:ze.default(n,e)}}),(function(){return r.handleYearChange(r.state.date)}))})),Rt(Nt(r),"changeMonth",(function(e){r.setState((function(t){var n=t.date;return{date:He.default(n,e)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Rt(Nt(r),"changeMonthYear",(function(e){r.setState((function(t){var n=t.date;return{date:ze.default(He.default(n,Ue.default(e)),Ve.default(e))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),Rt(Nt(r),"header",(function(){var e=Jt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),t=[];return r.props.showWeekNumbers&&t.push(he.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var n=be.default(e,t),i=r.formatWeekday(n,r.props.locale),o=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return he.default.createElement("div",{key:t,className:ve.default("react-datepicker__day-name",o)},i)})))})),Rt(Nt(r),"formatWeekday",(function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(Kt(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return Kt(e,"EEE",t)}(e,t):function(e,t){return Kt(e,"EEEEEE",t)}(e,t)})),Rt(Nt(r),"decreaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ae.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Rt(Nt(r),"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=Cn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,i=void 0===r?Ft:r,o=Pn($t(Ae.default(e,i)),i).endPeriod,a=n&&Ve.default(n);return a&&a>o||!1}(r.state.date,r.props);break;default:e=Tn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.previousMonthButtonLabel,s=o.previousYearButtonLabel,c=r.props,u=c.previousMonthAriaLabel,l=void 0===u?"string"==typeof a?a:"Previous Month":u,d=c.previousYearAriaLabel,f=void 0===d?"string"==typeof s?s:"Previous Year":d;return he.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?f:l},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},i?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),Rt(Nt(r),"increaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Te.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Rt(Nt(r),"renderNextButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=In(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,i=void 0===r?Ft:r,o=Pn(Te.default(e,i),i).startPeriod,a=n&&Ve.default(n);return a&&a<o||!1}(r.state.date,r.props);break;default:e=Rn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.nextMonthButtonLabel,s=o.nextYearButtonLabel,c=r.props,u=c.nextMonthAriaLabel,l=void 0===u?"string"==typeof a?a:"Next Month":u,d=c.nextYearAriaLabel,f=void 0===d?"string"==typeof s?s:"Next Year":d;return he.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?f:l},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},i?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),Rt(Nt(r),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),he.default.createElement("div",{className:t.join(" ")},Kt(e,r.props.dateFormat,r.props.locale))})),Rt(Nt(r),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!e)return he.default.createElement(jn,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:Ve.default(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),Rt(Nt(r),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!e)return he.default.createElement(Bn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Ue.default(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),Rt(Nt(r),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!e)return he.default.createElement(Kn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),Rt(Nt(r),"handleTodayButtonClick",(function(e){r.props.onSelect(tn(),e),r.props.setPreSelection&&r.props.setPreSelection(tn())})),Rt(Nt(r),"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return he.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return r.handleTodayButtonClick(e)}},r.props.todayButton)})),Rt(Nt(r),"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return he.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),he.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),he.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),Rt(Nt(r),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var i=Tn(r.state.date,r.props),o=Rn(r.state.date,r.props),a=Cn(r.state.date,r.props),s=In(r.state.date,r.props),c=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(bt(bt({},r.state),{},{customHeaderCount:n,monthDate:t,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o,prevYearButtonDisabled:a,nextYearButtonDisabled:s})),c&&he.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),Rt(Nt(r),"renderYearHeader",(function(){var e=r.state.date,t=r.props,n=t.showYearPicker,i=Pn(e,t.yearItemNumber),o=i.startPeriod,a=i.endPeriod;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(o," - ").concat(a):Ve.default(e))})),Rt(Nt(r),"renderHeader",(function(e){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(e);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(e);default:return r.renderDefaultHeader(e)}})),Rt(Nt(r),"renderMonths",(function(){if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var e=[],t=r.props.showPreviousMonths?r.props.monthsShown-1:0,n=Ie.default(r.state.date,t),i=0;i<r.props.monthsShown;++i){var o=i-r.props.monthSelectedIn,a=we.default(n,o),s="month-".concat(i),c=i<r.props.monthsShown-1,u=i>0;e.push(he.default.createElement("div",{key:s,ref:function(e){r.monthContainer=e},className:"react-datepicker__month-container"},r.renderHeader({monthDate:a,i:i}),he.default.createElement(Zn,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:a,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:c,monthShowsDuplicateDaysStart:u})))}return e}})),Rt(Nt(r),"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?he.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),he.default.createElement(Jn,Ct({onDayClick:r.handleDayClick,date:r.state.date},r.props))):void 0})),Rt(Nt(r),"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return he.default.createElement(Xn,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),Rt(Nt(r),"renderInputTimeSection",(function(){var e=new Date(r.props.selected),t=Ht(e)&&Boolean(r.props.selected)?"".concat(xn(e.getHours()),":").concat(xn(e.getMinutes())):"";if(r.props.showTimeInput)return he.default.createElement(Qn,{date:e,timeString:t,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),Rt(Nt(r),"renderAriaLiveRegion",(function(){var e,t=Pn(r.state.date,r.props.yearItemNumber),n=t.startPeriod,i=t.endPeriod;return e=r.props.showYearPicker?"".concat(n," - ").concat(i):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Ve.default(r.state.date):"".concat(dn(Ue.default(r.state.date),r.props.locale)," ").concat(Ve.default(r.state.date)),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),Rt(Nt(r),"renderChildren",(function(){if(r.props.children)return he.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=he.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Tt(n,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){!this.props.preSelection||an(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn?this.props.openToDate&&!an(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate}):this.setState({date:this.props.preSelection})}},{key:"render",value:function(){var e=this.props.container||$n;return he.default.createElement("div",{ref:this.containerRef},he.default.createElement(e,{className:ve.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,monthSelectedIn:0,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Ft}}}]),n}(he.default.Component),nr=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),(r=t.call(this,e)).el=document.createElement("div"),r}return Tt(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return gt.default.createPortal(this.props.children,this.el)}}]),n}(he.default.Component),rr=function(e){return!e.disabled&&-1!==e.tabIndex},ir=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(rr)})),Rt(Nt(r),"handleFocusStart",(function(e){var t=r.getTabChildren();t&&t.length>1&&t[t.length-1].focus()})),Rt(Nt(r),"handleFocusEnd",(function(e){var t=r.getTabChildren();t&&t.length>1&&t[0].focus()})),r.tabLoopRef=he.default.createRef(),r}return Tt(n,[{key:"render",value:function(){return this.props.enableTabLoop?he.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},he.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,he.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(he.default.Component),or=function(e){It(n,e);var t=xt(n);function n(){return wt(this,n),t.apply(this,arguments)}return Tt(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.wrapperClassName,i=t.hidePopper,o=t.popperComponent,a=t.popperModifiers,s=t.popperPlacement,c=t.popperProps,u=t.targetComponent,l=t.enableTabLoop,d=t.popperOnKeyDown,f=t.portalId,p=t.portalHost;if(!i){var h=ve.default("react-datepicker-popper",n);e=he.default.createElement(de.Popper,Ct({modifiers:a,placement:s},c),(function(e){var t=e.ref,n=e.style,r=e.placement,i=e.arrowProps;return he.default.createElement(ir,{enableTabLoop:l},he.default.createElement("div",{ref:t,style:n,className:h,"data-placement":r,onKeyDown:d},he.default.cloneElement(o,{arrowProps:i})))}))}this.props.popperContainer&&(e=he.default.createElement(this.props.popperContainer,{},e)),f&&!i&&(e=he.default.createElement(nr,{portalId:f,portalHost:p},e));var v=ve.default("react-datepicker-wrapper",r);return he.default.createElement(de.Manager,{className:"react-datepicker-manager"},he.default.createElement(de.Reference,null,(function(e){var t=e.ref;return he.default.createElement("div",{ref:t,className:v},u)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(he.default.Component),ar="react-datepicker-ignore-onclickoutside",sr=yt.default(tr),cr="Date input not valid.",ur=function(e){It(n,e);var t=xt(n);function n(e){var r;return wt(this,n),Rt(Nt(r=t.call(this,e)),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Wt()})),Rt(Nt(r),"calcInitialState",(function(){var e,t=r.getPreSelection(),n=On(r.props),i=An(r.props),o=n&&ft.default(t,Qe.default(n))?n:i&&dt.default(t,rt.default(i))?i:t;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:Nn(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),Rt(Nt(r),"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),Rt(Nt(r),"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),Rt(Nt(r),"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),Rt(Nt(r),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:dr},(function(){e||r.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&r.setBlur(),r.setState({inputValue:null})}))}))})),Rt(Nt(r),"inputOk",(function(){return me.default(r.state.preSelection)})),Rt(Nt(r),"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),Rt(Nt(r),"handleFocus",(function(e){r.state.preventFocus||(r.props.onFocus(e),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),Rt(Nt(r),"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),Rt(Nt(r),"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),Rt(Nt(r),"handleDropdownFocus",(function(){r.cancelFocusInput()})),Rt(Nt(r),"handleBlur",(function(e){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(e),r.setState({focused:!1})})),Rt(Nt(r),"handleCalendarClickOutside",(function(e){r.props.inline||r.setOpen(!1),r.props.onClickOutside(e),r.props.withPortal&&e.preventDefault()})),Rt(Nt(r),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(Nt(r),t),"function"==typeof i.isDefaultPrevented&&!i.isDefaultPrevented())){r.setState({inputValue:i.target.value,lastPreSelectChange:lr});var o=Gt(i.target.value,r.props.dateFormat,r.props.locale,r.props.strictParsing,r.props.minDate);r.props.showTimeSelectOnly&&!an(o,r.props.selected)&&(o=null==o?Et.default(r.props.selected,{hours:xe.default(r.props.selected),minutes:De.default(r.props.selected),seconds:Ne.default(r.props.selected)}):Et.default(r.props.selected,{hours:xe.default(o),minutes:De.default(o),seconds:Ne.default(o)})),!o&&i.target.value||r.setSelected(o,i,!0)}})),Rt(Nt(r),"handleSelect",(function(e,t,n){if(r.setState({preventFocus:!0},(function(){return r.preventFocusTimeout=setTimeout((function(){return r.setState({preventFocus:!1})}),50),r.preventFocusTimeout})),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.setSelected(e,t,!1,n),r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(e);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var i=r.props,o=i.startDate,a=i.endDate;!o||a||ft.default(e,o)||r.setOpen(!1)}})),Rt(Nt(r),"setSelected",(function(e,t,n,i){var o=e;if(r.props.showYearPicker){if(null!==o&&En(Ve.default(o),r.props))return}else if(r.props.showMonthYearPicker){if(null!==o&&mn(o,r.props))return}else if(null!==o&&hn(o,r.props))return;var a=r.props,s=a.onChange,c=a.selectsRange,u=a.startDate,l=a.endDate;if(!sn(r.props.selected,o)||r.props.allowSameDay||c)if(null!==o&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(o=Yt(o,{hour:xe.default(r.props.selected),minute:De.default(r.props.selected),second:Ne.default(r.props.selected)})),r.props.inline||r.setState({preSelection:o}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),c){var d=u&&l;u||l?u&&!l&&(ft.default(o,u)?s([o,null],t):s([u,o],t)):s([o,null],t),d&&s([o,null],t)}else s(o,t);n||(r.props.onSelect(o,t),r.setState({inputValue:null}))})),Rt(Nt(r),"setPreSelection",(function(e){var t=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,i=!0;if(e){var o=Qe.default(e);if(t&&n)i=cn(e,r.props.minDate,r.props.maxDate);else if(t){var a=Qe.default(r.props.minDate);i=dt.default(e,a)||sn(o,a)}else if(n){var s=rt.default(r.props.maxDate);i=ft.default(e,s)||sn(o,s)}}i&&r.setState({preSelection:e})})),Rt(Nt(r),"handleTimeChange",(function(e){var t=Yt(r.props.selected?r.props.selected:r.getPreSelection(),{hour:xe.default(e),minute:De.default(e)});r.setState({preSelection:t}),r.props.onChange(t),r.props.shouldCloseOnSelect&&r.setOpen(!1),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),Rt(Nt(r),"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),Rt(Nt(r),"onInputKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=r.calendar.componentNode&&r.calendar.componentNode.querySelector('.react-datepicker__day[tabindex="0"]');return void(n&&n.focus({preventScroll:!0}))}var i=Wt(r.state.preSelection);"Enter"===t?(e.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===dr?(r.handleSelect(i,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(i)):r.setOpen(!1)):"Escape"===t&&(e.preventDefault(),r.setOpen(!1)),r.inputOk()||r.props.onInputError({code:1,msg:cr})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||r.onInputClick()})),Rt(Nt(r),"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),Rt(Nt(r),"onDayKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key,n=Wt(r.state.preSelection);if("Enter"===t)e.preventDefault(),r.handleSelect(n,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(n);else if("Escape"===t)e.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:cr});else if(!r.props.disabledKeyboardNavigation){var i;switch(t){case"ArrowLeft":i=Re.default(n,1);break;case"ArrowRight":i=be.default(n,1);break;case"ArrowUp":i=Ce.default(n,1);break;case"ArrowDown":i=Se.default(n,1);break;case"PageUp":i=Ie.default(n,1);break;case"PageDown":i=we.default(n,1);break;case"Home":i=Ae.default(n,1);break;case"End":i=Te.default(n,1)}if(!i)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:cr}));if(e.preventDefault(),r.setState({lastPreSelectChange:dr}),r.props.adjustDateOnChange&&r.setSelected(i),r.setPreSelection(i),r.props.inline){var o=Ue.default(n),a=Ue.default(i),s=Ve.default(n),c=Ve.default(i);o!==a||s!==c?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),Rt(Nt(r),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),Rt(Nt(r),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),r.props.selectsRange?r.props.onChange([null,null],e):r.props.onChange(null,e),r.setState({inputValue:null})})),Rt(Nt(r),"clear",(function(){r.onClearClick()})),Rt(Nt(r),"onScroll",(function(e){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)})),Rt(Nt(r),"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?he.default.createElement(sr,{ref:function(e){r.calendar=e},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:ar,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showPopperArrow:r.props.showPopperArrow,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null})),Rt(Nt(r),"renderAriaLiveRegion",(function(){var e,t=r.props,n=t.dateFormat,i=t.locale,o=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return e=r.props.selectsRange?"Selected start date: ".concat(zt(r.props.startDate,{dateFormat:o,locale:i}),". ").concat(r.props.endDate?"End date: "+zt(r.props.endDate,{dateFormat:o,locale:i}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(zt(r.props.selected,{dateFormat:n,locale:i})):r.props.showYearPicker?"Selected year: ".concat(zt(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?"Selected month: ".concat(zt(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(zt(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(zt(r.props.selected,{dateFormat:o,locale:i})),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),Rt(Nt(r),"renderDateInput",(function(){var e,t=ve.default(r.props.className,Rt({},ar,r.state.open)),n=r.props.customInput||he.default.createElement("input",{type:"text"}),i=r.props.customInputRef||"ref",o="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(e,t,n){if(!e)return"";var r=zt(e,n),i=t?zt(t,n):"";return"".concat(r," - ").concat(i)}(r.props.startDate,r.props.endDate,r.props):zt(r.props.selected,r.props);return he.default.cloneElement(n,(Rt(e={},i,(function(e){r.input=e})),Rt(e,"value",o),Rt(e,"onBlur",r.handleBlur),Rt(e,"onChange",r.handleChange),Rt(e,"onClick",r.onInputClick),Rt(e,"onFocus",r.handleFocus),Rt(e,"onKeyDown",r.onInputKeyDown),Rt(e,"id",r.props.id),Rt(e,"name",r.props.name),Rt(e,"form",r.props.form),Rt(e,"autoFocus",r.props.autoFocus),Rt(e,"placeholder",r.props.placeholderText),Rt(e,"disabled",r.props.disabled),Rt(e,"autoComplete",r.props.autoComplete),Rt(e,"className",ve.default(n.props.className,t)),Rt(e,"title",r.props.title),Rt(e,"readOnly",r.props.readOnly),Rt(e,"required",r.props.required),Rt(e,"tabIndex",r.props.tabIndex),Rt(e,"aria-describedby",r.props.ariaDescribedBy),Rt(e,"aria-invalid",r.props.ariaInvalid),Rt(e,"aria-labelledby",r.props.ariaLabelledBy),Rt(e,"aria-required",r.props.ariaRequired),e))})),Rt(Nt(r),"renderClearButton",(function(){var e=r.props,t=e.isClearable,n=e.selected,i=e.startDate,o=e.endDate,a=e.clearButtonTitle,s=e.clearButtonClassName,c=void 0===s?"":s,u=e.ariaLabelClose,l=void 0===u?"Close":u;return!t||null==n&&null==i&&null==o?null:he.default.createElement("button",{type:"button",className:"react-datepicker__close-icon ".concat(c).trim(),"aria-label":l,onClick:r.onClearClick,title:a,tabIndex:-1})})),r.state=r.calcInitialState(),r}return Tt(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,r;e.inline&&(n=e.selected,r=this.props.selected,n&&r?Ue.default(n)!==Ue.default(r)||Ve.default(n)!==Ve.default(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Nn(this.props.highlightDates)}),t.focused||sn(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props.showIcon;return he.default.createElement("div",{className:"react-datepicker__input-container ".concat(e?"react-datepicker__view-calendar-icon":"")},e&&he.default.createElement("svg",{className:"react-datepicker__calendar-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},he.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"})),this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?he.default.createElement(ir,{enableTabLoop:this.props.enableTabLoop},he.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=he.default.createElement(nr,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),he.default.createElement("div",null,this.renderInputContainer(),t)}return he.default.createElement(or,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ft,renderDayContents:function(e){return e},focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0}}}]),n}(he.default.Component),lr="input",dr="navigate";e.CalendarContainer=$n,e.default=ur,e.getDefaultLocale=un,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2791),n(2007),n(1707),n(6971),n(9314),n(1951),n(1518),n(2074),n(9040),n(20),n(1104),n(6689),n(5105),n(4851),n(4433),n(6753),n(7503),n(8030),n(6794),n(7602),n(2295),n(4424),n(1537),n(467),n(6114),n(6975),n(3747),n(639),n(2599),n(4460),n(9292),n(7227),n(2618),n(2363),n(5765),n(5617),n(1056),n(9333),n(9759),n(5951),n(7223),n(7415),n(8347),n(3629),n(5719),n(3006),n(7235),n(786),n(4565),n(4888),n(4675),n(7508),n(4690),n(5375),n(1750),n(4845),n(9420),n(9579),n(7262),n(8527),n(3216),n(9831),n(11),n(4164),n(3521),n(7152))},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function E(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,U=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function F(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var c="\n"+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case T:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function z(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,ke=null;function Te(e){if(e=Ei(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=bi(t),Se(e.stateNode,e.type,t))}}function Re(e){we?ke?ke.push(e):ke=[e]:we=e}function Ce(){if(we){var e=we,t=ke;if(ke=we=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Oe(){}var Ae=!1;function Ne(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==we||null!==ke)&&(Oe(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var xe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){xe=!1}function Le(e,t,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,Ue=null,je=!1,Ve=null,Fe={onError:function(e){Me=!0,Ue=e}};function Be(e,t,n,r,i,o,a,s,c){Me=!1,Ue=null,Le.apply(Fe,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?ze(e):null}function ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ze(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Et=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,wt,kt,Tt,Rt=!1,Ct=[],It=null,Ot=null,At=null,Nt=new Map,Dt=new Map,xt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ei(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Tt(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ei(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Vt(e,t,n){jt(e)&&n.delete(t)}function Ft(){Rt=!1,null!==It&&jt(It)&&(It=null),null!==Ot&&jt(Ot)&&(Ot=null),null!==At&&jt(At)&&(At=null),Nt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Ot&&Bt(Ot,e),null!==At&&Bt(At,e),Nt.forEach(t),Dt.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Ut(n),null===n.blockedOn&&xt.shift()}var Gt=_.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=Et,o=Gt.transition;Gt.transition=null;try{Et=1,Yt(e,t,n,r)}finally{Et=i,Gt.transition=o}}function zt(e,t,n,r){var i=Et,o=Gt.transition;Gt.transition=null;try{Et=4,Yt(e,t,n,r)}finally{Et=i,Gt.transition=o}}function Yt(e,t,n,r){if(Ht){var i=Zt(e,t,n,r);if(null===i)Hr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Ot=Mt(Ot,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Mt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,Mt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=Ei(i);if(null!==o&&bt(o),null===(o=Zt(e,t,n,r))&&Hr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var qt=null;function Zt(e,t,n,r){if(qt=null,null!==(e=gi(e=be(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(un),dn=U({},un,{view:0,detail:0}),fn=on(dn),pn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(pn),vn=on(U({},pn,{dataTransfer:0})),mn=on(U({},dn,{relatedTarget:0})),yn=on(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=on(gn),_n=on(U({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Tn(){return kn}var Rn=U({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Rn),In=on(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=on(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Nn),xn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Pn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Vn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Re(r),0<(t=zr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Yn=null;function qn(e){jr(e,0)}function Zn(e){if(Y(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Qn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){zn&&(zn.detachEvent("onpropertychange",nr),Yn=zn=null)}function nr(e){if("value"===e.propertyName&&Zn(Yn)){var t=[];Kn(t,Yn,e,be(e)),Ne(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(zn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Yn)}function or(e,t){if("click"===e)return Zn(t)}function ar(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var a=lr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,Er=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&cr(gr,r)||(gr=r,0<(r=zr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},kr={};function Tr(e){if(wr[e])return wr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return wr[e]=n[t];return e}l&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Rr=Tr("animationend"),Cr=Tr("animationiteration"),Ir=Tr("animationstart"),Or=Tr("transitionend"),Ar=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),c(t,[e])}for(var xr=0;xr<Nr.length;xr++){var Pr=Nr[xr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Rr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,c,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(o(198));var l=Ue;Me=!1,Ue=null,je||(je=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,s,u),o=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,s,u),o=c}}}if(je)throw e=Ve,je=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Fr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=zt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=gi(s)))return;if(5===(c=a.tag)||6===c){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=o,i=be(n),a=[];e:{var s=Ar.get(e);if(void 0!==s){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":u="focus",c=mn;break;case"focusout":u="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=On;break;case Rr:case Cr:case Ir:c=yn;break;case Or:c=An;break;case"scroll":c=fn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=De(h,f))&&l.push(Kr(h,v,p)))),d)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(u=n.relatedTarget||n.fromElement)||!gi(u)&&!u[hi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?gi(u):null)&&(u!==(d=We(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=hn,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==c?s:_i(c),p=null==u?s:_i(u),(s=new l(v,h+"leave",c,n,i)).target=d,s.relatedTarget=p,v=null,gi(i)===r&&((l=new l(f,h+"enter",u,n,i)).target=p,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(f=u,h=0,p=l=c;p;p=Yr(p))h++;for(p=0,v=f;v;v=Yr(v))p++;for(;0<h-p;)l=Yr(l),h--;for(;0<p-h;)f=Yr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Yr(l),f=Yr(f)}l=null}else l=null;null!==c&&qr(a,s,c,l,!1),null!==u&&null!==d&&qr(a,d,u,l,!0)}if("select"===(c=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Xn;else if(Hn(s))if(Jn)m=ar;else{m=ir;var y=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,_r(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(a,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Wn?Fn(e,n)&&(E="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(E="onCompositionStart");E&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==E?"onCompositionEnd"===E&&Wn&&(g=en()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Wn=!0)),0<(y=zr(r,E)).length&&(E=new _n(E,e,null,n,i),a.push({event:E,listeners:y}),g?E.data=g:null!==(g=Bn(n))&&(E.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,jn);case"textInput":return(e=t.data)===jn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=en(),$t=Qt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g))}jr(a,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=De(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=De(n,o))&&a.unshift(Kr(n,c,s)):i||null!=(c=De(n,o))&&a.push(Kr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,vi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function Ei(e){return!(e=e[fi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function bi(e){return e[pi]||null}var Si=[],wi=-1;function ki(e){return{current:e}}function Ti(e){0>wi||(e.current=Si[wi],Si[wi]=null,wi--)}function Ri(e,t){wi++,Si[wi]=e.current,e.current=t}var Ci={},Ii=ki(Ci),Oi=ki(!1),Ai=Ci;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){Ti(Oi),Ti(Ii)}function Pi(e,t,n){if(Ii.current!==Ci)throw Error(o(168));Ri(Ii,t),Ri(Oi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,G(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=Ii.current,Ri(Ii,e),Ri(Oi,Oi.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Oi),Ti(Ii),Ri(Ii,e)):Ti(Oi),Ri(Oi,n)}var ji=null,Vi=!1,Fi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function Wi(){if(!Fi&&null!==ji){Fi=!0;var e=0,t=Et;try{var n=ji;for(Et=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Vi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ye($e,Wi),i}finally{Et=t,Fi=!1}}return null}var Gi=[],Hi=0,Ki=null,zi=0,Yi=[],qi=0,Zi=null,Xi=1,Ji="";function Qi(e,t){Gi[Hi++]=zi,Gi[Hi++]=Ki,Ki=e,zi=t}function $i(e,t,n){Yi[qi++]=Xi,Yi[qi++]=Ji,Yi[qi++]=Zi,Zi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Xi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function to(e){for(;e===Ki;)Ki=Gi[--Hi],Gi[Hi]=null,zi=Gi[--Hi],Gi[Hi]=null;for(;e===Zi;)Zi=Yi[--qi],Yi[qi]=null,Ji=Yi[--qi],Yi[qi]=null,Xi=Yi[--qi],Yi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Du(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Du(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(co(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(co(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ui(e.nextSibling)}function ho(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var mo=_.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var go=ki(null),Eo=null,_o=null,bo=null;function So(){bo=_o=Eo=null}function wo(e){var t=go.current;Ti(go),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){Eo=e,bo=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(bo!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===Eo)throw Error(o(308));_o=e,Eo.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var Co=null;function Io(e){null===Co?Co=[e]:Co.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ao(e,r)}function Ao(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var No=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Oc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ao(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ao(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,r){var i=e.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==o){var d=i.baseState;for(a=0,l=u=c=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,v=s;switch(f=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=v.payload)?h.call(p,d,f):h)||void 0===f)break e;d=U({},d,f);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=p,c=d):l=l.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Uc|=a,e.lanes=a,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Po(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Po(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Po(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(ru(t,e,r,n),Mo(t,e,r))}};function Go(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function Ho(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(i=Di(t)?Ai:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function zo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,Do(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ro(o):(o=Di(t)?Ai:Ii.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Wo.enqueueReplaceState(i,i.state,null),jo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===w?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Zo(o)===t.type)?((r=i(t,n.props)).ref=Yo(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Yo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Yo(e,null,t),n.return=e,n;case S:return(t=Vu(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null;case D:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);qo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function v(i,o,s,c){for(var u=null,l=null,d=o,v=o=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var y=p(i,d,s[v],c);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,v),null===l?u=y:l.sibling=y,l=y,d=m}if(v===s.length)return n(i,d),io&&Qi(i,v),u;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],c))&&(o=a(d,o,v),null===l?u=d:l.sibling=d,l=d);return io&&Qi(i,v),u}for(d=r(i,d);v<s.length;v++)null!==(m=h(d,i,v,s[v],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),io&&Qi(i,v),u}function m(i,s,c,u){var l=L(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var d=l=null,v=s,m=s=0,y=null,g=c.next();null!==v&&!g.done;m++,g=c.next()){v.index>m?(y=v,v=null):y=v.sibling;var E=p(i,v,g.value,u);if(null===E){null===v&&(v=y);break}e&&v&&null===E.alternate&&t(i,v),s=a(E,s,m),null===d?l=E:d.sibling=E,d=E,v=y}if(g.done)return n(i,v),io&&Qi(i,m),l;if(null===v){for(;!g.done;m++,g=c.next())null!==(g=f(i,g.value,u))&&(s=a(g,s,m),null===d?l=g:d.sibling=g,d=g);return io&&Qi(i,m),l}for(v=r(i,v);!g.done;m++,g=c.next())null!==(g=h(v,i,m,g.value,u))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===d?l=g:d.sibling=g,d=g);return e&&v.forEach((function(e){return t(i,e)})),io&&Qi(i,m),l}return function e(r,o,a,c){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var u=a.key,l=o;null!==l;){if(l.key===u){if((u=a.type)===w){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Zo(u)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Yo(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===w?((o=Mu(a.props.children,r.mode,c,a.key)).return=r,r=o):((c=Lu(a.type,a.key,a.props,null,r.mode,c)).ref=Yo(r,o,a),c.return=r,r=c)}return s(r);case S:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Vu(a,r.mode,c)).return=r,r=o}return s(r);case D:return e(r,o,(l=a._init)(a._payload),c)}if(te(a))return v(r,o,a,c);if(L(a))return m(r,o,a,c);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=ju(a,r.mode,c)).return=r,r=o),s(r)):n(r,o)}}var Jo=Xo(!0),Qo=Xo(!1),$o={},ea=ki($o),ta=ki($o),na=ki($o);function ra(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ri(na,t),Ri(ta,e),Ri(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(ea),Ri(ea,t)}function oa(){Ti(ea),Ti(ta),Ti(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ce(t,e.type);t!==n&&(Ri(ta,e),Ri(ea,n))}function sa(e){ta.current===e&&(Ti(ea),Ti(ta))}var ca=ki(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function da(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var fa=_.ReactCurrentDispatcher,pa=_.ReactCurrentBatchConfig,ha=0,va=null,ma=null,ya=null,ga=!1,Ea=!1,_a=0,ba=0;function Sa(){throw Error(o(321))}function wa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ka(e,t,n,r,i,a){if(ha=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:cs,e=n(r,i),Ea){a=0;do{if(Ea=!1,_a=0,25<=a)throw Error(o(301));a+=1,ya=ma=null,t.updateQueue=null,fa.current=us,e=n(r,i)}while(Ea)}if(fa.current=as,t=null!==ma&&null!==ma.next,ha=0,ya=ma=va=null,ga=!1,t)throw Error(o(300));return e}function Ta(){var e=0!==_a;return _a=0,e}function Ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?va.memoizedState=ya=e:ya=ya.next=e,ya}function Ca(){if(null===ma){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ya?va.memoizedState:ya.next;if(null!==t)ya=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ya?va.memoizedState=ya=e:ya=ya.next=e}return ya}function Ia(e,t){return"function"===typeof t?t(e):t}function Oa(e){var t=Ca(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var c=s=null,u=null,l=a;do{var d=l.lane;if((ha&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=f,s=r):u=u.next=f,va.lanes|=d,Uc|=d}l=l.next}while(null!==l&&l!==a);null===u?s=r:u.next=c,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Uc|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Aa(e){var t=Ca(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(_s=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Da(e,t){var n=va,r=Ca(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,_s=!0),r=r.queue,Ha(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Va(9,Pa.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(o(349));0!==(30&ha)||xa(n,t,i)}return i}function xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,Ma(t)&&Ua(e)}function La(e,t,n){return n((function(){Ma(t)&&Ua(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ua(e){var t=Ao(e,1);null!==t&&ru(t,e,1,-1)}function ja(e){var t=Ra();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Va(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Ca().memoizedState}function Ba(e,t,n,r){var i=Ra();va.flags|=e,i.memoizedState=Va(1|t,n,void 0,void 0===r?null:r)}function Wa(e,t,n,r){var i=Ca();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&wa(r,a.deps))return void(i.memoizedState=Va(t,n,o,r))}va.flags|=e,i.memoizedState=Va(1|t,n,o,r)}function Ga(e,t){return Ba(8390656,8,e,t)}function Ha(e,t){return Wa(2048,8,e,t)}function Ka(e,t){return Wa(4,2,e,t)}function za(e,t){return Wa(4,4,e,t)}function Ya(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4,4,Ya.bind(null,t,e),n)}function Za(){}function Xa(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&ha)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Uc|=n,e.baseState=!0),t)}function $a(e,t){var n=Et;Et=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{Et=n,pa.transition=r}}function es(){return Ca().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Oo(e,t,n,r))){ru(n,e,r,tu()),os(n,t,r)}}function ns(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var c=t.interleaved;return null===c?(i.next=i,Io(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Oo(e,t,i,r))&&(ru(n,e,r,i=tu()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){Ea=ga=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var as={readContext:Ro,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},ss={readContext:Ro,useCallback:function(e,t){return Ra().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Ga,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Ya.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Ra();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ra();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ra().memoizedState=e},useState:ja,useDebugValue:Za,useDeferredValue:function(e){return Ra().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=$a.bind(null,e[1]),Ra().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ra();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ac)throw Error(o(349));0!==(30&ha)||xa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ga(La.bind(null,r,a,e),[e]),r.flags|=2048,Va(9,Pa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ra(),t=Ac.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=_a++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:Ro,useCallback:Xa,useContext:Ro,useEffect:Ha,useImperativeHandle:qa,useInsertionEffect:Ka,useLayoutEffect:za,useMemo:Ja,useReducer:Oa,useRef:Fa,useState:function(){return Oa(Ia)},useDebugValue:Za,useDeferredValue:function(e){return Qa(Ca(),ma.memoizedState,e)},useTransition:function(){return[Oa(Ia)[0],Ca().memoizedState]},useMutableSource:Na,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1},us={readContext:Ro,useCallback:Xa,useContext:Ro,useEffect:Ha,useImperativeHandle:qa,useInsertionEffect:Ka,useLayoutEffect:za,useMemo:Ja,useReducer:Aa,useRef:Fa,useState:function(){return Aa(Ia)},useDebugValue:Za,useDeferredValue:function(e){var t=Ca();return null===ma?t.memoizedState=e:Qa(t,ma.memoizedState,e)},useTransition:function(){return[Aa(Ia)[0],Ca().memoizedState]},useMutableSource:Na,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Po(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,zc=r),fs(0,t)},n}function vs(e,t,n){(n=Po(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Yc?Yc=new Set([this]):Yc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ru.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Po(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Es=_.ReactCurrentOwner,_s=!1;function bs(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Jo(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=ka(e,t,n,r,o,i),n=Ta(),null===e||_s?(io&&n&&eo(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function ws(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||xu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ks(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Pu(o,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Cs(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Pc,xc),xc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Pc,xc),xc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ri(Pc,xc),xc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ri(Pc,xc),xc|=r;return bs(e,t,i,n),t.child}function Rs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var o=Di(n)?Ai:Ii.current;return o=Ni(t,o),To(t,i),n=ka(e,t,n,r,o,i),r=Ta(),null===e||_s?(io&&r&&eo(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Is(e,t,n,r,i){if(Di(n)){var o=!0;Mi(t)}else o=!1;if(To(t,i),null===t.stateNode)Hs(e,t),Ho(t,n,r),zo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ro(u):u=Ni(t,u=Di(n)?Ai:Ii.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==u)&&Ko(t,a,r,u),No=!1;var f=t.memoizedState;a.state=f,jo(t,r,a,i),c=t.memoizedState,s!==r||f!==c||Oi.current||No?("function"===typeof l&&(Bo(t,n,l,r),c=t.memoizedState),(s=No||Go(t,n,s,r,f,c,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,xo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:yo(t.type,s),a.props=u,d=t.pendingProps,f=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ro(c):c=Ni(t,c=Di(n)?Ai:Ii.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==c)&&Ko(t,a,r,c),No=!1,f=t.memoizedState,a.state=f,jo(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||Oi.current||No?("function"===typeof p&&(Bo(t,n,p,r),h=t.memoizedState),(u=No||Go(t,n,u,r,f,h,c)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Os(e,t,n,r,o,i)}function Os(e,t,n,r,i,o){Rs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ui(t,n,!1),Ks(e,t,o);r=t.stateNode,Es.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ia(e,t.containerInfo)}function Ns(e,t,n,r,i){return ho(),vo(i),t.flags|=256,bs(e,t,n,r),t.child}var Ds,xs,Ps,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=ca.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ri(ca,1&a),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,s?(i=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Uu(c,i,0,null),e=Mu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Ms,e):Vs(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Uu({mode:"visible",children:r.children},i,0,null),(a=Mu(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Ms,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(c=0!==(s&e.childLanes),_s||c){if(null!==(r=Ac)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ao(e,i),ru(r,e,i,-1))}return mu(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Yi[qi++]=Xi,Yi[qi++]=Ji,Yi[qi++]=Zi,Xi=e.id,Ji=e.overflow,Zi=t),t=Vs(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,a,n);if(s){s=i.fallback,c=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Pu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pu(r,s):(s=Mu(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,c=null===(c=e.child.memoizedState)?Us(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Pu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vs(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&vo(r),Jo(t,e.child,null,n),(e=Vs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Ws(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ca.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ri(ca,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,o);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function zs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Di(t.type)&&xi(),Ys(t),null;case 3:return r=t.stateNode,oa(),Ti(Oi),Ti(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(su(oo),oo=null))),xs(e,t),Ys(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ys(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var c in ge(n,a),i=null,a)if(a.hasOwnProperty(c)){var u=a[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Vr("scroll",r)}switch(n){case"input":z(r),$(r,a,!0);break;case"textarea":z(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[fi]=t,e[pi]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(c=Ee(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Z(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ge(n,i),u=i)if(u.hasOwnProperty(a)){var l=u[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Vr("scroll",e):null!=l&&E(e,a,l,c))}switch(n){case"input":z(e),$(e,r,!1);break;case"textarea":z(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ys(t),null;case 13:if(Ti(ca),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),ho(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else ho(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ca.current)?0===Lc&&(Lc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return oa(),xs(e,t),null===e&&Wr(t.stateNode.containerInfo),Ys(t),null;case 10:return wo(t.type._context),Ys(t),null;case 19:if(Ti(ca),null===(a=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)zs(a,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ua(e))){for(t.flags|=128,zs(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(ca,1&ca.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Gc&&(t.flags|=128,r=!0,zs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ua(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),zs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!io)return Ys(t),null}else 2*Je()-a.renderingStartTime>Gc&&1073741824!==n&&(t.flags|=128,r=!0,zs(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ca.current,Ri(ca,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&xc)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Zs(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&xi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ti(Oi),Ti(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ti(ca),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ca),null;case 4:return oa(),null;case 10:return wo(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xs=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),a=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Vr("scroll",e),a||c===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tu(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tc(t,n,o)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var dc=null,fc=!1;function pc(e,t,n){for(n=n.child;null!==n;)hc(e,t,n),n=n.sibling}function hc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||ec(n,t);case 6:var r=dc,i=fc;dc=null,pc(e,t,n),fc=i,null!==(dc=r)&&(fc?(e=dc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dc.removeChild(n.stateNode));break;case 18:null!==dc&&(fc?(e=dc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Wt(e)):ci(dc,n.stateNode));break;case 4:r=dc,i=fc,dc=n.stateNode.containerInfo,fc=!0,pc(e,t,n),dc=r,fc=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tc(n,t,a),i=i.next}while(i!==r)}pc(e,t,n);break;case 1:if(!Js&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tu(n,t,s)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pc(e,t,n),Js=r):pc(e,t,n);break;default:pc(e,t,n)}}function vc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Ou.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:dc=c.stateNode,fc=!1;break e;case 3:case 4:dc=c.stateNode.containerInfo,fc=!0;break e}c=c.return}if(null===dc)throw Error(o(160));hc(a,s,i),dc=null,fc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Tu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),gc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(m){Tu(e,e.return,m)}try{rc(5,e,e.return)}catch(m){Tu(e,e.return,m)}}break;case 1:mc(t,e),gc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(mc(t,e),gc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Tu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===a.type&&null!=a.name&&J(i,a),Ee(c,s);var l=Ee(c,a);for(s=0;s<u.length;s+=2){var d=u[s],f=u[s+1];"style"===d?me(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):E(i,d,f,l)}switch(c){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(i,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(m){Tu(e,e.return,m)}}break;case 6:if(mc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Tu(e,e.return,m)}}break;case 3:if(mc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Tu(e,e.return,m)}break;case 4:default:mc(t,e),gc(e);break;case 13:mc(t,e),gc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wc=Je())),4&r&&vc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||d,mc(t,e),Js=l):mc(t,e),gc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(f=$s=d;null!==$s;){switch(h=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:ec(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tu(r,n,m)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){Sc(f);continue}}null!==h?(h.return=p,$s=h):Sc(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ve("display",s))}catch(m){Tu(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Tu(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mc(t,e),gc(e),4&r&&vc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lc(e,cc(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;uc(e,cc(e),a);break;default:throw Error(o(161))}}catch(s){Tu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ec(e,t,n){$s=e,_c(e,t,n)}function _c(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Js;s=Xs;var u=Js;if(Xs=a,(Js=c)&&!u)for($s=i;null!==$s;)c=(a=$s).child,22===a.tag&&null!==a.memoizedState?wc(i):null!==c?(c.return=a,$s=c):wc(i);for(;null!==o;)$s=o,_c(o,t,n),o=o.sibling;$s=i,Xs=s,Js=u}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):bc(e)}}function bc(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Wt(f)}}}break;default:throw Error(o(163))}Js||512&t.flags&&oc(t)}catch(p){Tu(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function Sc(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function wc(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tu(t,i,c)}}var o=t.return;try{oc(t)}catch(c){Tu(t,o,c)}break;case 5:var a=t.return;try{oc(t)}catch(c){Tu(t,a,c)}}}catch(c){Tu(t,t.return,c)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var kc,Tc=Math.ceil,Rc=_.ReactCurrentDispatcher,Cc=_.ReactCurrentOwner,Ic=_.ReactCurrentBatchConfig,Oc=0,Ac=null,Nc=null,Dc=0,xc=0,Pc=ki(0),Lc=0,Mc=null,Uc=0,jc=0,Vc=0,Fc=null,Bc=null,Wc=0,Gc=1/0,Hc=null,Kc=!1,zc=null,Yc=null,qc=!1,Zc=null,Xc=0,Jc=0,Qc=null,$c=-1,eu=0;function tu(){return 0!==(6&Oc)?Je():-1!==$c?$c:$c=Je()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Oc)&&0!==Dc?Dc&-Dc:null!==mo.transition?(0===eu&&(eu=vt()),eu):0!==(e=Et)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<Jc)throw Jc=0,Qc=null,Error(o(185));yt(e,n,r),0!==(2&Oc)&&e===Ac||(e===Ac&&(0===(2&Oc)&&(jc|=n),4===Lc&&cu(e,Dc)),iu(e,r),1===n&&0===Oc&&0===(1&t.mode)&&(Gc=Je()+500,Vi&&Wi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,c=i[a];-1===c?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Ac?Dc:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),ai((function(){0===(6&Oc)&&Wi()})),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Au(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if($c=-1,eu=0,0!==(6&Oc))throw Error(o(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=ft(e,e===Ac?Dc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Oc;Oc|=2;var a=vu();for(Ac===e&&Dc===t||(Hc=null,Gc=Je()+500,pu(e,t));;)try{Eu();break}catch(c){hu(e,c)}So(),Rc.current=a,Oc=i,null!==Nc?t=0:(Ac=null,Dc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=au(e,i))),1===t)throw n=Mc,pu(e,0),cu(e,r),iu(e,Je()),n;if(6===t)cu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(a=ht(e))&&(r=a,t=au(e,a))),1===t))throw n=Mc,pu(e,0),cu(e,r),iu(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Su(e,Bc,Hc);break;case 3:if(cu(e,r),(130023424&r)===r&&10<(t=Wc+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,Bc,Hc),t);break}Su(e,Bc,Hc);break;case 4:if(cu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,Bc,Hc),r);break}Su(e,Bc,Hc);break;default:throw Error(o(329))}}}return iu(e,Je()),e.callbackNode===n?ou.bind(null,e):null}function au(e,t){var n=Fc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=Bc,Bc=n,null!==t&&su(t)),e}function su(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function cu(e,t){for(t&=~Vc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Oc))throw Error(o(327));wu();var t=ft(e,0);if(0===(1&t))return iu(e,Je()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Mc,pu(e,0),cu(e,t),iu(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,Bc,Hc),iu(e,Je()),null}function lu(e,t){var n=Oc;Oc|=1;try{return e(t)}finally{0===(Oc=n)&&(Gc=Je()+500,Vi&&Wi())}}function du(e){null!==Zc&&0===Zc.tag&&0===(6&Oc)&&wu();var t=Oc;Oc|=1;var n=Ic.transition,r=Et;try{if(Ic.transition=null,Et=1,e)return e()}finally{Et=r,Ic.transition=n,0===(6&(Oc=t))&&Wi()}}function fu(){xc=Pc.current,Ti(Pc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nc)for(n=Nc.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&xi();break;case 3:oa(),Ti(Oi),Ti(Ii),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ti(ca);break;case 10:wo(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Ac=e,Nc=e=Pu(e.current,null),Dc=xc=t,Lc=0,Mc=null,Vc=jc=Uc=0,Bc=Fc=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(r=(n=Co[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Co=null}return e}function hu(e,t){for(;;){var n=Nc;try{if(So(),fa.current=as,ga){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ga=!1}if(ha=0,ya=ma=va=null,Ea=!1,_a=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Nc=null;break}e:{var a=e,s=n.return,c=n,u=t;if(t=Dc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ys(s);if(null!==h){h.flags&=-257,gs(h,s,c,0,t),1&h.mode&&ms(a,l,t),u=l;var v=(t=h).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ms(a,l,t),mu();break e}u=Error(o(426))}else if(io&&1&c.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,c,0,t),vo(ls(u,c));break e}}a=u=ls(u,c),4!==Lc&&(Lc=2),null===Fc?Fc=[a]:Fc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,hs(0,u,t));break e;case 1:c=u;var g=a.type,E=a.stateNode;if(0===(128&a.flags)&&("function"===typeof g.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Yc||!Yc.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,vs(a,c,t));break e}}a=a.return}while(null!==a)}bu(n)}catch(_){t=_,Nc===n&&null!==n&&(Nc=n=n.return);continue}break}}function vu(){var e=Rc.current;return Rc.current=as,null===e?as:e}function mu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Uc)&&0===(268435455&jc)||cu(Ac,Dc)}function yu(e,t){var n=Oc;Oc|=2;var r=vu();for(Ac===e&&Dc===t||(Hc=null,pu(e,t));;)try{gu();break}catch(i){hu(e,i)}if(So(),Oc=n,Rc.current=r,null!==Nc)throw Error(o(261));return Ac=null,Dc=0,Lc}function gu(){for(;null!==Nc;)_u(Nc)}function Eu(){for(;null!==Nc&&!Ze();)_u(Nc)}function _u(e){var t=kc(e.alternate,e,xc);e.memoizedProps=e.pendingProps,null===t?bu(e):Nc=t,Cc.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,xc)))return void(Nc=n)}else{if(null!==(n=Zs(n,t)))return n.flags&=32767,void(Nc=n);if(null===e)return Lc=6,void(Nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nc=t);Nc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Su(e,t,n){var r=Et,i=Ic.transition;try{Ic.transition=null,Et=1,function(e,t,n,r){do{wu()}while(null!==Zc);if(0!==(6&Oc))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Ac&&(Nc=Ac=null,Dc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qc||(qc=!0,Au(tt,(function(){return wu(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ic.transition,Ic.transition=null;var s=Et;Et=1;var c=Oc;Oc|=4,Cc.current=null,function(e,t){if(ei=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var s=0,c=-1,u=-1,l=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(c=s+i),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++l===i&&(c=s),p===a&&++d===r&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,E=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(b){Tu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=nc,nc=!1}(e,n),yc(n,e),hr(ti),Ht=!!ei,ti=ei=null,e.current=n,Ec(n,e,i),Xe(),Oc=c,Et=s,Ic.transition=a}else e.current=n;if(qc&&(qc=!1,Zc=e,Xc=i),a=e.pendingLanes,0===a&&(Yc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=zc,zc=null,e;0!==(1&Xc)&&0!==e.tag&&wu(),a=e.pendingLanes,0!==(1&a)?e===Qc?Jc++:(Jc=0,Qc=e):Jc=0,Wi()}(e,t,n,r)}finally{Ic.transition=i,Et=r}return null}function wu(){if(null!==Zc){var e=_t(Xc),t=Ic.transition,n=Et;try{if(Ic.transition=null,Et=16>e?16:e,null===Zc)var r=!1;else{if(e=Zc,Zc=null,Xc=0,0!==(6&Oc))throw Error(o(331));var i=Oc;for(Oc|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var c=a.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for($s=l;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:rc(8,d,a)}var f=d.child;if(null!==f)f.return=d,$s=f;else for(;null!==$s;){var p=(d=$s).sibling,h=d.return;if(ac(d),d===l){$s=null;break}if(null!==p){p.return=h,$s=p;break}$s=h}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:rc(9,a,a.return)}var g=a.sibling;if(null!==g){g.return=a.return,$s=g;break e}$s=a.return}}var E=e.current;for($s=E;null!==$s;){var _=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,$s=_;else e:for(s=E;null!==$s;){if(0!==(2048&(c=$s).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tu(c,c.return,S)}if(c===s){$s=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,$s=b;break e}$s=c.return}}if(Oc=i,Wi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{Et=n,Ic.transition=t}}return!1}function ku(e,t,n){e=Lo(e,t=hs(0,t=ls(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function Tu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yc||!Yc.has(r))){t=Lo(t,e=vs(t,e=ls(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Ru(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Dc&n)===n&&(4===Lc||3===Lc&&(130023424&Dc)===Dc&&500>Je()-Wc?pu(e,0):Vc|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tu();null!==(e=Ao(e,t))&&(yt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cu(e,n)}function Au(e,t){return Ye(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(e,t,n,r){return new Nu(e,t,n,r)}function xu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=Du(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)xu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Mu(n.children,i,a,t);case k:s=8,i|=8;break;case T:return(e=Du(12,n,t,2|i)).elementType=T,e.lanes=a,e;case O:return(e=Du(13,n,t,i)).elementType=O,e.lanes=a,e;case A:return(e=Du(19,n,t,i)).elementType=A,e.lanes=a,e;case x:return Uu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:s=10;break e;case C:s=9;break e;case I:s=11;break e;case N:s=14;break e;case D:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Du(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mu(e,t,n,r){return(e=Du(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=Du(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Du(6,e,null,t)).lanes=n,e}function Vu(e,t,n){return(t=Du(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,o,a,s,c){return e=new Fu(e,t,n,s,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Du(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function Wu(e){if(!e)return Ci;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Gu(e,t,n,r,i,o,a,s,c){return(e=Bu(n,r,!0,e,0,o,0,s,c)).context=Wu(null),n=e.current,(o=Po(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Hu(e,t,n,r){var i=t.current,o=tu(),a=nu(i);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(ru(e,i,a,o),Mo(e,i,a)),a}function Ku(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){zu(e,t),(e=e.alternate)&&zu(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:As(t),ho();break;case 5:aa(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ri(go,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ri(ca,1&ca.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ri(ca,1&ca.current),null!==(e=Ks(e,t,n))?e.sibling:null);Ri(ca,1&ca.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ri(ca,ca.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Ks(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,io&&0!==(1048576&t.flags)&&$i(t,zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);To(t,n),i=ka(null,t,r,e,i,n);var a=Ta();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(t),i.updater=Wo,t.stateNode=i,i._reactInternals=t,zo(t,r,e,n),t=Os(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return xu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=ws(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(As(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,xo(e,t),jo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ns(e,t,r,n,i=ls(Error(o(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=ls(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=Ks(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&uo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Rs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return js(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ri(go,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Oi.current){t=Ks(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Po(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),ko(a.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ko(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Ro(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),ws(e,t,r,i=yo(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Hs(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,To(t,n),Ho(t,r,i),zo(t,r,i,n),Os(null,t,r,!0,e,n);case 19:return Gs(e,t,n);case 22:return Ts(e,t,n)}throw Error(o(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Ku(a);s.call(e)}}Hu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ku(a);o.call(e)}}var a=Gu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=a,e[hi]=a.current,Wr(8===e.nodeType?e.parentNode:e),du(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Ku(c);s.call(e)}}var c=Bu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[hi]=c.current,Wr(8===e.nodeType?e.parentNode:e),du((function(){Hu(t,c,n,r)})),c}(n,t,e,i,r);return Ku(a)}Xu.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hu(e,t,null,null)},Xu.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Hu(null,e,null,null)})),t[hi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&0!==t&&t<xt[n].priority;n++);xt.splice(n,0,e),0===n&&Ut(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(gt(t,1|n),iu(t,Je()),0===(6&Oc)&&(Gc=Je()+500,Wi()))}break;case 13:du((function(){var t=Ao(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Yu(e,1)}},St=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)ru(t,e,134217728,tu());Yu(e,134217728)}},wt=function(e){if(13===e.tag){var t=nu(e),n=Ao(e,t);if(null!==n)ru(n,e,t,tu());Yu(e,t)}},kt=function(){return Et},Tt=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}},Se=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(o(90));Y(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lu,Oe=du;var tl={usingClientEntryPoint:!1,Events:[Ei,_i,bi,Re,Ce,lu]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(o(299));var n=!1,r="",i=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Zu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,a,s),e[hi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(du((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,c,u,l;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(!o(e[c],a[c]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;for(l=e.entries();!(c=l.next()).done;)if(!o(c.value[1],a.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(e[c]!==a[c])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((s=(u=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(c=s;0!==c--;)if(!Object.prototype.hasOwnProperty.call(a,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=s;0!==c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!o(e[u[c]],a[u[c]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},11:function(e,t,n){"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:function(){return h}});var r=n(2791),i=n(4164);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var c,u,l=(void 0===c&&(c=0),function(){return++c}),d={},f={},p=["touchstart","touchmove"],h="ignore-react-onclickoutside";function v(e,t){var n={};return-1!==p.indexOf(t)&&u&&(n.passive=!e.props.preventDefault),n}t.default=function(e,t){var n,c,p=e.displayName||e.name||"Component";return c=n=function(n){var c,h;function m(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+p+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,i.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!f[r._uid]){"undefined"===typeof u&&(u=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),f[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),d[r._uid]=function(e){var t;null!==r.componentNode&&(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&s(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,d[r._uid],v(a(r),e))}))}},r.disableOnClickOutside=function(){delete f[r._uid];var e=d[r._uid];if(e&&"undefined"!==typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,v(a(r),t))})),delete d[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=l(),r}h=n,(c=m).prototype=Object.create(h.prototype),c.prototype.constructor=c,o(c,h);var y=m.prototype;return y.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},y.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+p+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},y.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},y.componentWillUnmount=function(){this.disableOnClickOutside()},y.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(e,n)},m}(r.Component),n.displayName="OnClickOutside("+p+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:h,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},c}},3521:function(e,t,n){"use strict";n.r(t),n.d(t,{Manager:function(){return a},Popper:function(){return P},Reference:function(){return U},usePopper:function(){return A}});var r=n(2791),i=r.createContext(),o=r.createContext();function a(e){var t=e.children,n=r.useState(null),a=n[0],s=n[1],c=r.useRef(!1);r.useEffect((function(){return function(){c.current=!0}}),[]);var u=r.useCallback((function(e){c.current||s(e)}),[]);return r.createElement(i.Provider,{value:a},r.createElement(o.Provider,{value:u},t))}var s=function(e){return Array.isArray(e)?e[0]:e},c=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},u=function(e,t){if("function"===typeof e)return c(e,t);null!=e&&(e.current=t)},l=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},d="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,f=n(4164),p=n(761),h=n(7786),v=n(545),m=n(9224),y=n(3120),g=n(9265);var E={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];(0,g.Re)(i)&&(0,y.Z)(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});(0,g.Re)(r)&&(0,y.Z)(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},_=n(5934),b=n(5468),S=n(1694),w=n(8702),k=n(1668),T=[h.Z,v.Z,m.Z,E,_.Z,b.Z,S.Z,w.Z,k.Z],R=(0,p.kZ)({defaultModifiers:T}),C=n(77),I=n.n(C),O=[],A=function(e,t,n){void 0===n&&(n={});var i=r.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||O},a=r.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=a[0],c=a[1],u=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);f.flushSync((function(){c({styles:l(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:l(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),p=r.useMemo((function(){var e={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return I()(i.current,e)?i.current||e:(i.current=e,e)}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),h=r.useRef();return d((function(){h.current&&h.current.setOptions(p)}),[p]),d((function(){if(null!=e&&null!=t){var r=(n.createPopper||R)(e,t,p);return h.current=r,function(){r.destroy(),h.current=null}}}),[e,t,n.createPopper]),{state:h.current?h.current.state:null,styles:s.styles,attributes:s.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}},N=function(){},D=function(){return Promise.resolve(null)},x=[];function P(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.strategy,a=void 0===o?"absolute":o,c=e.modifiers,l=void 0===c?x:c,d=e.referenceElement,f=e.onFirstUpdate,p=e.innerRef,h=e.children,v=r.useContext(i),m=r.useState(null),y=m[0],g=m[1],E=r.useState(null),_=E[0],b=E[1];r.useEffect((function(){u(p,y)}),[p,y]);var S=r.useMemo((function(){return{placement:n,strategy:a,onFirstUpdate:f,modifiers:[].concat(l,[{name:"arrow",enabled:null!=_,options:{element:_}}])}}),[n,a,f,l,_]),w=A(d||v,y,S),k=w.state,T=w.styles,R=w.forceUpdate,C=w.update,I=r.useMemo((function(){return{ref:g,style:T.popper,placement:k?k.placement:n,hasPopperEscaped:k&&k.modifiersData.hide?k.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:k&&k.modifiersData.hide?k.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:T.arrow,ref:b},forceUpdate:R||N,update:C||D}}),[g,b,n,k,T,C,R]);return s(h)(I)}var L=n(2391),M=n.n(L);function U(e){var t=e.children,n=e.innerRef,i=r.useContext(o),a=r.useCallback((function(e){u(n,e),c(i,e)}),[n,i]);return r.useEffect((function(){return function(){return u(n,null)}}),[]),r.useEffect((function(){M()(Boolean(i),"`Reference` should not be used outside of a `Manager` component.")}),[i]),s(t)({ref:a})}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function g(){}function E(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=E.prototype=new g;_.constructor=E,v(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function R(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===o?"."+I(c,0):o,b(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),O(a,t,i,"",(function(e){return e}))):null!=a&&(R(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",b(e))for(var u=0;u<e.length;u++){var l=o+I(s=e[u],u);c+=O(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=O(s=s.value,t,i,l=o+I(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},x={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:x,ReactCurrentOwner:w};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=E,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.transition;x.transition={};try{e()}finally{x.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,c=e[s],u=s+1,l=e[u];if(0>o(c,n))u<i&&0>o(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[s]=n,r=s);else{if(!(u<i&&0>o(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var u=[],l=[],d=1,f=null,p=3,h=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,E="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function b(e){if(m=!1,_(e),!v)if(null!==r(u))v=!0,x(S);else{var t=r(l);null!==t&&P(b,t.startTime-e)}}function S(e,n){v=!1,m&&(m=!1,g(R),R=-1),h=!0;var o=p;try{for(_(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!O());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),_(n)}else i(u);f=r(u)}if(null!==f)var c=!0;else{var d=r(l);null!==d&&P(b,d.startTime-n),c=!1}return c}finally{f=null,p=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,T=null,R=-1,C=5,I=-1;function O(){return!(t.unstable_now()-I<C)}function A(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?w():(k=!1,T=null)}}else k=!1}if("function"===typeof E)w=function(){E(A)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=A,w=function(){D.postMessage(null)}}else w=function(){y(A,0)};function x(e){T=e,k||(k=!0,w())}function P(e,n){R=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,x(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(u)&&e===r(l)&&(m?(g(R),R=-1):m=!0,P(b,o-a))):(e.sortIndex=s,n(u,e),v||h||(v=!0,x(S))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},2391:function(e){"use strict";var t=function(){};e.exports=t},2839:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))n.call(o,u)&&(s[u]=o[u]);if(t){a=t(o);for(var l=0;l<a.length;l++)r.call(o,a[l])&&(s[a[l]]=o[a[l]])}}return s}},1415:function(e,t,n){"use strict";var r=n(7436);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},4642:function(e,t,n){e.exports=n(1415)()},7436:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(9653)),o=(r=n(4642))&&r.__esModule?r:{default:r},a=n(1096),s=n(3835);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return function(){var t,n=y(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;return m(e)}(this,t)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(c,e);var t,n,r,o=v(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(m(e=o.call.apply(o,[this].concat(n))),"state",{hovered:!1}),E(m(e),"getStyle",(function(t){var n="dark"===e.props.type?s.darkStyle:s.lightStyle;return e.state.hovered?p({},n,{},s.hoverStyle,{},t):e.props.disabled?p({},n,{},s.disabledStyle,{},t):p({},n,{},t)})),E(m(e),"mouseOver",(function(){e.props.disabled||e.setState({hovered:!0})})),E(m(e),"mouseOut",(function(){e.props.disabled||e.setState({hovered:!1})})),E(m(e),"click",(function(t){e.props.disabled||e.props.onClick(t)})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.label,n=e.style,r=d(e,["label","style"]);return i.default.createElement("div",l({},r,{role:"button",onClick:this.click,style:this.getStyle(n),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut}),i.default.createElement(a.GoogleIcon,this.props),i.default.createElement("span",null,t))}}])&&h(t.prototype,n),r&&h(t,r),c}(i.PureComponent);t.default=_,E(_,"propTypes",{label:o.default.string,disabled:o.default.bool,tabIndex:o.default.number,onClick:o.default.func,type:o.default.oneOf(["light","dark"]),style:o.default.object}),E(_,"defaultProps",{label:"Sign in with Google",disabled:!1,type:"dark",tabIndex:0,onClick:function(){}})},1096:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleIcon=void 0;var r=a(n(9653)),i=a(n(4642)),o=n(3835);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:o.svgStyle},r.default.createElement("defs",null,r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.default.createElement("feMerge",null,r.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.default.createElement("feMergeNode",{in:"SourceGraphic"}))),r.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"}),r.default.createElement("rect",{id:"path-3",x:"5",y:"5",width:"38",height:"38",rx:"1"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -219.000000)"}),r.default.createElement("g",{id:"btn_google_dark_normal",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fill:"#4285F4",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("g",{id:"button-bg-copy"},r.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"})),r.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.default.createElement("g",{id:"handles_square"})))),d=r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:o.svgStyle},r.default.createElement("defs",null,r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.default.createElement("feMerge",null,r.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.default.createElement("feMergeNode",{in:"SourceGraphic"}))),r.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.default.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.default.createElement("g",{id:"handles_square"})))),f=r.default.createElement("svg",{width:"46px",height:"46px",viewBox:"0 0 46 46",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:o.svgStyle},r.default.createElement("defs",null,r.default.createElement("rect",{id:"path-1",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-788.000000, -219.000000)"}),r.default.createElement("g",{id:"btn_google_dark_disabled",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fillOpacity:"0.08",fill:"#000000",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("path",{d:"M24.001,25.71 L24.001,22.362 L32.425,22.362 C32.551,22.929 32.65,23.46 32.65,24.207 C32.65,29.346 29.203,33 24.01,33 C19.042,33 15.01,28.968 15.01,24 C15.01,19.032 19.042,15 24.01,15 C26.44,15 28.474,15.891 30.031,17.349 L27.475,19.833 C26.827,19.221 25.693,18.501 24.01,18.501 C21.031,18.501 18.601,20.976 18.601,24.009 C18.601,27.042 21.031,29.517 24.01,29.517 C27.457,29.517 28.726,27.132 28.96,25.719 L24.001,25.719 L24.001,25.71 Z",id:"Shape-Copy",fillOpacity:"0.4",fill:"#000000"}),r.default.createElement("g",{id:"handles_square"})))),p=function(e){var t=e.disabled,n=e.type;return r.default.createElement("div",{style:t?c({},o.iconStyle,{},o.disabledIconStyle):o.iconStyle},t?f:"dark"===n?l:d)};t.GoogleIcon=p,p.propTypes={disabled:i.default.bool,type:i.default.oneOf(["light","dark"])},p.defaultProps={type:"dark"}},1490:function(e,t,n){"use strict";Object.defineProperty(t,"VL",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(2144))&&r.__esModule?r:{default:r}},3835:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.disabledIconStyle=t.disabledStyle=t.hoverStyle=t.svgStyle=t.iconStyle=t.lightStyle=t.darkStyle=void 0;var o={height:"50px",width:"240px",border:"none",textAlign:"center",verticalAlign:"center",boxShadow:"0 2px 4px 0 rgba(0,0,0,.25)",fontSize:"16px",lineHeight:"48px",display:"block",borderRadius:"1px",transition:"background-color .218s, border-color .218s, box-shadow .218s",fontFamily:"Roboto,arial,sans-serif",cursor:"pointer",userSelect:"none"},a=r({backgroundColor:"#4285f4",color:"#fff"},o);t.darkStyle=a;var s=r({backgroundColor:"#fff",color:"rgba(0,0,0,.54)"},o);t.lightStyle=s;t.iconStyle={width:"48px",height:"48px",textAlign:"center",verticalAlign:"center",display:"block",marginTop:"1px",marginLeft:"1px",float:"left",backgroundColor:"#fff",borderRadius:"1px",whiteSpace:"nowrap"};t.svgStyle={width:"48px",height:"48px",display:"block"};t.hoverStyle={boxShadow:"0 0 3px 3px rgba(66,133,244,.3)",transition:"background-color .218s, border-color .218s, box-shadow .218s"};t.disabledStyle={backgroundColor:"rgba(37, 5, 5, .08)",color:"rgba(0, 0, 0, .40)",cursor:"not-allowed"};t.disabledIconStyle={backgroundColor:"transparent"}},483:function(e,t,n){"use strict";var r=n(2839),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),c=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var E=g.prototype=new y;E.constructor=g,r(E,m.prototype),E.isPureReactComponent=!0;var _={current:null},b=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)b.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:_.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case o:c=!0}}if(c)return a=a(c=e),e=""===r?"."+R(c,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+R(s=e[u],u);c+=C(s,t,n,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=C(s=s.value,t,n,l=r+R(s,u++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function N(){var e=A.current;if(null===e)throw Error(p(321));return e}var D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)b.call(t,l)&&!S.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.2"},9653:function(e,t,n){"use strict";e.exports=n(483)},8867:function(e,t,n){"use strict";e.exports=n.p+"static/media/Anthony.9f7e11308302e3f161e6.jpg"},9302:function(e,t,n){"use strict";e.exports=n.p+"static/media/Kos.8584212d608f664db964.jpg"},8627:function(e,t,n){"use strict";e.exports=n.p+"static/media/PSEUDOSTARTER.de853e2cebd463b0d0d2.png"},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function o(t,n,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),o=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(N){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new I(r||[]);return a(o,"_invoke",{value:k(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var h={};function v(){}function m(){}function y(){}var g={};d(g,c,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(O([])));_&&_!==n&&o.call(_,c)&&(g=_);var b=y.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,s,c){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=p(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function O(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:m,configurable:!0}),m.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},S(w.prototype),d(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(f(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(b),d(b,l,"Generator"),d(b,c,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),o=n(6116),a=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),o=n(6116),a=n(2281);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),o=n(6035),a=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3878);var i=n(181),o=n(5267);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);var i=n(9199),o=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Video-Calling-App/",function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),i=n(3433);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(9142);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,a.Z)(r.key),r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=n(1002);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t=f();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,p.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}var m=n(9439);function y(e,t,n){return y=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},y.apply(null,arguments)}function g(e){var t="function"===typeof Map?new Map:void 0;return g=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},g(e)}var E,_=n(3878),b=n(9199),S=n(181),w=n(5267);function k(e){return(0,_.Z)(e)||(0,b.Z)(e)||(0,S.Z)(e)||(0,w.Z)()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,S.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(E||(E={}));var C,I="popstate";function O(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function A(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function N(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),R({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function x(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function L(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,a=void 0===o?document.defaultView:o,s=i.v5Compat,c=void 0!==s&&s,u=a.history,l=E.Pop,d=null,f=p();function p(){return(u.state||{idx:null}).idx}function h(){l=E.Pop;var e=p(),t=null==e?null:e-f;f=e,d&&d({action:l,location:m.location,delta:t})}function v(e){var t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:x(e);return O(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,u.replaceState(R({},u.state,{idx:f}),""));var m={get action(){return l},get location(){return e(a,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(I,h),d=e,function(){a.removeEventListener(I,h),d=null}},createHref:function(e){return t(a,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=E.Push;var r=D(m.location,e,t);n&&n(r,e);var i=N(r,f=p()+1),o=m.createHref(r);try{u.pushState(i,"",o)}catch(s){a.location.assign(o)}c&&d&&d({action:l,location:m.location,delta:1})},replace:function(e,t){l=E.Replace;var r=D(m.location,e,t);n&&n(r,e);var i=N(r,f=p()),o=m.createHref(r);u.replaceState(i,"",o),c&&d&&d({action:l,location:m.location,delta:0})},go:function(e){return u.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function M(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?P(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=Y(i[a],Z(r));return o}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(O(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=ee([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(O(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:z(s,e.index),routesMeta:c})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=T(j(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function j(e){var t=e.split("/");if(0===t.length)return[];var n=k(t),r=n[0],o=n.slice(1),a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===o.length)return a?[s,""]:[s];var c=j(o.join("/")),u=[];return u.push.apply(u,(0,i.Z)(c.map((function(e){return""===e?s:[s,e].join("/")})))),a&&u.push.apply(u,(0,i.Z)(c)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var V=/^:\w+$/,F=3,B=2,W=1,G=10,H=-2,K=function(e){return"*"===e};function z(e,t){var n=e.split("/"),r=n.length;return n.some(K)&&(r+=H),t&&(r+=B),n.filter((function(e){return!K(e)})).reduce((function(e,t){return e+(V.test(t)?F:""===t?W:G)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],c=a===n.length-1,u="/"===i?t:t.slice(i.length)||"/",l=q({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},u);if(!l)return null;Object.assign(r,l.params);var d=s.route;o.push({params:r,pathname:ee([i,l.pathname]),pathnameBase:te(ee([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=ee([i,l.pathnameBase]))}return o}function q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);A("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=(0,m.Z)(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],c=s.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=u[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return A(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function Z(e){try{return decodeURI(e)}catch(t){return A(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function J(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Q(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function $(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=P(e):(O(!(i=R({},e)).pathname||!i.pathname.includes("?"),J("?","pathname","search",i)),O(!i.pathname||!i.pathname.includes("#"),J("#","pathname","hash",i)),O(!i.search||!i.search.includes("#"),J("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var c=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),c-=1;i.pathname=u.join("/")}o=c>=0?t[c]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,c=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:c,search:ne(o),hash:re(s)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!f||(l.pathname+="/"),l}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n)}(g(Error));function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ae=["post","put","patch","delete"],se=(new Set(ae),["get"].concat(ae));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var ce="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ue=e.useState,le=e.useEffect,de=e.useLayoutEffect,fe=e.useDebugValue;function pe(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ce(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,function(e){e.useSyncExternalStore}(t);var he=e.createContext(null);var ve=e.createContext(null);var me=e.createContext(null);var ye=e.createContext(null);var ge=e.createContext(null);var Ee=e.createContext({outlet:null,matches:[]});var _e=e.createContext(null);function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function Se(){return null!=e.useContext(ge)}function we(){return Se()||O(!1),e.useContext(ge).location}function ke(){Se()||O(!1);var t=e.useContext(ye),n=t.basename,r=t.navigator,i=e.useContext(Ee).matches,o=we().pathname,a=JSON.stringify(Q(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var c=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=$(e,JSON.parse(a),o,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:ee([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,a,o]);return c}function Te(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(Ee).matches,o=we().pathname,a=JSON.stringify(Q(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return $(t,JSON.parse(a),o,"path"===r)}),[t,a,o,r])}function Re(){var t=function(){var t,n=e.useContext(_e),r=De(Ie.UseRouteError),i=xe(Ie.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=oe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,null)}var Ce,Ie,Oe=function(t){l(r,t);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return c(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(Ee.Provider,{value:this.props.routeContext},e.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function Ae(t){var n=t.routeContext,r=t.match,i=t.children,o=e.useContext(he);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(Ee.Provider,{value:n},i)}function Ne(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,o=null==r?void 0:r.errors;if(null!=o){var a=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));a>=0||O(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((function(t,a,s){var c=a.route.id?null==o?void 0:o[a.route.id]:null,u=null;r&&(u=a.route.ErrorBoundary?e.createElement(a.route.ErrorBoundary,null):a.route.errorElement?a.route.errorElement:e.createElement(Re,null));var l=n.concat(i.slice(0,s+1)),d=function(){var n=t;return c?n=u:a.route.Component?n=e.createElement(a.route.Component,null):a.route.element&&(n=a.route.element),e.createElement(Ae,{match:a,routeContext:{outlet:t,matches:l},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?e.createElement(Oe,{location:r.location,component:u,error:c,children:d(),routeContext:{outlet:null,matches:l}}):d()}),null)}function De(t){var n=e.useContext(ve);return n||O(!1),n}function xe(t){var n=function(t){var n=e.useContext(Ee);return n||O(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||O(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ce||(Ce={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ie||(Ie={}));var Pe;function Le(t){var n=t.to,r=t.replace,i=t.state,o=t.relative;Se()||O(!1);var a=e.useContext(ve),s=ke();return e.useEffect((function(){a&&"idle"!==a.navigation.state||s(n,{replace:r,state:i,relative:o})})),null}function Me(e){O(!1)}function Ue(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,o=void 0===i?null:i,a=t.location,s=t.navigationType,c=void 0===s?E.Pop:s,u=t.navigator,l=t.static,d=void 0!==l&&l;Se()&&O(!1);var f=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:f,navigator:u,static:d}}),[f,u,d]);"string"===typeof a&&(a=P(a));var h=a,v=h.pathname,m=void 0===v?"/":v,y=h.search,g=void 0===y?"":y,_=h.hash,b=void 0===_?"":_,S=h.state,w=void 0===S?null:S,k=h.key,T=void 0===k?"default":k,R=e.useMemo((function(){var e=X(m,f);return null==e?null:{location:{pathname:e,search:g,hash:b,state:w,key:T},navigationType:c}}),[f,m,g,b,w,T,c]);return null==R?null:e.createElement(ye.Provider,{value:p},e.createElement(ge.Provider,{children:o,value:R}))}function je(t){var n=t.children,r=t.location,i=e.useContext(he);return function(t,n){Se()||O(!1);var r,i=e.useContext(ye).navigator,o=e.useContext(ve),a=e.useContext(Ee).matches,s=a[a.length-1],c=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,we());if(n){var d,f="string"===typeof n?P(n):n;"/"===u||(null==(d=f.pathname)?void 0:d.startsWith(u))||O(!1),r=f}else r=l;var p=r.pathname||"/",h=M(t,{pathname:"/"===u?p:p.slice(u.length)||"/"}),v=Ne(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ee([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:ee([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,o||void 0);return n&&v?e.createElement(ge.Provider,{value:{location:be({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:E.Pop}},v):v}(i&&!n?i.router.routes:Fe(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Pe||(Pe={}));var Ve=new Promise((function(){}));e.Component;function Fe(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,o){if(e.isValidElement(t)){var a=[].concat((0,i.Z)(n),[o]);if(t.type!==e.Fragment){t.type!==Me&&O(!1),t.props.index&&t.props.children&&O(!1);var s={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=Fe(t.props.children,a)),r.push(s)}else r.push.apply(r,Fe(t.props.children,a))}})),r}function Be(){Be=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),s=new R(i||[]);return r(a,"_invoke",{value:S(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=u;var d={};function f(){}function h(){}function v(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,o)&&(m=g);var E=v.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var c=l(e[r],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,p.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function S(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=v,r(E,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:h,configurable:!0}),h.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},_(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(E),c(E,s,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function We(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){We(o,r,i,a,s,"next",e)}function s(e){We(o,r,i,a,s,"throw",e)}a(void 0)}))}}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}function Ke(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ye(t){var n=t.basename,r=t.children,i=t.window,o=e.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),L((function(e,t){var n=e.location;return D("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:x(t)}),null,e)}({window:i,v5Compat:!0}));var a=o.current,s=e.useState({action:a.action,location:a.location}),c=(0,m.Z)(s,2),u=c[0],l=c[1];return e.useLayoutEffect((function(){return a.listen(l)}),[a]),e.createElement(Ue,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:a})}var qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xe=e.forwardRef((function(t,n){var r,i=t.onClick,o=t.relative,a=t.reloadDocument,s=t.replace,c=t.state,u=t.target,l=t.to,d=t.preventScrollReset,f=Ke(t,ze),p=e.useContext(ye).basename,h=!1;if("string"===typeof l&&Ze.test(l)&&(r=l,qe)){var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=X(m.pathname,p);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:h=!0}var g=function(t,n){var r=(void 0===n?{}:n).relative;Se()||O(!1);var i=e.useContext(ye),o=i.basename,a=i.navigator,s=Te(t,{relative:r}),c=s.hash,u=s.pathname,l=s.search,d=u;return"/"!==o&&(d="/"===u?o:ee([o,u])),a.createHref({pathname:d,search:l,hash:c})}(l,{relative:o}),E=function(t,n){var r=void 0===n?{}:n,i=r.target,o=r.replace,a=r.state,s=r.preventScrollReset,c=r.relative,u=ke(),l=we(),d=Te(t,{relative:c});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==o?o:x(l)===x(d);u(t,{replace:n,state:a,preventScrollReset:s,relative:c})}}),[l,u,d,o,a,i,t,s,c])}(l,{replace:s,state:c,target:u,preventScrollReset:d,relative:o});return e.createElement("a",He({},f,{href:r||g,onClick:h||a?i:function(e){i&&i(e),e.defaultPrevented||E(e)},ref:n,target:u}))}));var Je,Qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Je||(Je={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qe||(Qe={}));function $e(){return $e="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},$e.apply(this,arguments)}var et=n(4942),tt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},nt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=o>>2,d=(3&o)<<4|s>>4,f=(15&s)<<2|u>>6,p=63&u;c||(p=64,a||(f=64)),r.push(n[l],n[d],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var s=e[n++],c=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&c)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw new rt;var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var d=s<<6&192|c;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},rt=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return c(n)}(g(Error)),it=function(e){return function(e){var t=tt(e);return nt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ot=function(e){try{return nt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};var at=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},st=function(){try{return at()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Video-Calling-App",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ot(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ct=function(e){var t,n;return null===(n=null===(t=st())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ut=function(){var e;return null===(e=st())||void 0===e?void 0:e.config},lt=function(e){var t;return null===(t=st())||void 0===t?void 0:t["_".concat(e)]},dt=function(){function e(){var t=this;o(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return c(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ft(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function pt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var ht=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(h(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(h(a),vt.prototype.create),a}return c(n)}(g(Error)),vt=function(){function e(t,n,r){o(this,e),this.service=t,this.serviceName=n,this.errors=r}return c(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(mt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ht(n,o,t)}}]),e}();var mt=/\{\$([^}]+)}/g;function yt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],c=t[a];if(gt(s)&&gt(c)){if(!yt(s,c))return!1}else if(s!==c)return!1}for(var u=0,l=r;u<l.length;u++){var d=l[u];if(!n.includes(d))return!1}return!0}function gt(e){return null!==e&&"object"===typeof e}function Et(e){for(var t=[],n=function(){var e=(0,m.Z)(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function _t(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,m.Z)(n,2),i=r[0],o=r[1];t[decodeURIComponent(i)]=decodeURIComponent(o)}})),t}function bt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var St=function(){function e(t,n){var r=this;o(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return c(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=wt),void 0===r.error&&(r.error=wt),void 0===r.complete&&(r.complete=wt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function wt(){}function kt(e){return e&&e._delegate?e._delegate:e}var Tt=function(){function e(t,n,r){o(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return c(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Rt="[DEFAULT]",Ct=function(){function e(t,n){o(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return c(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new dt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rt})}catch(c){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,m.Z)(t.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:a});o.resolve(s)}catch(c){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,i.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,i.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=T(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var s=(0,m.Z)(i.value,2),c=s[0],u=s[1];r===this.normalizeInstanceIdentifier(c)&&u.resolve(o)}}catch(l){a.e(l)}finally{a.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(eg){}}}catch(a){i.e(a)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Rt?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(eg){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.component?this.component.multipleInstances?e:Rt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var It,Ot,At=function(){function e(t){o(this,e),this.name=t,this.providers=new Map}return c(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ct(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Nt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ot||(Ot={}));var Dt={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},xt=Ot.INFO,Pt=(It={},(0,et.Z)(It,Ot.DEBUG,"log"),(0,et.Z)(It,Ot.VERBOSE,"log"),(0,et.Z)(It,Ot.INFO,"info"),(0,et.Z)(It,Ot.WARN,"warn"),(0,et.Z)(It,Ot.ERROR,"error"),It),Lt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Pt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},Mt=function(){function e(t){o(this,e),this.name=t,this._logLevel=xt,this._logHandler=Lt,this._userLogHandler=null,Nt.push(this)}return c(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Dt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.INFO].concat(t)),this._logHandler.apply(this,[this,Ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.WARN].concat(t)),this._logHandler.apply(this,[this,Ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.ERROR].concat(t)),this._logHandler.apply(this,[this,Ot.ERROR].concat(t))}}]),e}();function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){(0,et.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt,Ft,Bt=function(e,t){return t.some((function(t){return e instanceof t}))};var Wt=new WeakMap,Gt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,zt=new WeakMap;var Yt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Gt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ht.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function qt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ft||(Ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jt(this),n),Xt(Wt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xt(e.apply(Jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[Jt(this),t].concat(r));return Ht.set(o,t.sort?t.sort():[t]),Xt(o)}}function Zt(e){return"function"===typeof e?qt(e):(e instanceof IDBTransaction&&function(e){if(!Gt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Gt.set(e,t)}}(e),Bt(e,Vt||(Vt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Yt):e)}function Xt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(Xt(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Wt.set(t,e)})).catch((function(){})),zt.set(t,e),t}(e);if(Kt.has(e))return Kt.get(e);var t=Zt(e);return t!==e&&(Kt.set(e,t),zt.set(t,e)),t}var Jt=function(e){return zt.get(e)};var Qt,$t,en=["get","getKey","getAll","getAllKeys","count"],tn=["put","add","delete","clear"],nn=new Map;function rn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(nn.get(t))return nn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=tn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||en.includes(n))){var o=function(){var e=Ge(Be().mark((function e(t){var o,a,s,c,u,l,d=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,c=d.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=d[l];return r&&(s=s.index(u.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,u),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return nn.set(t,o),o}}}Yt=function(e){return jt(jt({},e),{},{get:function(t,n,r){return rn(t,n)||e.get(t,n,r)},has:function(t,n){return!!rn(t,n)||e.has(t,n)}})}(Yt);var on=function(){function e(t){o(this,e),this.container=t}return c(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var an="@firebase/app",sn="0.9.7",cn=new Mt("@firebase/app"),un="[DEFAULT]",ln=(Qt={},(0,et.Z)(Qt,an,"fire-core"),(0,et.Z)(Qt,"@firebase/app-compat","fire-core-compat"),(0,et.Z)(Qt,"@firebase/analytics","fire-analytics"),(0,et.Z)(Qt,"@firebase/analytics-compat","fire-analytics-compat"),(0,et.Z)(Qt,"@firebase/app-check","fire-app-check"),(0,et.Z)(Qt,"@firebase/app-check-compat","fire-app-check-compat"),(0,et.Z)(Qt,"@firebase/auth","fire-auth"),(0,et.Z)(Qt,"@firebase/auth-compat","fire-auth-compat"),(0,et.Z)(Qt,"@firebase/database","fire-rtdb"),(0,et.Z)(Qt,"@firebase/database-compat","fire-rtdb-compat"),(0,et.Z)(Qt,"@firebase/functions","fire-fn"),(0,et.Z)(Qt,"@firebase/functions-compat","fire-fn-compat"),(0,et.Z)(Qt,"@firebase/installations","fire-iid"),(0,et.Z)(Qt,"@firebase/installations-compat","fire-iid-compat"),(0,et.Z)(Qt,"@firebase/messaging","fire-fcm"),(0,et.Z)(Qt,"@firebase/messaging-compat","fire-fcm-compat"),(0,et.Z)(Qt,"@firebase/performance","fire-perf"),(0,et.Z)(Qt,"@firebase/performance-compat","fire-perf-compat"),(0,et.Z)(Qt,"@firebase/remote-config","fire-rc"),(0,et.Z)(Qt,"@firebase/remote-config-compat","fire-rc-compat"),(0,et.Z)(Qt,"@firebase/storage","fire-gcs"),(0,et.Z)(Qt,"@firebase/storage-compat","fire-gcs-compat"),(0,et.Z)(Qt,"@firebase/firestore","fire-fst"),(0,et.Z)(Qt,"@firebase/firestore-compat","fire-fst-compat"),(0,et.Z)(Qt,"fire-js","fire-js"),(0,et.Z)(Qt,"firebase","fire-js-all"),Qt),dn=new Map,fn=new Map;function pn(e,t){try{e.container.addComponent(t)}catch(n){cn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function hn(e){var t=e.name;if(fn.has(t))return cn.debug("There were multiple attempts to register component ".concat(t,".")),!1;fn.set(t,e);var n,r=T(dn.values());try{for(r.s();!(n=r.n()).done;){pn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function vn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var mn=($t={},(0,et.Z)($t,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,et.Z)($t,"bad-app-name","Illegal App name: '{$appName}"),(0,et.Z)($t,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,et.Z)($t,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,et.Z)($t,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,et.Z)($t,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,et.Z)($t,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,et.Z)($t,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)($t,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)($t,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)($t,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),$t),yn=new vt("app","Firebase",mn),gn=function(){function e(t,n,r){var i=this;o(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",(function(){return i}),"PUBLIC"))}return c(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}]),e}(),En="9.19.1";function _n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:un,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw yn.create("bad-app-name",{appName:String(i)});if(n||(n=ut()),!n)throw yn.create("no-options");var o=dn.get(i);if(o){if(yt(n,o.options)&&yt(r,o.config))return o;throw yn.create("duplicate-app",{appName:i})}var a,s=new At(i),c=T(fn.values());try{for(c.s();!(a=c.n()).done;){var u=a.value;s.addComponent(u)}}catch(d){c.e(d)}finally{c.f()}var l=new gn(n,r,s);return dn.set(i,l),l}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=dn.get(e);if(!t&&e===un)return _n();if(!t)throw yn.create("no-app",{appName:e});return t}function Sn(e,t,n){var r,i=null!==(r=ln[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void cn.warn(s.join(" "))}hn(new Tt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var wn="firebase-heartbeat-database",kn=1,Tn="firebase-heartbeat-store",Rn=null;function Cn(){return Rn||(Rn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),c=Xt(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Xt(s.result),e.oldVersion,e.newVersion,Xt(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),c.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),c}(wn,kn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Tn)}}).catch((function(e){throw yn.create("idb-open",{originalErrorMessage:e.message})}))),Rn}function In(e){return On.apply(this,arguments)}function On(){return On=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn();case 3:return n=e.sent,e.abrupt("return",n.transaction(Tn).objectStore(Tn).get(Dn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ht?cn.warn(e.t0.message):(r=yn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),cn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),On.apply(this,arguments)}function An(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=Ge(Be().mark((function e(t,n){var r,i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn();case 3:return r=e.sent,i=r.transaction(Tn,"readwrite"),o=i.objectStore(Tn),e.next=8,o.put(n,Dn(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ht?cn.warn(e.t0.message):(a=yn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),cn.warn(a.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Nn.apply(this,arguments)}function Dn(e){return"".concat(e.name,"!").concat(e.options.appId)}var xn=function(){function e(t){var n=this;o(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Un(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return c(e,[{key:"triggerHeartbeat",value:function(){var e=Ge(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Pn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ge(Be().mark((function e(){var t,n,r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Pn(),n=Ln(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=it(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pn(){return(new Date).toISOString().substring(0,10)}function Ln(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),o=T(e);try{var a=function(){var e=t.value,o=r.find((function(t){return t.agent===e.agent}));if(o){if(o.dates.push(e.date),jn(r)>n)return o.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),jn(r)>n)return r.pop(),"break";i=i.slice(1)};for(o.s();!(t=o.n()).done;){if("break"===a())break}}catch(s){o.e(s)}finally{o.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Mn,Un=function(){function e(t){o(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return c(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,In(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",An(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",An(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,i.Z)(r.heartbeats),(0,i.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function jn(e){return it(JSON.stringify({version:2,heartbeats:e})).length}Mn="",hn(new Tt("platform-logger",(function(e){return new on(e)}),"PRIVATE")),hn(new Tt("heartbeat",(function(e){return new xn(e)}),"PRIVATE")),Sn(an,sn,Mn),Sn(an,sn,"esm2017"),Sn("fire-js","");function Vn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Fn;Object.create;function Bn(){return(0,et.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Wn=Bn,Gn=new vt("auth","Firebase",Bn()),Hn=new Mt("@firebase/auth");function Kn(e){if(Hn.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hn.error.apply(Hn,["Auth (".concat(En,"): ").concat(e)].concat(n))}}function zn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xn.apply(void 0,[e].concat(n))}function Yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xn.apply(void 0,[e].concat(n))}function qn(e,t,n){var r=Object.assign(Object.assign({},Wn()),(0,et.Z)({},t,n));return new vt("auth","Firebase",r).create(t,{appName:e.name})}function Zn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&zn(e,"argument-error"),qn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var o,a=n[0],s=(0,i.Z)(n.slice(1));return s[0]&&(s[0].appName=e.name),(o=e._errorFactory).create.apply(o,[a].concat((0,i.Z)(s)))}return Gn.create.apply(Gn,[e].concat(n))}function Jn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Xn.apply(void 0,[t].concat(r))}}function Qn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Kn(t),new Error(t)}function $n(e,t){e||Qn(t)}var er=new Map;function tr(e){$n(e instanceof Function,"Expected a class definition");var t=er.get(e);return t?($n(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,er.set(e,t),t)}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rr(){return"http:"===ir()||"https:"===ir()}function ir(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function or(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(rr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var ar=function(){function e(t,n){o(this,e),this.shortDelay=t,this.longDelay=n,$n(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())||"object"===typeof navigator&&"ReactNative"===navigator.product}return c(e,[{key:"get",value:function(){return or()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function sr(e,t){$n(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var cr=function(){function e(){o(this,e)}return c(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ur=(Fn={},(0,et.Z)(Fn,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,et.Z)(Fn,"MISSING_CUSTOM_TOKEN","internal-error"),(0,et.Z)(Fn,"INVALID_IDENTIFIER","invalid-email"),(0,et.Z)(Fn,"MISSING_CONTINUE_URI","internal-error"),(0,et.Z)(Fn,"INVALID_PASSWORD","wrong-password"),(0,et.Z)(Fn,"MISSING_PASSWORD","missing-password"),(0,et.Z)(Fn,"EMAIL_EXISTS","email-already-in-use"),(0,et.Z)(Fn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,et.Z)(Fn,"INVALID_IDP_RESPONSE","invalid-credential"),(0,et.Z)(Fn,"INVALID_PENDING_TOKEN","invalid-credential"),(0,et.Z)(Fn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,et.Z)(Fn,"MISSING_REQ_TYPE","internal-error"),(0,et.Z)(Fn,"EMAIL_NOT_FOUND","user-not-found"),(0,et.Z)(Fn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,et.Z)(Fn,"EXPIRED_OOB_CODE","expired-action-code"),(0,et.Z)(Fn,"INVALID_OOB_CODE","invalid-action-code"),(0,et.Z)(Fn,"MISSING_OOB_CODE","internal-error"),(0,et.Z)(Fn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,et.Z)(Fn,"INVALID_ID_TOKEN","invalid-user-token"),(0,et.Z)(Fn,"TOKEN_EXPIRED","user-token-expired"),(0,et.Z)(Fn,"USER_NOT_FOUND","user-token-expired"),(0,et.Z)(Fn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,et.Z)(Fn,"INVALID_CODE","invalid-verification-code"),(0,et.Z)(Fn,"INVALID_SESSION_INFO","invalid-verification-id"),(0,et.Z)(Fn,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,et.Z)(Fn,"MISSING_SESSION_INFO","missing-verification-id"),(0,et.Z)(Fn,"SESSION_EXPIRED","code-expired"),(0,et.Z)(Fn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,et.Z)(Fn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,et.Z)(Fn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,et.Z)(Fn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,et.Z)(Fn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,et.Z)(Fn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,et.Z)(Fn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,et.Z)(Fn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,et.Z)(Fn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,et.Z)(Fn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,et.Z)(Fn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Fn),lr=new ar(3e4,6e4);function dr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function fr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=Ge(Be().mark((function e(t,n,r,i){var o,a=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>4&&void 0!==a[4]?a[4]:{},e.abrupt("return",hr(t,o,Ge(Be().mark((function e(){var o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},a={},i&&("GET"===n?a=i:o={body:JSON.stringify(i)}),s=Et(Object.assign({key:t.config.apiKey},a)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",cr.fetch()(gr(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function hr(e,t,n){return vr.apply(this,arguments)}function vr(){return vr=Ge(Be().mark((function e(t,n,r){var i,o,a,s,c,u,l,d,f,p;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ur),n),e.prev=2,o=new Er(t),e.next=6,Promise.race([r(),o.promise]);case 6:return a=e.sent,o.clearNetworkTimeout(),e.next=10,a.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw _r(t,"account-exists-with-different-credential",s);case 13:if(!a.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=a.ok?s.errorMessage:s.error.message,u=c.split(" : "),l=(0,m.Z)(u,2),d=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw _r(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw _r(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw _r(t,"user-disabled",s);case 29:if(p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw qn(t,p,f);case 34:zn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ht)){e.next=41;break}throw e.t0;case 41:zn(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),vr.apply(this,arguments)}function mr(e,t,n,r){return yr.apply(this,arguments)}function yr(){return yr=Ge(Be().mark((function e(t,n,r,i){var o,a,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,fr(t,n,r,i,o);case 3:return"mfaPendingCredential"in(a=e.sent)&&zn(t,"multi-factor-auth-required",{_serverResponse:a}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function gr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?sr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Er=function(){function e(t){var n=this;o(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Yn(n.auth,"network-request-failed"))}),lr.get())}))}return c(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function _r(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Yn(e,t,r);return i.customData._tokenResponse=n,i}function br(e,t){return Sr.apply(this,arguments)}function Sr(){return Sr=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function wr(e,t){return kr.apply(this,arguments)}function kr(){return kr=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}function Tr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Rr(){return Rr=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=kt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Jn((o=Ir(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"===typeof o.firebase?o.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:Tr(Cr(o.auth_time)),issuedAtTime:Tr(Cr(o.iat)),expirationTime:Tr(Cr(o.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Cr(e){return 1e3*Number(e)}function Ir(e){var t=e.split("."),n=(0,m.Z)(t,3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return Kn("JWT malformed, contained fewer than 3 sections"),null;try{var a=ot(i);return a?JSON.parse(a):(Kn("Failed to decode base64 JWT payload"),null)}catch(s){return Kn("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Or(e,t){return Ar.apply(this,arguments)}function Ar(){return Ar=Ge(Be().mark((function e(t,n){var r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ht&&Nr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ar.apply(this,arguments)}function Nr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Dr=function(){function e(t){o(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return c(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ge(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xr=function(){function e(t,n){o(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return c(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Tr(this.lastLoginAt),this.creationTime=Tr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Pr(e){return Lr.apply(this,arguments)}function Lr(){return Lr=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Or(t,wr(r,{idToken:i}));case 6:Jn(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),a=o.users[0],t._notifyReloadListener(a),s=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?a.providerUserInfo.map((function(e){var t=e.providerId,n=Vn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=Ur(t.providerData,s),u=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(null===c||void 0===c?void 0:c.length),d=!!u&&l,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new xr(a.createdAt,a.lastLoginAt),isAnonymous:d},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(){return(Mr=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt(t),e.next=3,Pr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,i.Z)(n),(0,i.Z)(t))}function jr(e,t){return Vr.apply(this,arguments)}function Vr(){return Vr=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr(t,{},Ge(Be().mark((function e(){var r,i,o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Et({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,a=i.apiKey,s=gr(t,o,"/v1/token","key=".concat(a)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",cr.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}var Fr=function(){function e(){o(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return c(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Jn(e.idToken,"internal-error"),Jn("undefined"!==typeof e.idToken,"internal-error"),Jn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ir(e);return Jn(t,"internal-error"),Jn("undefined"!==typeof t.exp,"internal-error"),Jn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ge(Be().mark((function e(t){var n,r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Jn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ge(Be().mark((function e(t,n){var r,i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Qn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new e;return r&&(Jn("string"===typeof r,"internal-error",{appName:t}),a.refreshToken=r),i&&(Jn("string"===typeof i,"internal-error",{appName:t}),a.accessToken=i),o&&(Jn("number"===typeof o,"internal-error",{appName:t}),a.expirationTime=o),a}}]),e}();function Br(e,t){Jn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Wr=function(){function e(t){o(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,s=Vn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?(0,i.Z)(s.providerData):[],this.metadata=new xr(s.createdAt||void 0,s.lastLoginAt||void 0)}return c(e,[{key:"getIdToken",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Jn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Rr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Mr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ge(Be().mark((function e(t){var n,r,i=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Pr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Or(this,br(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,o,a,s,c,u,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,p=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,h=null!==(a=n.photoURL)&&void 0!==a?a:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,y=null!==(u=n.createdAt)&&void 0!==u?u:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,E=n.uid,_=n.emailVerified,b=n.isAnonymous,S=n.providerData,w=n.stsTokenManager;Jn(E&&w,t,"internal-error");var k=Fr.fromJSON(this.name,w);Jn("string"===typeof E,t,"internal-error"),Br(d,t.name),Br(f,t.name),Jn("boolean"===typeof _,t,"internal-error"),Jn("boolean"===typeof b,t,"internal-error"),Br(p,t.name),Br(h,t.name),Br(v,t.name),Br(m,t.name),Br(y,t.name),Br(g,t.name);var T=new e({uid:E,auth:t,email:f,emailVerified:_,displayName:d,isAnonymous:b,photoURL:h,phoneNumber:p,tenantId:v,stsTokenManager:k,createdAt:y,lastLoginAt:g});return S&&Array.isArray(S)&&(T.providerData=S.map((function(e){return Object.assign({},e)}))),m&&(T._redirectEventId=m),T}},{key:"_fromIdTokenResponse",value:function(){var t=Ge(Be().mark((function t(n,r){var i,o,a,s=arguments;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new Fr).updateFromServerResponse(r),a=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,Pr(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Gr=function(){function e(){o(this,e),this.type="NONE",this.storage={}}return c(e,[{key:"_isAvailable",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Gr.type="NONE";var Hr=Gr;function Kr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var zr=function(){function e(t,n,r){o(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,s=i.name;this.fullUserKey=Kr(this.userKey,a.apiKey,s),this.fullPersistenceKey=Kr("persistence",a.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return c(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Wr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ge(Be().mark((function t(n,r){var i,o,a,s,c,u,l,d,f,p,h,v=arguments;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(tr(Hr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),a=o[0]||tr(Hr),s=Kr(i,n.config.apiKey,n.name),c=null,u=T(r),t.prev=10,u.s();case 12:if((l=u.n()).done){t.next=29;break}return d=l.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return p=Wr._fromJSON(n,f),d!==a&&(c=p),a=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),u.e(t.t1);case 34:return t.prev=34,u.f(),t.finish(34);case 37:if(h=o.filter((function(e){return e._shouldAllowMigration})),a._shouldAllowMigration&&h.length){t.next=40;break}return t.abrupt("return",new e(a,n,i));case 40:if(a=h[0],!c){t.next=44;break}return t.next=44,a._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(a,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Yr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($r(t))return"Blackberry";if(ei(t))return"Webos";if(Zr(t))return"Safari";if((t.includes("chrome/")||Xr(t))&&!t.includes("edge/"))return"Chrome";if(Qr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/firefox\//i.test(e)}function Zr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/crios\//i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iemobile/i.test(e)}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/android/i.test(e)}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/blackberry/i.test(e)}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/webos/i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ni(){return function(){var e=ft();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return ti(e)||Qr(e)||ei(e)||$r(e)||/windows phone/i.test(e)||Jr(e)}function ii(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Yr(ft());break;case"Worker":t="".concat(Yr(ft()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(En,"/").concat(r)}var oi=function(){function e(t){o(this,e),this.auth=t,this.queue=[]}return c(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=11,o(t);case 11:o.onAbort&&n.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),a=T(n);try{for(a.s();!(s=a.n()).done;){c=s.value;try{c()}catch(u){}}}catch(l){a.e(l)}finally{a.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ai=function(){function e(t,n,r){o(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ci(this),this.idTokenSubscription=new ci(this),this.beforeStateQueue=new oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return c(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=tr(t)),this._initializationPromise=this.queue(Ge(Be().mark((function r(){var i,o;return Be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,zr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return a=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,a&&a!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Jn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?kt(t):null)&&Jn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ge(Be().mark((function e(t){var n,r=this,i=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Jn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ge(Be().mark((function n(){return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(tr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new vt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Jn(n=t&&tr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,zr.create(this,[tr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ge(Be().mark((function e(t){var n=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"===typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Jn(a,this,"internal-error"),a.then((function(){return o(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ii(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ge(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,et.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(e){return kt(e)}var ci=function(){function e(t){var n=this;o(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new St(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return c(e,[{key:"next",get:function(){return Jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ui(e,t,n){var r=si(e);Jn(r._canInitEmulator,r,"emulator-config-failed"),Jn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=li(t),a=function(e){var t=li(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:di(r.substr(o.length+1))}}var a=r.split(":"),s=(0,m.Z)(a,2);return{host:s[0],port:di(s[1])}}(t),s=a.host,c=a.port,u=null===c?"":":".concat(c);r.config.emulator={url:"".concat(o,"//").concat(s).concat(u,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function li(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function di(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var fi=function(){function e(t,n){o(this,e),this.providerId=t,this.signInMethod=n}return c(e,[{key:"toJSON",value:function(){return Qn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Qn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Qn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Qn("not implemented")}}]),e}();function pi(e,t){return hi.apply(this,arguments)}function hi(){return hi=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}function vi(e,t){return mi.apply(this,arguments)}function mi(){return mi=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPassword",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}function yi(e,t){return gi.apply(this,arguments)}function gi(){return gi=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function Ei(e,t){return _i.apply(this,arguments)}function _i(){return _i=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}var bi=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=s,a}return c(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",vi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",yi(t,{email:this._email,oobCode:this._password}));case 5:zn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",pi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ei(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:zn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(fi);function Si(e,t){return wi.apply(this,arguments)}function wi(){return wi=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithIdp",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}var ki=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return c(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Si(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Si(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Si(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Et(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=Vn(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(fi);function Ti(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fr(t,"POST","/v1/accounts:sendVerificationCode",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Ci(){return Ci=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPhoneNumber",dr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ii(){return Ii=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(t,"POST","/v1/accounts:signInWithPhoneNumber",dr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw _r(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}var Oi=(0,et.Z)({},"USER_NOT_FOUND","user-not-found");function Ai(){return Ai=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPhoneNumber",dr(t,r),Oi));case 2:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}var Ni=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,"phone","phone")).params=e,r}return c(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ci.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ii.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ai.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(fi);var Di=function(){function e(t){var n,r,i,a,s,c;o(this,e);var u=_t(bt(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,d=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Jn(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=u.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(c=u.tenantId)&&void 0!==c?c:null}return c(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=_t(bt(e)).link,n=t?_t(bt(t)).deep_link_id:null,r=_t(bt(e)).deep_link_id;return(r?_t(bt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(eg){return null}}}]),e}();var xi=function(){function e(){o(this,e),this.providerId=e.PROVIDER_ID}return c(e,null,[{key:"credential",value:function(e,t){return bi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Di.parseLink(t);return Jn(n,"argument-error"),bi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();xi.PROVIDER_ID="password",xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Pi=function(){function e(t){o(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return c(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Li=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).scopes=[],e}return c(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,i.Z)(this.scopes)}}]),n}(Pi),Mi=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.call(this,"facebook.com")}return c(n,null,[{key:"credential",value:function(e){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(eg){return null}}}]),n}(Li);Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mi.PROVIDER_ID="facebook.com";var Ui=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return c(n,null,[{key:"credential",value:function(e,t){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(eg){return null}}}]),n}(Li);Ui.GOOGLE_SIGN_IN_METHOD="google.com",Ui.PROVIDER_ID="google.com";var ji=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.call(this,"github.com")}return c(n,null,[{key:"credential",value:function(e){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(eg){return null}}}]),n}(Li);ji.GITHUB_SIGN_IN_METHOD="github.com",ji.PROVIDER_ID="github.com";var Vi=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.call(this,"twitter.com")}return c(n,null,[{key:"credential",value:function(e,t){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(eg){return null}}}]),n}(Li);Vi.TWITTER_SIGN_IN_METHOD="twitter.com",Vi.PROVIDER_ID="twitter.com";var Fi=function(){function e(t){o(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return c(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ge(Be().mark((function t(n,r,i){var o,a,s,c,u=arguments;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>3&&void 0!==u[3]&&u[3],t.next=3,Wr._fromIdTokenResponse(n,i,o);case 3:return a=t.sent,s=Bi(i),c=new e({user:a,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ge(Be().mark((function t(n,r,i){var o;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Bi(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Bi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Wi=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var s,c;return o(this,n),(s=t.call(this,r.code,r.message)).operationType=i,s.user=a,Object.setPrototypeOf(h(s),n.prototype),s.customData={appName:e.name,tenantId:null!==(c=e.tenantId)&&void 0!==c?c:void 0,_serverResponse:r.customData._serverResponse,operationType:i},s}return c(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ht);function Gi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wi._fromErrorAndOperation(e,n,t,r);throw n}))}function Hi(e,t){return Ki.apply(this,arguments)}function Ki(){return Ki=Ge(Be().mark((function e(t,n){var r,i,o=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=Or,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Fi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function zi(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=Ge(Be().mark((function e(t,n){var r,i,o,a,s,c,u=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=t.auth,o="reauthenticate",e.prev=3,e.next=6,Or(t,Gi(i,o,n,t),r);case 6:return Jn((a=e.sent).idToken,i,"internal-error"),Jn(s=Ir(a.idToken),i,"internal-error"),c=s.sub,Jn(t.uid===c,i,"user-mismatch"),e.abrupt("return",Fi._forOperation(t,o,a));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&zn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Yi.apply(this,arguments)}function qi(e,t){return Zi.apply(this,arguments)}function Zi(){return Zi=Ge(Be().mark((function e(t,n){var r,i,o,a,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Gi(t,i,n);case 4:return o=e.sent,e.next=7,Fi._fromIdTokenResponse(t,i,o);case 7:if(a=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function Xi(e,t){return fr(e,"POST","/v2/accounts/mfaEnrollment:start",dr(e,t))}function Ji(e,t){return fr(e,"POST","/v2/accounts/mfaEnrollment:start",dr(e,t))}function Qi(e,t){return fr(e,"POST","/v2/accounts/mfaEnrollment:finalize",dr(e,t))}new WeakMap;var $i="__sak",eo=function(){function e(t,n){o(this,e),this.storageRetriever=t,this.type=n}return c(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem($i,"1"),this.storage.removeItem($i),Promise.resolve(!0)):Promise.resolve(!1)}catch(eg){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var to=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ft();return Zr(e)||ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ri(),e._shouldAllowMigration=!0,e}return c(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);ni()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ge(Be().mark((function e(t,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(d(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ge(Be().mark((function e(t){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(d(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(d(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(eo);to.type="LOCAL";var no=to,ro=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return c(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(eo);ro.type="SESSION";var io=ro;function oo(e){return Promise.all(e.map(function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ao=function(){function e(t){o(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return c(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,a=r.data,null===(s=this.handlersMap[o])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),c=Array.from(s).map(function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,oo(c);case 9:u=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function so(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ao.receivers=[];var co=function(){function e(t){o(this,e),this.target=t,this.handlers=new Set}return c(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ge(Be().mark((function e(t,n){var r,i,o,a,s=this,c=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,c){var u=so("",20);i.port1.start();var l=setTimeout((function(){c(new Error("unsupported_event"))}),r);a={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===u)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){c(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"))}}},s.handlers.add(a),i.port1.addEventListener("message",a.onMessage),s.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])})).finally((function(){a&&s.removeMessageHandler(a)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function uo(){return window}function lo(){return"undefined"!==typeof uo().WorkerGlobalScope&&"function"===typeof uo().importScripts}function fo(){return po.apply(this,arguments)}function po(){return(po=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ho(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var vo="firebaseLocalStorageDb",mo="firebaseLocalStorage",yo="fbase_key",go=function(){function e(t){o(this,e),this.request=t}return c(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Eo(e,t){return e.transaction([mo],t?"readwrite":"readonly").objectStore(mo)}function _o(){var e=indexedDB.deleteDatabase(vo);return new go(e).toPromise()}function bo(){var e=indexedDB.open(vo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(mo,{keyPath:yo})}catch(r){n(r)}})),e.addEventListener("success",Ge(Be().mark((function n(){var r;return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(mo)){n.next=12;break}return r.close(),n.next=5,_o();case 5:return n.t0=t,n.next=8,bo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function So(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=Ge(Be().mark((function e(t,n,r){var i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Eo(t,!0).put((i={},(0,et.Z)(i,yo,n),(0,et.Z)(i,"value",r),i)),e.abrupt("return",new go(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function ko(e,t){return To.apply(this,arguments)}function To(){return To=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Eo(t,!1).get(n),e.next=3,new go(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Ro(e,t){var n=Eo(e,!0).delete(t);return new go(n).toPromise()}var Co=function(){function e(){o(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return c(e,[{key:"_openDb",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,bo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ge(Be().mark((function e(){var t=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ao._getInstance(lo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ge(Be().mark((function e(n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ge(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new co(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ho()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,bo();case 5:return t=e.sent,e.next=8,So(t,$i,"1");case 8:return e.next=10,Ro(t,$i);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ge(Be().mark((function e(t,n){var r=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return So(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ko(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ge(Be().mark((function e(t){var n=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ro(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ge(Be().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Eo(e,!1).getAll();return new go(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.fbase_key,c=a.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(u=0,l=Object.keys(this.localCache);u<l.length;u++)d=l[u],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ge(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Co.type="LOCAL";var Io=Co;function Oo(e,t){return fr(e,"POST","/v2/accounts/mfaSignIn:start",dr(e,t))}function Ao(e,t){return fr(e,"POST","/v2/accounts/mfaSignIn:finalize",dr(e,t))}function No(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Yn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Do(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Do("rcb"),new ar(3e4,6e4);var xo="recaptcha";function Po(e,t,n){return Lo.apply(this,arguments)}function Lo(){return Lo=Ge(Be().mark((function e(t,n,r){var i,o,a,s,c,u,l,d,f;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,Jn("string"===typeof o,t,"argument-error"),Jn(r.type===xo,t,"argument-error"),!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=a.session,!("phoneNumber"in a)){e.next=17;break}return Jn("enroll"===s.type,t,"internal-error"),e.next=13,Xi(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return Jn("signin"===s.type,t,"internal-error"),Jn(u=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Oo(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:o}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ti(t,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 28:return d=e.sent,f=d.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Lo.apply(this,arguments)}var Mo=function(){function e(t){o(this,e),this.providerId=e.PROVIDER_ID,this.auth=si(t)}return c(e,[{key:"verifyPhoneNumber",value:function(e,t){return Po(this.auth,e,kt(t))}}],[{key:"credential",value:function(e,t){return Ni._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ni._fromTokenResponse(n,r):null}}]),e}();function Uo(e,t){return t?tr(t):(Jn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Mo.PROVIDER_ID="phone",Mo.PHONE_SIGN_IN_METHOD="phone";var jo=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,"custom","custom")).params=e,r}return c(n,[{key:"_getIdTokenResponse",value:function(e){return Si(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Si(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Si(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(fi);function Vo(e){return qi(e.auth,new jo(e),e.bypassAuthState)}function Fo(e){var t=e.auth,n=e.user;return Jn(n,t,"internal-error"),zi(n,new jo(e),e.bypassAuthState)}function Bo(e){return Wo.apply(this,arguments)}function Wo(){return Wo=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Jn(r=t.user,n,"internal-error"),e.abrupt("return",Hi(r,new jo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}var Go=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return c(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ge(Be().mark((function t(n,r){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ge(Be().mark((function e(t){var n,r,i,o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,a=t.error,s=t.type,!a){e.next=4;break}return this.reject(a),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vo;case"linkViaPopup":case"linkViaRedirect":return Bo;case"reauthViaPopup":case"reauthViaRedirect":return Fo;default:zn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ho=new ar(2e3,1e4);var Ko=function(e){l(n,e);var t=v(n);function n(e,r,i,a,s){var c;return o(this,n),(c=t.call(this,e,r,a,s)).provider=i,c.authWindow=null,c.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=h(c),c}return c(n,[{key:"executeNotNull",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Jn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ge(Be().mark((function e(){var t,n=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $n(1===this.filter.length,"Popup operations only handle one event"),t=so(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Yn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Yn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Yn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ho.get())}()}}]),n}(Go);Ko.currentPopupAction=null;var zo="pendingRedirect",Yo=new Map,qo=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return c(n,[{key:"execute",value:function(){var e=Ge(Be().mark((function e(){var t,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Yo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Zo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,$e(d(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Yo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Yo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ge(Be().mark((function e(t){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",$e(d(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",$e(d(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Go);function Zo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=Ge(Be().mark((function e(t,n){var r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(n),i=ea(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Jo(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t)._set(ta(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function $o(e,t){Yo.set(e._key(),t)}function ea(e){return tr(e._redirectPersistence)}function ta(e){return Kr(zo,e.config.apiKey,e.name)}function na(e,t,n){return function(e,t,n){return ra.apply(this,arguments)}(e,t,n)}function ra(){return ra=Ge(Be().mark((function e(t,n,r){var i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Zn(t,n,Pi),e.next=4,i._initializationPromise;case 4:return o=Uo(i,r),e.next=7,Jo(o,i);case 7:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(e,t){return oa.apply(this,arguments)}function oa(){return oa=Ge(Be().mark((function e(t,n){var r,i,o,a,s,c=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=si(t),o=Uo(i,n),a=new qo(i,o,r),e.next=6,a.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}var aa=function(){function e(t){o(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return c(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ca(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ca(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(sa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function sa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ca(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ua(e){return la.apply(this,arguments)}function la(){return la=Ge(Be().mark((function e(t){var n,r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",fr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}var da=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fa=/^https?/;function pa(){return pa=Ge(Be().mark((function e(t){var n,r,i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ua(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(a=o.value,e.prev=11,!ha(a)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:zn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),pa.apply(this,arguments)}function ha(e){var t=nr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!fa.test(r))return!1;if(da.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var va=new ar(3e4,6e4);function ma(){var e=uo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,i.Z)(e.H[r].L),e.CP)for(var o=0;o<e.CP.length;o++)e.CP[o]=null}}var ya=null;function ga(e){return ya=ya||function(e){return new Promise((function(t,n){var r,i,o;function a(){ma(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ma(),n(Yn(e,"network-request-failed"))},timeout:va.get()})}if(null===(i=null===(r=uo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=uo().gapi)||void 0===o?void 0:o.load)){var s=Do("iframefcb");return uo()[s]=function(){gapi.load?a():n(Yn(e,"network-request-failed"))},No("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}a()}})).catch((function(e){throw ya=null,e}))}(e),ya}var Ea=new ar(5e3,15e3),_a="__/auth/iframe",ba="emulator/auth/iframe",Sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ka(e){var t=e.config;Jn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?sr(t,ba):"https://".concat(e.config.authDomain,"/").concat(_a),r={apiKey:t.apiKey,appName:e.name,v:En},i=wa.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Et(r).slice(1))}function Ta(e){return Ra.apply(this,arguments)}function Ra(){return Ra=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(t);case 2:return n=e.sent,Jn(r=uo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ka(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sa,dontclear:!0},(function(e){return new Promise(function(){var n=Ge(Be().mark((function n(r,i){var o,a,s;return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){uo().clearTimeout(a),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=Yn(t,"network-request-failed"),a=uo().setTimeout((function(){i(o)}),Ea.get()),e.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}var Ca={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ia=function(){function e(t){o(this,e),this.window=t,this.associatedEvent=null}return c(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Oa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},Ca),{width:r.toString(),height:i.toString(),top:o,left:a}),u=ft().toLowerCase();n&&(s=Xr(u)?"_blank":n),qr(u)&&(t=t||"http://localhost",c.scrollbars="yes");var l=Object.entries(c).reduce((function(e,t){var n=(0,m.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return ti(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Ia(null);var d=window.open(t||"",s,l);Jn(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Ia(d)}var Aa="__/auth/handler",Na="emulator/auth/handler";function Da(e,t,n,r,i,o){Jn(e.config.authDomain,e,"auth-domain-config-required"),Jn(e.config.apiKey,e,"invalid-api-key");var a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:En,eventId:i};if(t instanceof Pi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(o||{});s<c.length;s++){var u=(0,m.Z)(c[s],2),l=u[0],d=u[1];a[l]=d}}if(t instanceof Li){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(a.scopes=f.join(","))}e.tenantId&&(a.tid=e.tenantId);for(var p=a,h=0,v=Object.keys(p);h<v.length;h++){var y=v[h];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Aa);return sr(t,Na)}(e),"?").concat(Et(p).slice(1))}var xa="webStorageSupport",Pa=function(){function e(){o(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=ia,this._overrideRedirectResult=$o}return c(e,[{key:"_openPopup",value:function(){var e=Ge(Be().mark((function e(t,n,r,i){var o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $n(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),a=Da(t,n,r,nr(),i),e.abrupt("return",Oa(t,a,so()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ge(Be().mark((function e(t,n,r,i){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return o=Da(t,n,r,nr(),i),uo().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,o=r.promise;return i?Promise.resolve(i):($n(o,"If manager is not set, promise should be"),o)}var a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch((function(){delete t.eventManagers[n]})),a}},{key:"initAndGetManager",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta(t);case 2:return n=e.sent,r=new aa(t),n.register("authEvent",(function(e){return Jn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(xa,{type:xa},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[xa];void 0!==i&&t(!!i),zn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return pa.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ri()||Zr()||ti()}}]),e}(),La=Pa,Ma=function(){function e(t){o(this,e),this.factorId=t}return c(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Qn("unexpected MultiFactorSessionType")}}}]),e}(),Ua=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,"phone")).credential=e,r}return c(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return fr(e,"POST","/v2/accounts/mfaEnrollment:finalize",dr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return fr(e,"POST","/v2/accounts/mfaSignIn:finalize",dr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ma);(function(){function e(){o(this,e)}return c(e,null,[{key:"assertion",value:function(e){return Ua._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var ja=function(){function e(){o(this,e)}return c(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Va._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Va._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Ji(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Fa._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ja.FACTOR_ID="totp";var Va=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return c(n,[{key:"_finalizeEnroll",value:function(){var e=Ge(Be().mark((function e(t,n,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Qi(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Ao(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Ma),Fa=function(){function e(t,n,r,i,a,s,c){o(this,e),this.sessionInfo=s,this.auth=c,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return c(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Ba(e)||Ba(t))&&(r=!0),r&&(Ba(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Ba(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Ba(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Wa="@firebase/auth",Ga="0.22.0",Ha=function(){function e(t){o(this,e),this.auth=t,this.internalListeners=new Map}return c(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ka,za=lt("authIdTokenMaxAge")||300,Ya=null;Ka="Browser",hn(new Tt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=r.options,a=o.apiKey,s=o.authDomain;return function(e,t){Jn(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Jn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:a,authDomain:s,clientPlatform:Ka,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ii(Ka)},i=new ai(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),hn(new Tt("auth-internal",(function(e){return function(e){return new Ha(e)}(si(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(Wa,Ga,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ka)),Sn(Wa,Ga,"esm2017");Sn("firebase","9.19.1","app");var qa,Za="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Xa={},Ja=Ja||{},Qa=Za||self;function $a(){}function es(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ts(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ns="closure_uid_"+(1e9*Math.random()>>>0),rs=0;function is(e,t,n){return e.call.apply(e.bind,arguments)}function os(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function as(e,t,n){return(as=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?is:os).apply(null,arguments)}function ss(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function cs(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function us(){this.s=this.s,this.o=this.o}us.prototype.s=!1,us.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ns)&&e[ns]||(e[ns]=++rs))},us.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ls=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ds(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fs(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(es(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var a=0;a<o;a++)e[i+a]=r[a]}else e.push(r)}}function ps(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ps.prototype.h=function(){this.defaultPrevented=!0};var hs=function(){if(!Qa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Qa.addEventListener("test",$a,t),Qa.removeEventListener("test",$a,t)}catch(n){}return e}();function vs(e){return/^[\s\xa0]*$/.test(e)}var ms=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ys(e,t){return e<t?-1:e>t?1:0}function gs(){var e=Qa.navigator;return e&&(e=e.userAgent)?e:""}function Es(e){return-1!=gs().indexOf(e)}function _s(e){return _s[" "](e),e}_s[" "]=$a;var bs,Ss=Es("Opera"),ws=Es("Trident")||Es("MSIE"),ks=Es("Edge"),Ts=ks||ws,Rs=Es("Gecko")&&!(-1!=gs().toLowerCase().indexOf("webkit")&&!Es("Edge"))&&!(Es("Trident")||Es("MSIE"))&&!Es("Edge"),Cs=-1!=gs().toLowerCase().indexOf("webkit")&&!Es("Edge");function Is(){var e=Qa.document;return e?e.documentMode:void 0}e:{var Os="",As=function(){var e=gs();return Rs?/rv:([^\);]+)(\)|;)/.exec(e):ks?/Edge\/([\d\.]+)/.exec(e):ws?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Cs?/WebKit\/(\S+)/.exec(e):Ss?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(As&&(Os=As?As[1]:""),ws){var Ns=Is();if(null!=Ns&&Ns>parseFloat(Os)){bs=String(Ns);break e}}bs=Os}var Ds,xs={};function Ps(){return function(e){var t=xs;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ms(String(bs)).split("."),n=ms("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=ys(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||ys(0==o[2].length,0==a[2].length)||ys(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(Qa.document&&ws){var Ls=Is();Ds=Ls||(parseInt(bs,10)||void 0)}else Ds=void 0;var Ms=Ds;function Us(e,t){if(ps.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rs){e:{try{_s(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:js[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Us.X.h.call(this)}}cs(Us,ps);var js={2:"touch",3:"pen",4:"mouse"};Us.prototype.h=function(){Us.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vs="closure_listenable_"+(1e6*Math.random()|0),Fs=0;function Bs(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Fs,this.ba=this.ea=!1}function Ws(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Gs(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Hs(e){var t={};for(var n in e)t[n]=e[n];return t}var Ks="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zs(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Ks.length;o++)n=Ks[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ys(e){this.src=e,this.g={},this.h=0}function qs(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ls(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ws(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zs(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ba&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}Ys.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Zs(e,t,r,i);return-1<a?(t=e[a],n||(t.ea=!1)):((t=new Bs(t,this.src,o,!!r,i)).ea=n,e.push(t)),t};var Xs="closure_lm_"+(1e6*Math.random()|0),Js={};function Qs(e,t,n,r,i){if(r&&r.once)return ec(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Qs(e,t[o],n,r,i);return null}return n=sc(n),e&&e[Vs]?e.N(t,n,ts(r)?!!r.capture:!!r,i):$s(e,t,n,!1,r,i)}function $s(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=ts(i)?!!i.capture:!!i,s=oc(e);if(s||(e[Xs]=s=new Ys(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ic;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hs||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ec(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ec(e,t[o],n,r,i);return null}return n=sc(n),e&&e[Vs]?e.O(t,n,ts(r)?!!r.capture:!!r,i):$s(e,t,n,!0,r,i)}function tc(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)tc(e,t[o],n,r,i);else r=ts(r)?!!r.capture:!!r,n=sc(n),e&&e[Vs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zs(o=e.g[t],n,r,i))&&(Ws(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=oc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zs(t,n,r,i)),(n=-1<e?t[e]:null)&&nc(n))}function nc(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Vs])qs(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=oc(t))?(qs(n,e),0==n.h&&(n.src=null,t[Xs]=null)):Ws(e)}}}function rc(e){return e in Js?Js[e]:Js[e]="on"+e}function ic(e,t){if(e.ba)e=!0;else{t=new Us(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&nc(e),e=n.call(r,t)}return e}function oc(e){return(e=e[Xs])instanceof Ys?e:null}var ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function sc(e){return"function"===typeof e?e:(e[ac]||(e[ac]=function(t){return e.handleEvent(t)}),e[ac])}function cc(){us.call(this),this.i=new Ys(this),this.P=this,this.I=null}function uc(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ps(t,e);else if(t instanceof ps)t.target=t.target||e;else{var i=t;zs(t=new ps(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=lc(a,r,!0,t)&&i}if(i=lc(a=t.g=e,r,!0,t)&&i,i=lc(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=lc(a=t.g=n[o],r,!1,t)&&i}function lc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ba&&a.capture==n){var s=a.listener,c=a.ha||a.src;a.ea&&qs(e.i,a),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}cs(cc,us),cc.prototype[Vs]=!0,cc.prototype.removeEventListener=function(e,t,n,r){tc(this,e,t,n,r)},cc.prototype.M=function(){if(cc.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ws(n[r]);delete t.g[e],t.h--}}this.I=null},cc.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},cc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var dc=Qa.JSON.stringify;function fc(){var e=_c,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var pc,hc=function(){function e(){o(this,e),this.h=this.g=null}return c(e,[{key:"add",value:function(e,t){var n=vc.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vc=new(function(){function e(t,n){o(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return c(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new mc}),(function(e){return e.reset()})),mc=function(){function e(){o(this,e),this.next=this.g=this.h=null}return c(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yc(e){Qa.setTimeout((function(){throw e}),0)}function gc(e,t){pc||function(){var e=Qa.Promise.resolve(void 0);pc=function(){e.then(bc)}}(),Ec||(pc(),Ec=!0),_c.add(e,t)}var Ec=!1,_c=new hc;function bc(){for(var e;e=fc();){try{e.h.call(e.g)}catch(n){yc(n)}var t=vc;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ec=!1}function Sc(e,t){cc.call(this),this.h=e||1,this.g=t||Qa,this.j=as(this.lb,this),this.l=Date.now()}function wc(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function kc(e,t,n){if("function"===typeof e)n&&(e=as(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=as(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qa.setTimeout(e,t||0)}function Tc(e){e.g=kc((function(){e.g=null,e.i&&(e.i=!1,Tc(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}cs(Sc,cc),(qa=Sc.prototype).ca=!1,qa.R=null,qa.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),uc(this,"tick"),this.ca&&(wc(this),this.start()))}},qa.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qa.M=function(){Sc.X.M.call(this),wc(this),delete this.g};var Rc=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return c(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Tc(this)}},{key:"M",value:function(){$e(d(n.prototype),"M",this).call(this),this.g&&(Qa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(us);function Cc(e){us.call(this),this.h=e,this.g={}}cs(Cc,us);var Ic=[];function Oc(e,t,n,r){Array.isArray(n)||(n&&(Ic[0]=n.toString()),n=Ic);for(var i=0;i<n.length;i++){var o=Qs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ac(e){Gs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&nc(e)}),e),e.g={}}function Nc(){this.g=!0}function Dc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return dc(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Cc.prototype.M=function(){Cc.X.M.call(this),Ac(this)},Cc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nc.prototype.Aa=function(){this.g=!1},Nc.prototype.info=function(){};var xc={},Pc=null;function Lc(){return Pc=Pc||new cc}function Mc(e){ps.call(this,xc.Pa,e)}function Uc(e){var t=Lc();uc(t,new Mc(t))}function jc(e,t){ps.call(this,xc.STAT_EVENT,e),this.stat=t}function Vc(e){var t=Lc();uc(t,new jc(t,e))}function Fc(e,t){ps.call(this,xc.Qa,e),this.size=t}function Bc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Qa.setTimeout((function(){e()}),t)}xc.Pa="serverreachability",cs(Mc,ps),xc.STAT_EVENT="statevent",cs(jc,ps),xc.Qa="timingevent",cs(Fc,ps);var Wc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Gc={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hc(){}function Kc(e){return e.h||(e.h=e.i())}function zc(){}Hc.prototype.h=null;var Yc,qc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zc(){ps.call(this,"d")}function Xc(){ps.call(this,"c")}function Jc(){}function Qc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Cc(this),this.O=eu,e=Ts?125:void 0,this.T=new Sc(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new $c}function $c(){this.i=null,this.g="",this.h=!1}cs(Zc,ps),cs(Xc,ps),cs(Jc,Hc),Jc.prototype.g=function(){return new XMLHttpRequest},Jc.prototype.i=function(){return{}},Yc=new Jc;var eu=45e3,tu={},nu={};function ru(e,t,n){e.K=1,e.v=Su(yu(t)),e.s=n,e.P=!0,iu(e,null)}function iu(e,t){e.F=Date.now(),cu(e),e.A=yu(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Lu(n.i,"t",r),e.C=0,n=e.l.H,e.h=new $c,e.g=Ml(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Rc(as(e.La,e,e.g),e.N)),Oc(e.S,e.g,"readystatechange",e.ib),t=e.H?Hs(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Uc(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),c=0;c<s.length;c++){var u=s[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");a=2<=d.length&&"type"==d[1]?a+(l+"=")+u+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ou(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function au(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=su(e,n))==nu){4==t&&(e.o=4,Vc(14),i=!1),Dc(e.j,e.m,null,"[Incomplete Response]");break}if(r==tu){e.o=4,Vc(15),Dc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Dc(e.j,e.m,r,null),pu(e,r)}ou(e)&&r!=nu&&r!=tu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Il(t),t.K=!0,Vc(11))):(Dc(e.j,e.m,n,"[Invalid Chunked Response]"),fu(e),du(e))}function su(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?nu:(n=Number(t.substring(n,r)),isNaN(n)?tu:(r+=1)+n>t.length?nu:(t=t.substr(r,n),e.C=r+n,t))}function cu(e){e.V=Date.now()+e.O,uu(e,e.O)}function uu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Bc(as(e.gb,e),t)}function lu(e){e.B&&(Qa.clearTimeout(e.B),e.B=null)}function du(e){0==e.l.G||e.I||Nl(e.l,e)}function fu(e){lu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,wc(e.T),Ac(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function pu(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Gu(n.h,e)))if(!e.J&&Gu(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Al(n),_l(n)}Cl(n),Vc(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Bc(as(n.cb,n),6e3));if(1>=Wu(n.h)&&n.ja){try{n.ja()}catch(o){}n.ja=void 0}}else xl(n,11)}else if((e.J||n.g==e)&&Al(n),!vs(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.T=o[0],o=o[1],2==n.G)if("c"==o[0]){n.I=o[1],n.ka=o[2];var a=o[3];null!=a&&(n.ma=a,n.j.info("VER="+n.ma));var s=o[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var c=o[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var l=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var d=r.h;d.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Hu(d,d.h),d.h=null))}if(r.D){var f=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,bu(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var p=e;if((r=n).sa=Ll(r,r.H?r.ka:null,r.V),p.J){Ku(r.h,p);var h=p,v=r.J;v&&h.setTimeout(v),h.B&&(lu(h),cu(h)),r.g=p}else Rl(r);0<n.i.length&&Sl(n)}else"stop"!=o[0]&&"close"!=o[0]||xl(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?xl(n,7):El(n):"noop"!=o[0]&&n.l&&n.l.wa(o),n.A=0)}Uc()}catch(o){}}function hu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(es(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(es(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(es(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(qa=Qc.prototype).setTimeout=function(e){this.O=e},qa.ib=function(e){e=e.target;var t=this.L;t&&3==pl(e)?t.l():this.La(e)},qa.La=function(e){try{if(e==this.g)e:{var t=pl(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Ts||this.g&&(this.h.h||this.g.fa()||hl(this.g)))){this.I||4!=t||7==n||Uc(),lu(this);var r=this.g.aa();this.Y=r;t:if(ou(this)){var i=hl(this.g);e="";var o=i.length,a=4==pl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){fu(this),du(this);var s="";break t}this.h.i=new Qa.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vs(c)){var l=c;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Vc(12),fu(this),du(this);break e}Dc(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pu(this,r)}this.P?(au(this,t,s),Ts&&this.i&&3==t&&(Oc(this.S,this.T,"tick",this.hb),this.T.start())):(Dc(this.j,this.m,s,null),pu(this,s)),4==t&&fu(this),this.i&&!this.I&&(4==t?Nl(this.l,this):(this.i=!1,cu(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Vc(12)):(this.o=0,Vc(13)),fu(this),du(this)}}}catch(t){}},qa.hb=function(){if(this.g){var e=pl(this.g),t=this.g.fa();this.C<t.length&&(lu(this),au(this,e,t),this.i&&4!=e&&cu(this))}},qa.cancel=function(){this.I=!0,fu(this)},qa.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Uc(),Vc(17)),fu(this),this.o=2,du(this)):uu(this,this.V-e)};var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof mu){this.h=void 0!==t?t:e.h,gu(this,e.j),this.s=e.s,this.g=e.g,Eu(this,e.m),this.l=e.l,t=e.i;var n=new Nu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_u(this,n),this.o=e.o}else e&&(n=String(e).match(vu))?(this.h=!!t,gu(this,n[1]||"",!0),this.s=wu(n[2]||""),this.g=wu(n[3]||"",!0),Eu(this,n[4]),this.l=wu(n[5]||"",!0),_u(this,n[6]||"",!0),this.o=wu(n[7]||"")):(this.h=!!t,this.i=new Nu(null,this.h))}function yu(e){return new mu(e)}function gu(e,t,n){e.j=n?wu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Eu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _u(e,t,n){t instanceof Nu?(e.i=t,function(e,t){t&&!e.j&&(Du(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xu(this,t),Lu(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ku(t,Ou)),e.i=new Nu(t,e.h))}function bu(e,t,n){e.i.set(t,n)}function Su(e){return bu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ku(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ku(t,Ru,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ku(t,Ru,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ku(n,"/"==n.charAt(0)?Iu:Cu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ku(n,Au)),e.join("")};var Ru=/[#\/\?@]/g,Cu=/[#\?:]/g,Iu=/[#\?]/g,Ou=/[#\?@]/g,Au=/#/g;function Nu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Du(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xu(e,t){Du(e),t=Mu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pu(e,t){return Du(e),t=Mu(e,t),e.g.has(t)}function Lu(e,t,n){xu(e,t),0<n.length&&(e.i=null,e.g.set(Mu(e,t),ds(n)),e.h+=n.length)}function Mu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(qa=Nu.prototype).add=function(e,t){Du(this),this.i=null,e=Mu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},qa.forEach=function(e,t){Du(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},qa.oa=function(){Du(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},qa.W=function(e){Du(this);var t=[];if("string"===typeof e)Pu(this,e)&&(t=t.concat(this.g.get(Mu(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},qa.set=function(e,t){return Du(this),this.i=null,Pu(this,e=Mu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},qa.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},qa.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var a=i;""!==o[r]&&(a+="="+encodeURIComponent(String(o[r]))),e.push(a)}}return this.i=e.join("&")};var Uu=c((function e(t,n){o(this,e),this.h=t,this.g=n}));function ju(e){this.l=e||Fu,Qa.PerformanceNavigationTiming?e=0<(e=Qa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Qa.g&&Qa.g.Ga&&Qa.g.Ga()&&Qa.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vu,Fu=10;function Bu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wu(e){return e.h?1:e.g?e.g.size:0}function Gu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hu(e,t){e.g?e.g.add(t):e.h=t}function Ku(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zu(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return ds(e.i)}function Yu(){}function qu(){this.g=new Yu}function Zu(e,t,n){var r=n||"";try{hu(e,(function(e,n){var i=e;ts(e)&&(i=dc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Ju(e){this.l=e.ac||null,this.j=e.jb||!1}function Qu(e,t){cc.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$u,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ju.prototype.cancel=function(){if(this.i=zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Yu.prototype.stringify=function(e){return Qa.JSON.stringify(e,void 0)},Yu.prototype.parse=function(e){return Qa.JSON.parse(e,void 0)},cs(Ju,Hc),Ju.prototype.g=function(){return new Qu(this.l,this.j)},Ju.prototype.i=(Vu={},function(){return Vu}),cs(Qu,cc);var $u=0;function el(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function tl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,nl(e)}function nl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(qa=Qu.prototype).open=function(e,t){if(this.readyState!=$u)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,nl(this)},qa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Qa).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},qa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tl(this)),this.readyState=$u},qa.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,nl(this)),this.g&&(this.readyState=3,nl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Qa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;el(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},qa.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tl(this):nl(this),3==this.readyState&&el(this)}},qa.Va=function(e){this.g&&(this.response=this.responseText=e,tl(this))},qa.Ua=function(e){this.g&&(this.response=e,tl(this))},qa.ga=function(){this.g&&tl(this)},qa.setRequestHeader=function(e,t){this.v.append(e,t)},qa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},qa.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var rl=Qa.JSON.parse;function il(e){cc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ol,this.K=this.L=!1}cs(il,cc);var ol="",al=/^https?$/i,sl=["POST","PUT"];function cl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ul(e),dl(e)}function ul(e){e.D||(e.D=!0,uc(e,"complete"),uc(e,"error"))}function ll(e){if(e.h&&"undefined"!=typeof Ja&&(!e.C[1]||4!=pl(e)||2!=e.aa()))if(e.v&&4==pl(e))kc(e.Ha,0,e);else if(uc(e,"readystatechange"),4==pl(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(vu)[1]||null;if(!o&&Qa.self&&Qa.self.location){var a=Qa.self.location.protocol;o=a.substr(0,a.length-1)}i=!al.test(o?o.toLowerCase():"")}t=i}if(t)uc(e,"complete"),uc(e,"success");else{e.m=6;try{var s=2<pl(e)?e.g.statusText:""}catch(c){s=""}e.j=s+" ["+e.aa()+"]",ul(e)}}finally{dl(e)}}}function dl(e,t){if(e.g){fl(e);var n=e.g,r=e.C[0]?$a:null;e.g=null,e.C=null,t||uc(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function fl(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Qa.clearTimeout(e.A),e.A=null)}function pl(e){return e.g?e.g.readyState:0}function hl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ol:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch($l){return null}}function vl(e){var t="";return Gs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ml(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bu(e,t,n))}function yl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function gl(e){this.Ca=0,this.i=[],this.j=new Nc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=yl("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=yl("baseRetryDelayMs",5e3,e),this.bb=yl("retryDelaySeedMs",1e4,e),this.$a=yl("forwardChannelMaxRetries",2,e),this.ta=yl("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new ju(e&&e.concurrentRequestLimit),this.Fa=new qu,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function El(e){if(bl(e),3==e.G){var t=e.U++,n=yu(e.F);bu(n,"SID",e.I),bu(n,"RID",t),bu(n,"TYPE","terminate"),kl(e,n),(t=new Qc(e,e.j,t,void 0)).K=2,t.v=Su(yu(n)),n=!1,Qa.navigator&&Qa.navigator.sendBeacon&&(n=Qa.navigator.sendBeacon(t.v.toString(),"")),!n&&Qa.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ml(t.l,null),t.g.da(t.v)),t.F=Date.now(),cu(t)}Pl(e)}function _l(e){e.g&&(Il(e),e.g.cancel(),e.g=null)}function bl(e){_l(e),e.u&&(Qa.clearTimeout(e.u),e.u=null),Al(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Qa.clearTimeout(e.m),e.m=null)}function Sl(e){Bu(e.h)||e.m||(e.m=!0,gc(e.Ja,e),e.C=0)}function wl(e,t){var n;n=t?t.m:e.U++;var r=yu(e.F);bu(r,"SID",e.I),bu(r,"RID",n),bu(r,"AID",e.T),kl(e,r),e.o&&e.s&&ml(r,e.o,e.s),n=new Qc(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Tl(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Hu(e.h,n),ru(n,r,t)}function kl(e,t){e.ia&&Gs(e.ia,(function(e,n){bu(t,n,e)})),e.l&&hu({},(function(e,n){bu(t,n,e)}))}function Tl(e,t,n){n=Math.min(e.i.length,n);var r=e.l?as(e.l.Ra,e.l,e):null;e:for(var i=e.i,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].h,l=i[c].g;if(0>(u-=o))o=Math.max(0,i[c].h-100),s=!1;else try{Zu(l,a,"req"+u+"_")}catch(ud){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Rl(e){e.g||e.u||(e.Z=1,gc(e.Ia,e),e.A=0)}function Cl(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Bc(as(e.Ia,e),Dl(e,e.A)),e.A++,!0)}function Il(e){null!=e.B&&(Qa.clearTimeout(e.B),e.B=null)}function Ol(e){e.g=new Qc(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=yu(e.sa);bu(t,"RID","rpc"),bu(t,"SID",e.I),bu(t,"CI",e.L?"0":"1"),bu(t,"AID",e.T),bu(t,"TYPE","xmlhttp"),kl(e,t),e.o&&e.s&&ml(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Su(yu(t)),n.s=null,n.P=!0,iu(n,e)}function Al(e){null!=e.v&&(Qa.clearTimeout(e.v),e.v=null)}function Nl(e,t){var n=null;if(e.g==t){Al(e),Il(e),e.g=null;var r=2}else{if(!Gu(e.h,t))return;n=t.D,Ku(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;uc(r=Lc(),new Fc(r,n)),Sl(e)}else Rl(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Wu(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Bc(as(e.Ja,e,t),Dl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Cl(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xl(e,5);break;case 4:xl(e,10);break;case 3:xl(e,6);break;default:xl(e,2)}}function Dl(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function xl(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=as(e.kb,e);n||(n=new mu("//www.google.com/images/cleardot.gif"),Qa.location&&"http"==Qa.location.protocol||gu(n,"https"),Su(n)),function(e,t){var n=new Nc;if(Qa.Image){var r=new Image;r.onload=ss(Xu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ss(Xu,n,r,"TestLoadImage: error",!1,t),r.onabort=ss(Xu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ss(Xu,n,r,"TestLoadImage: timeout",!1,t),Qa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vc(2);e.G=0,e.l&&e.l.va(t),Pl(e),bl(e)}function Pl(e){if(e.G=0,e.la=[],e.l){var t=zu(e.h);0==t.length&&0==e.i.length||(fs(e.la,t),fs(e.la,e.i),e.h.i.length=0,ds(e.i),e.i.length=0),e.l.ua()}}function Ll(e,t,n){var r=n instanceof mu?yu(n):new mu(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Eu(r,r.m);else{var i=Qa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new mu(null,void 0);r&&gu(o,r),t&&(o.g=t),i&&Eu(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.za,n&&t&&bu(r,n,t),bu(r,"VER",e.ma),kl(e,r),r}function Ml(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new il(new Ju({jb:!0})):new il(e.ra)).Ka(e.H),t}function Ul(){}function jl(){if(ws&&!(10<=Number(Ms)))throw Error("Environmental error: no available transport.")}function Vl(e,t){cc.call(this),this.g=new gl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!vs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vs(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wl(this)}function Fl(e){Zc.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Bl(){Xc.call(this),this.status=1}function Wl(e){this.g=e}(qa=il.prototype).Ka=function(e){this.L=e},qa.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yc.g(),this.C=this.u?Kc(this.u):Kc(Yc),this.g.onreadystatechange=as(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void cl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,a=T(r.keys());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.set(s,r.get(s))}}catch(p){a.e(p)}finally{a.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Qa.FormData&&e instanceof Qa.FormData,!(0<=ls(sl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,u=T(n);try{for(u.s();!(c=u.n()).done;){var l=(0,m.Z)(c.value,2),d=l[0],f=l[1];this.g.setRequestHeader(d,f)}}catch(p){u.e(p)}finally{u.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fl(this),0<this.B&&((this.K=function(e){return ws&&Ps()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=as(this.qa,this)):this.A=kc(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){cl(this,s)}},qa.qa=function(){"undefined"!=typeof Ja&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,uc(this,"timeout"),this.abort(8))},qa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,uc(this,"complete"),uc(this,"abort"),dl(this))},qa.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dl(this,!0)),il.X.M.call(this)},qa.Ha=function(){this.s||(this.F||this.v||this.l?ll(this):this.fb())},qa.fb=function(){ll(this)},qa.aa=function(){try{return 2<pl(this)?this.g.status:-1}catch(Vu){return-1}},qa.fa=function(){try{return this.g?this.g.responseText:""}catch(Vu){return""}},qa.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),rl(t)}},qa.Ea=function(){return this.m},qa.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(qa=gl.prototype).ma=8,qa.G=1,qa.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Qc(this,this.j,e,void 0),n=this.s;if(this.S&&(n?zs(n=Hs(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var o=this.i[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Tl(this,t,r),bu(i=yu(this.F),"RID",e),bu(i,"CVER",22),this.D&&bu(i,"X-HTTP-Session-Id",this.D),kl(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(vl(n)))+"&"+r:this.o&&ml(i,this.o,n)),Hu(this.h,t),this.Ya&&bu(i,"TYPE","init"),this.O?(bu(i,"$req",r),bu(i,"SID","null"),t.Z=!0,ru(t,i,null)):ru(t,i,r),this.G=2}}else 3==this.G&&(e?wl(this,e):0==this.i.length||Bu(this.h)||wl(this))},qa.Ia=function(){if(this.u=null,Ol(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Bc(as(this.eb,this),e)}},qa.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vc(10),_l(this),Ol(this))},qa.cb=function(){null!=this.v&&(this.v=null,_l(this),Cl(this),Vc(19))},qa.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Vc(2)):(this.j.info("Failed to ping google.com"),Vc(1))},(qa=Ul.prototype).xa=function(){},qa.wa=function(){},qa.va=function(){},qa.ua=function(){},qa.Ra=function(){},jl.prototype.g=function(e,t){return new Vl(e,t)},cs(Vl,cc),Vl.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Vc(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Ll(e,null,e.V),Sl(e)},Vl.prototype.close=function(){El(this.g)},Vl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=dc(e),e=n);t.i.push(new Uu(t.ab++,e)),3==t.G&&Sl(t)},Vl.prototype.M=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,Vl.X.M.call(this)},cs(Fl,Zc),cs(Bl,Xc),cs(Wl,Ul),Wl.prototype.xa=function(){uc(this.g,"a")},Wl.prototype.wa=function(e){uc(this.g,new Fl(e))},Wl.prototype.va=function(e){uc(this.g,new Bl)},Wl.prototype.ua=function(){uc(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Vl.prototype.send=Vl.prototype.u,Vl.prototype.open=Vl.prototype.m,Vl.prototype.close=Vl.prototype.close,Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,Gc.COMPLETE="complete",zc.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",cc.prototype.listen=cc.prototype.N,il.prototype.listenOnce=il.prototype.O,il.prototype.getLastError=il.prototype.Oa,il.prototype.getLastErrorCode=il.prototype.Ea,il.prototype.getStatus=il.prototype.aa,il.prototype.getResponseJson=il.prototype.Sa,il.prototype.getResponseText=il.prototype.fa,il.prototype.send=il.prototype.da,il.prototype.setWithCredentials=il.prototype.Ka;var Gl=Xa.createWebChannelTransport=function(){return new jl},Hl=Xa.getStatEventTarget=function(){return Lc()},Kl=Xa.ErrorCode=Wc,zl=Xa.EventType=Gc,Yl=Xa.Event=xc,ql=Xa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Zl=Xa.FetchXmlHttpFactory=Ju,Xl=Xa.WebChannel=zc,Jl=Xa.XhrIo=il,Ql="@firebase/firestore",$l=function(){function e(t){o(this,e),this.uid=t}return c(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$l.UNAUTHENTICATED=new $l(null),$l.GOOGLE_CREDENTIALS=new $l("google-credentials-uid"),$l.FIRST_PARTY=new $l("first-party-uid"),$l.MOCK_USER=new $l("mock-user");var ed="9.19.0",td=new Mt("@firebase/firestore");function nd(){return td.logLevel}function rd(e){if(td.logLevel<=Ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.map(ad);td.debug.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat((0,i.Z)(o)))}}function id(e){if(td.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.map(ad);td.error.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat((0,i.Z)(o)))}}function od(e){if(td.logLevel<=Ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.map(ad);td.warn.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat((0,i.Z)(o)))}}function ad(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function sd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ed,") INTERNAL ASSERTION FAILED: ")+e;throw id(t),new Error(t)}function cd(e,t){e||sd()}function ud(e,t){return e}var ld={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dd=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return c(n)}(ht),fd=c((function e(){var t=this;o(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),pd=c((function e(t,n){o(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),hd=function(){function e(){o(this,e)}return c(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($l.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vd=function(){function e(t){o(this,e),this.token=t,this.changeListener=null}return c(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),md=function(){function e(t){o(this,e),this.t=t,this.currentUser=$l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return c(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new fd;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new fd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var a=function(){var t=o;e.enqueueRetryable(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){rd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),a()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(rd("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fd)}}),0),a()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(cd("string"==typeof n.accessToken),new pd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return cd(null===e||"string"==typeof e),new $l(e)}}]),e}(),yd=function(){function e(t,n,r){o(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=$l.FIRST_PARTY,this.g=new Map}return c(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),gd=function(){function e(t,n,r){o(this,e),this.h=t,this.l=n,this.m=r}return c(e,[{key:"getToken",value:function(){return Promise.resolve(new yd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($l.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ed=c((function e(t){o(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),_d=function(){function e(t){o(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return c(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,rd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):rd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(cd("string"==typeof t.token),e.T=t.token,new Ed(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function bd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Sd=function(){function e(){o(this,e)}return c(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function wd(e,t){return e<t?-1:e>t?1:0}function kd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Td=function(){function e(t,n){if(o(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new dd(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dd(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new dd(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dd(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return c(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?wd(this.nanoseconds,e.nanoseconds):wd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Rd=function(){function e(t){o(this,e),this.timestamp=t}return c(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Td(0,0))}},{key:"max",value:function(){return new e(new Td(253402300799,999999999))}}]),e}(),Cd=function(){function e(t,n,r){o(this,e),void 0===n?n=0:n>t.length&&sd(),void 0===r?r=t.length-n:r>t.length-n&&sd(),this.segments=t,this.offset=n,this.len=r}return c(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Id=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var a=0,s=r;a<s.length;a++){var c=s[a];if(c.indexOf("//")>=0)throw new dd(ld.INVALID_ARGUMENT,"Invalid segment (".concat(c,"). Paths must not contain // in them."));e.push.apply(e,(0,i.Z)(c.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cd),Od=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ad=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Od.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new dd(ld.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new dd(ld.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new dd(ld.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new dd(ld.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cd),Nd=function(){function e(t){o(this,e),this.path=t}return c(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Id.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Id.fromString(t))}},{key:"fromName",value:function(t){return new e(Id.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Id.emptyPath())}},{key:"comparator",value:function(e,t){return Id.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Id(t.slice()))}}]),e}(),Dd=c((function e(t,n,r,i){o(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Dd.UNKNOWN_ID=-1;function xd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Rd.fromTimestamp(1e9===r?new Td(n+1,0):new Td(n,r));return new Ld(i,Nd.empty(),t)}function Pd(e){return new Ld(e.readTime,e.key,-1)}var Ld=function(){function e(t,n,r){o(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return c(e,null,[{key:"min",value:function(){return new e(Rd.min(),Nd.empty(),-1)}},{key:"max",value:function(){return new e(Rd.max(),Nd.empty(),-1)}}]),e}();function Md(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Nd.comparator(e.documentKey,t.documentKey))?n:wd(e.largestBatchId,t.largestBatchId)}var Ud="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jd=function(){function e(){o(this,e),this.onCommittedListeners=[]}return c(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Vd(e){return Fd.apply(this,arguments)}function Fd(){return Fd=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ld.FAILED_PRECONDITION&&t.message===Ud){e.next=2;break}throw t;case 2:rd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}var Bd=function(){function e(t){var n=this;o(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return c(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&sd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var o=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,o=new Array(i),a=0,s=function(){var s=c;n(t[s]).next((function(t){o[s]=t,++a===i&&e(o)}),(function(e){return r(e)}))},c=0;c<i;c++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Wd(e){return"IndexedDbTransactionError"===e.name}var Gd=function(){function e(t,n){var r=this;o(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return c(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Hd(e){return null==e}function Kd(e){return 0===e&&1/e==-1/0}function zd(e){return"number"==typeof e&&Number.isInteger(e)&&!Kd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Gd.ct=-1;var Yd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qd=([].concat((0,i.Z)(Yd),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Zd=qd;[].concat(Zd,["indexConfiguration","indexState","indexEntries"]);function Xd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Qd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var $d=function(){function e(t,n){o(this,e),this.comparator=t,this.root=n||tf.EMPTY}return c(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tf.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ef(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ef(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ef(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ef(this.root,e,this.comparator,!0)}}]),e}(),ef=function(){function e(t,n,r,i){o(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return c(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tf=function(){function e(t,n,r,i,a){o(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return c(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw sd();if(this.right.isRed())throw sd();var e=this.left.check();if(e!==this.right.check())throw sd();return e+(this.isRed()?0:1)}}]),e}();tf.EMPTY=null,tf.RED=!0,tf.BLACK=!1,tf.EMPTY=new(function(){function e(){o(this,e),this.size=0}return c(e,[{key:"key",get:function(){throw sd()}},{key:"value",get:function(){throw sd()}},{key:"color",get:function(){throw sd()}},{key:"left",get:function(){throw sd()}},{key:"right",get:function(){throw sd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tf(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var nf=function(){function e(t){o(this,e),this.comparator=t,this.data=new $d(this.comparator)}return c(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rf=function(){function e(t){o(this,e),this.iter=t}return c(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var of=function(){function e(t){o(this,e),this.fields=t,t.sort(Ad.comparator)}return c(e,[{key:"unionWith",value:function(t){var n,r=new nf(Ad.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r.add(o)}}catch(u){i.e(u)}finally{i.f()}var a,s=T(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;r=r.add(c)}}catch(u){s.e(u)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return kd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),af=function(e){l(n,e);var t=v(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return c(n)}(g(Error));var sf=function(e){function t(e){o(this,t),this.binaryString=e}return c(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return wd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new af("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();sf.EMPTY_BYTE_STRING=new sf("");var cf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uf(e){if(cd(!!e),"string"==typeof e){var t=0,n=cf.exec(e);if(cd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:lf(e.seconds),nanos:lf(e.nanos)}}function lf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function df(e){return"string"==typeof e?sf.fromBase64String(e):sf.fromUint8Array(e)}function ff(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pf(e){var t=e.mapValue.fields.__previous_value__;return ff(t)?pf(t):t}function hf(e){var t=uf(e.mapValue.fields.__local_write_time__.timestampValue);return new Td(t.seconds,t.nanos)}var vf=c((function e(t,n,r,i,a,s,c,u){o(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.useFetchStreams=u})),mf=function(){function e(t,n){o(this,e),this.projectId=t,this.database=n||"(default)"}return c(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),yf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ff(e)?4:Nf(e)?9007199254740991:10:sd()}function Ef(e,t){if(e===t)return!0;var n=gf(e);if(n!==gf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hf(e).isEqual(hf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=uf(e.timestampValue),r=uf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return df(e.bytesValue).isEqual(df(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lf(e.geoPointValue.latitude)===lf(t.geoPointValue.latitude)&&lf(e.geoPointValue.longitude)===lf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lf(e.integerValue)===lf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=lf(e.doubleValue),r=lf(t.doubleValue);return n===r?Kd(n)===Kd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kd(e.arrayValue.values||[],t.arrayValue.values||[],Ef);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xd(n)!==Xd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ef(n[i],r[i])))return!1;return!0}(e,t);default:return sd()}}function _f(e,t){return void 0!==(e.values||[]).find((function(e){return Ef(e,t)}))}function bf(e,t){if(e===t)return 0;var n=gf(e),r=gf(t);if(n!==r)return wd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=lf(e.integerValue||e.doubleValue),r=lf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sf(e.timestampValue,t.timestampValue);case 4:return Sf(hf(e),hf(t));case 5:return wd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=df(e),r=df(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=wd(n[i],r[i]);if(0!==o)return o}return wd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=wd(lf(e.latitude),lf(t.latitude));return 0!==n?n:wd(lf(e.longitude),lf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=bf(n[i],r[i]);if(o)return o}return wd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yf.mapValue&&t===yf.mapValue)return 0;if(e===yf.mapValue)return 1;if(t===yf.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=wd(r[a],o[a]);if(0!==s)return s;var c=bf(n[r[a]],i[o[a]]);if(0!==c)return c}return wd(r.length,o.length)}(e.mapValue,t.mapValue);default:throw sd()}}function Sf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wd(e,t);var n=uf(e),r=uf(t),i=wd(n.seconds,r.seconds);return 0!==i?i:wd(n.nanos,r.nanos)}function wf(e){return kf(e)}function kf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=uf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?df(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Nd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=kf(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(kf(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):sd();var t,n}function Tf(e){return!!e&&"integerValue"in e}function Rf(e){return!!e&&"arrayValue"in e}function Cf(e){return!!e&&"nullValue"in e}function If(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Of(e){return!!e&&"mapValue"in e}function Af(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Jd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Af(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Af(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Nf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Df=function(){function e(t){o(this,e),this.value=t}return c(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Of(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Af(t)}},{key:"setAll",value:function(e){var t=this,n=Ad.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=Af(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ef(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Of(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Jd(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(Af(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xf(e){var t=[];return Jd(e.fields,(function(e,n){var r=new Ad([e]);if(Of(n)){var i=xf(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=T(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;t.push(r.child(s))}}catch(c){a.e(c)}finally{a.f()}}}else t.push(r)})),new of(t)}var Pf=function(){function e(t,n,r,i,a,s,c){o(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=c}return c(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Rd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Df.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Df.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Rd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Rd.min(),Rd.min(),Rd.min(),Df.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Rd.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Rd.min(),Rd.min(),Df.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Rd.min(),Rd.min(),Df.empty(),2)}}]),e}(),Lf=c((function e(t,n){o(this,e),this.position=t,this.inclusive=n}));function Mf(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Nd.comparator(Nd.fromName(a.referenceValue),n.key):bf(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Uf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ef(e.position[n],t.position[n]))return!1;return!0}var jf=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";o(this,e),this.field=t,this.dir=n}));function Vf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ff=c((function e(){o(this,e)})),Bf=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bf(t,this.value)):null!==t&&gf(this.value)===gf(t)&&this.matchesComparison(bf(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sd()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Zf(e,t,r):"array-contains"===t?new $f(e,r):"in"===t?new ep(e,r):"not-in"===t?new tp(e,r):"array-contains-any"===t?new np(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Xf(e,n):new Jf(e,n)}}]),n}(Ff),Wf=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return c(n,[{key:"matches",value:function(e){return Gf(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ff);function Gf(e){return"and"===e.op}function Hf(e){return Kf(e)&&Gf(e)}function Kf(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wf)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function zf(e){if(e instanceof Bf)return e.field.canonicalString()+e.op.toString()+wf(e.value);if(Hf(e))return e.filters.map((function(e){return zf(e)})).join(",");var t=e.filters.map((function(e){return zf(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Yf(e,t){return e instanceof Bf?function(e,t){return t instanceof Bf&&e.op===t.op&&e.field.isEqual(t.field)&&Ef(e.value,t.value)}(e,t):e instanceof Wf?function(e,t){return t instanceof Wf&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Yf(n,t.filters[r])}),!0)}(e,t):void sd()}function qf(e){return e instanceof Bf?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wf(e.value))}(e):e instanceof Wf?function(e){return e.op.toString()+" {"+e.getFilters().map(qf).join(" ,")+"}"}(e):"Filter"}var Zf=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,e,r,i)).key=Nd.fromName(i.referenceValue),a}return c(n,[{key:"matches",value:function(e){var t=Nd.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Bf),Xf=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,"in",r)).keys=Qf("in",r),i}return c(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bf),Jf=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,"not-in",r)).keys=Qf("not-in",r),i}return c(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bf);function Qf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Nd.fromName(e.referenceValue)}))}var $f=function(e){l(n,e);var t=v(n);function n(e,r){return o(this,n),t.call(this,e,"array-contains",r)}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Rf(t)&&_f(t.arrayValue,this.value)}}]),n}(Bf),ep=function(e){l(n,e);var t=v(n);function n(e,r){return o(this,n),t.call(this,e,"in",r)}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&_f(this.value.arrayValue,t)}}]),n}(Bf),tp=function(e){l(n,e);var t=v(n);function n(e,r){return o(this,n),t.call(this,e,"not-in",r)}return c(n,[{key:"matches",value:function(e){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!_f(this.value.arrayValue,t)}}]),n}(Bf),np=function(e){l(n,e);var t=v(n);function n(e,r){return o(this,n),t.call(this,e,"array-contains-any",r)}return c(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Rf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return _f(t.value.arrayValue,e)}))}}]),n}(Bf),rp=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;o(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=c,this.ft=null}));function ip(e){return new rp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function op(e){var t=ud(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return zf(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Hd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return wf(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return wf(e)})).join(",")),t.ft=n}return t.ft}function ap(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Vf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Yf(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uf(e.startAt,t.startAt)&&Uf(e.endAt,t.endAt)}function sp(e){return Nd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var cp=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;o(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=c,this.endAt=u,this.dt=null,this.wt=null,this.startAt,this.endAt}));function up(e,t,n,r,i,o,a,s){return new cp(e,t,n,r,i,o,a,s)}function lp(e){return new cp(e)}function dp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function pp(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function hp(e){return null!==e.collectionGroup}function vp(e){var t=ud(e);if(null===t.dt){t.dt=[];var n=pp(t),r=fp(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new jf(n)),t.dt.push(new jf(Ad.keyField(),"asc"));else{var i,o=!1,a=T(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(o=!0)}}catch(u){a.e(u)}finally{a.f()}if(!o){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new jf(Ad.keyField(),c))}}}return t.dt}function mp(e){var t=ud(e);if(!t.wt)if("F"===t.limitType)t.wt=ip(t.path,t.collectionGroup,vp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(vp(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a="desc"===o.dir?"asc":"desc";r.push(new jf(o.field,a))}}catch(u){i.e(u)}finally{i.f()}var s=t.endAt?new Lf(t.endAt.position,t.endAt.inclusive):null,c=t.startAt?new Lf(t.startAt.position,t.startAt.inclusive):null;t.wt=ip(t.path,t.collectionGroup,r,t.filters,t.limit,s,c)}return t.wt}function yp(e,t,n){return new cp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gp(e,t){return ap(mp(e),mp(t))&&e.limitType===t.limitType}function Ep(e){return"".concat(op(mp(e)),"|lt:").concat(e.limitType)}function _p(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return qf(e)})).join(", "),"]")),Hd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return wf(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return wf(e)})).join(",")),"Target(".concat(t,")")}(mp(e)),"; limitType=").concat(e.limitType,")")}function bp(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(vp(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Mf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vp(e),t))&&!(e.endAt&&!function(e,t,n){var r=Mf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vp(e),t))}(e,t)}function Sp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wp(e){return function(t,n){var r,i=!1,o=T(vp(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=kp(a,t,n);if(0!==s)return s;i=i||a.field.isKeyField()}}catch(c){o.e(c)}finally{o.f()}return 0}}function kp(e,t,n){var r=e.field.isKeyField()?Nd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bf(r,i):sd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sd()}}var Tp=function(){function e(t,n){o(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return c(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=(0,m.Z)(r.value,2),a=o[0],s=o[1];if(this.equalsFn(a,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Jd(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=(0,m.Z)(r.value,2),a=o[0],s=o[1];e(a,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Qd(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Rp=new $d(Nd.comparator);function Cp(){return Rp}var Ip=new $d(Nd.comparator);function Op(){for(var e=Ip,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.insert(a.key,a)}return e}function Ap(e){var t=Ip;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Np(){return xp()}function Dp(){return xp()}function xp(){return new Tp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Pp=new $d(Nd.comparator),Lp=new nf(Nd.comparator);function Mp(){for(var e=Lp,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var Up=new nf(wd);function jp(){return Up}function Vp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(t)?"-0":t}}function Fp(e){return{integerValue:""+e}}function Bp(e,t){return zd(t)?Fp(t):Vp(e,t)}var Wp=c((function e(){o(this,e),this._=void 0}));function Gp(e,t,n){return e instanceof zp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Yp?qp(e,t):e instanceof Zp?Xp(e,t):function(e,t){var n=Kp(e,t),r=Qp(n)+Qp(e._t);return Tf(n)&&Tf(e._t)?Fp(r):Vp(e.serializer,r)}(e,t)}function Hp(e,t,n){return e instanceof Yp?qp(e,t):e instanceof Zp?Xp(e,t):n}function Kp(e,t){return e instanceof Jp?Tf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var zp=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n)}(Wp),Yp=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this)).elements=e,r}return c(n)}(Wp);function qp(e,t){var n,r=$p(t),i=T(e.elements);try{var o=function(){var e=n.value;r.some((function(t){return Ef(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Zp=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this)).elements=e,r}return c(n)}(Wp);function Xp(e,t){var n,r=$p(t),i=T(e.elements);try{var o=function(){var e=n.value;r=r.filter((function(t){return!Ef(t,e)}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Jp=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return c(n)}(Wp);function Qp(e){return lf(e.integerValue||e.doubleValue)}function $p(e){return Rf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var eh=c((function e(t,n){o(this,e),this.version=t,this.transformResults=n})),th=function(){function e(t,n){o(this,e),this.updateTime=t,this.exists=n}return c(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rh=c((function e(){o(this,e)}));function ih(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new mh(e.key,th.none()):new uh(e.key,e.data,th.none());var n,r=e.data,i=Df.empty(),o=new nf(Ad.comparator),a=T(t.fields);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(!o.has(s)){var c=r.field(s);null===c&&s.length>1&&(s=s.popLast(),c=r.field(s)),null===c?i.delete(s):i.set(s,c),o=o.add(s)}}}catch(u){a.e(u)}finally{a.f()}return new lh(e.key,i,new of(o.toArray()),th.none())}function oh(e,t,n){e instanceof uh?function(e,t,n){var r=e.value.clone(),i=fh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lh?function(e,t,n){if(nh(e.precondition,t)){var r=fh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(dh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ah(e,t,n,r){return e instanceof uh?function(e,t,n,r){if(!nh(e.precondition,t))return n;var i=e.value.clone(),o=ph(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof lh?function(e,t,n,r){if(!nh(e.precondition,t))return n;var i=ph(e.fieldTransforms,r,t),o=t.data;return o.setAll(dh(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return nh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function sh(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),s=Kp(o.transform,a||null);null!=s&&(null===r&&(r=Df.empty()),r.set(o.field,s))}}catch(c){i.e(c)}finally{i.f()}return r||null}function ch(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Yp&&t instanceof Yp||e instanceof Zp&&t instanceof Zp?kd(e.elements,t.elements,Ef):e instanceof Jp&&t instanceof Jp?Ef(e._t,t._t):e instanceof zp&&t instanceof zp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var uh=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return o(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=s,a.type=0,a}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rh),lh=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return o(this,n),(s=t.call(this)).key=e,s.data=r,s.fieldMask=i,s.precondition=a,s.fieldTransforms=c,s.type=1,s}return c(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(rh);function dh(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fh(e,t,n){var r=new Map;cd(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Hp(a,s,n[i]))}return r}function ph(e,t,n){var r,i=new Map,o=T(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.transform,c=n.data.field(a.field);i.set(a.field,Gp(s,c,t))}}catch(u){o.e(u)}finally{o.f()}return i}var hh,vh,mh=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rh),yh=function(e){l(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rh),gh=function(){function e(t,n,r,i){o(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return c(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&oh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ah(i,e,t,this.localWriteTime))}}catch(c){r.e(c)}finally{r.f()}var o,a=T(this.mutations);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.key.isEqual(e.key)&&(t=ah(s,e,t,this.localWriteTime))}}catch(c){a.e(c)}finally{a.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Dp();return this.mutations.forEach((function(i){var o=e.get(i.key),a=o.overlayedDocument,s=n.applyToLocalView(a,o.mutatedFields),c=ih(a,s=t.has(i.key)?null:s);null!==c&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Rd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Mp())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(function(e,t){return ch(e,t)}))&&kd(this.baseMutations,e.baseMutations,(function(e,t){return ch(e,t)}))}}]),e}(),Eh=function(){function e(t,n,r,i){o(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return c(e,null,[{key:"from",value:function(t,n,r){cd(t.mutations.length===r.length);for(var i=Pp,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),_h=function(){function e(t,n){o(this,e),this.largestBatchId=t,this.mutation=n}return c(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),bh=c((function e(t){o(this,e),this.count=t}));function Sh(e){switch(e){default:return sd();case ld.CANCELLED:case ld.UNKNOWN:case ld.DEADLINE_EXCEEDED:case ld.RESOURCE_EXHAUSTED:case ld.INTERNAL:case ld.UNAVAILABLE:case ld.UNAUTHENTICATED:return!1;case ld.INVALID_ARGUMENT:case ld.NOT_FOUND:case ld.ALREADY_EXISTS:case ld.PERMISSION_DENIED:case ld.FAILED_PRECONDITION:case ld.ABORTED:case ld.OUT_OF_RANGE:case ld.UNIMPLEMENTED:case ld.DATA_LOSS:return!0}}function wh(e){if(void 0===e)return id("GRPC error has no .code"),ld.UNKNOWN;switch(e){case hh.OK:return ld.OK;case hh.CANCELLED:return ld.CANCELLED;case hh.UNKNOWN:return ld.UNKNOWN;case hh.DEADLINE_EXCEEDED:return ld.DEADLINE_EXCEEDED;case hh.RESOURCE_EXHAUSTED:return ld.RESOURCE_EXHAUSTED;case hh.INTERNAL:return ld.INTERNAL;case hh.UNAVAILABLE:return ld.UNAVAILABLE;case hh.UNAUTHENTICATED:return ld.UNAUTHENTICATED;case hh.INVALID_ARGUMENT:return ld.INVALID_ARGUMENT;case hh.NOT_FOUND:return ld.NOT_FOUND;case hh.ALREADY_EXISTS:return ld.ALREADY_EXISTS;case hh.PERMISSION_DENIED:return ld.PERMISSION_DENIED;case hh.FAILED_PRECONDITION:return ld.FAILED_PRECONDITION;case hh.ABORTED:return ld.ABORTED;case hh.OUT_OF_RANGE:return ld.OUT_OF_RANGE;case hh.UNIMPLEMENTED:return ld.UNIMPLEMENTED;case hh.DATA_LOSS:return ld.DATA_LOSS;default:return sd()}}(vh=hh||(hh={}))[vh.OK=0]="OK",vh[vh.CANCELLED=1]="CANCELLED",vh[vh.UNKNOWN=2]="UNKNOWN",vh[vh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vh[vh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vh[vh.NOT_FOUND=5]="NOT_FOUND",vh[vh.ALREADY_EXISTS=6]="ALREADY_EXISTS",vh[vh.PERMISSION_DENIED=7]="PERMISSION_DENIED",vh[vh.UNAUTHENTICATED=16]="UNAUTHENTICATED",vh[vh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vh[vh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vh[vh.ABORTED=10]="ABORTED",vh[vh.OUT_OF_RANGE=11]="OUT_OF_RANGE",vh[vh.UNIMPLEMENTED=12]="UNIMPLEMENTED",vh[vh.INTERNAL=13]="INTERNAL",vh[vh.UNAVAILABLE=14]="UNAVAILABLE",vh[vh.DATA_LOSS=15]="DATA_LOSS";var kh=function(){function e(){o(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return c(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Th}},{key:"getOrCreateInstance",value:function(){return null===Th&&(Th=new e),Th}}]),e}(),Th=null,Rh=function(){function e(t,n,r,i,a){o(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return c(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ch.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Rd.min(),i,jp(),Cp(),Mp())}}]),e}(),Ch=function(){function e(t,n,r,i,a){o(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return c(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Mp(),Mp(),Mp())}}]),e}(),Ih=c((function e(t,n,r,i){o(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Oh=c((function e(t,n){o(this,e),this.targetId=t,this.Et=n})),Ah=c((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sf.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Nh=function(){function e(){o(this,e),this.At=0,this.Rt=Ph(),this.vt=sf.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return c(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Mp(),t=Mp(),n=Mp();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sd()}})),new Ch(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Ph()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Dh=function(){function e(t){o(this,e),this.Ft=t,this.Bt=new Map,this.Lt=Cp(),this.qt=xh(),this.Ut=new nf(wd)}return c(e,[{key:"Kt",value:function(e){var t,n=T(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,o=T(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.Qt(a,e.key,e.Tt)}}catch(s){o.e(s)}finally{o.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:sd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var o=i.target;if(sp(o))if(0===r){var a=new Nd(o.path);this.Qt(n,a,Pf.newNoDocument(a,Rd.min()))}else cd(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=kh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var o=t.Yt(i);if(o){if(r.current&&sp(o.target)){var a=new Nd(o.target.path);null!==t.Lt.get(a)||t.te(i,a)||t.Qt(i,a,Pf.newNoDocument(a,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Mp();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Rh(e,n,this.Ut,this.Lt,r);return this.Lt=Cp(),this.qt=xh(),this.Ut=new nf(wd),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Nh,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new nf(wd),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||rd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Nh),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function xh(){return new $d(Nd.comparator)}function Ph(){return new $d(Nd.comparator)}var Lh={asc:"ASCENDING",desc:"DESCENDING"},Mh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uh={and:"AND",or:"OR"},jh=c((function e(t,n){o(this,e),this.databaseId=t,this.useProto3Json=n}));function Vh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Bh(e,t){return Vh(e,t.toTimestamp())}function Wh(e){return cd(!!e),Rd.fromTimestamp(function(e){var t=uf(e);return new Td(t.seconds,t.nanos)}(e))}function Gh(e,t){return function(e){return new Id(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hh(e){var t=Id.fromString(e);return cd(lv(t)),t}function Kh(e,t){return Gh(e.databaseId,t.path)}function zh(e,t){var n=Hh(t);if(n.get(1)!==e.databaseId.projectId)throw new dd(ld.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dd(ld.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nd(Xh(n))}function Yh(e,t){return Gh(e.databaseId,t)}function qh(e){var t=Hh(e);return 4===t.length?Id.emptyPath():Xh(t)}function Zh(e){return new Id(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xh(e){return cd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jh(e,t,n){return{name:Kh(e,t),fields:n.value.mapValue.fields}}function Qh(e,t){var n;if(t instanceof uh)n={update:Jh(e,t.key,t.value)};else if(t instanceof mh)n={delete:Kh(e,t.key)};else if(t instanceof lh)n={update:Jh(e,t.key,t.data),updateMask:uv(t.fieldMask)};else{if(!(t instanceof yh))return sd();n={verify:Kh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof zp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Yp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jp)return{fieldPath:t.field.canonicalString(),increment:n._t};throw sd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sd()}(e,t.precondition)),n}function $h(e,t){return{documents:[Yh(e,t.path)]}}function ev(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Yh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Yh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return cv(Wf.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:av(e.field),direction:rv(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s=function(e,t){return e.useProto3Json||Hd(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function tv(e){var t=qh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){cd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=function(e){var t=nv(e);return t instanceof Wf&&Hf(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new jf(sv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var c=null;n.limit&&(c=function(e){var t;return Hd(t="object"==typeof e?e.value:e)?null:t}(n.limit));var u=null;n.startAt&&(u=function(e){var t=!!e.before,n=e.values||[];return new Lf(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Lf(n,t)}(n.endAt)),up(t,i,s,a,c,"F",u,l)}function nv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=sv(e.unaryFilter.field);return Bf.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=sv(e.unaryFilter.field);return Bf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=sv(e.unaryFilter.field);return Bf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=sv(e.unaryFilter.field);return Bf.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sd()}}(e):void 0!==e.fieldFilter?function(e){return Bf.create(sv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wf.create(e.compositeFilter.filters.map((function(e){return nv(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sd()}}(e.compositeFilter.op))}(e):sd()}function rv(e){return Lh[e]}function iv(e){return Mh[e]}function ov(e){return Uh[e]}function av(e){return{fieldPath:e.canonicalString()}}function sv(e){return Ad.fromServerFormat(e.fieldPath)}function cv(e){return e instanceof Bf?function(e){if("=="===e.op){if(If(e.value))return{unaryFilter:{field:av(e.field),op:"IS_NAN"}};if(Cf(e.value))return{unaryFilter:{field:av(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(If(e.value))return{unaryFilter:{field:av(e.field),op:"IS_NOT_NAN"}};if(Cf(e.value))return{unaryFilter:{field:av(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:av(e.field),op:iv(e.op),value:e.value}}}(e):e instanceof Wf?function(e){var t=e.getFilters().map((function(e){return cv(e)}));return 1===t.length?t[0]:{compositeFilter:{op:ov(e.op),filters:t}}}(e):sd()}function uv(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function lv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var dv=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rd.min(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:sf.EMPTY_BYTE_STRING;o(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c}return c(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),fv=c((function e(t){o(this,e),this.se=t}));function pv(e){var t=tv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?yp(t,t.limit,"L"):t}var hv=function(){function e(){o(this,e)}return c(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(lf(e.integerValue));else if("doubleValue"in e){var n=lf(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Kd(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(df(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Nf(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):sd()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];this.fe(o,t),this.ue(n[o],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.ue(o,t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Nd.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();hv.pe=new hv;var vv=function(){function e(){o(this,e),this.He=new mv}return c(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Bd.resolve()}},{key:"getCollectionParents",value:function(e,t){return Bd.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Bd.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Bd.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Bd.resolve(null)}},{key:"getIndexType",value:function(e,t){return Bd.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Bd.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Bd.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Bd.resolve(Ld.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Bd.resolve(Ld.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Bd.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Bd.resolve()}}]),e}(),mv=function(){function e(){o(this,e),this.index={}}return c(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nf(Id.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new nf(Id.comparator)).toArray()}}]),e}();new Uint8Array(0);var yv=function(){function e(t,n,r){o(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return c(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();yv.DEFAULT_COLLECTION_PERCENTILE=10,yv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yv.DEFAULT=new yv(41943040,yv.DEFAULT_COLLECTION_PERCENTILE,yv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yv.DISABLED=new yv(-1,0,0);var gv=function(){function e(t){o(this,e),this.Rn=t}return c(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}();var Ev=function(){function e(){o(this,e),this.changes=new Tp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return c(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Pf.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Bd.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var _v=c((function e(t,n){o(this,e),this.overlayedDocument=t,this.mutatedFields=n})),bv=function(){function e(t,n,r,i){o(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return c(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ah(r.mutation,e,of.empty(),Td.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Mp()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mp(),i=Np();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Op();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Np();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Mp())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Cp(),o=xp(),a=xp();return t.forEach((function(e,t){var a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof lh)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),ah(a.mutation,t,a.mutation.getFieldMask(),Td.now())):o.set(t.key,of.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return o.set(e,t)})),t.forEach((function(e,t){var n;return a.set(e,new _v(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=xp(),i=new $d((function(e,t){return e-t})),o=Mp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,o=T(e);try{var a=function(){var e=n.value;e.keys().forEach((function(n){var o=t.get(n);if(null!==o){var a=r.get(n)||of.empty();a=e.applyToLocalView(o,a),r.set(n,a);var s=(i.get(e.batchId)||Mp()).add(n);i=i.insert(e.batchId,s)}}))};for(o.s();!(n=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}})).next((function(){for(var a=[],s=i.getReverseIterator(),c=function(){var i=s.getNext(),c=i.key,u=i.value,l=Dp();u.forEach((function(e){if(!o.has(e)){var n=ih(t.get(e),r.get(e));null!==n&&l.set(e,n),o=o.add(e)}})),a.push(n.documentOverlayCache.saveOverlays(e,c,l))};s.hasNext();)c();return Bd.waitFor(a)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Nd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(o){var a=r-o.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):Bd.resolve(Np()),s=-1,c=o;return a.next((function(t){return Bd.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),o.get(t)?Bd.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){c=c.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,o)})).next((function(){return i.computeViews(e,c,t,Mp())})).next((function(e){return{batchId:s,changes:Ap(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Nd(t)).next((function(e){var t=Op();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,o=Op();return this.indexManager.getCollectionParents(e,i).next((function(a){return Bd.forEach(a,(function(a){var s=function(e,t){return new cp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return r=o,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Pf.newInvalidDocument(r)))}));var n=Op();return e.forEach((function(e,i){var o=r.get(e);void 0!==o&&ah(o.mutation,i,of.empty(),Td.now()),bp(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Sv=function(){function e(t){o(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return c(e,[{key:"getBundleMetadata",value:function(e,t){return Bd.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Wh(n.createTime)}),Bd.resolve()}},{key:"getNamedQuery",value:function(e,t){return Bd.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:pv(e.bundledQuery),readTime:Wh(e.readTime)}}(t)),Bd.resolve()}}]),e}(),wv=function(){function e(){o(this,e),this.overlays=new $d(Nd.comparator),this.ts=new Map}return c(e,[{key:"getOverlay",value:function(e,t){return Bd.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Np();return Bd.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Bd.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Bd.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Np(),i=t.length+1,o=new Nd(t.child("")),a=this.overlays.getIteratorFrom(o);a.hasNext();){var s=a.getNext().value,c=s.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Bd.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new $d((function(e,t){return e-t})),o=this.overlays.getIterator();o.hasNext();){var a=o.getNext().value;if(a.getKey().getCollectionGroup()===t&&a.largestBatchId>n){var s=i.get(a.largestBatchId);null===s&&(s=Np(),i=i.insert(a.largestBatchId,s)),s.set(a.getKey(),a)}}for(var c=Np(),u=i.getIterator();u.hasNext()&&(u.getNext().value.forEach((function(e,t){return c.set(e,t)})),!(c.size()>=r)););return Bd.resolve(c)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new _h(t,n));var o=this.ts.get(t);void 0===o&&(o=Mp(),this.ts.set(t,o)),this.ts.set(t,o.add(n.key))}}]),e}(),kv=function(){function e(){o(this,e),this.es=new nf(Tv.ns),this.ss=new nf(Tv.rs)}return c(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Tv(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Tv(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Nd(new Id([])),r=new Tv(n,e),i=new Tv(n,e+1),o=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),o.push(e.key)})),o}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Nd(new Id([])),n=new Tv(t,e),r=new Tv(t,e+1),i=Mp();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Tv(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Tv=function(){function e(t,n){o(this,e),this.key=t,this.ds=n}return c(e,null,[{key:"ns",value:function(e,t){return Nd.comparator(e.key,t.key)||wd(e.ds,t.ds)}},{key:"rs",value:function(e,t){return wd(e.ds,t.ds)||Nd.comparator(e.key,t.key)}}]),e}(),Rv=function(){function e(t,n){o(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new nf(Tv.ns)}return c(e,[{key:"checkEmpty",value:function(e){return Bd.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var o=new gh(i,t,n,r);this.mutationQueue.push(o);var a,s=T(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;this._s=this._s.add(new Tv(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(u){s.e(u)}finally{s.f()}return Bd.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return Bd.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Bd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Bd.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Bd.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Tv(t,0),i=new Tv(t,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);o.push(t)})),Bd.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nf(wd);return t.forEach((function(e){var t=new Tv(e,0),i=new Tv(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Bd.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Nd.isDocumentKey(i)||(i=i.child(""));var o=new Tv(new Nd(i),0),a=new nf(wd);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ds)),!0)}),o),Bd.resolve(this.ps(a))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;cd(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Bd.forEach(t.mutations,(function(i){var o=new Tv(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Tv(t,0),r=this._s.firstAfterOrEqual(n);return Bd.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Bd.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Cv=function(){function e(t){o(this,e),this.Ts=t,this.docs=new $d(Nd.comparator),this.size=0}return c(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Bd.resolve(n?n.document.mutableCopy():Pf.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Cp();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Pf.newInvalidDocument(e))})),Bd.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Cp(),o=t.path,a=new Nd(o.child("")),s=this.docs.getIteratorFrom(a);s.hasNext();){var c=s.getNext(),u=c.key,l=c.value.document;if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Md(Pd(l),n)<=0||(r.has(l.key)||bp(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Bd.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){sd()}},{key:"Es",value:function(e,t){return Bd.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Iv(this)}},{key:"getSize",value:function(e){return Bd.resolve(this.size)}}]),e}(),Iv=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this)).Jn=e,r}return c(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Bd.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(Ev),Ov=function(){function e(t){o(this,e),this.persistence=t,this.As=new Tp((function(e){return op(e)}),ap),this.lastRemoteSnapshotVersion=Rd.min(),this.highestTargetId=0,this.Rs=0,this.vs=new kv,this.targetCount=0,this.bs=gv.vn()}return c(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Bd.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Bd.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Bd.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Bd.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Bd.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new gv(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Bd.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Bd.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Bd.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.As.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Bd.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Bd.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Bd.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Bd.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Bd.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Bd.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Bd.resolve(n)}},{key:"containsKey",value:function(e,t){return Bd.resolve(this.vs.containsKey(t))}}]),e}(),Av=function(){function e(t,n){var r=this;o(this,e),this.Ps={},this.overlays={},this.Vs=new Gd(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Ov(this),this.indexManager=new vv,this.remoteDocumentCache=new Cv((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new fv(n),this.xs=new Sv(this.serializer)}return c(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Rv(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;rd("MemoryPersistence","Starting transaction:",e);var i=new Nv(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Bd.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Nv=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return c(n)}(jd),Dv=function(){function e(t){o(this,e),this.persistence=t,this.$s=new kv,this.Ms=null}return c(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw sd()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Bd.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Bd.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Bd.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bd.forEach(this.Bs,(function(r){var i=Nd.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,Rd.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Bd.or([function(){return Bd.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}();var xv=function(){function e(t,n,r,i){o(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return c(e,null,[{key:"Di",value:function(t,n){var r,i=Mp(),o=Mp(),a=T(n.docChanges);try{for(a.s();!(r=a.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}}}catch(c){a.e(c)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),Pv=function(){function e(){o(this,e),this.Ci=!1}return c(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(o){return o||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(dp(t))return Bd.resolve(null);var r=mp(t);return this.indexManager.getIndexType(e,r).next((function(o){return 0===o?null:(null!==t.limit&&1===o&&(t=yp(t,null,"F"),r=mp(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(o){var a=Mp.apply(void 0,(0,i.Z)(o));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,yp(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return dp(t)||r.isEqual(Rd.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(o){var a=i.$i(t,o);return i.Mi(t,a,n,r)?i.Oi(e,t):(nd()<=Ot.DEBUG&&rd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_p(t)),i.Fi(e,a,t,xd(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new nf(wp(e));return t.forEach((function(t,r){bp(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return nd()<=Ot.DEBUG&&rd("QueryEngine","Using full collection scan to execute query:",_p(t)),this.xi.getDocumentsMatchingQuery(e,t,Ld.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Lv=function(){function e(t,n,r,i){o(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new $d(wd),this.qi=new Tp((function(e){return op(e)}),ap),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return c(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bv(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Mv(e,t,n,r){return new Lv(e,t,n,r)}function Uv(e,t){return jv.apply(this,arguments)}function jv(){return jv=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,o=[],a=[],s=Mp(),c=T(t);try{for(c.s();!(i=c.n()).done;){var u=i.value;o.push(u.batchId);var l,d=T(u.mutations);try{for(d.s();!(l=d.n()).done;){var f=l.value;s=s.add(f.key)}}catch(E){d.e(E)}finally{d.f()}}}catch(E){c.e(E)}finally{c.f()}var p,h=T(n);try{for(h.s();!(p=h.n()).done;){var v=p.value;a.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(E){y.e(E)}finally{y.f()}}}catch(E){h.e(E)}finally{h.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Qi:e,removedBatchIds:o,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Vv(e,t){var n=ud(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=Bd.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);cd(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Mp(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Fv(e){var t=ud(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function Bv(e,t){var n=ud(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var a=[];t.targetChanges.forEach((function(o,s){var c=i.get(s);if(c){a.push(n.Ds.removeMatchingKeys(e,o.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,o.addedDocuments,s)})));var u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?u=u.withResumeToken(sf.EMPTY_BYTE_STRING,Rd.min()).withLastLimboFreeSnapshotVersion(Rd.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,u,o)&&a.push(n.Ds.updateTargetData(e,u))}}));var s=Cp(),c=Mp();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Wv(e,o,t.documentUpdates).next((function(e){s=e.zi,c=e.ji}))),!r.isEqual(Rd.min())){var u=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return Bd.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,c)})).next((function(){return s}))})).then((function(e){return n.Li=i,e}))}function Wv(e,t,n){var r=Mp(),i=Mp();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Cp();return n.forEach((function(n,o){var a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Rd.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):rd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{zi:r,ji:i}}))}function Gv(e,t){var n=ud(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Hv(e,t){var n=ud(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Bd.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new dv(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Kv(e,t,n){return zv.apply(this,arguments)}function zv(){return zv=Ge(Be().mark((function e(t,n,r){var i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ud(t),o=i.Li.get(n),a=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Wd(e.t1)){e.next=12;break}throw e.t1;case 12:rd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),zv.apply(this,arguments)}function Yv(e,t,n){var r=ud(e),i=Rd.min(),o=Mp();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ud(e),i=r.qi.get(n);return void 0!==i?Bd.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,mp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:Rd.min(),n?o:Mp())})).next((function(e){return qv(r,Sp(t),e),{documents:e,Wi:o}}))}))}function qv(e,t,n){var r=e.Ui.get(t)||Rd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}var Zv=function(){function e(){o(this,e),this.activeTargetIds=jp()}return c(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Xv=function(){function e(){o(this,e),this.Br=new Zv,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return c(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Zv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Jv=function(){function e(){o(this,e)}return c(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Qv=function(){function e(){var t=this;o(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return c(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){rd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){rd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$v=null;function em(){return null===$v?$v=268435456+Math.round(2147483648*Math.random()):$v++,"0x"+$v.toString(16)}var tm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nm=function(){function e(t){o(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return c(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),rm="WebChannelConnection",im=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return c(n,[{key:"lo",value:function(e,t,n,r){var i=em();return new Promise((function(o,a){var s=new Jl;s.setWithCredentials(!0),s.listenOnce(zl.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Kl.NO_ERROR:var t=s.getResponseJson();rd(rm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Kl.TIMEOUT:rd(rm,"RPC '".concat(e,"' ").concat(i," timed out")),a(new dd(ld.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:var n=s.getStatus();if(rd(rm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var c=null==r?void 0:r.error;if(c&&c.status&&c.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ld).indexOf(t)>=0?t:ld.UNKNOWN}(c.status);a(new dd(u,c.message))}else a(new dd(ld.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new dd(ld.UNAVAILABLE,"Connection failed."));break;default:sd()}}finally{rd(rm,"RPC '".concat(e,"' ").concat(i," completed."))}}));var c=JSON.stringify(r);rd(rm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",c,n,15)}))}},{key:"wo",value:function(e,t,n){var r=em(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gl(),a=Hl(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Zl({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");rd(rm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var u=o.createWebChannel(c,s),l=!1,d=!1,f=new nm({Wr:function(t){d?rd(rm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(rd(rm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),l=!0),rd(rm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Hr:function(){return u.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(u,Xl.EventType.OPEN,(function(){d||rd(rm,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Xl.EventType.CLOSE,(function(){d||(d=!0,rd(rm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.so())})),p(u,Xl.EventType.ERROR,(function(t){d||(d=!0,od(rm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.so(new dd(ld.UNAVAILABLE,"The operation could not be completed")))})),p(u,Xl.EventType.MESSAGE,(function(t){var n;if(!d){var i=t.data[0];cd(!!i);var o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){rd(rm,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);var s=a.status,c=function(e){var t=hh[e];if(void 0!==t)return wh(t)}(s),l=a.message;void 0===c&&(c=ld.INTERNAL,l="Unknown error status: "+s+" with message "+a.message),d=!0,f.so(new dd(c,l)),u.close()}else rd(rm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.io(i)}})),p(a,Yl.STAT_EVENT,(function(t){t.stat===ql.PROXY?rd(rm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ql.NOPROXY&&rd(rm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){f.no()}),0),f}}]),n}(function(){function e(t){o(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return c(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var o=em(),a=this.ao(e,t);rd("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);var s={};return this.ho(s,r,i),this.lo(e,a,s,n).then((function(t){return rd("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t}),(function(t){throw od("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,o){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ed,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=tm[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function om(){return"undefined"!=typeof document?document:null}function am(e){return new jh(e,!0)}var sm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;o(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return c(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&rd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),cm=function(){function e(t,n,r,i,a,s,c,u){o(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new sm(t,n)}return c(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===ld.RESOURCE_EXHAUSTED?(id(n.toString()),id("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===ld.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,m.Z)(t,2),i=r[0],o=r[1];e.Vo===n&&e.Ko(i,o)}),(function(n){t((function(){var t=new dd(ld.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(Ge(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return rd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(rd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),um=function(e){l(n,e);var t=v(n);function n(e,r,i,a,s,c){var u;return o(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,c)).serializer=s,u}return c(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(cd(void 0===t||"string"==typeof t),sf.fromBase64String(t||"")):(cd(void 0===t||t instanceof Uint8Array),sf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?ld.UNKNOWN:wh(e.code);return new dd(t,e.message||"")}(a);n=new Ah(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var c=t.documentChange;c.document,c.document.name,c.document.updateTime;var u=zh(e,c.document.name),l=Wh(c.document.updateTime),d=c.document.createTime?Wh(c.document.createTime):Rd.min(),f=new Df({mapValue:{fields:c.document.fields}}),p=Pf.newFoundDocument(u,l,d,f),h=c.targetIds||[],v=c.removedTargetIds||[];n=new Ih(h,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=zh(e,m.document),g=m.readTime?Wh(m.readTime):Rd.min(),E=Pf.newNoDocument(y,g),_=m.removedTargetIds||[];n=new Ih([],_,E.key,E)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var S=zh(e,b.document),w=b.removedTargetIds||[];n=new Ih([],w,S,null)}else{if(!("filter"in t))return sd();t.filter;var k=t.filter;k.targetId;var T=k.count||0,R=new bh(T),C=k.targetId;n=new Oh(C,R)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Rd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Rd.min():t.readTime?Wh(t.readTime):Rd.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Zh(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=sp(r)?{documents:$h(e,r)}:{query:ev(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Fh(e,t.resumeToken):t.snapshotVersion.compareTo(Rd.min())>0&&(n.readTime=Vh(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return sd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Zh(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(cm),lm=function(e){l(n,e);var t=v(n);function n(e,r,i,a,s,c){var u;return o(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,c)).serializer=s,u.Ho=!1,u}return c(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,$e(d(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(cd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(cd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Wh(e.updateTime):Wh(t);return n.isEqual(Rd.min())&&(n=Wh(t)),new eh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Wh(e.commitTime);return this.listener.Zo(n,t)}return cd(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Zh(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qh(t.serializer,e)}))};this.Fo(n)}}]),n}(cm),dm=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var s;return o(this,n),(s=t.call(this)).authCredentials=e,s.appCheckCredentials=r,s.connection=i,s.serializer=a,s.eu=!1,s}return c(n,[{key:"nu",value:function(){if(this.eu)throw new dd(ld.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,m.Z)(i,2),a=o[0],s=o[1];return r.connection.co(e,t,n,a,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dd(ld.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var a=(0,m.Z)(o,2),s=a[0],c=a[1];return i.connection.fo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new dd(ld.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return c((function e(){o(this,e)}))}());var fm=function(){function e(t,n){o(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return c(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(id(t),this.ru=!1):rd("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),pm=c((function e(t,n,r,i,a){var s=this;o(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=km(s),!e.t0){e.next=5;break}return rd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ud(t)).du.add(4),e.next=4,mm(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,hm(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new fm(r,i)}));function hm(e){return vm.apply(this,arguments)}function vm(){return vm=Ge(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!km(t)){e.next=18;break}n=T(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),vm.apply(this,arguments)}function mm(e){return ym.apply(this,arguments)}function ym(){return ym=Ge(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ym.apply(this,arguments)}function gm(e,t){var n=ud(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),wm(n)?Sm(n):$m(n).No()&&_m(n,t))}function Em(e,t){var n=ud(e),r=$m(n);n.fu.delete(t),r.No()&&bm(n,t),0===n.fu.size&&(r.No()?r.$o():km(n)&&n.mu.set("Unknown"))}function _m(e,t){e.gu.Ot(t.targetId),$m(e).jo(t)}function bm(e,t){e.gu.Ot(t),$m(e).Wo(t)}function Sm(e){e.gu=new Dh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),$m(e).start(),e.mu.ou()}function wm(e){return km(e)&&!$m(e).xo()&&e.fu.size>0}function km(e){return 0===ud(e).du.size}function Tm(e){e.gu=void 0}function Rm(e){return Cm.apply(this,arguments)}function Cm(){return Cm=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){_m(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Im(e,t){return Om.apply(this,arguments)}function Om(){return Om=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tm(t),wm(t)?(t.mu.au(n),Sm(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Am(e,t,n){return Nm.apply(this,arguments)}function Nm(){return Nm=Ge(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof Ah&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ge(Be().mark((function e(t,n){var r,i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(a=o.value,e.t0=t.fu.has(a),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(a,r);case 10:t.fu.delete(a),t.gu.removeTarget(a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dm(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ih?t.gu.Kt(n):n instanceof Oh?t.gu.Jt(n):t.gu.zt(n),r.isEqual(Rd.min())){e.next=29;break}return e.prev=14,e.next=17,Fv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(sf.EMPTY_BYTE_STRING,n.snapshotVersion)),bm(e,t);var r=new dv(n.target,t,1,n.sequenceNumber);_m(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dm(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Nm.apply(this,arguments)}function Dm(e,t,n){return xm.apply(this,arguments)}function xm(){return xm=Ge(Be().mark((function e(t,n,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wd(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,mm(t);case 5:t.mu.set("Offline"),r||(r=function(){return Fv(t.localStore)}),t.asyncQueue.enqueueRetryable(Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,hm(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function Pm(e,t){return t().catch((function(n){return Dm(e,n,t)}))}function Lm(e){return Mm.apply(this,arguments)}function Mm(){return Mm=Ge(Be().mark((function e(t){var n,r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ud(t),r=ey(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!Um(n)){e.next=19;break}return e.prev=3,e.next=6,Gv(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=o.batchId,jm(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dm(n,e.t0);case 17:e.next=2;break;case 19:Vm(n)&&Fm(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Mm.apply(this,arguments)}function Um(e){return km(e)&&e.lu.length<10}function jm(e,t){e.lu.push(t);var n=ey(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Vm(e){return km(e)&&!ey(e).xo()&&e.lu.length>0}function Fm(e){ey(e).start()}function Bm(e){return Wm.apply(this,arguments)}function Wm(){return Wm=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ey(t).tu();case 1:case"end":return e.stop()}}),e)}))),Wm.apply(this,arguments)}function Gm(e){return Hm.apply(this,arguments)}function Hm(){return Hm=Ge(Be().mark((function e(t){var n,r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ey(t),r=T(t.lu);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Yo(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Km(e,t,n){return zm.apply(this,arguments)}function zm(){return zm=Ge(Be().mark((function e(t,n,r){var i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),o=Eh.from(i,n,r),e.next=3,Pm(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,Lm(t);case 5:case"end":return e.stop()}}),e)}))),zm.apply(this,arguments)}function Ym(e,t){return qm.apply(this,arguments)}function qm(){return qm=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ey(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sh(i=n.code)||i===ld.ABORTED){e.next=7;break}return r=t.lu.shift(),ey(t).Oo(),e.next=5,Pm(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Lm(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Vm(t)&&Fm(t);case 5:case"end":return e.stop()}}),e)}))),qm.apply(this,arguments)}function Zm(e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ud(t)).asyncQueue.verifyOperationInProgress(),rd("RemoteStore","RemoteStore received new credentials"),i=km(r),r.du.add(3),e.next=6,mm(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,hm(r);case 12:case"end":return e.stop()}}),e)}))),Xm.apply(this,arguments)}function Jm(e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=Ge(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ud(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,hm(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,mm(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function $m(e){return e.yu||(e.yu=function(e,t,n){var r=ud(e);return r.nu(),new um(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Rm.bind(null,e),Zr:Im.bind(null,e),zo:Am.bind(null,e)}),e.wu.push(function(){var t=Ge(Be().mark((function t(n){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),wm(e)?Sm(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:Tm(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function ey(e){return e.pu||(e.pu=function(e,t,n){var r=ud(e);return r.nu(),new lm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Bm.bind(null,e),Zr:Ym.bind(null,e),Xo:Gm.bind(null,e),Zo:Km.bind(null,e)}),e.wu.push(function(){var t=Ge(Be().mark((function t(n){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,Lm(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(rd("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var ty=function(){function e(t,n,r,i,a){o(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new fd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return c(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dd(ld.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function ny(e,t){if(id("AsyncQueue","".concat(t,": ").concat(e)),Wd(e))return new dd(ld.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ry=function(){function e(t){o(this,e),this.comparator=t?function(e,n){return t(e,n)||Nd.comparator(e.key,n.key)}:function(e,t){return Nd.comparator(e.key,t.key)},this.keyedMap=Op(),this.sortedSet=new $d(this.comparator)}return c(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),iy=function(){function e(){o(this,e),this.Iu=new $d(Nd.comparator)}return c(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):sd():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),oy=function(){function e(t,n,r,i,a,s,c,u,l){o(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}return c(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,o){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ry.emptySet(n),a,r,i,!0,!1,o)}}]),e}(),ay=c((function e(){o(this,e),this.Eu=void 0,this.listeners=[]})),sy=c((function e(){o(this,e),this.queries=new Tp((function(e){return Ep(e)}),gp),this.onlineState="Unknown",this.Au=new Set}));function cy(e,t){return uy.apply(this,arguments)}function uy(){return uy=Ge(Be().mark((function e(t,n){var r,i,o,a,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ud(t),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new ay),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:a.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ny(e.t0,"Initialization of query '".concat(_p(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,a),a.listeners.push(n),n.Ru(r.onlineState),a.Eu&&n.vu(a.Eu)&&hy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),uy.apply(this,arguments)}function ly(e,t){return dy.apply(this,arguments)}function dy(){return dy=Ge(Be().mark((function e(t,n){var r,i,o,a,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ud(t),i=n.query,o=!1,(a=r.queries.get(i))&&(s=a.listeners.indexOf(n))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function fy(e,t){var n,r=ud(e),i=!1,o=T(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.query,c=r.queries.get(s);if(c){var u,l=T(c.listeners);try{for(l.s();!(u=l.n()).done;){u.value.vu(a)&&(i=!0)}}catch(d){l.e(d)}finally{l.f()}c.Eu=a}}}catch(d){o.e(d)}finally{o.f()}i&&hy(r)}function py(e,t,n){var r=ud(e),i=r.queries.get(t);if(i){var o,a=T(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(s){a.e(s)}finally{a.f()}}r.queries.delete(t)}function hy(e){e.Au.forEach((function(e){e.next()}))}var vy=function(){function e(t,n,r){o(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return c(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new oy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var o=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),o=!0):this.Du(e,this.onlineState)&&(this.Cu(e),o=!0),this.Vu=e,o}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=oy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}();var my=c((function e(t){o(this,e),this.key=t})),yy=c((function e(t){o(this,e),this.key=t})),gy=function(){function e(t,n){o(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Mp(),this.mutatedKeys=Mp(),this.Ku=wp(t),this.Gu=new ry(this.Ku)}return c(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new iy,i=t?t.Gu:this.Gu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),d=bp(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!d&&(d.hasLocalMutations||n.mutatedKeys.has(d.key)&&d.hasCommittedMutations),h=!1;l&&d?l.data.isEqual(d.data)?f!==p&&(r.track({type:3,doc:d}),h=!0):n.Wu(l,d)||(r.track({type:2,doc:d}),h=!0,(c&&n.Ku(d,c)>0||u&&n.Ku(d,u)<0)&&(s=!0)):!l&&d?(r.track({type:0,doc:d}),h=!0):l&&!d&&(r.track({type:1,doc:l}),h=!0,(c||u)&&(s=!0)),h&&(d?(a=a.add(d),o=p?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){var l="F"===this.query.limitType?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Gu:a,ju:r,Mi:s,mutatedKeys:o}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var o=e.ju.Tu();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sd()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var a=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,c=s!==this.qu;return this.qu=s,0!==o.length||c?{snapshot:new oy(this.query,e.Gu,i,o,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:a}:{Yu:a}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new iy,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Mp(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new yy(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new my(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Mp();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return oy.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Ey=c((function e(t,n,r){o(this,e),this.query=t,this.targetId=n,this.view=r})),_y=c((function e(t){o(this,e),this.key=t,this.ec=!1})),by=function(){function e(t,n,r,i,a,s){o(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.nc={},this.sc=new Tp((function(e){return Ep(e)}),gp),this.ic=new Map,this.rc=new Set,this.oc=new $d(Nd.comparator),this.uc=new Map,this.cc=new kv,this.ac={},this.hc=new Map,this.lc=gv.bn(),this.onlineState="Unknown",this.fc=void 0}return c(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Sy(e,t){return wy.apply(this,arguments)}function wy(){return wy=Ge(Be().mark((function e(t,n){var r,i,o,a,s,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jy(t),!(a=r.sc.get(n))){e.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.tc(),e.next=15;break;case 6:return e.next=8,Hv(r.localStore,mp(n));case 8:return s=e.sent,r.isPrimaryClient&&gm(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,ky(r,n,i,"current"===c,s.resumeToken);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function ky(e,t,n,r,i){return Ty.apply(this,arguments)}function Ty(){return Ty=Ge(Be().mark((function e(t,n,r,i,o){var a,s,c,u,l,d;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=Ge(Be().mark((function e(t,n,r,i){var o,a,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.zu(r),e.t0=o.Mi,!e.t0){e.next=6;break}return e.next=5,Yv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,o)}));case 5:o=e.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,a),e.abrupt("return",(Gy(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Yv(t.localStore,n,!0);case 3:return a=e.sent,s=new gy(n,a.Wi),c=s.zu(a.documents),u=Ch.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),l=s.applyChanges(c,t.isPrimaryClient,u),Gy(t,r,l.Yu),d=new Ey(n,r,s),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ty.apply(this,arguments)}function Ry(e,t){return Cy.apply(this,arguments)}function Cy(){return Cy=Ge(Be().mark((function e(t,n){var r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ud(t),i=r.sc.get(n),!((o=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,o.filter((function(e){return!gp(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Kv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Em(r.remoteStore,i.targetId),By(r,i.targetId)})).catch(Vd);case 9:e.next=14;break;case 11:return By(r,i.targetId),e.next=14,Kv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Iy(e,t,n){return Oy.apply(this,arguments)}function Oy(){return Oy=Ge(Be().mark((function e(t,n,r){var i,o,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ud(e),o=Td.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Mp());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Cp(),c=Mp();return i.Ki.getEntries(e,a).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(c=c.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var a,s=[],c=T(t);try{for(c.s();!(a=c.n()).done;){var u=a.value,l=sh(u,n.get(u.key).overlayedDocument);null!=l&&s.push(new lh(u.key,l,xf(l.value.mapValue),th.exists(!0)))}}catch(d){c.e(d)}finally{c.f()}return i.mutationQueue.addMutationBatch(e,o,s,t)})).next((function(t){r=t;var o=t.applyToLocalDocumentSet(n,c);return i.documentOverlayCache.saveOverlays(e,t.batchId,o)}))})).then((function(){return{batchId:r.batchId,changes:Ap(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new $d(wd)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,zy(i,o.changes);case 9:return e.next=11,Lm(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a=ny(e.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Oy.apply(this,arguments)}function Ay(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),e.prev=1,e.next=4,Bv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(cd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?cd(n.ec):e.removedDocuments.size>0&&(cd(n.ec),n.ec=!1))})),e.next=8,zy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vd(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ny.apply(this,arguments)}function Dy(e,t,n){var r=ud(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ud(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,o=T(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}})),r&&hy(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function xy(e,t,n){return Py.apply(this,arguments)}function Py(){return Py=Ge(Be().mark((function e(t,n,r){var i,o,a,s,c,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ud(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.uc.get(n),!(a=o&&o.key)){e.next=14;break}return s=(s=new $d(Nd.comparator)).insert(a,Pf.newNoDocument(a,Rd.min())),c=Mp().add(a),u=new Rh(Rd.min(),new Map,new nf(wd),s,c),e.next=9,Ay(i,u);case 9:i.oc=i.oc.remove(a),i.uc.delete(n),Ky(i),e.next=16;break;case 14:return e.next=16,Kv(i.localStore,n,!1).then((function(){return By(i,n,r)})).catch(Vd);case 16:case"end":return e.stop()}}),e)}))),Py.apply(this,arguments)}function Ly(e,t){return My.apply(this,arguments)}function My(){return My=Ge(Be().mark((function e(t,n){var r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),i=n.batch.batchId,e.prev=1,e.next=4,Vv(r.localStore,n);case 4:return o=e.sent,Fy(r,i,null),Vy(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,zy(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),My.apply(this,arguments)}function Uy(e,t,n){return jy.apply(this,arguments)}function jy(){return jy=Ge(Be().mark((function e(t,n,r){var i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ud(t),e.prev=1,e.next=4,function(e,t){var n=ud(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return cd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,Fy(i,n,r),Vy(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,zy(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jy.apply(this,arguments)}function Vy(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Fy(e,t,n){var r=ud(e),i=r.ac[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function By(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.sc.delete(o),n&&e.nc.wc(o,n)}}catch(a){i.e(a)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||Wy(e,t)}))}function Wy(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Em(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Ky(e))}function Gy(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof my?(e.cc.addReference(o.key,t),Hy(e,o)):o instanceof yy?(rd("SyncEngine","Document no longer in limbo: "+o.key),e.cc.removeReference(o.key,t),e.cc.containsKey(o.key)||Wy(e,o.key)):sd()}}catch(a){i.e(a)}finally{i.f()}}function Hy(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(rd("SyncEngine","New document in limbo: "+n),e.rc.add(r),Ky(e))}function Ky(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Nd(Id.fromString(t)),r=e.lc.next();e.uc.set(r,new _y(n)),e.oc=e.oc.insert(n,r),gm(e.remoteStore,new dv(mp(lp(n.path)),r,2,Gd.ct))}}function zy(e,t,n){return Yy.apply(this,arguments)}function Yy(){return Yy=Ge(Be().mark((function e(t,n,r){var i,o,a,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ud(t),o=[],a=[],s=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){s.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=xv.Di(t.targetId,e);a.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.nc.zo(o),e.next=9,function(){var e=Ge(Be().mark((function e(t,n){var r,i,o,a,s,c,u,l;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Bd.forEach(n,(function(t){return Bd.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Bd.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Wd(e.t0)){e.next=10;break}throw e.t0;case 10:rd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.targetId,a.fromCache||(c=r.Li.get(s),u=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(u),r.Li=r.Li.insert(s,l))}catch(d){i.e(d)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,a);case 9:case"end":return e.stop()}}),e)}))),Yy.apply(this,arguments)}function qy(e,t){return Zy.apply(this,arguments)}function Zy(){return Zy=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ud(t)).currentUser.isEqual(n)){e.next=11;break}return rd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Uv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new dd(ld.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,zy(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}function Xy(e,t){var n=ud(e),r=n.uc.get(t);if(r&&r.ec)return Mp().add(r.key);var i=Mp(),o=n.ic.get(t);if(!o)return i;var a,s=T(o);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=n.sc.get(c);i=i.unionWith(u.view.Qu)}}catch(l){s.e(l)}finally{s.f()}return i}function Jy(e){var t=ud(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ay.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xy.bind(null,t),t.nc.zo=fy.bind(null,t.eventManager),t.nc.wc=py.bind(null,t.eventManager),t}function Qy(e){var t=ud(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ly.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Uy.bind(null,t),t}var $y=function(){function e(){o(this,e),this.synchronizeTabs=!1}return c(e,[{key:"initialize",value:function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=am(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Mv(this.persistence,new Pv,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Av(Dv.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Xv}},{key:"terminate",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),eg=function(){function e(){o(this,e)}return c(e,[{key:"initialize",value:function(){var e=Ge(Be().mark((function e(t,n){var r=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Dy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=qy.bind(null,this.syncEngine),e.next=12,Jm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new sy}},{key:"createDatastore",value:function(e){var t,n=am(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new im(t));return function(e,t,n,r){return new dm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Dy(a.syncEngine,e,0)},o=Qv.D()?new Qv:new Jv,new pm(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,o,a){var s=new by(e,t,n,r,i,o);return a&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ud(t),rd("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,mm(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var tg=function(){function e(t){o(this,e),this.observer=t,this.muted=!1}return c(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):id("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ng=function(){function e(t,n,r,i){var a=this;o(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$l.UNAUTHENTICATED,this.clientId=Sd.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return c(e,[{key:"getConfiguration",value:function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new dd(ld.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new fd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ge(Be().mark((function n(){var r;return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ny(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function rg(e,t){return ig.apply(this,arguments)}function ig(){return ig=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Uv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function og(e,t){return ag.apply(this,arguments)}function ag(){return ag=Ge(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,cg(t);case 3:return r=e.sent,rd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Zm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Zm(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}function sg(e){return"FirebaseError"===e.name?e.code===ld.FAILED_PRECONDITION||e.code===ld.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function cg(e){return ug.apply(this,arguments)}function ug(){return ug=Ge(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return rd("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,rg(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),sg(n=e.t0)){e.next=13;break}throw n;case 13:return od("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,rg(t,new $y);case 16:e.next=21;break;case 18:return rd("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,rg(t,new $y);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),ug.apply(this,arguments)}function lg(e){return dg.apply(this,arguments)}function dg(){return dg=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return rd("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,og(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return rd("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,og(t,new eg);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),dg.apply(this,arguments)}function fg(e){return lg(e).then((function(e){return e.syncEngine}))}function pg(e){return hg.apply(this,arguments)}function hg(){return hg=Ge(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Sy.bind(null,n.syncEngine),r.onUnlisten=Ry.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),hg.apply(this,arguments)}var vg=new Map;function mg(e,t,n){if(!n)throw new dd(ld.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function yg(e){if(!Nd.isDocumentKey(e))throw new dd(ld.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function gg(e){if(Nd.isDocumentKey(e))throw new dd(ld.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":sd()}function _g(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dd(ld.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Eg(e);throw new dd(ld.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var bg=function(){function e(t){var n;if(o(this,e),void 0===t.host){if(void 0!==t.ssl)throw new dd(ld.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dd(ld.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new dd(ld.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return c(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Sg=function(){function e(t,n,r,i){o(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bg({}),this._settingsFrozen=!1}return c(e,[{key:"app",get:function(){if(!this._app)throw new dd(ld.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new dd(ld.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hd;switch(e.type){case"firstParty":return new gd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new dd(ld.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=vg.get(e);t&&(rd("ComponentProvider","Removing Datastore"),vg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function wg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=_g(e,Sg))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&od("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,s;if("string"==typeof i.mockUserToken)a=i.mockUserToken,s=$l.MOCK_USER;else{a=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[it(JSON.stringify({alg:"none",type:"JWT"})),it(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new dd(ld.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new $l(c)}e._authCredentials=new vd(new pd(a,s))}}var kg=function(){function e(t,n,r){o(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return c(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Rg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Tg=function(){function e(t,n,r){o(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return c(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Rg=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,e,r,lp(i)))._path=i,a.type="collection",a}return c(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kg(this.firestore,null,new Nd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Tg);function Cg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=kt(e),1===arguments.length&&(t=Sd.A()),mg("doc","path",t),e instanceof Sg){var o=Id.fromString.apply(Id,[t].concat(r));return yg(o),new kg(e,null,new Nd(o))}if(!(e instanceof kg||e instanceof Rg))throw new dd(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Id.fromString.apply(Id,[t].concat(r)));return yg(a),new kg(e.firestore,e instanceof Rg?e.converter:null,new Nd(a))}var Ig=function(){function e(){var t=this;o(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new sm(this,"async_queue_retry"),this.qc=function(){var e=om();e&&rd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=om();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return c(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=om();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new fd;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=Ge(Be().mark((function e(){var t=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Wd(e.t0)){e.next=12;break}throw e.t0;case 12:rd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw id("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=ty.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&sd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=T(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Og(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"==typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e)}var Ag=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var s;return o(this,n),(s=t.call(this,e,r,i,a)).type="firestore",s._queue=new Ig,s._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",s}return c(n,[{key:"_terminate",value:function(){return this._firestoreClient||Dg(this),this._firestoreClient.terminate()}}]),n}(Sg);function Ng(e){return e._firestoreClient||Dg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dg(e){var t,n,r,i=e._freezeSettings(),o=function(e,t,n,r){return new vf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ng(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}var xg=function(){function e(t){o(this,e),this._byteString=t}return c(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(sf.fromBase64String(t))}catch(t){throw new dd(ld.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(sf.fromUint8Array(t))}}]),e}(),Pg=function(){function e(){o(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new dd(ld.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ad(n)}return c(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Lg=c((function e(t){o(this,e),this._methodName=t})),Mg=function(){function e(t,n){if(o(this,e),!isFinite(t)||t<-90||t>90)throw new dd(ld.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dd(ld.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return c(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return wd(this._lat,e._lat)||wd(this._long,e._long)}}]),e}(),Ug=/^__.*__$/,jg=function(){function e(t,n,r){o(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return c(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new lh(e,this.data,this.fieldMask,t,this.fieldTransforms):new uh(e,this.data,t,this.fieldTransforms)}}]),e}();function Vg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sd()}}var Fg=function(){function e(t,n,r,i,a,s){o(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}return c(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return Jg(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Vg(this.Yc)&&Ug.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),Bg=function(){function e(t,n,r){o(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||am(t)}return c(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fg({Yc:e,methodName:t,oa:n,path:Ad.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Wg(e){var t=e._freezeSettings(),n=am(e._databaseId);return new Bg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gg(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.ua(o.merge||o.mergeFields?2:0,t,n,i);Yg("Data must be an object, but it was:",a,r);var s,c,u=Kg(r,a);if(o.merge)s=new of(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){var l,d=[],f=T(o.mergeFields);try{for(f.s();!(l=f.n()).done;){var p=qg(t,l.value,n);if(!a.contains(p))throw new dd(ld.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Qg(d,p)||d.push(p)}}catch(h){f.e(h)}finally{f.f()}s=new of(d),c=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,c=a.fieldTransforms;return new jg(new Df(u),s,c)}function Hg(e,t){if(zg(e=kt(e)))return Yg("Unsupported field value:",t,e),Kg(e,t);if(e instanceof Lg)return function(e,t){if(!Vg(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=T(e);try{for(o.s();!(n=o.n()).done;){var a=Hg(n.value,t.sa(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(s){o.e(s)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=kt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Td.fromDate(e);return{timestampValue:Vh(t.serializer,n)}}if(e instanceof Td){var r=new Td(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vh(t.serializer,r)}}if(e instanceof Mg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xg)return{bytesValue:Fh(t.serializer,e._byteString)};if(e instanceof kg){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.ia("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Gh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(Eg(e)))}(e,t)}function Kg(e,t){var n={};return Qd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jd(e,(function(e,r){var i=Hg(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Td||e instanceof Mg||e instanceof xg||e instanceof kg||e instanceof Lg)}function Yg(e,t,n){if(!zg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Eg(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function qg(e,t,n){if((t=kt(t))instanceof Pg)return t._internalPath;if("string"==typeof t)return Xg(e,t);throw Jg("Field path arguments must be of type string or ",e,!1,void 0,n)}var Zg=new RegExp("[~\\*/\\[\\]]");function Xg(e,t,n){if(t.search(Zg)>=0)throw Jg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return y(Pg,(0,i.Z)(t.split(".")))._internalPath}catch(r){throw Jg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jg(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var c="";return(o||a)&&(c+=" (found",o&&(c+=" in field ".concat(r)),a&&(c+=" in document ".concat(i)),c+=")"),new dd(ld.INVALID_ARGUMENT,s+e+c)}function Qg(e,t){return e.some((function(e){return e.isEqual(t)}))}var $g=function(){function e(t,n,r,i,a){o(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return c(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new eE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),eE=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n,[{key:"data",value:function(){return $e(d(n.prototype),"data",this).call(this)}}]),n}($g);function tE(e,t){return"string"==typeof t?Xg(e,t):t instanceof Pg?t._internalPath:t._delegate._internalPath}function nE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new dd(ld.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rE=function(){function e(){o(this,e)}return c(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(df(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Jd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Mg(lf(e.latitude),lf(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=pf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=uf(e);return new Td(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Id.fromString(e);cd(lv(n));var r=new mf(n.get(1),n.get(3)),i=new Nd(n.popFirst(5));return r.isEqual(t)||id("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function iE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var oE=function(){function e(t,n){o(this,e),this.hasPendingWrites=t,this.fromCache=n}return c(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),aE=function(e){l(n,e);var t=v(n);function n(e,r,i,a,s,c){var u;return o(this,n),(u=t.call(this,e,r,i,a,c))._firestore=e,u._firestoreImpl=e,u.metadata=s,u}return c(n,[{key:"exists",value:function(){return $e(d(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}($g),sE=function(e){l(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return c(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $e(d(n.prototype),"data",this).call(this,e)}}]),n}(aE),cE=function(){function e(t,n,r,i){o(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new oE(i.hasPendingWrites,i.fromCache),this.query=r}return c(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sE(n._firestore,n._userDataWriter,r.key,r,new oE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dd(ld.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new sE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:uE(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function uE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sd()}}var lE=function(e){l(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this)).firestore=e,r}return c(n,[{key:"convertBytes",value:function(e){return new xg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kg(this.firestore,null,t)}}]),n}(rE);function dE(e,t){return function(e,t){var n=new fd;return e.asyncQueue.enqueueAndForget(Ge(Be().mark((function r(){return Be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Iy,r.next=3,fg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ng(e),t)}function fE(e,t,n){var r=n.docs.get(t._key),i=new lE(e);return new aE(e,i,t._key,r,new oE(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ed=e}(En),hn(new Tt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,o=e.getProvider("app").getImmediate(),a=new Ag(new md(e.getProvider("auth-internal")),new _d(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dd(ld.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mf(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Sn(Ql,"3.10.0",e),Sn(Ql,"3.10.0","esm2017")}();var pE=_n({apiKey:"AIzaSyAMTMe7agO3ZASPMxGtMEonw1z5fUzbWak",authDomain:"auth-headstarter.firebaseapp.com",projectId:"auth-headstarter",storageBucket:"auth-headstarter.appspot.com",messagingSenderId:"200837729533",appId:"1:200837729533:web:457fb50cebf711334b4294"}),hE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn(),t=vn(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=vn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(yt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;zn(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:La,persistence:[Io,no,io]}),i=lt("authTokenSyncURL");if(i){var o=(n=i,function(){var e=Ge(Be().mark((function e(t){var r,i,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>za)){e.next=9;break}return e.abrupt("return");case 9:if(o=null===r||void 0===r?void 0:r.token,Ya!==o){e.next=12;break}return e.abrupt("return");case 12:return Ya=o,e.next=15,fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){kt(e).beforeAuthStateChanged(t,n)}(r,o,(function(){return o(r.currentUser)})),function(e,t,n,r){kt(e).onIdTokenChanged(t,n,r)}(r,(function(e){return o(e)}))}var a=ct("auth");return a&&ui(r,"http://".concat(a)),r}(pE),vE=function(e,t){var n="string"==typeof e?e:t||"(default)",r=vn("object"==typeof e?e:bn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var o=function(e){var t=ct(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}}("firestore");o&&wg.apply(void 0,[r].concat((0,i.Z)(o)))}return r}(pE),mE=n(184),yE=(0,e.createContext)({}),gE=function(t){var n=t.children,r=(0,e.useState)({}),i=(0,m.Z)(r,2),o=i[0],a=i[1];return(0,e.useEffect)((function(){var e=function(e,t,n,r){return kt(e).onAuthStateChanged(t,n,r)}(hE,(function(e){a(e)}));return function(){e()}}),[]),(0,mE.jsx)(yE.Provider,{value:{googleSignIn:function(){var e=new Ui;na(hE,e)},logOut:function(){!function(e){kt(e).signOut()}(hE)},user:o},children:n})},EE=function(){return(0,e.useContext)(yE)},_E=function(){var e=EE(),t=e.user,r=e.logOut,i=function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,mE.jsxs)("div",{className:"Navbar",children:[(0,mE.jsx)("img",{className:"navbar-text",src:n(8627),alt:"PSEUDOSTARTER"}),null!==t&&void 0!==t&&t.displayName?(0,mE.jsxs)("ul",{className:"navList",children:[(0,mE.jsx)(Xe,{className:"buttonNav",to:"/",style:{textDecoration:"none"},children:(0,mE.jsx)("li",{className:"calButtonNav",children:"Home"})}),(0,mE.jsx)(Xe,{className:"buttonNav",to:"/calendar",style:{textDecoration:"none"},children:(0,mE.jsx)("li",{className:"calButtonNav",children:"Calendar"})}),(0,mE.jsx)(Xe,{className:"buttonNav",to:"/account",style:{textDecoration:"none"},children:(0,mE.jsx)("li",{className:"accButtonNav",children:"Account"})}),(0,mE.jsx)("li",{className:"logoutButtonNav",onClick:i,children:"Logout"})]}):(0,mE.jsx)(Xe,{className:"SignInRedirect",to:"/signin",children:(0,mE.jsx)("button",{className:"signinButtonNav",children:"Sign in"})})]})},bE=n(3366),SE=n(7462),wE=n(8182),kE=n(5735),TE=n(4419),RE=n(2065),CE=n(9359),IE=n(1046),OE=n(4843),AE=n(6868),NE=n(3031);function DE(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function xE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}var PE=e.createContext(null);function LE(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function ME(e,t,n){return null!=n[t]?n[t]:e.props[t]}function UE(t,n,r){var i=LE(t.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var u=i[c][r];s[i[c][r]]=n(u)}s[c]=n(c)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,e.isValidElement)(s)){var c=a in n,u=a in i,l=n[a],d=(0,e.isValidElement)(l)&&!l.props.in;!u||c&&!d?u||!c||d?u&&c&&(0,e.isValidElement)(l)&&(o[a]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:ME(s,"exit",t),enter:ME(s,"enter",t)})):o[a]=(0,e.cloneElement)(s,{in:!1}):o[a]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:ME(s,"exit",t),enter:ME(s,"enter",t)})}})),o}var jE=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},VE=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(h(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}xE(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=t,i=a,LE(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:ME(t,"appear",r),enter:ME(t,"enter",r),exit:ME(t,"exit",r)})}))):UE(t,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=LE(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,SE.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=(0,bE.Z)(t,["component","childFactory"]),o=this.state.contextValue,a=jE(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(PE.Provider,{value:o},a):e.createElement(PE.Provider,{value:o},e.createElement(n,i,a))},n}(e.Component);VE.propTypes={},VE.defaultProps={component:"div",childFactory:function(e){return e}};var FE=VE,BE=(n(3361),n(2110),n(9140));n(2561);function WE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,BE.O)(t)}var GE=function(){var e=WE.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var HE=function(t){var n=t.className,r=t.classes,i=t.pulsate,o=void 0!==i&&i,a=t.rippleX,s=t.rippleY,c=t.rippleSize,u=t.in,l=t.onExited,d=t.timeout,f=e.useState(!1),p=(0,m.Z)(f,2),h=p[0],v=p[1],y=(0,wE.Z)(n,r.ripple,r.rippleVisible,o&&r.ripplePulsate),g={width:c,height:c,top:-c/2+s,left:-c/2+a},E=(0,wE.Z)(r.child,h&&r.childLeaving,o&&r.childPulsate);return u||h||v(!0),e.useEffect((function(){if(!u&&null!=l){var e=setTimeout(l,d);return function(){clearTimeout(e)}}}),[l,u,d]),(0,mE.jsx)("span",{className:y,style:g,children:(0,mE.jsx)("span",{className:E})})},KE=n(5878);var zE,YE,qE,ZE,XE,JE,QE,$E,e_=(0,KE.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),t_=["center","classes","className"],n_=GE(XE||(XE=zE||(zE=DE(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),r_=GE(JE||(JE=YE||(YE=DE(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),i_=GE(QE||(QE=qE||(qE=DE(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),o_=(0,CE.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),a_=(0,CE.ZP)(HE,{name:"MuiTouchRipple",slot:"Ripple"})($E||($E=ZE||(ZE=DE(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),e_.rippleVisible,n_,550,(function(e){return e.theme.transitions.easing.easeInOut}),e_.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),e_.child,e_.childLeaving,r_,550,(function(e){return e.theme.transitions.easing.easeInOut}),e_.childPulsate,i_,(function(e){return e.theme.transitions.easing.easeInOut})),s_=e.forwardRef((function(t,n){var r=(0,IE.Z)({props:t,name:"MuiTouchRipple"}),o=r.center,a=void 0!==o&&o,s=r.classes,c=void 0===s?{}:s,u=r.className,l=(0,bE.Z)(r,t_),d=e.useState([]),f=(0,m.Z)(d,2),p=f[0],h=f[1],v=e.useRef(0),y=e.useRef(null);e.useEffect((function(){y.current&&(y.current(),y.current=null)}),[p]);var g=e.useRef(!1),E=e.useRef(null),_=e.useRef(null),b=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(E.current)}}),[]);var S=e.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,o=e.rippleSize,a=e.cb;h((function(e){return[].concat((0,i.Z)(e),[(0,mE.jsx)(a_,{classes:{ripple:(0,wE.Z)(c.ripple,e_.ripple),rippleVisible:(0,wE.Z)(c.rippleVisible,e_.rippleVisible),ripplePulsate:(0,wE.Z)(c.ripplePulsate,e_.ripplePulsate),child:(0,wE.Z)(c.child,e_.child),childLeaving:(0,wE.Z)(c.childLeaving,e_.childLeaving),childPulsate:(0,wE.Z)(c.childPulsate,e_.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},v.current)])})),v.current+=1,y.current=a}),[c]),w=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,c=t.fakeElement,u=void 0!==c&&c;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var l,d,f,p=u?null:b.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),d=Math.round(h.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,m=v.clientX,y=v.clientY;l=Math.round(m-h.left),d=Math.round(y-h.top)}if(s)(f=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(f+=1);else{var w=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,k=2*Math.max(Math.abs((p?p.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(w,2)+Math.pow(k,2))}null!=e&&e.touches?null===_.current&&(_.current=function(){S({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})},E.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):S({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})}}),[a,S]),k=e.useCallback((function(){w({},{pulsate:!0})}),[w]),T=e.useCallback((function(e,t){if(clearTimeout(E.current),"touchend"===(null==e?void 0:e.type)&&_.current)return _.current(),_.current=null,void(E.current=setTimeout((function(){T(e,t)})));_.current=null,h((function(e){return e.length>0?e.slice(1):e})),y.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:k,start:w,stop:T}}),[k,w,T]),(0,mE.jsx)(o_,(0,SE.Z)({className:(0,wE.Z)(e_.root,c.root,u),ref:b},l,{children:(0,mE.jsx)(FE,{component:null,exit:!0,children:p})}))})),c_=s_,u_=n(1217);function l_(e){return(0,u_.Z)("MuiButtonBase",e)}var d_,f_=(0,KE.Z)("MuiButtonBase",["root","disabled","focusVisible"]),p_=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],h_=(0,CE.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((d_={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,et.Z)(d_,"&.".concat(f_.disabled),{pointerEvents:"none",cursor:"default"}),(0,et.Z)(d_,"@media print",{colorAdjust:"exact"}),d_)),v_=e.forwardRef((function(t,n){var r=(0,IE.Z)({props:t,name:"MuiButtonBase"}),i=r.action,o=r.centerRipple,a=void 0!==o&&o,s=r.children,c=r.className,u=r.component,l=void 0===u?"button":u,d=r.disabled,f=void 0!==d&&d,p=r.disableRipple,h=void 0!==p&&p,v=r.disableTouchRipple,y=void 0!==v&&v,g=r.focusRipple,E=void 0!==g&&g,_=r.LinkComponent,b=void 0===_?"a":_,S=r.onBlur,w=r.onClick,k=r.onContextMenu,T=r.onDragLeave,R=r.onFocus,C=r.onFocusVisible,I=r.onKeyDown,O=r.onKeyUp,A=r.onMouseDown,N=r.onMouseLeave,D=r.onMouseUp,x=r.onTouchEnd,P=r.onTouchMove,L=r.onTouchStart,M=r.tabIndex,U=void 0===M?0:M,j=r.TouchRippleProps,V=r.touchRippleRef,F=r.type,B=(0,bE.Z)(r,p_),W=e.useRef(null),G=e.useRef(null),H=(0,OE.Z)(G,V),K=(0,NE.Z)(),z=K.isFocusVisibleRef,Y=K.onFocus,q=K.onBlur,Z=K.ref,X=e.useState(!1),J=(0,m.Z)(X,2),Q=J[0],$=J[1];f&&Q&&$(!1),e.useImperativeHandle(i,(function(){return{focusVisible:function(){$(!0),W.current.focus()}}}),[]);var ee=e.useState(!1),te=(0,m.Z)(ee,2),ne=te[0],re=te[1];e.useEffect((function(){re(!0)}),[]);var ie=ne&&!h&&!f;function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return(0,AE.Z)((function(r){return t&&t(r),!n&&G.current&&G.current[e](r),!0}))}e.useEffect((function(){Q&&E&&!h&&ne&&G.current.pulsate()}),[h,E,Q,ne]);var ae=oe("start",A),se=oe("stop",k),ce=oe("stop",T),ue=oe("stop",D),le=oe("stop",(function(e){Q&&e.preventDefault(),N&&N(e)})),de=oe("start",L),fe=oe("stop",x),pe=oe("stop",P),he=oe("stop",(function(e){q(e),!1===z.current&&$(!1),S&&S(e)}),!1),ve=(0,AE.Z)((function(e){W.current||(W.current=e.currentTarget),Y(e),!0===z.current&&($(!0),C&&C(e)),R&&R(e)})),me=function(){var e=W.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},ye=e.useRef(!1),ge=(0,AE.Z)((function(e){E&&!ye.current&&Q&&G.current&&" "===e.key&&(ye.current=!0,G.current.stop(e,(function(){G.current.start(e)}))),e.target===e.currentTarget&&me()&&" "===e.key&&e.preventDefault(),I&&I(e),e.target===e.currentTarget&&me()&&"Enter"===e.key&&!f&&(e.preventDefault(),w&&w(e))})),Ee=(0,AE.Z)((function(e){E&&" "===e.key&&G.current&&Q&&!e.defaultPrevented&&(ye.current=!1,G.current.stop(e,(function(){G.current.pulsate(e)}))),O&&O(e),w&&e.target===e.currentTarget&&me()&&" "===e.key&&!e.defaultPrevented&&w(e)})),_e=l;"button"===_e&&(B.href||B.to)&&(_e=b);var be={};"button"===_e?(be.type=void 0===F?"button":F,be.disabled=f):(B.href||B.to||(be.role="button"),f&&(be["aria-disabled"]=f));var Se=(0,OE.Z)(n,Z,W);var we=(0,SE.Z)({},r,{centerRipple:a,component:l,disabled:f,disableRipple:h,disableTouchRipple:y,focusRipple:E,tabIndex:U,focusVisible:Q}),ke=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,TE.Z)(o,l_,i);return n&&r&&(a.root+=" ".concat(r)),a}(we);return(0,mE.jsxs)(h_,(0,SE.Z)({as:_e,className:(0,wE.Z)(ke.root,c),ownerState:we,onBlur:he,onClick:w,onContextMenu:se,onFocus:ve,onKeyDown:ge,onKeyUp:Ee,onMouseDown:ae,onMouseLeave:le,onMouseUp:ue,onDragLeave:ce,onTouchEnd:fe,onTouchMove:pe,onTouchStart:de,ref:Se,tabIndex:f?-1:U,type:F},be,B,{children:[s,ie?(0,mE.jsx)(c_,(0,SE.Z)({ref:H,center:a},j)):null]}))})),m_=v_,y_=n(4036);function g_(e){return(0,u_.Z)("MuiButton",e)}var E_=(0,KE.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var __,b_=e.createContext({}),S_=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],w_=function(e){return(0,SE.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},k_=(0,CE.ZP)(m_,{shouldForwardProp:function(e){return(0,CE.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,y_.Z)(n.color))],t["size".concat((0,y_.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,y_.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,o=e.ownerState;return(0,SE.Z)({},i.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":(0,SE.Z)({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,RE.Fq)(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,RE.Fq)(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((i.vars||i).palette[o.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,RE.Fq)(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(i.vars||i).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[o.color].main}}),"&:active":(0,SE.Z)({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[8]})},(0,et.Z)(t,"&.".concat(E_.focusVisible),(0,SE.Z)({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[6]})),(0,et.Z)(t,"&.".concat(E_.disabled),(0,SE.Z)({color:(i.vars||i).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"contained"===o.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat((0,RE.Fq)(i.palette[o.color].main,.5))},"contained"===o.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].contrastText,backgroundColor:(i.vars||i).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,et.Z)(t,"&.".concat(E_.focusVisible),{boxShadow:"none"}),(0,et.Z)(t,"&:active",{boxShadow:"none"}),(0,et.Z)(t,"&.".concat(E_.disabled),{boxShadow:"none"}),t)})),T_=(0,CE.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,y_.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,SE.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},w_(t))})),R_=(0,CE.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,y_.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,SE.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},w_(t))})),C_=e.forwardRef((function(t,n){var r=e.useContext(b_),i=(0,kE.Z)(r,t),o=(0,IE.Z)({props:i,name:"MuiButton"}),a=o.children,s=o.color,c=void 0===s?"primary":s,u=o.component,l=void 0===u?"button":u,d=o.className,f=o.disabled,p=void 0!==f&&f,h=o.disableElevation,v=void 0!==h&&h,m=o.disableFocusRipple,y=void 0!==m&&m,g=o.endIcon,E=o.focusVisibleClassName,_=o.fullWidth,b=void 0!==_&&_,S=o.size,w=void 0===S?"medium":S,k=o.startIcon,T=o.type,R=o.variant,C=void 0===R?"text":R,I=(0,bE.Z)(o,S_),O=(0,SE.Z)({},o,{color:c,component:l,disabled:p,disableElevation:v,disableFocusRipple:y,fullWidth:b,size:w,type:T,variant:C}),A=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,o=e.variant,a=e.classes,s={root:["root",o,"".concat(o).concat((0,y_.Z)(t)),"size".concat((0,y_.Z)(i)),"".concat(o,"Size").concat((0,y_.Z)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,y_.Z)(i))],endIcon:["endIcon","iconSize".concat((0,y_.Z)(i))]},c=(0,TE.Z)(s,g_,a);return(0,SE.Z)({},a,c)}(O),N=k&&(0,mE.jsx)(T_,{className:A.startIcon,ownerState:O,children:k}),D=g&&(0,mE.jsx)(R_,{className:A.endIcon,ownerState:O,children:g});return(0,mE.jsxs)(k_,(0,SE.Z)({ownerState:O,className:(0,wE.Z)(r.className,A.root,d),component:l,disabled:p,focusRipple:!y,focusVisibleClassName:(0,wE.Z)(A.focusVisible,E),ref:n,type:T},I,{classes:A,children:[N,a,D]}))})),I_=C_,O_=n(3322),A_=n.n(O_);!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(__||(__={}));var N_=function(t){var n=(0,e.useRef)(null),r=t.videoTrack,i=t.config,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["videoTrack","config"]);return(0,e.useLayoutEffect)((function(){return null!==n.current&&r.play(n.current,i),function(){r.stop()}}),[r]),e.createElement("div",Object.assign({},o,{ref:n}))},D_={mode:"rtc",codec:"vp8",appId:"3bfb40a8705447b49de4bea47415b492",token:"007eJxTYMhMMWidZfTr42fh98Hpt04kHQkNiuxn/M33unXDgby+xjcKDMZJaUkmBokW5gamJibmSSaWKakmSamJJuYmhqZAntHB5Q4pDYGMDPeYPzMwQiGIz8Lgm5iZx8AAAOjTIXM="},x_=function(e){var t;return function(){return t||(t=A_().createClient(e)),t}}(D_),P_=function(t,n){var r=null;return function(){var i=(0,e.useState)(!1),o=i[0],a=i[1],s=(0,e.useState)(null),c=s[0],u=s[1],l=(0,e.useRef)(r);return(0,e.useEffect)((function(){return null===l.current?function(){try{return Promise.resolve(A_().createMicrophoneAndCameraTracks(t,n)).then((function(e){return r=e}))}catch(e){return Promise.reject(e)}}().then((function(e){l.current=e,a(!0)}),(function(e){u(e)})):a(!0),function(){r=null}}),[]),{ready:o,tracks:l.current,error:c}}}(),L_="Main",M_=n(1184),U_=n(2466),j_=n(7416),V_=["sx"];function F_(e){var t,n=e.sx,r=function(e){var t,n,r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:j_.Z;return Object.keys(e).forEach((function(t){i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r}((0,bE.Z)(e,V_)),o=r.systemProps,a=r.otherProps;return t=Array.isArray(n)?[o].concat((0,i.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,U_.P)(e)?(0,SE.Z)({},o,e):o}:(0,SE.Z)({},o,n),(0,SE.Z)({},a,{sx:t})}var B_=n(886),W_=n(4591);var G_=e.createContext();function H_(e){return(0,u_.Z)("MuiGrid",e)}var K_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],z_=(0,KE.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,i.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),(0,i.Z)(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),(0,i.Z)(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),(0,i.Z)(K_.map((function(e){return"grid-xs-".concat(e)}))),(0,i.Z)(K_.map((function(e){return"grid-sm-".concat(e)}))),(0,i.Z)(K_.map((function(e){return"grid-md-".concat(e)}))),(0,i.Z)(K_.map((function(e){return"grid-lg-".concat(e)}))),(0,i.Z)(K_.map((function(e){return"grid-xl-".concat(e)}))))),Y_=z_,q_=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Z_(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function X_(e){var t=e.breakpoints,n=e.values,r="";Object.keys(n).forEach((function(e){""===r&&0!==n[e]&&(r=e)}));var i=Object.keys(t).sort((function(e,n){return t[e]-t[n]}));return i.slice(0,i.indexOf(r))}var J_=(0,CE.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.container,o=n.direction,a=n.item,s=n.spacing,c=n.wrap,u=n.zeroMinWidth,l=n.breakpoints,d=[];r&&(d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];var r=[];return t.forEach((function(t){var i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(s,l,t));var f=[];return l.forEach((function(e){var r=n[e];r&&f.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,a&&t.item,u&&t.zeroMinWidth].concat((0,i.Z)(d),["row"!==o&&t["direction-xs-".concat(String(o))],"wrap"!==c&&t["wrap-xs-".concat(String(c))]],f)}})((function(e){var t=e.ownerState;return(0,SE.Z)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme,n=e.ownerState,r=(0,M_.P$)({values:n.direction,breakpoints:t.breakpoints.values});return(0,M_.k9)({theme:t},r,(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(Y_.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.rowSpacing,o={};if(r&&0!==i){var a,s=(0,M_.P$)({values:i,breakpoints:t.breakpoints.values});"object"===typeof s&&(a=X_({breakpoints:t.breakpoints.values,values:s})),o=(0,M_.k9)({theme:t},s,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?(0,et.Z)({marginTop:"-".concat(Z_(i))},"& > .".concat(Y_.item),{paddingTop:Z_(i)}):null!=(r=a)&&r.includes(n)?{}:(0,et.Z)({marginTop:0},"& > .".concat(Y_.item),{paddingTop:0})}))}return o}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.columnSpacing,o={};if(r&&0!==i){var a,s=(0,M_.P$)({values:i,breakpoints:t.breakpoints.values});"object"===typeof s&&(a=X_({breakpoints:t.breakpoints.values,values:s})),o=(0,M_.k9)({theme:t},s,(function(e,n){var r,i=t.spacing(e);return"0px"!==i?(0,et.Z)({width:"calc(100% + ".concat(Z_(i),")"),marginLeft:"-".concat(Z_(i))},"& > .".concat(Y_.item),{paddingLeft:Z_(i)}):null!=(r=a)&&r.includes(n)?{}:(0,et.Z)({width:"100%",marginLeft:0},"& > .".concat(Y_.item),{paddingLeft:0})}))}return o}),(function(e){var t,n=e.theme,r=e.ownerState;return n.breakpoints.keys.reduce((function(e,i){var o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var a=(0,M_.P$)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;var c="".concat(Math.round(t/s*1e8)/1e6,"%"),u={};if(r.container&&r.item&&0!==r.columnSpacing){var l=n.spacing(r.columnSpacing);if("0px"!==l){var d="calc(".concat(c," + ").concat(Z_(l),")");u={flexBasis:d,maxWidth:d}}}o=(0,SE.Z)({flexBasis:c,flexGrow:0,maxWidth:c},u)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));var Q_=function(e){var t=e.classes,n=e.container,r=e.direction,o=e.item,a=e.spacing,s=e.wrap,c=e.zeroMinWidth,u=e.breakpoints,l=[];n&&(l=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var n=[];return t.forEach((function(t){var r=e[t];if(Number(r)>0){var i="spacing-".concat(t,"-").concat(String(r));n.push(i)}})),n}(a,u));var d=[];u.forEach((function(t){var n=e[t];n&&d.push("grid-".concat(t,"-").concat(String(n)))}));var f={root:["root",n&&"container",o&&"item",c&&"zeroMinWidth"].concat((0,i.Z)(l),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==s&&"wrap-xs-".concat(String(s))],d)};return(0,TE.Z)(f,H_,t)},$_=e.forwardRef((function(t,n){var r=(0,IE.Z)({props:t,name:"MuiGrid"}),i=(0,B_.Z)(W_.Z).breakpoints,o=F_(r),a=o.className,s=o.columns,c=o.columnSpacing,u=o.component,l=void 0===u?"div":u,d=o.container,f=void 0!==d&&d,p=o.direction,h=void 0===p?"row":p,v=o.item,m=void 0!==v&&v,y=o.rowSpacing,g=o.spacing,E=void 0===g?0:g,_=o.wrap,b=void 0===_?"wrap":_,S=o.zeroMinWidth,w=void 0!==S&&S,k=(0,bE.Z)(o,q_),T=y||E,R=c||E,C=e.useContext(G_),I=f?s||12:C,O={},A=(0,SE.Z)({},k);i.keys.forEach((function(e){null!=k[e]&&(O[e]=k[e],delete A[e])}));var N=(0,SE.Z)({},o,{columns:I,container:f,direction:h,item:m,rowSpacing:T,columnSpacing:R,wrap:b,zeroMinWidth:w,spacing:E},O,{breakpoints:i.keys}),D=Q_(N);return(0,mE.jsx)(G_.Provider,{value:I,children:(0,mE.jsx)(J_,(0,SE.Z)({ownerState:N,className:(0,wE.Z)(D.root,a),as:l,ref:n},A))})})),eb=$_;function tb(t){var n=t.users,r=t.tracks,i=(0,e.useState)(12),o=(0,m.Z)(i,2),a=o[0],s=o[1];return(0,e.useEffect)((function(){s(Math.max(Math.floor(12/(n.length+1)),4))}),[n,r]),(0,mE.jsxs)(eb,{container:!0,className:"wrapper",children:[(0,mE.jsx)(eb,{item:!0,xs:a,children:(0,mE.jsx)(N_,{videoTrack:r[1],style:{height:"100%",width:"100%"}})}),n.length>0&&n.map((function(e){return e.videoTrack?(0,mE.jsx)(eb,{item:!0,xs:a,children:(0,mE.jsx)(N_,{videoTrack:e.videoTrack,style:{height:"100%",width:"100%"}},e.uid)}):null}))]})}var nb=n(5436),rb=n(9128),ib=n(2946),ob=n(7349),ab=n(7608);function sb(t){var n=x_(),r=t.tracks,i=t.setStart,o=t.setInCall,a=(0,e.useState)({video:!0,audio:!0}),s=(0,m.Z)(a,2),c=s[0],u=s[1],l=function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,r[0].setEnabled(!c.audio);case 3:u((function(e){return jt(jt({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,r[1].setEnabled(!c.video);case 9:u((function(e){return jt(jt({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.leave();case 2:n.removeAllListeners(),r[0].close(),r[1].close(),i(!1),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,mE.jsxs)(eb,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,mE.jsx)(eb,{item:!0,children:(0,mE.jsx)(I_,{onClick:function(){return l("audio")},children:c.audio?(0,mE.jsx)(nb.Z,{}):(0,mE.jsx)(rb.Z,{})})}),(0,mE.jsx)(eb,{item:!0,children:(0,mE.jsx)(I_,{onClick:function(){return l("video")},children:c.video?(0,mE.jsx)(ib.Z,{}):(0,mE.jsx)(ob.Z,{})})}),(0,mE.jsx)(eb,{item:!0,children:(0,mE.jsxs)(I_,{onClick:function(){return d()},children:["Leave",(0,mE.jsx)(ab.Z,{})]})})]})}function cb(t){var n=t.setInCall,r=(0,e.useState)([]),o=(0,m.Z)(r,2),a=o[0],s=o[1],c=(0,e.useState)(!1),u=(0,m.Z)(c,2),l=u[0],d=u[1],f=x_(),p=P_(),h=p.ready,v=p.tracks;return(0,e.useEffect)((function(){var e=function(){var e=Ge(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.on("user-published",function(){var e=Ge(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.subscribe(t,n);case 2:"video"===n&&s((function(e){return[].concat((0,i.Z)(e),[t])})),"audio"===n&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),f.on("user-left",(function(e){s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,f.join(D_.appId,t,D_.token,null);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!v){e.next=14;break}return e.next=14,f.publish([v[0],v[1]]);case 14:d(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();if(h&&v)try{e(L_)}catch(t){console.log(t)}}),[L_,f,h,v]),(0,mE.jsxs)(eb,{container:!0,direction:"column",children:[(0,mE.jsx)(eb,{item:!0,children:h&&v&&(0,mE.jsx)(sb,{tracks:v,setStart:d,setInCall:n})}),(0,mE.jsx)(eb,{item:!0,children:l&&v&&(0,mE.jsx)(tb,{tracks:v,users:a})})]})}var ub=function(){var t=(0,e.useState)(!1),n=(0,m.Z)(t,2),r=n[0],i=n[1],o=EE(),a=o.logOut,s=o.user,c=function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return console.log(s),(0,mE.jsxs)("div",{className:"AccountDiv",children:[(0,mE.jsx)("h1",{className:"AccountText",style:{fontSize:"34px"},children:"Account"}),(0,mE.jsx)("img",{style:{borderRadius:"50%"},src:null===s||void 0===s?void 0:s.photoURL,alt:"Profile"}),(0,mE.jsxs)("p",{children:["User: ",null===s||void 0===s?void 0:s.displayName]}),(0,mE.jsxs)("p",{children:["Email: ",null===s||void 0===s?void 0:s.email]}),(0,mE.jsx)("div",{className:"App",style:{height:"100%"},children:r?(0,mE.jsx)(cb,{setInCall:i}):(0,mE.jsx)(I_,{onClick:function(){return i(!0)},children:"Join Call"})}),(0,mE.jsx)("button",{onClick:c,className:"logoutButton",children:"Logout"})]})},lb={_origin:"https://api.emailjs.com"},db=function(e,t,n){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},fb=c((function e(t){o(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),pb=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){var o=new XMLHttpRequest;o.addEventListener("load",(function(e){var t=e.target,n=new fb(t);200===n.status||"OK"===n.text?r(n):i(n)})),o.addEventListener("error",(function(e){var t=e.target;i(new fb(t))})),o.open("POST",lb._origin+e,!0),Object.keys(n).forEach((function(e){o.setRequestHeader(e,n[e])})),o.send(t)}))},hb=function(e,t,n,r){var i=r||lb._userID,o=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(n);db(i,e,t);var a=new FormData(o);return a.append("lib_version","3.11.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),pb("/api/v1.0/email/send-form",a)},vb=function(){var t=(0,e.useRef)();return(0,mE.jsxs)("article",{className:"HomePageDiv",children:[(0,mE.jsx)("h1",{className:"heading",style:{fontSize:"40px"},children:"Pseudostarter"}),(0,mE.jsx)("p",{style:{fontSize:"20px"},children:"Welcome to Pseudo Starter where you meet with various people to find and create your dream projects sooner. Create a Calendar, Video Calls, and Your Team right here! Our purpose is to help bring connections to people and motivate them into pursuing their dream position as an aspiring developer. Our purpose is to help bring connections to people and motivate them into pursuing their dream position as an aspiring developer. We hope for bring them opportunities to communicate and build relationships as that is a great investment for dream jobs or internships."}),(0,mE.jsx)("h2",{style:{fontSize:"30px",color:"#001f3f"},children:"Meet the Team!"}),(0,mE.jsxs)("section",{children:[(0,mE.jsx)("img",{className:"profile",style:{width:"180px"},src:n(8867)}),(0,mE.jsx)("p",{style:{fontSize:"18px"},children:"Hello! My name is Anthony Nino De Guzman and I too am also an aspiring Web Developer in hopes of landing a company position in my field soon. As someone that loves to give constant support, I would love to give people an opportunity to connect, brainstorm, and create miracles together as a team. To be one that can help give that makes me smile and feel proud of myself."}),(0,mE.jsx)("img",{className:"profile",style:{width:"180px"},src:n(9302)}),(0,mE.jsx)("p",{style:{fontSize:"19px"},children:"Hey there! My name is Konstantinos Georgiou and I am pursuing a software engineering career after college! I always loved the idea about having my own platform and this is the closest i\u2019ve been to having one! Working with others is an essential skill and I hope this app will be beneficial to all of you."})]}),(0,mE.jsx)("h2",{style:{color:"#001f3f"},children:"Got Something To Say?"}),(0,mE.jsx)("p",{style:{fontSize:"19px"},children:"Feel free to message us and ask us anything you need. We'll be sure to reply as soon as we can!"}),(0,mE.jsxs)("form",{ref:t,onSubmit:function(e){e.preventDefault(),hb("service_cd68yqw","template_q5hq01s",t.current,"7EfzjspcRVW6tVC84").then((function(e){console.log(e.text)}),(function(e){console.log(e.text)})),alert("Your message has been sent!")},className:"emailForm",children:[(0,mE.jsx)("input",{required:!0,placeholder:"Your Name",name:"name",type:"text"}),(0,mE.jsx)("input",{required:!0,placeholder:"Email",name:"email",type:"email"}),(0,mE.jsx)("textarea",{required:!0,placeholder:"Message",name:"message"}),(0,mE.jsx)("button",{className:"sendEmail",children:"Send"})]})]})},mb=n(1490),yb=function(){var t=EE(),n=t.googleSignIn,r=t.user,i=ke(),o=function(){var e=Ge(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){null!=r&&i("/account")}),[r]),(0,mE.jsx)("div",{className:"SignInDiv",children:(0,mE.jsxs)("div",{className:"SignInContainer",children:[(0,mE.jsx)("h1",{className:"Signin",style:{color:"#001f3f"},children:"Sign In"}),(0,mE.jsx)("div",{className:"GoogleButton",children:(0,mE.jsx)(mb.VL,{onClick:o})})]})})},gb=function(e){var t=e.children;return EE().user?t:(0,mE.jsx)(Le,{to:"/"})};function Eb(e,t){if(null==e)return{};var n,r,i=(0,bE.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _b=n(2176),bb=n.n(_b),Sb=function(){};function wb(e,t){return void 0!==e[t]}function kb(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Tb(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Rb(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Cb(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Tb.__suppressDeprecationWarning=!0,Rb.__suppressDeprecationWarning=!0,Cb.__suppressDeprecationWarning=!0;var Ib=n(2007),Ob=n.n(Ib),Ab="milliseconds",Nb="seconds",Db="minutes",xb="hours",Pb="day",Lb="week",Mb="month",Ub="year",jb="decade",Vb="century",Fb={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},Bb={month:1,year:12,decade:120,century:1200};function Wb(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Gb(e,t,n){switch(e=new Date(e),n){case Ab:case Nb:case Db:case xb:case Pb:case Lb:return function(e,t){var n=new Date(+e+t);return function(e,t){var n=e.getTimezoneOffset(),r=t.getTimezoneOffset();return new Date(+t+(r-n)*Fb.minutes)}(e,n)}(e,t*Fb[n]);case Mb:case Ub:case jb:case Vb:return function(e,t){var n=e.getFullYear(),r=e.getMonth(),i=e.getDate(),o=12*n+r+t,a=Math.trunc(o/12),s=o%12,c=Math.min(i,function(e){return[31,Wb(e),31,30,31,30,31,31,30,31,30,31]}(a)[s]),u=new Date(e);return u.setFullYear(a),u.setDate(1),u.setMonth(s),u.setDate(c),u}(e,t*Bb[n])}throw new TypeError('Invalid units: "'+n+'"')}function Hb(e,t,n){return Gb(e,-t,n)}function Kb(e,t,n){switch(e=new Date(e),t){case Vb:case jb:case Ub:e=cS(e,0);case Mb:e=sS(e,1);case Lb:case Pb:e=oS(e,0);case xb:e=iS(e,0);case Db:e=rS(e,0);case Nb:e=nS(e,0)}return t===jb&&(e=Hb(e,uS(e)%10,"year")),t===Vb&&(e=Hb(e,uS(e)%100,"year")),t===Lb&&(e=function(e,t,n){var r=(aS(e)+7-(n||0))%7;return void 0===t?r:Gb(e,t-r,Pb)}(e,0,n)),e}function zb(e,t,n){switch(e=Kb(e=new Date(e),t,n),t){case Vb:case jb:case Ub:case Mb:case Lb:(e=Hb(e=Gb(e,1,t),1,Pb)).setHours(23,59,59,999);break;case Pb:e.setHours(23,59,59,999);break;case xb:case Db:case Nb:e=Hb(e=Gb(e,1,t),1,Ab)}return e}var Yb=dS((function(e,t){return e===t})),qb=dS((function(e,t){return e!==t})),Zb=dS((function(e,t){return e>t})),Xb=dS((function(e,t){return e>=t})),Jb=dS((function(e,t){return e<t})),Qb=dS((function(e,t){return e<=t}));function $b(){return new Date(Math.min.apply(Math,arguments))}function eS(){return new Date(Math.max.apply(Math,arguments))}function tS(e,t,n,r){return r=r||"day",(!t||Xb(e,t,r))&&(!n||Qb(e,n,r))}var nS=lS("Milliseconds"),rS=lS("Seconds"),iS=lS("Minutes"),oS=lS("Hours"),aS=lS("Day"),sS=lS("Date"),cS=lS("Month"),uS=lS("FullYear");function lS(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,r){if(void 0===r)return n["get"+e]();var i=new Date(n);return i["set"+e](r),t&&i["get"+e]()!=r&&("Hours"===e||r>=t&&i.getHours()-n.getHours()<Math.floor(r/t))&&i["set"+e](r+t),i}}function dS(e){return function(t,n,r){return e(+Kb(t,r),+Kb(n,r))}}var fS=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var pS=function(e,t){return e===t||e!==e&&t!==t},hS="object"==typeof global&&global&&global.Object===Object&&global,vS="object"==typeof self&&self&&self.Object===Object&&self,mS=hS||vS||Function("return this")(),yS=mS.Symbol,gS=Object.prototype,ES=gS.hasOwnProperty,_S=gS.toString,bS=yS?yS.toStringTag:void 0;var SS=function(e){var t=ES.call(e,bS),n=e[bS];try{e[bS]=void 0;var r=!0}catch(o){}var i=_S.call(e);return r&&(t?e[bS]=n:delete e[bS]),i},wS=Object.prototype.toString;var kS=function(e){return wS.call(e)},TS=yS?yS.toStringTag:void 0;var RS=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":TS&&TS in Object(e)?SS(e):kS(e)};var CS=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var IS=function(e){if(!CS(e))return!1;var t=RS(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var OS=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var AS=function(e){return null!=e&&OS(e.length)&&!IS(e)},NS=/^(?:0|[1-9]\d*)$/;var DS=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&NS.test(e))&&e>-1&&e%1==0&&e<t};var xS=function(e,t,n){if(!CS(n))return!1;var r=typeof t;return!!("number"==r?AS(n)&&DS(t,n.length):"string"==r&&t in n)&&pS(n[t],e)},PS=/\s/;var LS=function(e){for(var t=e.length;t--&&PS.test(e.charAt(t)););return t},MS=/^\s+/;var US=function(e){return e?e.slice(0,LS(e)+1).replace(MS,""):e};var jS=function(e){return null!=e&&"object"==typeof e};var VS=function(e){return"symbol"==typeof e||jS(e)&&"[object Symbol]"==RS(e)},FS=/^[-+]0x[0-9a-f]+$/i,BS=/^0b[01]+$/i,WS=/^0o[0-7]+$/i,GS=parseInt;var HS=function(e){if("number"==typeof e)return e;if(VS(e))return NaN;if(CS(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=CS(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=US(e);var n=BS.test(e);return n||WS.test(e)?GS(e.slice(2),n?2:8):FS.test(e)?NaN:+e},KS=1/0;var zS=function(e){return e?(e=HS(e))===KS||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var YS=function(e){var t=zS(e),n=t%1;return t===t?n?t-n:t:0},qS=Math.ceil,ZS=Math.max;var XS=function(e,t,n){t=(n?xS(e,t,n):void 0===t)?1:ZS(YS(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(qS(r/t));i<r;)a[o++]=fS(e,i,i+=t);return a};function JS(e){return e&&e.ownerDocument||document}function QS(e,t){return function(e){var t=JS(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var $S=/([A-Z])/g;var ew=/^ms-/;function tw(e){return function(e){return e.replace($S,"-$1").toLowerCase()}(e).replace(ew,"-ms-")}var nw=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var rw=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(tw(t))||QS(e).getPropertyValue(tw(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!nw.test(e))}(i)?n+=tw(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(tw(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function iw(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function ow(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function aw(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(n,r){var i=ow(n);if(void 0===r)return i?i[e]:n[t];i?i.scrollTo(i[e],r):n[t]=r}}var sw=aw("pageXOffset"),cw=aw("pageYOffset");function uw(e){var t=JS(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return r&&iw(r,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),n={top:n.top+cw(r)-(r.clientTop||0),left:n.left+sw(r)-(r.clientLeft||0),width:n.width,height:n.height}):n}var lw=function(e){return!!e&&"offsetParent"in e};function dw(e,t){var n,r={top:0,left:0};if("fixed"===rw(e,"position"))n=e.getBoundingClientRect();else{var i=t||function(e){for(var t=JS(e),n=e&&e.offsetParent;lw(n)&&"HTML"!==n.nodeName&&"static"===rw(n,"position");)n=n.offsetParent;return n||t.documentElement}(e);n=uw(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(i)&&(r=uw(i));var o=String(rw(i,"borderTopWidth")||0);r.top+=parseInt(o,10)-cw(i)||0;var a=String(rw(i,"borderLeftWidth")||0);r.left+=parseInt(a,10)-sw(i)||0}var s=String(rw(e,"marginTop")||0),c=String(rw(e,"marginLeft")||0);return(0,SE.Z)({},n,{top:n.top-r.top-(parseInt(s,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}var fw=!("undefined"===typeof window||!window.document||!window.document.createElement),pw=(new Date).getTime();var hw="clearTimeout",vw=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-pw)),r=setTimeout(e,n);return pw=t,r},mw=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};fw&&["","webkit","moz","o","ms"].some((function(e){var t=mw(e,"request");return t in window&&(hw=mw(e,"cancel"),vw=function(e){return window[t](e)}),!!vw}));var yw=function(e){"function"===typeof window[hw]&&window[hw](e)},gw=vw,Ew=n(4164);function _w(){return(0,e.useState)(null)}var bw=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Sw=function(t,n){return(0,e.useMemo)((function(){return function(e,t){var n=bw(e),r=bw(t);return function(e){n&&n(e),r&&r(e)}}(t,n)}),[t,n])},ww=n(2570);var kw=function(t){var n=function(){var t=(0,e.useRef)(!0),n=(0,e.useRef)((function(){return t.current}));return(0,e.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),n.current}();return[t[0],(0,e.useCallback)((function(e){if(n())return t[1](e)}),[n,t[1]])]},Tw=n(8702),Rw=n(9224),Cw=n(7786),Iw=n(5468),Ow=n(1668),Aw=n(5934),Nw=n(545),Dw=n(1694),xw=(0,n(761).kZ)({defaultModifiers:[Ow.Z,Nw.Z,Rw.Z,Cw.Z,Aw.Z,Iw.Z,Dw.Z,Tw.Z]}),Pw=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Lw={name:"applyStyles",enabled:!1},Mw={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var i=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));i.length?n.setAttribute("aria-describedby",i.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,i=n.reference,o=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===o&&"setAttribute"in i){var a=i.getAttribute("aria-describedby");if(a&&-1!==a.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",a?a+","+r.id:r.id)}}},Uw=[];var jw=function(t,n,r){var i=void 0===r?{}:r,o=i.enabled,a=void 0===o||o,s=i.placement,c=void 0===s?"bottom":s,u=i.strategy,l=void 0===u?"absolute":u,d=i.modifiers,f=void 0===d?Uw:d,p=(0,bE.Z)(i,["enabled","placement","strategy","modifiers"]),h=(0,e.useRef)(),v=(0,e.useCallback)((function(){var e;null==(e=h.current)||e.update()}),[]),m=(0,e.useCallback)((function(){var e;null==(e=h.current)||e.forceUpdate()}),[]),y=kw((0,e.useState)({placement:c,update:v,forceUpdate:m,attributes:{},styles:{popper:Pw(l),arrow:{}}})),g=y[0],E=y[1],_=(0,e.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),E({state:t,styles:n,attributes:r,update:v,forceUpdate:m,placement:t.placement})}}}),[v,m,E]);return(0,e.useEffect)((function(){h.current&&a&&h.current.setOptions({placement:c,strategy:l,modifiers:[].concat(f,[_,Lw])})}),[l,c,_,a]),(0,e.useEffect)((function(){if(a&&null!=t&&null!=n)return h.current=xw(t,n,(0,SE.Z)({},p,{placement:c,strategy:l,modifiers:[].concat(f,[Mw,_])})),function(){null!=h.current&&(h.current.destroy(),h.current=void 0,E((function(e){return(0,SE.Z)({},e,{attributes:{},styles:{popper:Pw(l)}})})))}}),[a,t,n]),g},Vw=!1,Fw=!1;try{var Bw={get passive(){return Vw=!0},get once(){return Fw=Vw=!0}};fw&&(window.addEventListener("test",Bw,Bw),window.removeEventListener("test",Bw,!0))}catch(sN){}var Ww=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Fw){var i=r.once,o=r.capture,a=n;!Fw&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=a),e.addEventListener(t,a,Vw?r:o)}e.addEventListener(t,n,r)};var Gw=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Hw=function(e,t,n,r){return Ww(e,t,n,r),function(){Gw(e,t,n,r)}};var Kw=function(t){var n=(0,e.useRef)(t);return(0,e.useEffect)((function(){n.current=t}),[t]),n};function zw(t){var n=Kw(t);return(0,e.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var Yw=n(2391),qw=n.n(Yw);var Zw=function(e){return JS(function(e){return e&&"setState"in e?Ew.findDOMNode(e):null!=e?e:null}(e))},Xw=function(){};var Jw=function(e){return e&&("current"in e?e.current:e)};var Qw=function(t,n,r){var i=void 0===r?{}:r,o=i.disabled,a=i.clickTrigger,s=void 0===a?"click":a,c=(0,e.useRef)(!1),u=n||Xw,l=(0,e.useCallback)((function(e){var n,r,i=Jw(t);qw()(!!i,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),c.current=!i||!!((r=e).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(e)||!!iw(i,null!=(n=null==e.composedPath?void 0:e.composedPath()[0])?n:e.target)}),[t]),d=zw((function(e){c.current||u(e)})),f=zw((function(e){27===e.keyCode&&u(e)}));(0,e.useEffect)((function(){if(!o&&null!=t){var e=window.event,n=Zw(Jw(t)),r=Hw(n,s,l,!0),i=Hw(n,s,(function(t){t!==e?d(t):e=void 0})),a=Hw(n,"keyup",(function(t){t!==e?f(t):e=void 0})),c=[];return"ontouchstart"in n.documentElement&&(c=[].slice.call(n.body.children).map((function(e){return Hw(e,"mousemove",Xw)}))),function(){r(),i(),a(),c.forEach((function(e){return e()}))}}}),[t,o,s,l,d,f])},$w=function(e){var t;return"undefined"===typeof document?null:null==e?JS().body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function ek(t,n){var r=(0,e.useState)((function(){return $w(t)})),i=r[0],o=r[1];if(!i){var a=$w(t);a&&o(a)}return(0,e.useEffect)((function(){n&&i&&n(i)}),[n,i]),(0,e.useEffect)((function(){var e=$w(t);e!==i&&o(e)}),[t,i]),i}function tk(e){return void 0===e&&(e={}),Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t].name=t,e[t]}))}function nk(e){var t,n,r,i,o=e.enabled,a=e.enableEvents,s=e.placement,c=e.flip,u=e.offset,l=e.fixed,d=e.containerPadding,f=e.arrowElement,p=e.popperConfig,h=void 0===p?{}:p,v=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(h.modifiers);return(0,SE.Z)({},h,{placement:s,enabled:o,strategy:l?"fixed":h.strategy,modifiers:tk((0,SE.Z)({},v,{eventListeners:{enabled:a},preventOverflow:(0,SE.Z)({},v.preventOverflow,{options:d?(0,SE.Z)({padding:d},null==(t=v.preventOverflow)?void 0:t.options):null==(n=v.preventOverflow)?void 0:n.options}),offset:{options:(0,SE.Z)({offset:u},null==(r=v.offset)?void 0:r.options)},arrow:(0,SE.Z)({},v.arrow,{enabled:!!f,options:(0,SE.Z)({},null==(i=v.arrow)?void 0:i.options,{element:f})}),flip:(0,SE.Z)({enabled:!!c},v.flip)}))})}var rk=e.forwardRef((function(t,n){var r=t.flip,i=t.offset,o=t.placement,a=t.containerPadding,s=void 0===a?5:a,c=t.popperConfig,u=void 0===c?{}:c,l=t.transition,d=_w(),f=d[0],p=d[1],h=_w(),v=h[0],m=h[1],y=Sw(p,n),g=ek(t.container),E=ek(t.target),_=(0,e.useState)(!t.show),b=_[0],S=_[1],w=jw(E,f,nk({placement:o,enableEvents:!!t.show,containerPadding:s||5,flip:r,offset:i,arrowElement:v,popperConfig:u})),k=w.styles,T=w.attributes,R=(0,bE.Z)(w,["styles","attributes"]);t.show?b&&S(!1):t.transition||b||S(!0);var C=t.show||l&&!b;if(Qw(f,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!C)return null;var I=t.children((0,SE.Z)({},R,{show:!!t.show,props:(0,SE.Z)({},T.popper,{style:k.popper,ref:y}),arrowProps:(0,SE.Z)({},T.arrow,{style:k.arrow,ref:m})}));if(l){var O=t.onExit,A=t.onExiting,N=t.onEnter,D=t.onEntering,x=t.onEntered;I=e.createElement(l,{in:t.show,appear:!0,onExit:O,onExiting:A,onExited:function(){S(!0),t.onExited&&t.onExited.apply(t,arguments)},onEnter:N,onEntering:D,onEntered:x},I)}return g?Ew.createPortal(I,g):null}));rk.displayName="Overlay",rk.propTypes={show:Ob().bool,placement:Ob().oneOf(ww.Ct),target:Ob().any,container:Ob().any,flip:Ob().bool,children:Ob().func.isRequired,containerPadding:Ob().number,popperConfig:Ob().object,rootClose:Ob().bool,rootCloseEvent:Ob().oneOf(["click","mousedown"]),rootCloseDisabled:Ob().bool,onHide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;return e.rootClose?(i=Ob().func).isRequired.apply(i,[e].concat(n)):Ob().func.apply(Ob(),[e].concat(n))},transition:Ob().elementType,onEnter:Ob().func,onEntering:Ob().func,onEntered:Ob().func,onExit:Ob().func,onExiting:Ob().func,onExited:Ob().func};var ik=rk;var ok=function(){this.__data__=[],this.size=0};var ak=function(e,t){for(var n=e.length;n--;)if(pS(e[n][0],t))return n;return-1},sk=Array.prototype.splice;var ck=function(e){var t=this.__data__,n=ak(t,e);return!(n<0)&&(n==t.length-1?t.pop():sk.call(t,n,1),--this.size,!0)};var uk=function(e){var t=this.__data__,n=ak(t,e);return n<0?void 0:t[n][1]};var lk=function(e){return ak(this.__data__,e)>-1};var dk=function(e,t){var n=this.__data__,r=ak(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function fk(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fk.prototype.clear=ok,fk.prototype.delete=ck,fk.prototype.get=uk,fk.prototype.has=lk,fk.prototype.set=dk;var pk=fk;var hk=function(){this.__data__=new pk,this.size=0};var vk=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var mk=function(e){return this.__data__.get(e)};var yk=function(e){return this.__data__.has(e)},gk=mS["__core-js_shared__"],Ek=function(){var e=/[^.]+$/.exec(gk&&gk.keys&&gk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var _k=function(e){return!!Ek&&Ek in e},bk=Function.prototype.toString;var Sk=function(e){if(null!=e){try{return bk.call(e)}catch(sN){}try{return e+""}catch(sN){}}return""},wk=/^\[object .+?Constructor\]$/,kk=Function.prototype,Tk=Object.prototype,Rk=kk.toString,Ck=Tk.hasOwnProperty,Ik=RegExp("^"+Rk.call(Ck).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ok=function(e){return!(!CS(e)||_k(e))&&(IS(e)?Ik:wk).test(Sk(e))};var Ak=function(e,t){return null==e?void 0:e[t]};var Nk=function(e,t){var n=Ak(e,t);return Ok(n)?n:void 0},Dk=Nk(mS,"Map"),xk=Nk(Object,"create");var Pk=function(){this.__data__=xk?xk(null):{},this.size=0};var Lk=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mk=Object.prototype.hasOwnProperty;var Uk=function(e){var t=this.__data__;if(xk){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Mk.call(t,e)?t[e]:void 0},jk=Object.prototype.hasOwnProperty;var Vk=function(e){var t=this.__data__;return xk?void 0!==t[e]:jk.call(t,e)};var Fk=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xk&&void 0===t?"__lodash_hash_undefined__":t,this};function Bk(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bk.prototype.clear=Pk,Bk.prototype.delete=Lk,Bk.prototype.get=Uk,Bk.prototype.has=Vk,Bk.prototype.set=Fk;var Wk=Bk;var Gk=function(){this.size=0,this.__data__={hash:new Wk,map:new(Dk||pk),string:new Wk}};var Hk=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Kk=function(e,t){var n=e.__data__;return Hk(t)?n["string"==typeof t?"string":"hash"]:n.map};var zk=function(e){var t=Kk(this,e).delete(e);return this.size-=t?1:0,t};var Yk=function(e){return Kk(this,e).get(e)};var qk=function(e){return Kk(this,e).has(e)};var Zk=function(e,t){var n=Kk(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Xk(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xk.prototype.clear=Gk,Xk.prototype.delete=zk,Xk.prototype.get=Yk,Xk.prototype.has=qk,Xk.prototype.set=Zk;var Jk=Xk;var Qk=function(e,t){var n=this.__data__;if(n instanceof pk){var r=n.__data__;if(!Dk||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jk(r)}return n.set(e,t),this.size=n.size,this};function $k(e){var t=this.__data__=new pk(e);this.size=t.size}$k.prototype.clear=hk,$k.prototype.delete=vk,$k.prototype.get=mk,$k.prototype.has=yk,$k.prototype.set=Qk;var eT=$k;var tT=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var nT=function(e){return this.__data__.has(e)};function rT(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jk;++t<n;)this.add(e[t])}rT.prototype.add=rT.prototype.push=tT,rT.prototype.has=nT;var iT=rT;var oT=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var aT=function(e,t){return e.has(t)};var sT=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var d=-1,f=!0,p=2&n?new iT:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var h=e[d],v=t[d];if(r)var m=a?r(v,h,d,t,e,o):r(h,v,d,e,t,o);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!oT(t,(function(e,t){if(!aT(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)}))){f=!1;break}}else if(h!==v&&!i(h,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f},cT=mS.Uint8Array;var uT=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var lT=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},dT=yS?yS.prototype:void 0,fT=dT?dT.valueOf:void 0;var pT=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new cT(e),new cT(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return pS(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=uT;case"[object Set]":var c=1&r;if(s||(s=lT),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var l=sT(s(e),s(t),r,i,o,a);return a.delete(e),l;case"[object Symbol]":if(fT)return fT.call(e)==fT.call(t)}return!1};var hT=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},vT=Array.isArray;var mT=function(e,t,n){var r=t(e);return vT(e)?r:hT(r,n(e))};var yT=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var gT=function(){return[]},ET=Object.prototype.propertyIsEnumerable,_T=Object.getOwnPropertySymbols,bT=_T?function(e){return null==e?[]:(e=Object(e),yT(_T(e),(function(t){return ET.call(e,t)})))}:gT;var ST=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var wT=function(e){return jS(e)&&"[object Arguments]"==RS(e)},kT=Object.prototype,TT=kT.hasOwnProperty,RT=kT.propertyIsEnumerable,CT=wT(function(){return arguments}())?wT:function(e){return jS(e)&&TT.call(e,"callee")&&!RT.call(e,"callee")},IT=CT;var OT=function(){return!1},AT="object"==typeof exports&&exports&&!exports.nodeType&&exports,NT=AT&&"object"==typeof module&&module&&!module.nodeType&&module,DT=NT&&NT.exports===AT?mS.Buffer:void 0,xT=(DT?DT.isBuffer:void 0)||OT,PT={};PT["[object Float32Array]"]=PT["[object Float64Array]"]=PT["[object Int8Array]"]=PT["[object Int16Array]"]=PT["[object Int32Array]"]=PT["[object Uint8Array]"]=PT["[object Uint8ClampedArray]"]=PT["[object Uint16Array]"]=PT["[object Uint32Array]"]=!0,PT["[object Arguments]"]=PT["[object Array]"]=PT["[object ArrayBuffer]"]=PT["[object Boolean]"]=PT["[object DataView]"]=PT["[object Date]"]=PT["[object Error]"]=PT["[object Function]"]=PT["[object Map]"]=PT["[object Number]"]=PT["[object Object]"]=PT["[object RegExp]"]=PT["[object Set]"]=PT["[object String]"]=PT["[object WeakMap]"]=!1;var LT=function(e){return jS(e)&&OS(e.length)&&!!PT[RS(e)]};var MT=function(e){return function(t){return e(t)}},UT="object"==typeof exports&&exports&&!exports.nodeType&&exports,jT=UT&&"object"==typeof module&&module&&!module.nodeType&&module,VT=jT&&jT.exports===UT&&hS.process,FT=function(){try{var e=jT&&jT.require&&jT.require("util").types;return e||VT&&VT.binding&&VT.binding("util")}catch(sN){}}(),BT=FT&&FT.isTypedArray,WT=BT?MT(BT):LT,GT=Object.prototype.hasOwnProperty;var HT=function(e,t){var n=vT(e),r=!n&&IT(e),i=!n&&!r&&xT(e),o=!n&&!r&&!i&&WT(e),a=n||r||i||o,s=a?ST(e.length,String):[],c=s.length;for(var u in e)!t&&!GT.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||DS(u,c))||s.push(u);return s},KT=Object.prototype;var zT=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||KT)};var YT=function(e,t){return function(n){return e(t(n))}},qT=YT(Object.keys,Object),ZT=Object.prototype.hasOwnProperty;var XT=function(e){if(!zT(e))return qT(e);var t=[];for(var n in Object(e))ZT.call(e,n)&&"constructor"!=n&&t.push(n);return t};var JT=function(e){return AS(e)?HT(e):XT(e)};var QT=function(e){return mT(e,JT,bT)},$T=Object.prototype.hasOwnProperty;var eR=function(e,t,n,r,i,o){var a=1&n,s=QT(e),c=s.length;if(c!=QT(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:$T.call(t,l)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++u<c;){var v=e[l=s[u]],m=t[l];if(r)var y=a?r(m,v,l,t,e,o):r(v,m,l,e,t,o);if(!(void 0===y?v===m||i(v,m,n,r,o):y)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=e.constructor,E=t.constructor;g==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof E&&E instanceof E||(p=!1)}return o.delete(e),o.delete(t),p},tR=Nk(mS,"DataView"),nR=Nk(mS,"Promise"),rR=Nk(mS,"Set"),iR=Nk(mS,"WeakMap"),oR="[object Map]",aR="[object Promise]",sR="[object Set]",cR="[object WeakMap]",uR="[object DataView]",lR=Sk(tR),dR=Sk(Dk),fR=Sk(nR),pR=Sk(rR),hR=Sk(iR),vR=RS;(tR&&vR(new tR(new ArrayBuffer(1)))!=uR||Dk&&vR(new Dk)!=oR||nR&&vR(nR.resolve())!=aR||rR&&vR(new rR)!=sR||iR&&vR(new iR)!=cR)&&(vR=function(e){var t=RS(e),n="[object Object]"==t?e.constructor:void 0,r=n?Sk(n):"";if(r)switch(r){case lR:return uR;case dR:return oR;case fR:return aR;case pR:return sR;case hR:return cR}return t});var mR=vR,yR="[object Arguments]",gR="[object Array]",ER="[object Object]",_R=Object.prototype.hasOwnProperty;var bR=function(e,t,n,r,i,o){var a=vT(e),s=vT(t),c=a?gR:mR(e),u=s?gR:mR(t),l=(c=c==yR?ER:c)==ER,d=(u=u==yR?ER:u)==ER,f=c==u;if(f&&xT(e)){if(!xT(t))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new eT),a||WT(e)?sT(e,t,n,r,i,o):pT(e,t,c,n,r,i,o);if(!(1&n)){var p=l&&_R.call(e,"__wrapped__"),h=d&&_R.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,m=h?t.value():t;return o||(o=new eT),i(v,m,n,r,o)}}return!!f&&(o||(o=new eT),eR(e,t,n,r,i,o))};var SR=function e(t,n,r,i,o){return t===n||(null==t||null==n||!jS(t)&&!jS(n)?t!==t&&n!==n:bR(t,n,r,i,e,o))};var wR=function(e,t){return SR(e,t)};function kR(e,t){var n=ow(e);return n?n.innerHeight:t?e.clientHeight:uw(e).height}var TR,RR=Function.prototype.bind.call(Function.prototype.call,[].slice);function CR(e,t){if(!TR){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;TR=function(e,t){return r.call(e,t)}}return TR(e,t)}var IR=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var OR=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var d=new eT;if(r)var f=r(u,l,c,e,t,d);if(!(void 0===f?SR(l,u,3,r,d):f))return!1}}return!0};var AR=function(e){return e===e&&!CS(e)};var NR=function(e){for(var t=JT(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,AR(i)]}return t};var DR=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var xR=function(e){var t=NR(e);return 1==t.length&&t[0][2]?DR(t[0][0],t[0][1]):function(n){return n===e||OR(n,e,t)}},PR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LR=/^\w*$/;var MR=function(e,t){if(vT(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!VS(e))||(LR.test(e)||!PR.test(e)||null!=t&&e in Object(t))};function UR(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(UR.Cache||Jk),n}UR.Cache=Jk;var jR=UR;var VR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FR=/\\(\\)?/g,BR=function(e){var t=jR(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(VR,(function(e,n,r,i){t.push(r?i.replace(FR,"$1"):n||e)})),t}));var WR=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},GR=yS?yS.prototype:void 0,HR=GR?GR.toString:void 0;var KR=function e(t){if("string"==typeof t)return t;if(vT(t))return WR(t,e)+"";if(VS(t))return HR?HR.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var zR=function(e){return null==e?"":KR(e)};var YR=function(e,t){return vT(e)?e:MR(e,t)?[e]:BR(zR(e))};var qR=function(e){if("string"==typeof e||VS(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var ZR=function(e,t){for(var n=0,r=(t=YR(t,e)).length;null!=e&&n<r;)e=e[qR(t[n++])];return n&&n==r?e:void 0};var XR=function(e,t,n){var r=null==e?void 0:ZR(e,t);return void 0===r?n:r};var JR=function(e,t){return null!=e&&t in Object(e)};var QR=function(e,t,n){for(var r=-1,i=(t=YR(t,e)).length,o=!1;++r<i;){var a=qR(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&OS(i)&&DS(a,i)&&(vT(e)||IT(e))};var $R=function(e,t){return null!=e&&QR(e,t,JR)};var eC=function(e,t){return MR(e)&&AR(t)?DR(qR(e),t):function(n){var r=XR(n,e);return void 0===r&&r===t?$R(n,e):SR(t,r,3)}};var tC=function(e){return e};var nC=function(e){return function(t){return null==t?void 0:t[e]}};var rC=function(e){return function(t){return ZR(t,e)}};var iC=function(e){return MR(e)?nC(qR(e)):rC(e)};var oC=function(e){return"function"==typeof e?e:null==e?tC:"object"==typeof e?vT(e)?eC(e[0],e[1]):xR(e):iC(e)},aC=Math.max;var sC=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:YS(n);return i<0&&(i=aC(r+i,0)),IR(e,oC(t,3),i)},cC=Math.ceil,uC=Math.max;var lC=function(e,t,n,r){for(var i=-1,o=uC(cC((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a};var dC=function(e){return function(t,n,r){return r&&"number"!=typeof r&&xS(t,n,r)&&(n=r=void 0),t=zS(t),void 0===n?(n=t,t=0):n=zS(n),r=void 0===r?t<n?1:-1:zS(r),lC(t,n,r,e)}}(),fC=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function pC(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||fC(r)&&fC(i)))return!1;var r,i;return!0}function hC(e,t){void 0===t&&(t=pC);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}var vC=yS?yS.isConcatSpreadable:void 0;var mC=function(e){return vT(e)||IT(e)||!!(vC&&e&&e[vC])};var yC=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=mC),o||(o=[]);++a<s;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,i,o):hT(o,c):i||(o[o.length]=c)}return o};var gC=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}();var EC=function(e,t){return e&&gC(e,t,JT)};var _C=function(e,t){return function(n,r){if(null==n)return n;if(!AS(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(EC);var bC=function(e,t){var n=-1,r=AS(e)?Array(e.length):[];return _C(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};var SC=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e};var wC=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=VS(e),a=void 0!==t,s=null===t,c=t===t,u=VS(t);if(!s&&!u&&!o&&e>t||o&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0};var kC=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=wC(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index};var TC=function(e,t,n){t=t.length?WR(t,(function(e){return vT(e)?function(t){return ZR(t,1===e.length?e[0]:e)}:e})):[tC];var r=-1;t=WR(t,MT(oC));var i=bC(e,(function(e,n,i){return{criteria:WR(t,(function(t){return t(e)})),index:++r,value:e}}));return SC(i,(function(e,t){return kC(e,t,n)}))};var RC=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},CC=Math.max;var IC=function(e,t,n){return t=CC(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=CC(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),RC(e,this,s)}};var OC=function(e){return function(){return e}},AC=function(){try{var e=Nk(Object,"defineProperty");return e({},"",{}),e}catch(sN){}}(),NC=AC?function(e,t){return AC(e,"toString",{configurable:!0,enumerable:!1,value:OC(t),writable:!0})}:tC,DC=Date.now;var xC=function(e){var t=0,n=0;return function(){var r=DC(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},PC=xC(NC);var LC,MC=function(e,t){return PC(IC(e,t,tC),e+"")},UC=MC((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xS(e,t[0],t[1])?t=[]:n>2&&xS(t[0],t[1],t[2])&&(t=[t[0]]),TC(e,yC(t,1),[])}));function jC(e,t){var n=ow(e);return n?n.innerWidth:t?e.clientWidth:uw(e).width}function VC(e){if((!LC&&0!==LC||e)&&fw){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),LC=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return LC}function FC(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var BC=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var WC=function(e,t,n){"__proto__"==t&&AC?AC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},GC=Object.prototype.hasOwnProperty;var HC=function(e,t,n){var r=e[t];GC.call(e,t)&&pS(r,n)&&(void 0!==n||t in e)||WC(e,t,n)};var KC=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?WC(n,s,c):HC(n,s,c)}return n};var zC=function(e,t){return e&&KC(t,JT(t),e)};var YC=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},qC=Object.prototype.hasOwnProperty;var ZC=function(e){if(!CS(e))return YC(e);var t=zT(e),n=[];for(var r in e)("constructor"!=r||!t&&qC.call(e,r))&&n.push(r);return n};var XC=function(e){return AS(e)?HT(e,!0):ZC(e)};var JC=function(e,t){return e&&KC(t,XC(t),e)},QC="object"==typeof exports&&exports&&!exports.nodeType&&exports,$C=QC&&"object"==typeof module&&module&&!module.nodeType&&module,eI=$C&&$C.exports===QC?mS.Buffer:void 0,tI=eI?eI.allocUnsafe:void 0;var nI=function(e,t){if(t)return e.slice();var n=e.length,r=tI?tI(n):new e.constructor(n);return e.copy(r),r};var rI=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var iI=function(e,t){return KC(e,bT(e),t)},oI=YT(Object.getPrototypeOf,Object),aI=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)hT(t,bT(e)),e=oI(e);return t}:gT;var sI=function(e,t){return KC(e,aI(e),t)};var cI=function(e){return mT(e,XC,aI)},uI=Object.prototype.hasOwnProperty;var lI=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&uI.call(e,"index")&&(n.index=e.index,n.input=e.input),n};var dI=function(e){var t=new e.constructor(e.byteLength);return new cT(t).set(new cT(e)),t};var fI=function(e,t){var n=t?dI(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},pI=/\w*$/;var hI=function(e){var t=new e.constructor(e.source,pI.exec(e));return t.lastIndex=e.lastIndex,t},vI=yS?yS.prototype:void 0,mI=vI?vI.valueOf:void 0;var yI=function(e){return mI?Object(mI.call(e)):{}};var gI=function(e,t){var n=t?dI(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var EI=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return dI(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return fI(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return gI(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return hI(e);case"[object Symbol]":return yI(e)}},_I=Object.create,bI=function(){function e(){}return function(t){if(!CS(t))return{};if(_I)return _I(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var SI=function(e){return"function"!=typeof e.constructor||zT(e)?{}:bI(oI(e))};var wI=function(e){return jS(e)&&"[object Map]"==mR(e)},kI=FT&&FT.isMap,TI=kI?MT(kI):wI;var RI=function(e){return jS(e)&&"[object Set]"==mR(e)},CI=FT&&FT.isSet,II=CI?MT(CI):RI,OI="[object Arguments]",AI="[object Function]",NI="[object Object]",DI={};DI[OI]=DI["[object Array]"]=DI["[object ArrayBuffer]"]=DI["[object DataView]"]=DI["[object Boolean]"]=DI["[object Date]"]=DI["[object Float32Array]"]=DI["[object Float64Array]"]=DI["[object Int8Array]"]=DI["[object Int16Array]"]=DI["[object Int32Array]"]=DI["[object Map]"]=DI["[object Number]"]=DI[NI]=DI["[object RegExp]"]=DI["[object Set]"]=DI["[object String]"]=DI["[object Symbol]"]=DI["[object Uint8Array]"]=DI["[object Uint8ClampedArray]"]=DI["[object Uint16Array]"]=DI["[object Uint32Array]"]=!0,DI["[object Error]"]=DI[AI]=DI["[object WeakMap]"]=!1;var xI=function e(t,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!CS(t))return t;var d=vT(t);if(d){if(s=lI(t),!c)return rI(t,s)}else{var f=mR(t),p=f==AI||"[object GeneratorFunction]"==f;if(xT(t))return nI(t,c);if(f==NI||f==OI||p&&!o){if(s=u||p?{}:SI(t),!c)return u?sI(t,JC(s,t)):iI(t,zC(s,t))}else{if(!DI[f])return o?t:{};s=EI(t,f,c)}}a||(a=new eT);var h=a.get(t);if(h)return h;a.set(t,s),II(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):TI(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var v=d?void 0:(l?u?cI:QT:u?XC:JT)(t);return BC(v||t,(function(i,o){v&&(i=t[o=i]),HC(s,o,e(i,n,r,o,t,a))})),s};var PI=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var LI=function(e,t){return t.length<2?e:ZR(e,fS(t,0,-1))};var MI=function(e,t){return t=YR(t,e),null==(e=LI(e,t))||delete e[qR(PI(t))]},UI=Function.prototype,jI=Object.prototype,VI=UI.toString,FI=jI.hasOwnProperty,BI=VI.call(Object);var WI=function(e){if(!jS(e)||"[object Object]"!=RS(e))return!1;var t=oI(e);if(null===t)return!0;var n=FI.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&VI.call(n)==BI};var GI=function(e){return WI(e)?void 0:e};var HI=function(e){return(null==e?0:e.length)?yC(e,1):[]};var KI=function(e){return PC(IC(e,void 0,HI),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=WR(t,(function(t){return t=YR(t,e),r||(r=t.length>1),t})),KC(e,cI(e),n),r&&(n=xI(n,7,GI));for(var i=t.length;i--;)MI(n,t[i]);return n})),zI=Object.prototype,YI=zI.hasOwnProperty,qI=MC((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&xS(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=XC(o),s=-1,c=a.length;++s<c;){var u=a[s],l=e[u];(void 0===l||pS(l,zI[u])&&!YI.call(e,u))&&(e[u]=o[u])}return e}));var ZI=function(e,t,n){var r=vT(e),i=r||xT(e)||WT(e);if(t=oC(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:CS(e)&&IS(o)?bI(oI(e)):{}}return(i?BC:EC)(e,(function(e,r,i){return t(n,e,r,i)})),n};var XI=function(e,t){var n={};return t=oC(t,3),EC(e,(function(e,r,i){WC(n,r,t(e,r,i))})),n};n(6818),n(4253),n(3320),n(5898),n(9893),n(9026),n(3027);function JI(e){return e.children}var QI={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},$I={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},eO=Object.keys($I).map((function(e){return $I[e]}));function tO(e,t){e&&e.apply(null,[].concat(t))}Ob().oneOfType([Ob().string,Ob().func]),Ob().any,Ob().func,Ob().oneOfType([Ob().arrayOf(Ob().oneOf(eO)),Ob().objectOf((function(e,t){if(-1!==eO.indexOf(t)&&"boolean"===typeof e[t])return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Ob().elementType.apply(Ob(),[e,t].concat(r))}))]),Ob().oneOfType([Ob().oneOf(["overlap","no-overlap"]),Ob().func]);var nO={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function rO(e,t){var n=Kb(e,"month");return Kb(n,"week",t.startOfWeek())}function iO(e,t){var n=zb(e,"month");return zb(n,"week",t.startOfWeek())}function oO(e,t){for(var n=rO(e,t),r=iO(e,t),i=[];Qb(n,r,"day");)i.push(n),n=Gb(n,1,"day");return i}function aO(e,t){var n=Kb(e,t);return Yb(n,e)?n:Gb(n,1,t)}function sO(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",r=e,i=[];Qb(r,t,n);)i.push(r),r=Gb(r,1,n);return i}function cO(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=Kb(e,"day"),e=oS(e,oS(t)),e=iS(e,iS(t)),e=rS(e,rS(t)),nS(e,nS(t)))}function uO(e){return 0===oS(e)&&0===iS(e)&&0===rS(e)&&0===nS(e)}function lO(e,t,n){return n&&"milliseconds"!==n?Math.round(Math.abs(+Kb(e,n)/nO[n]-+Kb(t,n)/nO[n])):Math.abs(+e-+t)}var dO=Ob().oneOfType([Ob().string,Ob().func]);function fO(e,t,n,r,i){var o="function"===typeof r?r(n,i,e):t.call(e,n,r,i);return bb()(null==o||"string"===typeof o,"`localizer format(..)` must return a string, null, or undefined"),o}function pO(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function hO(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function vO(e,t){return lO(e,t,"minutes")+hO(e,t)}function mO(e){var t=Kb(e,"day");return lO(t,e,"minutes")+hO(t,e)}function yO(e,t){return Jb(e,t,"day")}function gO(e,t,n){return Yb(e,t,"minutes")?Xb(t,n,"minutes"):Zb(t,n,"minutes")}function EO(e){var t=e.evtA,n=t.start,r=t.end,i=t.allDay,o=e.evtB,a=o.start,s=o.end,c=o.allDay,u=+Kb(n,"day")-+Kb(a,"day"),l=lO(n,aO(r,"day"),"day"),d=lO(a,aO(s,"day"),"day");return u||Math.max(d,1)-Math.max(l,1)||!!c-!!i||+n-+a||+r-+s}function _O(e){var t=e.event,n=t.start,r=t.end,i=e.range,o=i.start,a=i.end,s=Kb(n,"day"),c=Qb(s,a,"day"),u=qb(s,r,"minutes")?Zb(r,o,"minutes"):Xb(r,o,"minutes");return c&&u}function bO(e,t){return Yb(e,t,"day")}function SO(e,t){return uO(e)&&uO(t)}var wO=c((function e(t){var n=this;o(this,e),bb()("function"===typeof t.format,"date localizer `format(..)` must be a function"),bb()("function"===typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||dO,this.formats=t.formats,this.format=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return fO.apply(void 0,[n,t.format].concat(r))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||cO,this.inRange=t.inRange||tS,this.lt=t.lt||Jb,this.lte=t.lte||Qb,this.gt=t.gt||Zb,this.gte=t.gte||Xb,this.eq=t.eq||Yb,this.neq=t.neq||qb,this.startOf=t.startOf||Kb,this.endOf=t.endOf||zb,this.add=t.add||Gb,this.range=t.range||sO,this.diff=t.diff||lO,this.ceil=t.ceil||aO,this.min=t.min||$b,this.max=t.max||eS,this.minutes=t.minutes||iS,this.firstVisibleDay=t.firstVisibleDay||rO,this.lastVisibleDay=t.lastVisibleDay||iO,this.visibleDays=t.visibleDays||oO,this.getSlotDate=t.getSlotDate||pO,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||hO,this.getTotalMin=t.getTotalMin||vO,this.getMinutesFromMidnight=t.getMinutesFromMidnight||mO,this.continuesPrior=t.continuesPrior||yO,this.continuesAfter=t.continuesAfter||gO,this.sortEvents=t.sortEvents||EO,this.inEventRange=t.inEventRange||_O,this.isSameDate=t.isSameDate||bO,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||SO,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0}));function kO(e,t,n,r){var i=jt(jt({},e.formats),n);return jt(jt({},e),{},{messages:r,startOfWeek:function(){return e.startOfWeek(t)},format:function(n,r){return e.format(n,i[r]||r,t)}})}var TO={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};var RO=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],CO=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this.props,n=t.style,r=t.className,i=t.event,o=t.selected,a=t.isAllDay,s=t.onSelect,c=t.onDoubleClick,u=t.onKeyPress,l=t.localizer,d=t.continuesPrior,f=t.continuesAfter,p=t.accessors,h=t.getters,v=t.children,m=t.components,y=m.event,g=m.eventWrapper,E=t.slotStart,_=t.slotEnd,b=Eb(t,RO);delete b.resizable;var S=p.title(i),w=p.tooltip(i),k=p.end(i),T=p.start(i),R=p.allDay(i),C=a||R||l.diff(T,l.ceil(k,"day"),"day")>1,I=h.eventProp(i,T,k,o),O=e.createElement("div",{className:"rbc-event-content",title:w||void 0},y?e.createElement(y,{event:i,continuesPrior:d,continuesAfter:f,title:S,isAllDay:R,localizer:l,slotStart:E,slotEnd:_}):S);return e.createElement(g,Object.assign({},this.props,{type:"date"}),e.createElement("div",Object.assign({},b,{tabIndex:0,style:jt(jt({},I.style),n),className:(0,wE.Z)("rbc-event",r,I.className,{"rbc-selected":o,"rbc-event-allday":C,"rbc-event-continues-prior":d,"rbc-event-continues-after":f}),onClick:function(e){return s&&s(i,e)},onDoubleClick:function(e){return c&&c(i,e)},onKeyPress:function(e){return u&&u(i,e)}}),"function"===typeof v?v(O):O))}}]),r}(e.Component);function IO(e,t){return!(!e||null==t)&&wR(e,t)}function OO(e,t){return(e.right-e.left)/t}function AO(e,t,n,r){var i=OO(e,r);return n?r-1-Math.floor((t-e.left)/i):Math.floor((t-e.left)/i)}function NO(t){var n=t.containerRef,r=t.accessors,i=t.getters,o=t.selected,a=t.components,s=t.localizer,c=t.position,u=t.show,l=t.events,d=t.slotStart,f=t.slotEnd,p=t.onSelect,h=t.onDoubleClick,v=t.onKeyPress,m=t.handleDragStart,y=t.popperRef,g=t.target,E=t.offset;!function(t){var n=t.ref,r=t.callback;(0,e.useEffect)((function(){var e=function(e){n.current&&!n.current.contains(e.target)&&r()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[n,r])}({ref:y,callback:u}),(0,e.useLayoutEffect)((function(){var e=function(e){var t=e.target,n=e.offset,r=e.container,i=e.box,o=uw(t),a=o.top,s=o.left,c=o.width,u=o.height,l=uw(r),d=l.top,f=l.left,p=l.width,h=l.height,v=uw(i),m=v.width,y=v.height,g=d+h,E=f+p,_=a+y,b=s+m,S=n.x,w=n.y;return{topOffset:_>g?a-y-w:a+w+u,leftOffset:b>E?s+S-m+c:s+S}}({target:g,offset:E,container:n.current,box:y.current}),t=e.topOffset,r=e.leftOffset;y.current.style.top="".concat(t,"px"),y.current.style.left="".concat(r,"px")}),[E.x,E.y,g]);var _=c.width,b={minWidth:_+_/2};return e.createElement("div",{style:b,className:"rbc-overlay",ref:y},e.createElement("div",{className:"rbc-overlay-header"},s.format(d,"dayHeaderFormat")),l.map((function(t,n){return e.createElement(CO,{key:n,type:"popup",localizer:s,event:t,getters:i,onSelect:p,accessors:r,components:a,onDoubleClick:h,onKeyPress:v,continuesPrior:s.lt(r.end(t),d,"day"),continuesAfter:s.gte(r.start(t),f,"day"),slotStart:d,slotEnd:f,selected:IO(t,o),draggable:!0,onDragStart:function(){return m(t)},onDragEnd:function(){return u()}})})))}var DO=e.forwardRef((function(t,n){return e.createElement(NO,Object.assign({},t,{popperRef:n}))}));function xO(t){var n=t.containerRef,r=t.popupOffset,i=void 0===r?5:r,o=t.overlay,a=t.accessors,s=t.localizer,c=t.components,u=t.getters,l=t.selected,d=t.handleSelectEvent,f=t.handleDoubleClickEvent,p=t.handleKeyPressEvent,h=t.handleDragStart,v=t.onHide,m=t.overlayDisplay,y=(0,e.useRef)(null);if(!o.position)return null;var g=i;isNaN(i)||(g={x:i,y:i});var E=o.position,_=o.events,b=o.date,S=o.end;return e.createElement(ik,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:o.target},(function(t){var r=t.props;return e.createElement(DO,Object.assign({},r,{containerRef:n,ref:y,target:o.target,offset:g,accessors:a,getters:u,selected:l,components:c,localizer:s,position:E,show:m,events:_,slotStart:b,slotEnd:S,onSelect:d,onDoubleClick:f,onKeyPress:p,handleDragStart:h}))}))}DO.propTypes={accessors:Ob().object.isRequired,getters:Ob().object.isRequired,selected:Ob().object,components:Ob().object.isRequired,localizer:Ob().object.isRequired,position:Ob().object.isRequired,show:Ob().func.isRequired,events:Ob().array.isRequired,slotStart:Ob().instanceOf(Date).isRequired,slotEnd:Ob().instanceOf(Date),onSelect:Ob().func,onDoubleClick:Ob().func,onKeyPress:Ob().func,handleDragStart:Ob().func,style:Ob().object,offset:Ob().shape({x:Ob().number,y:Ob().number})};var PO=e.forwardRef((function(t,n){return e.createElement(xO,Object.assign({},t,{containerRef:n}))}));function LO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return Hw(n,e,t,{passive:!1})}function MO(e,t){var n=t.clientX,r=t.clientY;return function(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(CR(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}(document.elementFromPoint(n,r),".rbc-event",e)}function UO(e,t){return!!MO(e,t)}function jO(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}PO.propTypes={popupOffset:Ob().oneOfType([Ob().number,Ob().shape({x:Ob().number,y:Ob().number})]),overlay:Ob().shape({position:Ob().object,events:Ob().array,date:Ob().instanceOf(Date),end:Ob().instanceOf(Date)}),accessors:Ob().object.isRequired,localizer:Ob().object.isRequired,components:Ob().object.isRequired,getters:Ob().object.isRequired,selected:Ob().object,handleSelectEvent:Ob().func,handleDoubleClickEvent:Ob().func,handleKeyPressEvent:Ob().func,handleDragStart:Ob().func,onHide:Ob().func,overlayDisplay:Ob().func};var VO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.global,i=void 0!==r&&r,a=n.longPressThreshold,s=void 0===a?250:a,c=n.validContainers,u=void 0===c?[]:c;o(this,e),this.isDetached=!1,this.container=t,this.globalMouse=!t||i,this.longPressThreshold=s,this.validContainers=u,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=LO("touchmove",(function(){}),window),this._removeKeyDownListener=LO("keydown",this._keyListener),this._removeKeyUpListener=LO("keyup",this._keyListener),this._removeDropFromOutsideListener=LO("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=LO("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return c(e,[{key:"on",value:function(e,t){var n=this._listeners[e]||(this._listeners[e]=[]);return n.push(t),{remove:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;return(this._listeners[e]||[]).forEach((function(e){void 0===i&&(i=e.apply(void 0,n))})),i}},{key:"teardown",value:function(){this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&FO(t,BO(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var n=this,r=null,i=null,o=null,a=function(t){r=setTimeout((function(){c(),e(t)}),n.longPressThreshold),i=LO("touchmove",(function(){return c()})),o=LO("touchend",(function(){return c()}))},s=LO("touchstart",a),c=function(){r&&clearTimeout(r),i&&i(),o&&o(),r=null,i=null,o=null};return t&&a(t),function(){c(),s()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=LO("mousedown",(function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=LO("mousedown",e._handleInitialEvent)})),n=LO("touchstart",(function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)}));this._removeInitialEventListener=function(){t(),n()}}},{key:"_dropFromOutsideListener",value:function(e){var t=jO(e),n=t.pageX,r=t.pageY,i=t.clientX,o=t.clientY;this.emit("dropFromOutside",{x:n,y:r,clientX:i,clientY:o}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=jO(e),n=t.pageX,r=t.pageY,i=t.clientX,o=t.clientY;this.emit("dragOverFromOutside",{x:n,y:r,clientX:i,clientY:o}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(!this.isDetached){var t,n=jO(e),r=n.clientX,i=n.clientY,o=n.pageX,a=n.pageY,s=this.container();if(3!==e.which&&2!==e.button&&function(e,t,n){return!e||iw(e,document.elementFromPoint(t,n))}(s,r,i)){if(!this.globalMouse&&s&&!iw(s,e.target)){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"object"!==(0,p.Z)(e)&&(e={top:e,left:e,right:e,bottom:e});return e}(0),u=c.top,l=c.left,d=c.bottom,f=c.right;if(!FO({top:(t=BO(s)).top-u,left:t.left-l,bottom:t.bottom+d,right:t.right+f},{top:a,left:o}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:o,y:a,clientX:r,clientY:i}))switch(e.type){case"mousedown":this._removeEndListener=LO("mouseup",this._handleTerminatingEvent),this._onEscListener=LO("keydown",this._handleTerminatingEvent),this._removeMoveListener=LO("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=LO("touchend",this._handleTerminatingEvent),this._removeMoveListener=LO("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,n=this.validContainers;return!(n&&n.length&&t)||n.some((function(e){return!!t.closest(e)}))}},{key:"_handleTerminatingEvent",value:function(e){var t=jO(e),n=t.pageX,r=t.pageY;if(this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._initialEventData){var i=!this.container||iw(this.container(),e.target),o=this._isWithinValidContainer(e),a=this._selectRect,s=this.isClick(n,r);return this._initialEventData=null,"Escape"!==e.key&&o?s&&i?this._handleClickEvent(e):s?this.emit("reset"):this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=jO(e),n=t.pageX,r=t.pageY,i=t.clientX,o=t.clientY,a=(new Date).getTime();return this._lastClickData&&a-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:r,clientX:i,clientY:o})):(this._lastClickData={timestamp:a},this.emit("click",{x:n,y:r,clientX:i,clientY:o}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,n=t.x,r=t.y,i=jO(e),o=i.pageX,a=i.pageY,s=Math.abs(n-o),c=Math.abs(r-a),u=Math.min(o,n),l=Math.min(a,r),d=this.selecting;(!this.isClick(o,a)||d||s||c)&&(this.selecting=!0,this._selectRect={top:l,left:u,x:o,y:a,right:u+s,bottom:l+c},d||this.emit("selectStart",this._initialEventData),this.isClick(o,a)||this.emit("selecting",this._selectRect),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var n=this._initialEventData,r=n.x,i=n.y;return!n.isTouch&&Math.abs(e-r)<=5&&Math.abs(t-i)<=5}}]),e}();function FO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=BO(e),i=r.top,o=r.left,a=r.right,s=void 0===a?o:a,c=r.bottom,u=void 0===c?i:c,l=BO(t),d=l.top,f=l.left,p=l.right,h=void 0===p?f:p,v=l.bottom;return!(u-n<d||i+n>(void 0===v?d:v)||s-n<f||o+n>h)}function BO(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+WO("left"),r=t.top+WO("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function WO(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var GO=function(t){l(r,t);var n=v(r);function r(t,i){var a;return o(this,r),(a=n.call(this,t,i)).state={selecting:!1},a.containerRef=(0,e.createRef)(),a}return c(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var t=this.props,n=t.range,r=t.getNow,i=t.getters,o=t.date,a=t.components.dateCellWrapper,s=t.localizer,c=this.state,u=c.selecting,l=c.startIdx,d=c.endIdx,f=r();return e.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},n.map((function(t,r){var c=u&&r>=l&&r<=d,p=i.dayProp(t),h=p.className,v=p.style;return e.createElement(a,{key:r,value:t,range:n},e.createElement("div",{style:v,className:(0,wE.Z)("rbc-day-bg",h,c&&"rbc-selected-cell",s.isSameDate(t,f)&&"rbc-today",o&&s.neq(o,t,"month")&&"rbc-off-range-bg")}))})))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,n=this._selector=new VO(this.props.container,{longPressThreshold:this.props.longPressThreshold}),r=function(n,r){if(!UO(t,n)){var i=BO(t),o=e.props,a=o.range,s=o.rtl;if(function(e,t){var n=t.x,r=t.y;return r>=e.top&&r<=e.bottom&&n>=e.left&&n<=e.right}(i,n)){var c=AO(i,n.x,s,a.length);e._selectSlot({startIdx:c,endIdx:c,action:r,box:n})}}e._initial={},e.setState({selecting:!1})};n.on("selecting",(function(r){var i=e.props,o=i.range,a=i.rtl,s=-1,c=-1;if(e.state.selecting||(tO(e.props.onSelectStart,[r]),e._initial={x:r.x,y:r.y}),n.isSelected(t)){var u=BO(t),l=function(e,t,n,r,i){var o=-1,a=-1,s=r-1,c=OO(t,r),u=AO(t,n.x,i,r),l=t.top<n.y&&t.bottom>n.y,d=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,p=t.top>e.y;return n.top<t.top&&n.bottom>t.bottom&&(o=0,a=s),l&&(p?(o=0,a=u):f&&(o=u,a=s)),d&&(o=a=i?s-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),l?u<o?o=u:a=u:e.y<n.y?a=s:o=0),{startIdx:o,endIdx:a}}(e._initial,u,r,o.length,a);s=l.startIdx,c=l.endIdx}e.setState({selecting:!0,startIdx:s,endIdx:c})})),n.on("beforeSelect",(function(t){if("ignoreEvents"===e.props.selectable)return!UO(e.containerRef.current,t)})),n.on("click",(function(e){return r(e,"click")})),n.on("doubleClick",(function(e){return r(e,"doubleClick")})),n.on("select",(function(t){e._selectSlot(jt(jt({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),tO(e.props.onSelectEnd,[e.state])}))}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,n=e.startIdx,r=e.action,i=e.bounds,o=e.box;-1!==t&&-1!==n&&this.props.onSelectSlot&&this.props.onSelectSlot({start:n,end:t,action:r,bounds:i,box:o,resourceId:this.props.resourceId})}}]),r}(e.Component),HO=(Ob().object.isRequired,Ob().object,Ob().bool,Ob().object.isRequired,Ob().object.isRequired,Ob().object.isRequired,Ob().object.isRequired,Ob().func,Ob().func,Ob().func,{segments:[],selected:{}}),KO=function(t,n){var r=t.selected;t.isAllDay;var i=t.accessors,o=t.getters,a=t.onSelect,s=t.onDoubleClick,c=t.onKeyPress,u=t.localizer,l=t.slotMetrics,d=t.components,f=t.resizable,p=l.continuesPrior(n),h=l.continuesAfter(n);return e.createElement(CO,{event:n,getters:o,localizer:u,accessors:i,components:d,onSelect:a,onDoubleClick:s,onKeyPress:c,continuesPrior:p,continuesAfter:h,slotStart:l.first,slotEnd:l.last,selected:IO(n,r),resizable:f})},zO=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",o=Math.abs(n)/t*100+"%";return e.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:o,flexBasis:o,maxWidth:o}},i)},YO=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this,n=this.props,r=n.segments,i=n.slotMetrics.slots,o=n.className,a=1;return e.createElement("div",{className:(0,wE.Z)(o,"rbc-row")},r.reduce((function(e,n,r){var o=n.event,s=n.left,c=n.right,u=n.span,l="_lvl_"+r,d=s-a,f=KO(t.props,o);return d&&e.push(zO(i,d,"".concat(l,"_gap"))),e.push(zO(i,u,l,f)),a=c+1,e}),[]))}}]),r}(e.Component);function qO(e){var t=e.dateRange,n=e.unit,r=void 0===n?"day":n,i=e.localizer;return{first:t[0],last:i.add(t[t.length-1],1,r)}}function ZO(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,o=[],a=[];for(t=0;t<e.length;t++){for(r=e[t],n=0;n<o.length&&JO(r,o[n]);n++);n>=i?a.push(r):(o[n]||(o[n]=[])).push(r)}for(t=0;t<o.length;t++)o[t].sort((function(e,t){return e.left-t.left}));return{levels:o,extra:a}}function XO(e,t,n,r,i){var o={start:r.start(e),end:r.end(e)},a={start:t,end:n};return i.inEventRange({event:o,range:a})}function JO(e,t){return t.some((function(t){return t.left<=e.right&&t.right>=e.left}))}function QO(e,t,n,r){var i={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},o={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:i,evtB:o})}YO.defaultProps=jt({},HO);var $O=function(e,t){return e.left<=t&&e.right>=t},eA=function(e,t){return e.filter((function(e){return $O(e,t)})).length},tA=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){for(var t=this.props,n=t.segments,r=t.slotMetrics.slots,i=ZO(n).levels[0],o=1,a=1,s=[];o<=r;){var c="_lvl_"+o,u=i.filter((function(e){return $O(e,o)}))[0]||{},l=u.event,d=u.left,f=u.right,p=u.span;if(l){var h=Math.max(0,d-a);if(this.canRenderSlotEvent(d,p)){var v=KO(this.props,l);h&&s.push(zO(r,h,c+"_gap")),s.push(zO(r,p,c,v)),a=o=f+1}else h&&s.push(zO(r,h,c+"_gap")),s.push(zO(r,1,c,this.renderShowMore(n,o))),a=o+=1}else o++}return e.createElement("div",{className:"rbc-row"},s)}},{key:"canRenderSlotEvent",value:function(e,t){var n=this.props.segments;return dC(e,e+t).every((function(e){return 1===eA(n,e)}))}},{key:"renderShowMore",value:function(t,n){var r=this,i=this.props.localizer,o=eA(t,n);return!!o&&e.createElement("button",{type:"button",key:"sm_"+n,className:(0,wE.Z)("rbc-button-link","rbc-show-more"),onClick:function(e){return r.showMore(n,e)}},i.messages.showMore(o))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}]),r}(e.Component);tA.defaultProps=jt({},HO);var nA=function(t){var n=t.children;return e.createElement("div",{className:"rbc-row-content-scroll-container"},n)},rA=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function iA(){return hC((function(e){for(var t=e.range,n=e.events,r=e.maxRows,i=e.minRows,o=e.accessors,a=e.localizer,s=qO({dateRange:t,localizer:a}),c=s.first,u=s.last,l=n.map((function(e){return function(e,t,n,r){var i=qO({dateRange:t,localizer:r}),o=i.first,a=i.last,s=r.diff(o,a,"day"),c=r.max(r.startOf(n.start(e),"day"),o),u=r.min(r.ceil(n.end(e),"day"),a),l=sC(t,(function(e){return r.isSameDate(e,c)})),d=r.diff(c,u,"day");return d=Math.min(d,s),{event:e,span:d=Math.max(d-r.segmentOffset,1),left:l+1,right:Math.max(l+d,1)}}(e,t,o,a)})),d=ZO(l,Math.max(r-1,1)),f=d.levels,p=d.extra;f.length<i;)f.push([]);return{first:c,last:u,levels:f,extra:p,range:t,slots:t.length,clone:function(t){return iA()(jt(jt({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find((function(t){return a.isSameDate(t,e)}))},getEventsForSlot:function(e){return l.filter((function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)})).map((function(e){return e.event}))},continuesPrior:function(e){return a.continuesPrior(o.start(e),c)},continuesAfter:function(e){var t=o.start(e),n=o.end(e);return a.continuesAfter(t,n,u)}}}),rA)}var oA=function(t){l(r,t);var n=v(r);function r(){var t;o(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(t=n.call.apply(n,[this].concat(a))).handleSelectSlot=function(e){var n=t.props,r=n.range;(0,n.onSelectSlot)(r.slice(e.start,e.end+1),e)},t.handleShowMore=function(e,n){var r,i,o,a=t.props,s=a.range,c=a.onShowMore,u=t.slotMetrics(t.props),l=(r=t.containerRef.current,i=".rbc-row-bg",RR(r.querySelectorAll(i)))[0];l&&(o=l.children[e-1]),c(u.getEventsForSlot(e),s[e-1],o,e,n)},t.getContainer=function(){var e=t.props.container;return e?e():t.containerRef.current},t.renderHeadingCell=function(e,n){var r=t.props,i=r.renderHeader,o=r.getNow,a=r.localizer;return i({date:e,key:"header_".concat(n),className:(0,wE.Z)("rbc-date-cell",a.isSameDate(e,o())&&"rbc-now")})},t.renderDummy=function(){var n=t.props,r=n.className,i=n.range,o=n.renderHeader,a=n.showAllEvents;return e.createElement("div",{className:r,ref:t.containerRef},e.createElement("div",{className:(0,wE.Z)("rbc-row-content",a&&"rbc-row-content-scrollable")},o&&e.createElement("div",{className:"rbc-row",ref:t.headingRowRef},i.map(t.renderHeadingCell)),e.createElement("div",{className:"rbc-row",ref:t.eventRowRef},e.createElement("div",{className:"rbc-row-segment"},e.createElement("div",{className:"rbc-event"},e.createElement("div",{className:"rbc-event-content"},"\xa0"))))))},t.containerRef=(0,e.createRef)(),t.headingRowRef=(0,e.createRef)(),t.eventRowRef=(0,e.createRef)(),t.slotMetrics=iA(),t}return c(r,[{key:"getRowLimit",value:function(){var e,t=kR(this.eventRowRef.current),n=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?kR(this.headingRowRef.current):0,r=kR(this.containerRef.current)-n;return Math.max(Math.floor(r/t),1)}},{key:"render",value:function(){var t=this.props,n=t.date,r=t.rtl,i=t.range,o=t.className,a=t.selected,s=t.selectable,c=t.renderForMeasure,u=t.accessors,l=t.getters,d=t.components,f=t.getNow,p=t.renderHeader,h=t.onSelect,v=t.localizer,m=t.onSelectStart,y=t.onSelectEnd,g=t.onDoubleClick,E=t.onKeyPress,_=t.resourceId,b=t.longPressThreshold,S=t.isAllDay,w=t.resizable,k=t.showAllEvents;if(c)return this.renderDummy();var T=this.slotMetrics(this.props),R=T.levels,C=T.extra,I=k?nA:JI,O=d.weekWrapper,A={selected:a,accessors:u,getters:l,localizer:v,components:d,onSelect:h,onDoubleClick:g,onKeyPress:E,resourceId:_,slotMetrics:T,resizable:w};return e.createElement("div",{className:o,role:"rowgroup",ref:this.containerRef},e.createElement(GO,{localizer:v,date:n,getNow:f,rtl:r,range:i,selectable:s,container:this.getContainer,getters:l,onSelectStart:m,onSelectEnd:y,onSelectSlot:this.handleSelectSlot,components:d,longPressThreshold:b,resourceId:_}),e.createElement("div",{className:(0,wE.Z)("rbc-row-content",k&&"rbc-row-content-scrollable"),role:"row"},p&&e.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},i.map(this.renderHeadingCell)),e.createElement(I,null,e.createElement(O,Object.assign({isAllDay:S},A),R.map((function(t,n){return e.createElement(YO,Object.assign({key:n,segments:t},A))})),!!C.length&&e.createElement(tA,Object.assign({segments:C,onShowMore:this.handleShowMore},A))))))}}]),r}(e.Component);oA.defaultProps={minRows:0,maxRows:1/0};var aA=function(t){var n=t.label;return e.createElement("span",{role:"columnheader","aria-sort":"none"},n)},sA=function(t){var n=t.label,r=t.drilldownView,i=t.onDrillDown;return r?e.createElement("button",{type:"button",className:"rbc-button-link",onClick:i,role:"cell"},n):e.createElement("span",null,n)},cA=["date","className"],uA=function(t){l(r,t);var n=v(r);function r(){var t;o(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(t=n.call.apply(n,[this].concat(s))).getContainer=function(){return t.containerRef.current},t.renderWeek=function(n,r){var o=t.props,a=o.events,s=o.components,c=o.selectable,u=o.getNow,l=o.selected,d=o.date,f=o.localizer,p=o.longPressThreshold,h=o.accessors,v=o.getters,m=o.showAllEvents,y=t.state,g=y.needLimitMeasure,E=y.rowLimit,_=function(e,t,n,r,i){return e.filter((function(e){return XO(e,t,n,r,i)}))}((0,i.Z)(a),n[0],n[n.length-1],h,f);return _.sort((function(e,t){return QO(e,t,h,f)})),e.createElement(oA,{key:r,ref:0===r?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:u,date:d,range:n,events:_,maxRows:m?1/0:E,selected:l,selectable:c,components:s,accessors:h,getters:v,localizer:f,renderHeader:t.readerDateHeading,renderForMeasure:g,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:p,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:m})},t.readerDateHeading=function(n){var r=n.date,i=n.className,o=Eb(n,cA),a=t.props,s=a.date,c=a.getDrilldownView,u=a.localizer,l=u.neq(r,s,"month"),d=u.isSameDate(r,s),f=c(r),p=u.format(r,"dateFormat"),h=t.props.components.dateHeader||sA;return e.createElement("div",Object.assign({},o,{className:(0,wE.Z)(i,l&&"rbc-off-range",d&&"rbc-current"),role:"cell"}),e.createElement(h,{label:p,date:r,drilldownView:f,isOffRange:l,onDrillDown:function(e){return t.handleHeadingClick(r,f,e)}}))},t.handleSelectSlot=function(e,n){t._pendingSelection=t._pendingSelection.concat(e),clearTimeout(t._selectTimer),t._selectTimer=setTimeout((function(){return t.selectDates(n)}))},t.handleHeadingClick=function(e,n,r){r.preventDefault(),t.clearSelection(),tO(t.props.onDrillDown,[e,n])},t.handleSelectEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onSelectEvent,n)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onDoubleClickEvent,n)},t.handleKeyPressEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onKeyPressEvent,n)},t.handleShowMore=function(e,n,r,i,o){var a=t.props,s=a.popup,c=a.onDrillDown,u=a.onShowMore,l=a.getDrilldownView,d=a.doShowMoreDrillDown;if(t.clearSelection(),s){var f=dw(r,t.containerRef.current);t.setState({overlay:{date:n,events:e,position:f,target:o}})}else d&&tO(c,[n,l(n)||$I.DAY]);tO(u,[e,n,i])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=(0,e.createRef)(),t.slotRowRef=(0,e.createRef)(),t._bgRows=[],t._pendingSelection=[],t}return c(r,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||gw((function(){e=!1,t.setState({needLimitMeasure:!0})}))},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var t=this.props,n=t.date,r=t.localizer,i=t.className,o=r.visibleDays(n,r),a=XS(o,7);return this._weekCount=a.length,e.createElement("div",{className:(0,wE.Z)("rbc-month-view",i),role:"table","aria-label":"Month View",ref:this.containerRef},e.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(t){var n=this.props,r=n.localizer,i=n.components,o=t[0],a=t[t.length-1],s=i.header||aA;return r.range(o,a,"day").map((function(t,n){return e.createElement("div",{key:"header_"+n,className:"rbc-header"},e.createElement(s,{date:t,localizer:r,label:r.format(t,"weekdayFormat")}))}))}},{key:"renderOverlay",value:function(){var t,n,r=this,i=null!==(t=null===(n=this.state)||void 0===n?void 0:n.overlay)&&void 0!==t?t:{},o=this.props,a=o.accessors,s=o.localizer,c=o.components,u=o.getters,l=o.selected,d=o.popupOffset,f=o.handleDragStart;return e.createElement(PO,{overlay:i,accessors:a,localizer:s,components:c,getters:u,selected:l,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:f,show:!!i.position,overlayDisplay:this.overlayDisplay,onHide:function(){return r.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort((function(e,t){return+e-+t}));var n=new Date(t[0]),r=new Date(t[t.length-1]);r.setDate(t[t.length-1].getDate()+1),tO(this.props.onSelectSlot,{slots:t,start:n,end:r,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.date;return{date:n,needLimitMeasure:e.localizer.neq(n,t.date,"month")}}}]),r}(e.Component);uA.range=function(e,t){var n=t.localizer;return{start:n.firstVisibleDay(e,n),end:n.lastVisibleDay(e,n)}},uA.navigate=function(e,t,n){var r=n.localizer;switch(t){case QI.PREVIOUS:return r.add(e,-1,"month");case QI.NEXT:return r.add(e,1,"month");default:return e}},uA.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var lA=function(e){var t=e.min,n=e.max,r=e.step,i=e.slots,o=e.localizer;return"".concat(+o.startOf(t,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(r,"-").concat(i)};function dA(e){for(var t=e.min,n=e.max,r=e.step,i=e.timeslots,o=e.localizer,a=lA({start:t,end:n,step:r,timeslots:i,localizer:o}),s=1+o.getTotalMin(t,n),c=o.getMinutesFromMidnight(t),u=Math.ceil((s-1)/(r*i)),l=u*i,d=new Array(u),f=new Array(l),p=0;p<u;p++){d[p]=new Array(i);for(var h=0;h<i;h++){var v=p*i+h,m=v*r;f[v]=d[p][h]=o.getSlotDate(t,c,m)}}var y=f.length*r;function g(e){var n=o.diff(t,e,"minutes")+o.getDstOffset(t,e);return Math.min(n,s)}return f.push(o.getSlotDate(t,c,y)),{groups:d,update:function(e){return lA(e)!==a?dA(e):this},dateIsInGroup:function(e,t){var r=d[t+1];return o.inRange(e,d[t][0],r?r[0]:n,"minutes")},nextSlot:function(e){var t=f[Math.min(f.indexOf(e)+1,f.length-1)];return t===e&&(t=o.add(e,r,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(f.length-1,Math.max(0,Math.floor(e*l)));return f[t]},closestSlotFromPoint:function(e,t){var n=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/n)},closestSlotFromDate:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o.lt(e,t,"minutes"))return f[0];if(o.gt(e,n,"minutes"))return f[f.length-1];var a=o.diff(t,e,"minutes");return f[(a-a%r)/r+i]},startsBeforeDay:function(e){return o.lt(e,t,"day")},startsAfterDay:function(e){return o.gt(e,n,"day")},startsBefore:function(e){return o.lt(o.merge(t,e),t,"minutes")},startsAfter:function(e){return o.gt(o.merge(n,e),n,"minutes")},getRange:function(e,i,a,s){a||(e=o.min(n,o.max(t,e))),s||(i=o.min(n,o.max(t,i)));var c=g(e),u=g(i),d=u>r*l&&!o.eq(n,i)?(c-r)/(r*l)*100:c/(r*l)*100;return{top:d,height:u/(r*l)*100-d,start:g(e),startDate:e,end:g(i),endDate:i}},getCurrentTimePosition:function(e){return g(e)/(r*l)*100}}}var fA=function(){function e(t,n){var r=n.accessors,i=n.slotMetrics;o(this,e);var a=i.getRange(r.start(t),r.end(t)),s=a.start,c=a.startDate,u=a.end,l=a.endDate,d=a.top,f=a.height;this.start=s,this.end=u,this.startMs=+c,this.endMs=+l,this.top=d,this.height=f,this.data=t}return c(e,[{key:"_width",get:function(){if(this.rows){var e=this.rows.reduce((function(e,t){return Math.max(e,t.leaves.length+1)}),0)+1;return 100/e}return this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var n=this.row.leaves;return n.indexOf(this)===n.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,n=e.xOffset,r=e._width;return n+(t.indexOf(this)+1)*r}}]),e}();function pA(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function hA(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,i=e.accessors,o=function(e){for(var t=UC(e,["startMs",function(e){return-e.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var i=0;i<t.length;i++){var o=t[i];if(!(r.endMs>o.startMs)){if(i>0){var a=t.splice(i,1)[0];n.push(a)}break}}}return n}(t.map((function(e){return new fA(e,{slotMetrics:r,accessors:i})}))),a=[],s=function(){var e=o[c],t=a.find((function(t){return t.end>e.start||Math.abs(e.start-t.start)<n}));if(!t)return e.rows=[],a.push(e),"continue";e.container=t;for(var r=null,i=t.rows.length-1;!r&&i>=0;i--)pA(t.rows[i],e,n)&&(r=t.rows[i]);r?(r.leaves.push(e),e.row=r):(e.leaves=[],t.rows.push(e))},c=0;c<o.length;c++)s();return o.map((function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}}))}function vA(e,t,n){for(var r=0;r<e.friends.length;++r)if(!(n.indexOf(e.friends[r])>-1)){t=t>e.friends[r].idx?t:e.friends[r].idx,n.push(e.friends[r]);var i=vA(e.friends[r],t,n);t=t>i?t:i}return t}var mA={overlap:hA,"no-overlap":function(e){var t=hA({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort((function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.top+e.height<t.top+t.height?1:-1}));for(var n=0;n<t.length;++n)t[n].friends=[],delete t[n].style.left,delete t[n].style.left,delete t[n].idx,delete t[n].size;for(var r=0;r<t.length-1;++r)for(var i=t[r],o=i.style.top,a=i.style.top+i.style.height,s=r+1;s<t.length;++s){var c=t[s],u=c.style.top,l=c.style.top+c.style.height;(u>=o&&l<=a||l>o&&l<=a||u>=o&&u<a)&&(i.friends.push(c),c.friends.push(i))}for(var d=0;d<t.length;++d){for(var f=t[d],p=[],h=0;h<100;++h)p.push(1);for(var v=0;v<f.friends.length;++v)void 0!==f.friends[v].idx&&(p[f.friends[v].idx]=0);f.idx=p.indexOf(1)}for(var m=0;m<t.length;++m){var y;if(!t[m].size){var g=[];y=100/(vA(t[m],0,g)+1),t[m].size=y;for(var E=0;E<g.length;++E)g[E].size=y}}for(var _=0;_<t.length;++_){var b=t[_];b.style.left=b.idx*b.size;for(var S=0,w=0;w<b.friends.length;++w){var k=b.friends[w].idx;S=S>k?S:k}S<=b.idx&&(b.size=100-b.idx*b.size);var T=0===b.idx?0:3;b.style.width="calc(".concat(b.size,"% - ").concat(T,"px)"),b.style.height="calc(".concat(b.style.height,"% - 2px)"),b.style.xOffset="calc(".concat(b.style.left,"% + ").concat(T,"px)")}return t}};var yA=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this.props,n=t.renderSlot,r=t.resource,i=t.group,o=t.getters,a=t.components,s=(void 0===a?{}:a).timeSlotWrapper,c=void 0===s?JI:s,u=o?o.slotGroupProp(i):{};return e.createElement("div",Object.assign({className:"rbc-timeslot-group"},u),i.map((function(t,i){var a=o?o.slotProp(t,r):{};return e.createElement(c,{key:i,value:t,resource:r},e.createElement("div",Object.assign({},a,{className:(0,wE.Z)("rbc-time-slot",a.className)}),n&&n(t,i)))})))}}]),r}(e.Component);function gA(e){return"string"===typeof e?e:e+"%"}function EA(t){var n=t.style,r=t.className,i=t.event,o=t.accessors,a=t.rtl,s=t.selected,c=t.label,u=t.continuesPrior,l=t.continuesAfter,d=t.getters,f=t.onClick,p=t.onDoubleClick,h=t.isBackgroundEvent,v=t.onKeyPress,m=t.components,y=m.event,g=m.eventWrapper,E=o.title(i),_=o.tooltip(i),b=o.end(i),S=o.start(i),w=d.eventProp(i,S,b,s),k=n.height,T=n.top,R=n.width,C=n.xOffset,I=[e.createElement("div",{key:"1",className:"rbc-event-label"},c),e.createElement("div",{key:"2",className:"rbc-event-content"},y?e.createElement(y,{event:i,title:E}):E)],O=jt(jt({},w.style),{},h?(0,et.Z)({top:gA(T),height:gA(k),width:"calc(".concat(R," + 10px)")},a?"right":"left",gA(Math.max(0,C))):(0,et.Z)({top:gA(T),width:gA(R),height:gA(k)},a?"right":"left",gA(C)));return e.createElement(g,Object.assign({type:"time"},t),e.createElement("div",{onClick:f,onDoubleClick:p,style:O,onKeyPress:v,title:_?("string"===typeof c?c+": ":"")+_:void 0,className:(0,wE.Z)(h?"rbc-background-event":"rbc-event",r,w.className,{"rbc-selected":s,"rbc-event-continues-earlier":u,"rbc-event-continues-later":l})},I))}var _A=function(t){var n=t.children,r=t.className,i=t.style,o=t.innerRef;return e.createElement("div",{className:r,style:i,ref:o},n)},bA=e.forwardRef((function(t,n){return e.createElement(_A,Object.assign({},t,{innerRef:n}))})),SA=["dayProp"],wA=["eventContainerWrapper"],kA=function(t){l(r,t);var n=v(r);function r(){var t;o(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(t=n.call.apply(n,[this].concat(a))).state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(n){var r=n.events,i=n.isBackgroundEvent,o=t.props,a=o.rtl,s=o.selected,c=o.accessors,u=o.localizer,l=o.getters,d=o.components,f=o.step,p=o.timeslots,v=o.dayLayoutAlgorithm,m=o.resizable,y=h(t).slotMetrics,g=u.messages,E=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,n=t;return t in mA&&(n=mA[t]),function(e){return!!(e&&e.constructor&&e.call&&e.apply)}(n)?n.apply(this,arguments):[]}({events:r,accessors:c,slotMetrics:y,minimumStartDifference:Math.ceil(f*p/2),dayLayoutAlgorithm:v});return E.map((function(n,r){var o,f=n.event,p=n.style,h=c.end(f),v=c.start(f),E="eventTimeRangeFormat",_=y.startsBeforeDay(v),b=y.startsAfterDay(h);_?E="eventTimeRangeEndFormat":b&&(E="eventTimeRangeStartFormat"),o=_&&b?g.allDay:u.format({start:v,end:h},E);var S=_||y.startsBefore(v),w=b||y.startsAfter(h);return e.createElement(EA,{style:p,event:f,label:o,key:"evt_"+r,getters:l,rtl:a,components:d,continuesPrior:S,continuesAfter:w,accessors:c,selected:IO(f,s),onClick:function(e){return t._select(f,e)},onDoubleClick:function(e){return t._doubleClick(f,e)},isBackgroundEvent:i,onKeyPress:function(e){return t._keyPress(f,e)},resizable:m})}))},t._selectable=function(){var e=t.containerRef.current,n=t.props,r=n.longPressThreshold,i=n.localizer,o=t._selector=new VO((function(){return e}),{longPressThreshold:r}),a=function(e){var n=t.props.onSelecting,r=t.state||{},o=s(e),a=o.startDate,c=o.endDate;n&&(i.eq(r.startDate,a,"minutes")&&i.eq(r.endDate,c,"minutes")||!1===n({start:a,end:c,resourceId:t.props.resource}))||t.state.start===o.start&&t.state.end===o.end&&t.state.selecting===o.selecting||t.setState(o)},s=function(n){var r=t.slotMetrics.closestSlotFromPoint(n,BO(e));t.state.selecting||(t._initialSlot=r);var o=t._initialSlot;i.lte(o,r)?r=t.slotMetrics.nextSlot(r):i.gt(o,r)&&(o=t.slotMetrics.nextSlot(o));var a=t.slotMetrics.getRange(i.min(o,r),i.max(o,r));return jt(jt({},a),{},{selecting:!0,top:"".concat(a.top,"%"),height:"".concat(a.height,"%")})},c=function(e,n){if(!UO(t.containerRef.current,e)){var r=s(e),i=r.startDate,o=r.endDate;t._selectSlot({startDate:i,endDate:o,action:n,box:e})}t.setState({selecting:!1})};o.on("selecting",a),o.on("selectStart",a),o.on("beforeSelect",(function(e){if("ignoreEvents"===t.props.selectable)return!UO(t.containerRef.current,e)})),o.on("click",(function(e){return c(e,"click")})),o.on("doubleClick",(function(e){return c(e,"doubleClick")})),o.on("select",(function(e){t.state.selecting&&(t._selectSlot(jt(jt({},t.state),{},{action:"select",bounds:e})),t.setState({selecting:!1}))})),o.on("reset",(function(){t.state.selecting&&t.setState({selecting:!1})}))},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(e){for(var n=e.startDate,r=e.endDate,i=e.action,o=e.bounds,a=e.box,s=n,c=[];t.props.localizer.lte(s,r);)c.push(s),s=new Date(+s+60*t.props.step*1e3);tO(t.props.onSelectSlot,{slots:c,start:n,end:r,resourceId:t.props.resource,action:i,bounds:o,box:a})},t._select=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onSelectEvent,n)},t._doubleClick=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onDoubleClickEvent,n)},t._keyPress=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];tO(t.props.onKeyPressEvent,n)},t.slotMetrics=dA(t.props),t.containerRef=(0,e.createRef)(),t}return c(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.selectable&&!this.props.selectable&&this._selectable(),!e.selectable&&this.props.selectable&&this._teardownSelectable(),this.slotMetrics=this.slotMetrics.update(e)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.getNow,i=n.isNow,o=n.localizer,a=n.date,s=n.min,c=n.max,u=o.neq(e.getNow(),r(),"minutes");if(e.isNow!==i||u){if(this.clearTimeIndicatorInterval(),i){var l=!u&&o.eq(e.date,a,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(l)}}else i&&(o.neq(e.min,s,"minutes")||o.neq(e.max,c,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout((function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()}),6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,n=e.max,r=(0,e.getNow)();if(r>=t&&r<=n){var i=this.slotMetrics.getCurrentTimePosition(r);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:i})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var t=this.props,n=t.date,r=t.max,i=t.rtl,o=t.isNow,a=t.resource,s=t.accessors,c=t.localizer,u=t.getters,l=u.dayProp,d=Eb(u,SA),f=t.components,p=f.eventContainerWrapper,h=Eb(f,wA),v=this.slotMetrics,m=this.state,y=m.selecting,g=m.top,E=m.height,_={start:m.startDate,end:m.endDate},b=l(r),S=b.className,w=b.style,k=h.dayColumnWrapper||bA;return e.createElement(k,{ref:this.containerRef,date:n,style:w,className:(0,wE.Z)(S,"rbc-day-slot","rbc-time-column",o&&"rbc-now",o&&"rbc-today",y&&"rbc-slot-selecting"),slotMetrics:v},v.groups.map((function(t,n){return e.createElement(yA,{key:n,group:t,resource:a,getters:d,components:h})})),e.createElement(p,{localizer:c,resource:a,accessors:s,getters:d,components:h,slotMetrics:v},e.createElement("div",{className:(0,wE.Z)("rbc-events-container",i&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),y&&e.createElement("div",{className:"rbc-slot-selection",style:{top:g,height:E}},e.createElement("span",null,c.format(_,"selectRangeFormat"))),o&&this.intervalTriggered&&e.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}]),r}(e.Component);kA.defaultProps={dragThroughEvents:!0,timeslots:2};var TA=function(t){var n=t.min,r=t.max,i=t.timeslots,o=t.step,a=t.localizer,s=t.getNow,c=t.resource,u=t.components,l=t.getters,d=t.gutterRef,f=u.timeGutterWrapper,p=(0,e.useMemo)((function(){return function(e){var t=e.min,n=e.max,r=e.localizer;return r.getTimezoneOffset(t)!==r.getTimezoneOffset(n)?{start:r.add(t,-1,"day"),end:r.add(n,-1,"day")}:{start:t,end:n}}({min:n,max:r,localizer:a})}),[null===n||void 0===n?void 0:n.toISOString(),null===r||void 0===r?void 0:r.toISOString(),a]),h=p.start,v=p.end,y=(0,e.useState)(dA({min:h,max:v,timeslots:i,step:o,localizer:a})),g=(0,m.Z)(y,2),E=g[0],_=g[1];(0,e.useEffect)((function(){E&&_(E.update({min:h,max:v,timeslots:i,step:o,localizer:a}))}),[null===h||void 0===h?void 0:h.toISOString(),null===v||void 0===v?void 0:v.toISOString(),i,o]);var b=(0,e.useCallback)((function(t,n){if(n)return null;var r=E.dateIsInGroup(s(),n);return e.createElement("span",{className:(0,wE.Z)("rbc-label",r&&"rbc-now")},a.format(t,"timeGutterFormat"))}),[E,a,s]);return e.createElement(f,{slotMetrics:E},e.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},E.groups.map((function(t,n){return e.createElement(yA,{key:n,group:t,resource:c,components:u,renderSlot:b,getters:l})}))))},RA=e.forwardRef((function(t,n){return e.createElement(TA,Object.assign({gutterRef:n},t))})),CA=function(t){var n=t.label;return e.createElement(e.Fragment,null,n)},IA=function(t){l(r,t);var n=v(r);function r(){var t;o(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(t=n.call.apply(n,[this].concat(a))).handleHeaderClick=function(e,n,r){r.preventDefault(),tO(t.props.onDrillDown,[e,n])},t.renderRow=function(n){var r=t.props,i=r.events,o=r.rtl,a=r.selectable,s=r.getNow,c=r.range,u=r.getters,l=r.localizer,d=r.accessors,f=r.components,p=r.resizable,h=d.resourceId(n),v=n?i.filter((function(e){return d.resource(e)===h})):i;return e.createElement(oA,{isAllDay:!0,rtl:o,getNow:s,minRows:2,range:c,events:v,resourceId:h,className:"rbc-allday-cell",selectable:a,selected:t.props.selected,components:f,accessors:d,getters:u,localizer:l,onSelect:t.props.onSelectEvent,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:p})},t}return c(r,[{key:"renderHeaderCells",value:function(t){var n=this,r=this.props,i=r.localizer,o=r.getDrilldownView,a=r.getNow,s=r.getters.dayProp,c=r.components.header,u=void 0===c?aA:c,l=a();return t.map((function(t,r){var a=o(t),c=i.format(t,"dayFormat"),d=s(t),f=d.className,p=d.style,h=e.createElement(u,{date:t,label:c,localizer:i});return e.createElement("div",{key:r,style:p,className:(0,wE.Z)("rbc-header",f,i.isSameDate(t,l)&&"rbc-today")},a?e.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return n.handleHeaderClick(t,a,e)}},h):e.createElement("span",null,h))}))}},{key:"render",value:function(){var t=this,n=this.props,r=n.width,i=n.rtl,o=n.resources,a=n.range,s=n.events,c=n.getNow,u=n.accessors,l=n.selectable,d=n.components,f=n.getters,p=n.scrollRef,h=n.localizer,v=n.isOverflowing,y=n.components,g=y.timeGutterHeader,E=y.resourceHeader,_=void 0===E?CA:E,b=n.resizable,S={};v&&(S[i?"marginLeft":"marginRight"]="".concat(VC()-1,"px"));var w=o.groupEvents(s);return e.createElement("div",{style:S,ref:p,className:(0,wE.Z)("rbc-time-header",v&&"rbc-overflowing")},e.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:r,minWidth:r,maxWidth:r}},g&&e.createElement(g,null)),o.map((function(n,r){var o=(0,m.Z)(n,2),s=o[0],p=o[1];return e.createElement("div",{className:"rbc-time-header-content",key:s||r},p&&e.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(r)},e.createElement("div",{className:"rbc-header"},e.createElement(_,{index:r,label:u.resourceTitle(p),resource:p}))),e.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},t.renderHeaderCells(a)),e.createElement(oA,{isAllDay:!0,rtl:i,getNow:c,minRows:2,range:a,events:w.get(s)||[],resourceId:p&&s,className:"rbc-allday-cell",selectable:l,selected:t.props.selected,components:d,accessors:u,getters:f,localizer:h,onSelect:t.props.onSelectEvent,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:b}))})))}}]),r}(e.Component),OA={};var AA=function(t){l(r,t);var n=v(r);function r(t){var i;return o(this,r),(i=n.call(this,t)).handleScroll=function(e){i.scrollRef.current&&(i.scrollRef.current.scrollLeft=e.target.scrollLeft)},i.handleResize=function(){yw(i.rafHandle),i.rafHandle=gw(i.checkOverflow)},i.handleSelectAlldayEvent=function(){i.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];tO(i.props.onSelectEvent,t)},i.handleSelectAllDaySlot=function(e,t){var n=i.props.onSelectSlot,r=new Date(e[0]),o=new Date(e[e.length-1]);o.setDate(e[e.length-1].getDate()+1),tO(n,{slots:e,start:r,end:o,action:t.action,resourceId:t.resourceId})},i.checkOverflow=function(){if(!i._updatingOverflow){var e=i.contentRef.current,t=e.scrollHeight>e.clientHeight;i.state.isOverflowing!==t&&(i._updatingOverflow=!0,i.setState({isOverflowing:t},(function(){i._updatingOverflow=!1})))}},i.memoizedResources=hC((function(e,t){return function(e,t){return{map:function(n){return e?e.map((function(e,r){return n([t.resourceId(e),e],r)})):[n([OA,null],0)]},groupEvents:function(n){var r=new Map;return e?(n.forEach((function(e){var n=t.resource(e)||OA,i=r.get(n)||[];i.push(e),r.set(n,i)})),r):(r.set(OA,n),r)}}}(e,t)})),i.state={gutterWidth:void 0,isOverflowing:null},i.scrollRef=e.createRef(),i.contentRef=e.createRef(),i._scrollRatio=null,i.gutterRef=(0,e.createRef)(),i}return c(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),yw(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderEvents",value:function(t,n,r,i){var o=this,a=this.props,s=a.min,c=a.max,u=a.components,l=a.accessors,d=a.localizer,f=a.dayLayoutAlgorithm,p=this.memoizedResources(this.props.resources,l),h=p.groupEvents(n),v=p.groupEvents(r);return p.map((function(n,r){var a=(0,m.Z)(n,2),p=a[0],y=a[1];return t.map((function(t,n){var a=(h.get(p)||[]).filter((function(e){return d.inRange(t,l.start(e),l.end(e),"day")})),m=(v.get(p)||[]).filter((function(e){return d.inRange(t,l.start(e),l.end(e),"day")}));return e.createElement(kA,Object.assign({},o.props,{localizer:d,min:d.merge(t,s),max:d.merge(t,c),resource:y&&p,components:u,isNow:d.isSameDate(t,i),key:r+"-"+n,date:t,events:a,backgroundEvents:m,dayLayoutAlgorithm:f}))}))}))}},{key:"render",value:function(){var t=this.props,n=t.events,r=t.backgroundEvents,i=t.range,o=t.width,a=t.rtl,s=t.selected,c=t.getNow,u=t.resources,l=t.components,d=t.accessors,f=t.getters,p=t.localizer,h=t.min,v=t.max,m=t.showMultiDayTimes,y=t.longPressThreshold,g=t.resizable;o=o||this.state.gutterWidth;var E=i[0],_=i[i.length-1];this.slots=i.length;var b=[],S=[],w=[];return n.forEach((function(e){if(XO(e,E,_,d,p)){var t=d.start(e),n=d.end(e);d.allDay(e)||p.startAndEndAreDateOnly(t,n)||!m&&!p.isSameDate(t,n)?b.push(e):S.push(e)}})),r.forEach((function(e){XO(e,E,_,d,p)&&w.push(e)})),b.sort((function(e,t){return QO(e,t,d,p)})),e.createElement("div",{className:(0,wE.Z)("rbc-time-view",u&&"rbc-time-view-resources")},e.createElement(IA,{range:i,events:b,width:o,rtl:a,getNow:c,localizer:p,selected:s,resources:this.memoizedResources(u,d),selectable:this.props.selectable,accessors:d,getters:f,components:l,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:y,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectAlldayEvent,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:g}),e.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},e.createElement(RA,{date:E,ref:this.gutterRef,localizer:p,min:p.merge(E,h),max:p.merge(E,v),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:l,className:"rbc-time-gutter",getters:f}),this.renderEvents(i,S,w,c())))}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame((function(){var t,n=null!==(t=e.gutterRef)&&void 0!==t&&t.current?jC(e.gutterRef.current):void 0;n&&e.state.gutterWidth!==n&&e.setState({gutterWidth:n})}))}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,n=e.max,r=e.scrollToTime,i=e.localizer,o=r-i.startOf(r,"day"),a=i.diff(t,n,"milliseconds");this._scrollRatio=o/a}}]),r}(e.Component);AA.defaultProps={step:30,timeslots:2};var NA=["date","localizer","min","max","scrollToTime","enableAutoScroll"],DA=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this.props,n=t.date,i=t.localizer,o=t.min,a=void 0===o?i.startOf(new Date,"day"):o,s=t.max,c=void 0===s?i.endOf(new Date,"day"):s,u=t.scrollToTime,l=void 0===u?i.startOf(new Date,"day"):u,d=t.enableAutoScroll,f=void 0===d||d,p=Eb(t,NA),h=r.range(n,{localizer:i});return e.createElement(AA,Object.assign({},p,{range:h,eventOffset:10,localizer:i,min:a,max:c,scrollToTime:l,enableAutoScroll:f}))}}]),r}(e.Component);DA.range=function(e,t){return[t.localizer.startOf(e,"day")]},DA.navigate=function(e,t,n){var r=n.localizer;switch(t){case QI.PREVIOUS:return r.add(e,-1,"day");case QI.NEXT:return r.add(e,1,"day");default:return e}},DA.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var xA=["date","localizer","min","max","scrollToTime","enableAutoScroll"],PA=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this.props,n=t.date,i=t.localizer,o=t.min,a=void 0===o?i.startOf(new Date,"day"):o,s=t.max,c=void 0===s?i.endOf(new Date,"day"):s,u=t.scrollToTime,l=void 0===u?i.startOf(new Date,"day"):u,d=t.enableAutoScroll,f=void 0===d||d,p=Eb(t,xA),h=r.range(n,this.props);return e.createElement(AA,Object.assign({},p,{range:h,eventOffset:15,localizer:i,min:a,max:c,scrollToTime:l,enableAutoScroll:f}))}}]),r}(e.Component);PA.defaultProps=AA.defaultProps,PA.navigate=function(e,t,n){var r=n.localizer;switch(t){case QI.PREVIOUS:return r.add(e,-1,"week");case QI.NEXT:return r.add(e,1,"week");default:return e}},PA.range=function(e,t){var n=t.localizer,r=n.startOfWeek(),i=n.startOf(e,"week",r),o=n.endOf(e,"week",r);return n.range(i,o)},PA.title=function(e,t){var n=t.localizer,r=k(PA.range(e,{localizer:n})),i=r[0],o=r.slice(1);return n.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var LA=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function MA(e,t){return PA.range(e,t).filter((function(e){return-1===[6,0].indexOf(e.getDay())}))}var UA,jA=function(t){l(r,t);var n=v(r);function r(){return o(this,r),n.apply(this,arguments)}return c(r,[{key:"render",value:function(){var t=this.props,n=t.date,r=t.localizer,i=t.min,o=void 0===i?r.startOf(new Date,"day"):i,a=t.max,s=void 0===a?r.endOf(new Date,"day"):a,c=t.scrollToTime,u=void 0===c?r.startOf(new Date,"day"):c,l=t.enableAutoScroll,d=void 0===l||l,f=Eb(t,LA),p=MA(n,this.props);return e.createElement(AA,Object.assign({},f,{range:p,eventOffset:15,localizer:r,min:o,max:s,scrollToTime:u,enableAutoScroll:d}))}}]),r}(e.Component);function VA(t){var n=t.accessors,r=t.components,i=t.date,o=t.events,a=t.getters,s=t.length,c=t.localizer,u=t.onDoubleClickEvent,l=t.onSelectEvent,d=t.selected,f=(0,e.useRef)(null),p=(0,e.useRef)(null),h=(0,e.useRef)(null),v=(0,e.useRef)(null),m=(0,e.useRef)(null);(0,e.useEffect)((function(){g()}));var y=function(t,i){var o="",a=r.time,s=c.messages.allDay,u=n.end(i),l=n.start(i);return n.allDay(i)||(c.eq(l,u)?s=c.format(l,"agendaTimeFormat"):c.isSameDate(l,u)?s=c.format({start:l,end:u},"agendaTimeRangeFormat"):c.isSameDate(t,l)?s=c.format(l,"agendaTimeFormat"):c.isSameDate(t,u)&&(s=c.format(u,"agendaTimeFormat"))),c.gt(t,l,"day")&&(o="rbc-continues-prior"),c.lt(t,u,"day")&&(o+=" rbc-continues-after"),e.createElement("span",{className:o.trim()},a?e.createElement(a,{event:i,day:t,label:s}):s)},g=function(){if(m.current){var e=f.current,t=m.current.firstChild;if(t){var n,r,i=v.current.scrollHeight>v.current.clientHeight,o=[],a=o;o=[jC(t.children[0]),jC(t.children[1])],a[0]===o[0]&&a[1]===o[1]||(p.current.style.width=o[0]+"px",h.current.style.width=o[1]+"px"),i?(r="rbc-header-overflowing",(n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),e.style.marginRight=VC()+"px"):function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=FC(e.className,t):e.setAttribute("class",FC(e.className&&e.className.baseVal||"",t))}(e,"rbc-header-overflowing")}}},E=c.messages,_=c.add(i,s,"day"),b=c.range(i,_,"day");return(o=o.filter((function(e){return XO(e,c.startOf(i,"day"),c.endOf(_,"day"),n,c)}))).sort((function(e,t){return+n.start(e)-+n.start(t)})),e.createElement("div",{className:"rbc-agenda-view"},0!==o.length?e.createElement(e.Fragment,null,e.createElement("table",{ref:f,className:"rbc-agenda-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{className:"rbc-header",ref:p},E.date),e.createElement("th",{className:"rbc-header",ref:h},E.time),e.createElement("th",{className:"rbc-header"},E.event)))),e.createElement("div",{className:"rbc-agenda-content",ref:v},e.createElement("table",{className:"rbc-agenda-table"},e.createElement("tbody",{ref:m},b.map((function(t,i){return function(t,i,o){var s=r.event,f=r.date;return(i=i.filter((function(e){return XO(e,c.startOf(t,"day"),c.endOf(t,"day"),n,c)}))).map((function(r,p){var h=n.title(r),v=n.end(r),m=n.start(r),g=a.eventProp(r,m,v,IO(r,d)),E=0===p&&c.format(t,"agendaDateFormat"),_=0===p&&e.createElement("td",{rowSpan:i.length,className:"rbc-agenda-date-cell"},f?e.createElement(f,{day:t,label:E}):E);return e.createElement("tr",{key:o+"_"+p,className:g.className,style:g.style},_,e.createElement("td",{className:"rbc-agenda-time-cell"},y(t,r)),e.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return l&&l(r,e)},onDoubleClick:function(e){return u&&u(r,e)}},s?e.createElement(s,{event:r,title:h}):h))}),[])}(t,o,i)})))))):e.createElement("span",{className:"rbc-agenda-empty"},E.noEventsInRange))}jA.defaultProps=AA.defaultProps,jA.range=MA,jA.navigate=PA.navigate,jA.title=function(e,t){var n=t.localizer,r=k(MA(e,{localizer:n})),i=r[0],o=r.slice(1);return n.format({start:i,end:o.pop()},"dayRangeHeaderFormat")},VA.defaultProps={length:30},VA.range=function(e,t){var n=t.length,r=void 0===n?VA.defaultProps.length:n;return{start:e,end:t.localizer.add(e,r,"day")}},VA.navigate=function(e,t,n){var r=n.length,i=void 0===r?VA.defaultProps.length:r,o=n.localizer;switch(t){case QI.PREVIOUS:return o.add(e,-i,"day");case QI.NEXT:return o.add(e,i,"day");default:return e}},VA.title=function(e,t){var n=t.length,r=void 0===n?VA.defaultProps.length:n,i=t.localizer,o=i.add(e,r,"day");return i.format({start:e,end:o},"agendaHeaderFormat")};var FA=(UA={},(0,et.Z)(UA,$I.MONTH,uA),(0,et.Z)(UA,$I.WEEK,PA),(0,et.Z)(UA,$I.WORK_WEEK,jA),(0,et.Z)(UA,$I.DAY,DA),(0,et.Z)(UA,$I.AGENDA,VA),UA),BA=["action","date","today"];var WA=function(t){l(r,t);var n=v(r);function r(){var e;o(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).navigate=function(t){e.props.onNavigate(t)},e.view=function(t){e.props.onView(t)},e}return c(r,[{key:"render",value:function(){var t=this.props,n=t.localizer.messages,r=t.label;return e.createElement("div",{className:"rbc-toolbar"},e.createElement("span",{className:"rbc-btn-group"},e.createElement("button",{type:"button",onClick:this.navigate.bind(null,QI.TODAY)},n.today),e.createElement("button",{type:"button",onClick:this.navigate.bind(null,QI.PREVIOUS)},n.previous),e.createElement("button",{type:"button",onClick:this.navigate.bind(null,QI.NEXT)},n.next)),e.createElement("span",{className:"rbc-toolbar-label"},r),e.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(n)))}},{key:"viewNamesGroup",value:function(t){var n=this,r=this.props.views,i=this.props.view;if(r.length>1)return r.map((function(r){return e.createElement("button",{type:"button",key:r,className:(0,wE.Z)({"rbc-active":i===r}),onClick:n.view.bind(null,r)},t[r])}))}}]),r}(e.Component);var GA=function(e){return function(t){return function(e,t){var n=null;return"function"===typeof t?n=t(e):"string"===typeof t&&"object"===(0,p.Z)(e)&&null!=e&&t in e&&(n=e[t]),n}(t,e)}},HA=["view","date","getNow","onNavigate"],KA=["view","toolbar","events","backgroundEvents","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function zA(e){if(Array.isArray(e))return e;for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=(0,m.Z)(r[n],2),o=i[0];i[1]&&t.push(o)}return t}var YA=function(t){l(r,t);var n=v(r);function r(){var e;o(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).getViews=function(){var t=e.props.views;return Array.isArray(t)?ZI(t,(function(e,t){return e[t]=FA[t]}),{}):"object"===(0,p.Z)(t)?XI(t,(function(e,t){return!0===e?FA[t]:e})):FA},e.getView=function(){return e.getViews()[e.props.view]},e.getDrilldownView=function(t){var n=e.props,r=n.view,i=n.drilldownView,o=n.getDrilldownView;return o?o(t,r,Object.keys(e.getViews())):i},e.handleRangeChange=function(t,n,r){var i=e.props,o=i.onRangeChange,a=i.localizer;o&&n.range&&o(n.range(t,{localizer:a}),r)},e.handleNavigate=function(t,n){var r=e.props,i=r.view,o=r.date,a=r.getNow,s=r.onNavigate,c=Eb(r,HA),u=e.getView(),l=a();o=function(e,t){var n=t.action,r=t.date,i=t.today,o=Eb(t,BA);switch(e="string"===typeof e?FA[e]:e,n){case QI.TODAY:r=i||new Date;break;case QI.DATE:break;default:bb()(e&&"function"===typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),r=e.navigate(r,n,o)}return r}(u,jt(jt({},c),{},{action:t,date:n||o||l,today:l})),s(o,i,t),e.handleRangeChange(o,u)},e.handleViewChange=function(t){t!==e.props.view&&function(e,t){return-1!==zA(t.views).indexOf(e)}(t,e.props)&&e.props.onView(t);var n=e.getViews();e.handleRangeChange(e.props.date||e.props.getNow(),n[t],t)},e.handleSelectEvent=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tO(e.props.onSelectEvent,n)},e.handleDoubleClickEvent=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tO(e.props.onDoubleClickEvent,n)},e.handleKeyPressEvent=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tO(e.props.onKeyPressEvent,n)},e.handleSelectSlot=function(t){tO(e.props.onSelectSlot,t)},e.handleDrillDown=function(t,n){var r=e.props.onDrillDown;r?r(t,n,e.drilldownView):(n&&e.handleViewChange(n),e.handleNavigate(QI.DATE,t))},e.state={context:r.getContext(e.props)},e}return c(r,[{key:"render",value:function(){var t=this.props,n=t.view,r=t.toolbar,i=t.events,o=t.backgroundEvents,a=t.style,s=t.className,c=t.elementProps,u=t.date,l=t.getNow,d=t.length,f=t.showMultiDayTimes,p=t.onShowMore,h=t.doShowMoreDrillDown;t.components,t.formats,t.messages,t.culture;var v=Eb(t,KA);u=u||l();var m=this.getView(),y=this.state.context,g=y.accessors,E=y.components,_=y.getters,b=y.localizer,S=y.viewNames,w=E.toolbar||WA,k=m.title(u,{localizer:b,length:d});return e.createElement("div",Object.assign({},c,{className:(0,wE.Z)(s,"rbc-calendar",v.rtl&&"rbc-rtl"),style:a}),r&&e.createElement(w,{date:u,view:n,views:S,label:k,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:b}),e.createElement(m,Object.assign({},v,{events:i,backgroundEvents:o,date:u,getNow:l,length:d,localizer:b,getters:_,components:E,accessors:g,showMultiDayTimes:f,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:p,doShowMoreDrillDown:h})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{context:r.getContext(e)}}},{key:"getContext",value:function(e){var t=e.startAccessor,n=e.endAccessor,r=e.allDayAccessor,i=e.tooltipAccessor,o=e.titleAccessor,a=e.resourceAccessor,s=e.resourceIdAccessor,c=e.resourceTitleAccessor,u=e.eventPropGetter,l=e.backgroundEventPropGetter,d=e.slotPropGetter,f=e.slotGroupPropGetter,p=e.dayPropGetter,h=e.view,v=e.views,m=e.localizer,y=e.culture,g=e.messages,E=void 0===g?{}:g,_=e.components,b=void 0===_?{}:_,S=e.formats,w=void 0===S?{}:S,k=zA(v);return{viewNames:k,localizer:kO(m,y,w,function(e){return jt(jt({},TO),e)}(E)),getters:{eventProp:function(){return u&&u.apply(void 0,arguments)||{}},backgroundEventProp:function(){return l&&l.apply(void 0,arguments)||{}},slotProp:function(){return d&&d.apply(void 0,arguments)||{}},slotGroupProp:function(){return f&&f.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:qI(b[h]||{},KI(b,k),{eventWrapper:JI,backgroundEventWrapper:JI,eventContainerWrapper:JI,dateCellWrapper:JI,weekWrapper:JI,timeSlotWrapper:JI,timeGutterWrapper:JI}),accessors:{start:GA(t),end:GA(n),allDay:GA(r),tooltip:GA(i),title:GA(o),resource:GA(a),resourceId:GA(s),resourceTitle:GA(c)}}}}]),r}(e.Component);YA.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:$I.MONTH,views:[$I.MONTH,$I.WEEK,$I.DAY,$I.AGENDA],step:30,length:30,doShowMoreDrillDown:!0,drilldownView:$I.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var qA=function t(n,r,i){void 0===i&&(i=[]);var o,a=n.displayName||n.name||"Component",s=!!(o=n)&&("function"!==typeof o||o.prototype&&o.prototype.isReactComponent),c=Object.keys(r),u=c.map(kb);!s&&i.length&&bb()(!1);var l=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];(e=t.call.apply(t,[this].concat(o))||this).handlers=Object.create(null),c.forEach((function(t){var n=r[t];e.handlers[n]=function(r){if(e.props[n]){var i;e._notifying=!0;for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(i=e.props)[n].apply(i,[r].concat(a)),e._notifying=!1}e.unmounted||e.setState((function(e){var n,i=e.values;return{values:(0,SE.Z)(Object.create(null),i,(n={},n[t]=r,n))}}))}})),i.length&&(e.attachRef=function(t){e.inner=t});var s=Object.create(null);return c.forEach((function(t){s[t]=e.props[kb(t)]})),e.state={values:s,prevProps:{}},e}xE(o,t);var a=o.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},o.getDerivedStateFromProps=function(e,t){var n=t.values,r=t.prevProps,i={values:(0,SE.Z)(Object.create(null),n),prevProps:{}};return c.forEach((function(t){i.prevProps[t]=e[t],!wb(e,t)&&wb(r,t)&&(i.values[t]=e[kb(t)])})),i},a.componentWillUnmount=function(){this.unmounted=!0},a.render=function(){var t=this,r=this.props,i=r.innerRef,o=(0,bE.Z)(r,["innerRef"]);u.forEach((function(e){delete o[e]}));var a={};return c.forEach((function(e){var n=t.props[e];a[e]=void 0!==n?n:t.state.values[e]})),e.createElement(n,(0,SE.Z)({},o,a,this.handlers,{ref:i||this.attachRef}))},o}(e.Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,i=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?i="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=e.displayName||e.name,a="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=Tb,t.componentWillReceiveProps=Rb),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Cb;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(l),l.displayName="Uncontrolled("+a+")",l.propTypes=(0,SE.Z)({innerRef:function(){}},function(e,t){var n={};return Object.keys(e).forEach((function(e){n[kb(e)]=Sb})),n}(r)),i.forEach((function(e){l.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}}));var d=l;return e.forwardRef&&((d=e.forwardRef((function(t,n){return e.createElement(l,(0,SE.Z)({},t,{innerRef:n,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))}))).propTypes=l.propTypes),d.ControlledComponent=n,d.deferControlTo=function(e,n,i){return void 0===n&&(n={}),t(e,(0,SE.Z)({},r,n),i)},d}(YA,{view:"onView",date:"onNavigate",selected:"onSelectEvent"});var ZA=function(e,t,n){var r=e.start,i=e.end;return"".concat(n.format(r,"p",t)," \u2013 ").concat(n.format(i,"p",t))},XA={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"cccc",selectRangeFormat:ZA,eventTimeRangeFormat:ZA,eventTimeRangeStartFormat:function(e,t,n){var r=e.start;return"".concat(n.format(r,"h:mma",t)," \u2013 ")},eventTimeRangeEndFormat:function(e,t,n){var r=e.end;return" \u2013 ".concat(n.format(r,"h:mma",t))},timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:function(e,t,n){var r=e.start,i=e.end;return"".concat(n.format(r,"MMMM dd",t)," \u2013 ").concat(n.format(i,Yb(r,i,"month")?"dd":"MMMM dd",t))},agendaHeaderFormat:function(e,t,n){var r=e.start,i=e.end;return"".concat(n.format(r,"P",t)," \u2013 ").concat(n.format(i,"P",t))},agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:ZA};var JA=n(1951),QA=n(3216),$A=n(3629),eN=n(467),tN=n(9513),nN=n.n(tN),rN={"en-US":n(6704)},iN=function(e){var t=e.startOfWeek,n=e.getDay,r=e.format,i=e.locales;return new wO({formats:XA,firstOfWeek:function(e){return n(t(new Date,{locale:i[e]}))},format:function(e,t,n){return r(new Date(e),t,{locale:i[n]})}})}({format:JA.default,parse:QA.default,startOfWeek:$A.default,getDay:eN.default,locales:rN});var oN=function(){var t=(0,e.useState)({title:"",start:null,end:null}),n=(0,m.Z)(t,2),r=n[0],i=n[1],o=(0,e.useState)([]),a=(0,m.Z)(o,2),s=a[0],c=a[1],u=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=kt(e),mg("collection","path",t),e instanceof Sg){var o=Id.fromString.apply(Id,[t].concat(r));return gg(o),new Rg(e,null,o)}if(!(e instanceof kg||e instanceof Rg))throw new dd(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Id.fromString.apply(Id,[t].concat(r)));return gg(a),new Rg(e.firestore,null,a)}(vE,"meetings");return(0,e.useEffect)((function(){var e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=kt(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Og(n[c])||(s=n[c],c++);var u,l,d,f={includeMetadataChanges:s.includeMetadataChanges};if(Og(n[c])){var p=n[c];n[c]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[c+1]=null===(o=p.error)||void 0===o?void 0:o.bind(p),n[c+2]=null===(a=p.complete)||void 0===a?void 0:a.bind(p)}if(e instanceof kg)l=_g(e.firestore,Ag),d=lp(e._key.path),u={next:function(t){n[c]&&n[c](fE(l,e,t))},error:n[c+1],complete:n[c+2]};else{var h=_g(e,Tg);l=_g(h.firestore,Ag),d=h._query;var v=new lE(l);u={next:function(e){n[c]&&n[c](new cE(l,v,h,e))},error:n[c+1],complete:n[c+2]},nE(e._query)}return function(e,t,n,r){var i=new tg(r),o=new vy(t,i,n);return e.asyncQueue.enqueueAndForget(Ge(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cy,t.next=3,pg(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(Ge(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ly,t.next=3,pg(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ng(l),d,f,u)}(u,(function(e){var t=e.docs.map((function(e){var t=e.data();return console.log(t.end.toDate()),{id:e.id,title:t.title,start:t.start.toDate(),end:t.end.toDate()}}));c(t)}));return e}),[]),(0,mE.jsx)("div",{children:(0,mE.jsxs)("div",{className:"Scheduler",children:[(0,mE.jsx)("h1",{style:{fontSize:"34px",textAlign:"center",color:"#001f3f"},children:"Calendar"}),(0,mE.jsx)(qA,{localizer:iN,events:s,startAccessor:"start",endAccessor:"end",style:{height:500,margin:"15px 30px"}}),(0,mE.jsxs)("div",{className:"calendarFields",children:[(0,mE.jsx)("input",{type:"text",placeholder:"Add Title",value:r.title,onChange:function(e){return i(jt(jt({},r),{},{title:e.target.value}))}}),(0,mE.jsx)(nN(),{popperPlacement:"auto",placeholderText:"Start Date",className:"startDate",selected:r.start,onChange:function(e){return i(jt(jt({},r),{},{start:e}))}}),(0,mE.jsx)(nN(),{popperPlacement:"auto",placeholderText:"End Date",selected:r.end,onChange:function(e){return i(jt(jt({},r),{},{end:e}))}}),(0,mE.jsx)("button",{className:"addEvent",onClick:function(){r.title&&r.start&&r.end?(function(e,t){var n=_g(e.firestore,Ag),r=Cg(e),i=iE(e.converter,t);return dE(n,[Gg(Wg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,th.exists(!1))]).then((function(){return r}))}(u,r).catch((function(e){console.error("Error adding document: ",e)})),i({title:"",start:null,end:null})):alert("Please fill in all the fields before adding a new event.")},children:"Add Event"}),(0,mE.jsx)("button",{className:"removeEvent",onClick:function(){var e=s.find((function(e){return e.title===r.title}));e?(function(e){return dE(_g(e.firestore,Ag),[new mh(e._key,th.none())])}(Cg(u,e.id)).catch((function(e){console.error("Error removing document: ",e)})),i({title:"",start:null,end:null})):alert("Please enter the title of an event to remove.")},children:"Remove Event"})]})]})})};var aN=function(){return(0,mE.jsxs)(gE,{children:[(0,mE.jsx)(_E,{}),(0,mE.jsxs)(je,{children:[(0,mE.jsx)(Me,{path:"/",element:(0,mE.jsx)(vb,{})}),(0,mE.jsx)(Me,{path:"/signin",element:(0,mE.jsx)(yb,{})}),(0,mE.jsx)(Me,{path:"/account",element:(0,mE.jsx)(gb,{children:(0,mE.jsx)(ub,{})})}),(0,mE.jsx)(Me,{path:"/calendar",element:(0,mE.jsx)(gb,{children:(0,mE.jsx)(oN,{})})})]})]})};r.createRoot(document.getElementById("root")).render((0,mE.jsx)(Ye,{children:(0,mE.jsx)(aN,{})}))}()}();
//# sourceMappingURL=main.79d79161.js.map